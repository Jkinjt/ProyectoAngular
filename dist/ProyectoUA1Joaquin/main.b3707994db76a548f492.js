(self.webpackChunkproyecto_ua1_joaquin=self.webpackChunkproyecto_ua1_joaquin||[]).push([[179],{8255:Je=>{function Ce(V){return Promise.resolve().then(()=>{var d=new Error("Cannot find module '"+V+"'");throw d.code="MODULE_NOT_FOUND",d})}Ce.keys=()=>[],Ce.resolve=Ce,Ce.id=8255,Je.exports=Ce},7716:(Je,Ce,V)=>{"use strict";V.d(Ce,{deG:()=>dp,tb:()=>WD,AFp:()=>HD,ip1:()=>dy,CZH:()=>Nf,hGG:()=>cA,z2F:()=>Xl,sBO:()=>Wl,Sil:()=>Ig,_Vd:()=>Bu,EJc:()=>KD,SBq:()=>eu,qLn:()=>Mh,vpe:()=>Ys,gxx:()=>Hh,tBr:()=>xu,XFs:()=>$e,OlP:()=>kn,zs3:()=>Zn,ZZ4:()=>mf,aQg:()=>bs,soG:()=>hy,YKP:()=>HT,v3s:()=>xP,h0i:()=>_d,PXZ:()=>It,R0b:()=>Qs,FiY:()=>ka,Lbi:()=>GD,g9A:()=>bg,Qsj:()=>HN,FYo:()=>U_,JOm:()=>$a,Tiy:()=>ff,q3G:()=>En,tp0:()=>kr,EAV:()=>Ow,Rgc:()=>ig,dDg:()=>XD,DyG:()=>Pa,q4F:()=>$u,GfV:()=>pf,s_b:()=>yd,ifc:()=>Fe,eFA:()=>my,G48:()=>wP,Gpc:()=>$,X6Q:()=>Pw,_c5:()=>Ty,VLi:()=>EP,c2e:()=>zD,zSh:()=>Vp,wAp:()=>ct,vHH:()=>Ne,EiD:()=>zt,mCW:()=>Tl,qzn:()=>Ua,JVY:()=>mm,pB0:()=>bl,eBb:()=>bp,L6k:()=>Cp,LAX:()=>Qo,cg1:()=>ld,Tjo:()=>Ri,kL8:()=>fT,yhl:()=>gm,dqk:()=>Yt,sIi:()=>Bp,CqO:()=>qp,QGY:()=>Hp,F4k:()=>C_,RDi:()=>ip,AaK:()=>te,z3N:()=>Yo,qOj:()=>oI,TTD:()=>hu,_Bn:()=>NT,xp6:()=>Ml,uIk:()=>yE,Tol:()=>ZI,ekj:()=>ci,Suo:()=>sy,Xpm:()=>tr,lG2:()=>bt,Yz7:()=>on,cJS:()=>mn,oAB:()=>Ue,Yjl:()=>Mn,Y36:()=>y_,_UZ:()=>oN,qZA:()=>TI,TgZ:()=>II,EpF:()=>w_,n5z:()=>dh,Ikx:()=>t0,LFG:()=>bn,$8M:()=>Oc,NdJ:()=>Vl,CRH:()=>Ew,oxw:()=>SI,Q6J:()=>PE,MGl:()=>T_,DdM:()=>pD,iGM:()=>vg,CHM:()=>_u,LSH:()=>Dh,kYT:()=>lt,YNc:()=>dI,_uU:()=>QI,Oqu:()=>BE,hij:()=>Ul});var d=V(9765),H=V(5319),O=V(7574),ce=V(6682),ue=V(8819);function Q(i){for(let s in i)if(i[s]===Q)return s;throw Error("Could not find renamed property on target object.")}function _e(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function te(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(te).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ne(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const U=Q({__forward_ref__:Q});function $(i){return i.__forward_ref__=$,i.toString=function(){return te(this())},i}function B(i){return se(i)?i():i}function se(i){return"function"==typeof i&&i.hasOwnProperty(U)&&i.__forward_ref__===$}class Ne extends Error{constructor(s,a){super(function(i,s){return`${i?`NG0${i}: `:""}${s}`}(s,a)),this.code=s}}function oe(i){return"string"==typeof i?i:null==i?"":String(i)}function fe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():oe(i)}function Tt(i,s){const a=s?` in ${s}`:"";throw new Ne("201",`No provider for ${fe(i)} found${a}`)}function tn(i,s){null==i&&function(i,s,a,u){throw new Error(`ASSERTION ERROR: ${i}`+(null==u?"":` [Expected=> ${a} ${u} ${s} <=Actual]`))}(s,i,null,"!=")}function on(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function mn(i){return{providers:i.providers||[],imports:i.imports||[]}}function Jt(i){return Xt(i,Oe)||Xt(i,zn)}function Xt(i,s){return i.hasOwnProperty(s)?i[s]:null}function Bi(i){return i&&(i.hasOwnProperty(_n)||i.hasOwnProperty(yi))?i[_n]:null}const Oe=Q({\u0275prov:Q}),_n=Q({\u0275inj:Q}),zn=Q({ngInjectableDef:Q}),yi=Q({ngInjectorDef:Q});var $e=(()=>(($e=$e||{})[$e.Default=0]="Default",$e[$e.Host=1]="Host",$e[$e.Self=2]="Self",$e[$e.SkipSelf=4]="SkipSelf",$e[$e.Optional=8]="Optional",$e))();let qt;function Hn(i){const s=qt;return qt=i,s}function tt(i,s,a){const u=Jt(i);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:a&$e.Optional?null:void 0!==s?s:void Tt(te(i),"Injector")}function Dt(i){return{toString:i}.toString()}var St=(()=>((St=St||{})[St.OnPush=0]="OnPush",St[St.Default=1]="Default",St))(),Fe=(()=>((Fe=Fe||{})[Fe.Emulated=0]="Emulated",Fe[Fe.None=2]="None",Fe[Fe.ShadowDom=3]="ShadowDom",Fe))();const et="undefined"!=typeof globalThis&&globalThis,lu="undefined"!=typeof window&&window,ln="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Yt=et||"undefined"!=typeof global&&global||lu||ln,W={},G=[],z=Q({\u0275cmp:Q}),Ee=Q({\u0275dir:Q}),le=Q({\u0275pipe:Q}),Ge=Q({\u0275mod:Q}),at=Q({\u0275loc:Q}),Gt=Q({\u0275fac:Q}),An=Q({__NG_ELEMENT_ID__:Q});let Kn=0;function tr(i){return Dt(()=>{const a={},u={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===St.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||G,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Fe.Emulated,id:"c",styles:i.styles||G,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,f=i.features,m=i.pipes;return u.id+=Kn++,u.inputs=Pt(i.inputs,a),u.outputs=Pt(i.outputs),f&&f.forEach(y=>y(u)),u.directiveDefs=c?()=>("function"==typeof c?c():c).map(Y):null,u.pipeDefs=m?()=>("function"==typeof m?m():m).map(K):null,u})}function Y(i){return dn(i)||function(i){return i[Ee]||null}(i)}function K(i){return function(i){return i[le]||null}(i)}const be={};function Ue(i){return Dt(()=>{const s={type:i.type,bootstrap:i.bootstrap||G,declarations:i.declarations||G,imports:i.imports||G,exports:i.exports||G,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(be[i.id]=i.type),s})}function lt(i,s){return Dt(()=>{const a=xn(i,!0);a.declarations=s.declarations||G,a.imports=s.imports||G,a.exports=s.exports||G})}function Pt(i,s){if(null==i)return W;const a={};for(const u in i)if(i.hasOwnProperty(u)){let c=i[u],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=u,s&&(s[c]=f)}return a}const bt=tr;function Mn(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function dn(i){return i[z]||null}function xn(i,s){const a=i[Ge]||null;if(!a&&!0===s)throw new Error(`Type ${te(i)} does not have '\u0275mod' property.`);return a}function ks(i){return Array.isArray(i)&&"object"==typeof i[1]}function Mr(i){return Array.isArray(i)&&!0===i[1]}function cc(i){return 0!=(8&i.flags)}function Ju(i){return 2==(2&i.flags)}function du(i){return 1==(1&i.flags)}function ds(i){return null!==i.template}function Er(i){return 0!=(512&i[2])}function wi(i,s){return i.hasOwnProperty(Gt)?i[Gt]:null}class Fs{constructor(s,a,u){this.previousValue=s,this.currentValue=a,this.firstChange=u}isFirstChange(){return this.firstChange}}function hu(){return mc}function mc(i){return i.type.prototype.ngOnChanges&&(i.setInput=ya),Ls}function Ls(){const i=rp(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===W)i.previous=s;else for(let u in s)a[u]=s[u];i.current=null,this.ngOnChanges(s)}}function ya(i,s,a,u){const c=rp(i)||function(i,s){return i[Ci]=s}(i,{previous:W,current:null}),f=c.current||(c.current={}),m=c.previous,y=this.declaredInputs[a],w=m[y];f[y]=new Fs(w&&w.currentValue,s,m===W),i[u]=s}hu.ngInherit=!0;const Ci="__ngSimpleChanges__";function rp(i){return i[Ci]||null}let hs;function ip(i){hs=i}function On(i){return!!i.listen}const wr={createRenderer:(i,s)=>void 0!==hs?hs:"undefined"!=typeof document?document:void 0};function an(i){for(;Array.isArray(i);)i=i[0];return i}function wa(i,s){return an(s[i])}function bi(i,s){return an(s[i.index])}function vc(i,s){return i.data[s]}function ii(i,s){const a=s[i];return ks(a)?a:a[0]}function nl(i){return 4==(4&i[2])}function gu(i){return 128==(128&i[2])}function fs(i,s){return null==s?null:i[s]}function rl(i){i[18]=0}function Lo(i,s){i[5]+=s;let a=i,u=i[3];for(;null!==u&&(1===s&&1===a[5]||-1===s&&0===a[5]);)u[5]+=s,a=u,u=u[3]}const ut={lFrame:ap(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function mu(){return ut.bindingsEnabled}function Te(){return ut.lFrame.lView}function xt(){return ut.lFrame.tView}function _u(i){return ut.lFrame.contextLView=i,i[8]}function Cn(){let i=yu();for(;null!==i&&64===i.type;)i=i.parent;return i}function yu(){return ut.lFrame.currentTNode}function Hr(i,s){const a=ut.lFrame;a.currentTNode=i,a.isParent=s}function vu(){return ut.lFrame.isParent}function ol(){return ut.isInCheckNoChangesMode}function lo(i){ut.isInCheckNoChangesMode=i}function gs(){return ut.lFrame.bindingIndex++}function Cr(i){const s=ut.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function Cc(i,s){const a=ut.lFrame;a.bindingIndex=a.bindingRootIndex=i,bc(s)}function bc(i){ut.lFrame.currentDirectiveIndex=i}function Ic(){return ut.lFrame.currentQueryIndex}function Uo(i){ut.lFrame.currentQueryIndex=i}function al(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function wu(i,s,a){if(a&$e.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&$e.Host||(c=al(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const u=ut.lFrame=ul();return u.currentTNode=s,u.lView=i,!0}function Cu(i){const s=ul(),a=i[1];ut.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function ul(){const i=ut.lFrame,s=null===i?null:i.child;return null===s?ap(i):s}function ap(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function eh(){const i=ut.lFrame;return ut.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const ll=eh;function Bo(){const i=eh();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function br(){return ut.lFrame.selectedIndex}function co(i){ut.lFrame.selectedIndex=i}function Yn(){const i=ut.lFrame;return vc(i.tView,i.selectedIndex)}function Ta(i,s){for(let a=s.directiveStart,u=s.directiveEnd;a<u;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:y,ngAfterViewInit:w,ngAfterViewChecked:T,ngOnDestroy:S}=f;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),y&&((i.contentHooks||(i.contentHooks=[])).push(a,y),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,y)),w&&(i.viewHooks||(i.viewHooks=[])).push(-a,w),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function Da(i,s,a){Ac(i,s,3,a)}function jo(i,s,a,u){(3&i[2])===a&&Ac(i,s,a,u)}function nr(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function Ac(i,s,a,u){const f=null!=u?u:-1,m=s.length-1;let y=0;for(let w=void 0!==u?65535&i[18]:0;w<m;w++)if("number"==typeof s[w+1]){if(y=s[w],null!=u&&y>=u)break}else s[w]<0&&(i[18]+=65536),(y<f||-1==f)&&(nh(i,a,s,w),i[18]=(4294901760&i[18])+w+2),w++}function nh(i,s,a,u){const c=a[u]<0,f=a[u+1],y=i[c?-a[u]:a[u]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(y)}finally{}}}else try{f.call(y)}finally{}}class hl{constructor(s,a,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=u}}function sh(i,s,a){const u=On(i);let c=0;for(;c<a.length;){const f=a[c];if("number"==typeof f){if(0!==f)break;c++;const m=a[c++],y=a[c++],w=a[c++];u?i.setAttribute(s,y,w,m):s.setAttributeNS(m,y,w)}else{const m=f,y=a[++c];Vs(m)?u&&i.setProperty(s,m,y):u?i.setAttribute(s,m,y):s.setAttribute(m,y),c++}}return c}function lp(i){return 3===i||4===i||6===i}function Vs(i){return 64===i.charCodeAt(0)}function fl(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let u=0;u<s.length;u++){const c=s[u];"number"==typeof c?a=c:0===a||cp(i,a,c,null,-1===a||2===a?s[++u]:null)}}return i}function cp(i,s,a,u,c){let f=0,m=i.length;if(-1===s)m=-1;else for(;f<i.length;){const y=i[f++];if("number"==typeof y){if(y===s){m=-1;break}if(y>s){m=f-1;break}}}for(;f<i.length;){const y=i[f];if("number"==typeof y)break;if(y===a){if(null===u)return void(null!==c&&(i[f+1]=c));if(u===i[f+1])return void(i[f+2]=c)}f++,null!==u&&f++,null!==c&&f++}-1!==m&&(i.splice(m,0,s),f=m+1),i.splice(f++,0,a),null!==u&&i.splice(f++,0,u),null!==c&&i.splice(f++,0,c)}function xc(i){return-1!==i}function qi(i){return 32767&i}function Us(i,s){let a=function(i){return i>>16}(i),u=s;for(;a>0;)u=u[15],a--;return u}let Nc=!0;function Sa(i){const s=Nc;return Nc=i,s}let ah=0;function ho(i,s){const a=Rn(i,s);if(-1!==a)return a;const u=s[1];u.firstCreatePass&&(i.injectorIndex=s.length,Iu(u.data,i),Iu(s,null),Iu(u.blueprint,null));const c=Qe(i,s),f=i.injectorIndex;if(xc(c)){const m=qi(c),y=Us(c,s),w=y[1].data;for(let T=0;T<8;T++)s[f+T]=y[m+T]|w[m+T]}return s[f+8]=c,f}function Iu(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Rn(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Qe(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,u=null,c=s;for(;null!==c;){const f=c[1],m=f.type;if(u=2===m?f.declTNode:1===m?c[6]:null,null===u)return-1;if(a++,c=c[15],-1!==u.injectorIndex)return u.injectorIndex|a<<16}return-1}function Ii(i,s,a){!function(i,s,a){let u;"string"==typeof a?u=a.charCodeAt(0)||0:a.hasOwnProperty(An)&&(u=a[An]),null==u&&(u=a[An]=ah++);const c=255&u;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function Ir(i,s,a){if(a&$e.Optional)return i;Tt(s,"NodeInjector")}function Pc(i,s,a,u){if(a&$e.Optional&&void 0===u&&(u=null),0==(a&($e.Self|$e.Host))){const c=i[9],f=Hn(void 0);try{return c?c.get(s,u,a&$e.Optional):tt(s,u,a&$e.Optional)}finally{Hn(f)}}return Ir(u,s,a)}function qo(i,s,a,u=$e.Default,c){if(null!==i){const f=function(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(An)?i[An]:void 0;return"number"==typeof s?s>=0?255&s:pl:s}(a);if("function"==typeof f){if(!wu(s,i,u))return u&$e.Host?Ir(c,a,u):Pc(s,a,u,c);try{const m=f(u);if(null!=m||u&$e.Optional)return m;Tt(a)}finally{ll()}}else if("number"==typeof f){let m=null,y=Rn(i,s),w=-1,T=u&$e.Host?s[16][6]:null;for((-1===y||u&$e.SkipSelf)&&(w=-1===y?Qe(i,s):s[y+8],-1!==w&&Mc(u,!1)?(m=s[1],y=qi(w),s=Us(w,s)):y=-1);-1!==y;){const S=s[1];if(xa(f,y,S.data)){const M=gl(y,s,a,m,u,T);if(M!==mr)return M}w=s[y+8],-1!==w&&Mc(u,s[1].data[y+8]===T)&&xa(f,y,s)?(m=S,y=qi(w),s=Us(w,s)):y=-1}}}return Pc(s,a,u,c)}const mr={};function pl(){return new ys(Cn(),Te())}function gl(i,s,a,u,c,f){const m=s[1],y=m.data[i+8],S=ml(y,m,a,null==u?Ju(y)&&Nc:u!=m&&0!=(3&y.type),c&$e.Host&&f===y);return null!==S?Ut(s,m,S,y):mr}function ml(i,s,a,u,c){const f=i.providerIndexes,m=s.data,y=1048575&f,w=i.directiveStart,S=f>>20,k=c?y+S:i.directiveEnd;for(let Z=u?y:y+S;Z<k;Z++){const J=m[Z];if(Z<w&&a===J||Z>=w&&J.type===a)return Z}if(c){const Z=m[w];if(Z&&ds(Z)&&Z.type===a)return w}return null}function Ut(i,s,a,u){let c=i[a];const f=s.data;if(function(i){return i instanceof hl}(c)){const m=c;m.resolving&&function(i,s){throw new Ne("200",`Circular dependency in DI detected for ${i}`)}(fe(f[a]));const y=Sa(m.canSeeViewProviders);m.resolving=!0;const w=m.injectImpl?Hn(m.injectImpl):null;wu(i,u,$e.Default);try{c=i[a]=m.factory(void 0,f,i,u),s.firstCreatePass&&a>=u.directiveStart&&function(i,s,a){const{ngOnChanges:u,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(u){const m=mc(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==w&&Hn(w),Sa(y),m.resolving=!1,ll()}}return c}function xa(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Mc(i,s){return!(i&$e.Self||i&$e.Host&&s)}class ys{constructor(s,a){this._tNode=s,this._lView=a}get(s,a){return qo(this._tNode,this._lView,s,void 0,a)}}function dh(i){return Dt(()=>{const s=i.prototype.constructor,a=s[Gt]||Tu(s),u=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==u;){const f=c[Gt]||Tu(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Tu(i){return se(i)?()=>{const s=Tu(B(i));return s&&s()}:wi(i)}function Oc(i){return function(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const u=a.length;let c=0;for(;c<u;){const f=a[c];if(lp(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<u&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(Cn(),i)}const Ti="__parameters__";function fo(i,s,a){return Dt(()=>{const u=function(i){return function(...a){if(i){const u=i(...a);for(const c in u)this[c]=u[c]}}}(s);function c(...f){if(this instanceof c)return u.apply(this,f),this;const m=new c(...f);return y.annotation=m,y;function y(w,T,S){const M=w.hasOwnProperty(Ti)?w[Ti]:Object.defineProperty(w,Ti,{value:[]})[Ti];for(;M.length<=S;)M.push(null);return(M[S]=M[S]||[]).push(m),w}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class kn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=on({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dp=new kn("AnalyzeForEntryComponents"),Pa=Function;function Gi(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let u=i[a];Array.isArray(u)?(s===i&&(s=i.slice(0,a)),Gi(u,s)):s!==i&&s.push(u)}return s}function ws(i,s){i.forEach(a=>Array.isArray(a)?ws(a,s):s(a))}function Du(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Di(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function Jn(i,s,a){let u=go(i,s);return u>=0?i[1|u]=a:(u=~u,function(i,s,a,u){let c=i.length;if(c==s)i.push(a,u);else if(1===c)i.push(u,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=u}}(i,u,s,a)),u}function Tr(i,s){const a=go(i,s);if(a>=0)return i[1|a]}function go(i,s){return function(i,s,a){let u=0,c=i.length>>a;for(;c!==u;){const f=u+(c-u>>1),m=i[f<<a];if(s===m)return f<<a;m>s?c=f:u=f+1}return~(c<<a)}(i,s,1)}const Ot={},rn="__NG_DI_FLAG__",rr="ngTempTokenPath",lr=/\n/gm,Au="__source",Hs=Q({provide:String,useValue:Q});let ai;function ft(i){const s=ai;return ai=i,s}function Ev(i,s=$e.Default){if(void 0===ai)throw new Error("inject() must be called from an injection context");return null===ai?tt(i,void 0,s):ai.get(i,s&$e.Optional?null:void 0,s)}function bn(i,s=$e.Default){return(qt||Ev)(B(i),s)}function Wo(i){const s=[];for(let a=0;a<i.length;a++){const u=B(i[a]);if(Array.isArray(u)){if(0===u.length)throw new Error("Arguments array must have arguments.");let c,f=$e.Default;for(let m=0;m<u.length;m++){const y=u[m],w=_p(y);"number"==typeof w?-1===w?c=y.token:f|=w:c=y}s.push(bn(c,f))}else s.push(bn(u))}return s}function Su(i,s){return i[rn]=s,i.prototype[rn]=s,i}function _p(i){return i[rn]}function qs(i,s,a,u){const c=i[rr];throw s[Au]&&c.unshift(s[Au]),i.message=function(i,s,a,u=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=te(s);if(Array.isArray(s))c=s.map(te).join(" -> ");else if("object"==typeof s){let f=[];for(let m in s)if(s.hasOwnProperty(m)){let y=s[m];f.push(m+":"+("string"==typeof y?JSON.stringify(y):te(y)))}c=`{${f.join(", ")}}`}return`${a}${u?"("+u+")":""}[${c}]: ${i.replace(lr,"\n  ")}`}("\n"+i.message,c,a,u),i.ngTokenPath=c,i[rr]=null,i}const xu=Su(fo("Inject",i=>({token:i})),-1),ka=Su(fo("Optional"),8),kr=Su(fo("SkipSelf"),4);let Nu;function Ko(i){var s;return(null===(s=function(){if(void 0===Nu&&(Nu=null,Yt.trustedTypes))try{Nu=Yt.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch(i){}return Nu}())||void 0===s?void 0:s.createHTML(i))||i}class Ru{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Iv extends Ru{getTypeName(){return"HTML"}}class Tv extends Ru{getTypeName(){return"Style"}}class Ch extends Ru{getTypeName(){return"Script"}}class Dv extends Ru{getTypeName(){return"URL"}}class Av extends Ru{getTypeName(){return"ResourceURL"}}function Yo(i){return i instanceof Ru?i.changingThisBreaksApplicationSecurity:i}function Ua(i,s){const a=gm(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}function gm(i){return i instanceof Ru&&i.getTypeName()||null}function mm(i){return new Iv(i)}function Cp(i){return new Tv(i)}function bp(i){return new Ch(i)}function Qo(i){return new Dv(i)}function bl(i){return new Av(i)}class _m{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const a=(new window.DOMParser).parseFromString(Ko(s),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(s):(a.removeChild(a.firstChild),a)}catch(a){return null}}}class Sv{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const a=this.inertDocument.createElement("html");this.inertDocument.appendChild(a);const u=this.inertDocument.createElement("body");a.appendChild(u)}}getInertBodyElement(s){const a=this.inertDocument.createElement("template");if("content"in a)return a.innerHTML=Ko(s),a;const u=this.inertDocument.createElement("body");return u.innerHTML=Ko(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(u),u}stripCustomNsAttrs(s){const a=s.attributes;for(let c=a.length-1;0<c;c--){const m=a.item(c).name;("xmlns:ns1"===m||0===m.indexOf("ns1:"))&&s.removeAttribute(m)}let u=s.firstChild;for(;u;)u.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(u),u=u.nextSibling}}const bh=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Il=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Tl(i){return(i=String(i)).match(bh)||i.match(Il)?i:"unsafe:"+i}function Zs(i){const s={};for(const a of i.split(","))s[a]=!0;return s}function Jo(...i){const s={};for(const a of i)for(const u in a)a.hasOwnProperty(u)&&(s[u]=!0);return s}const Ih=Zs("area,br,col,hr,img,wbr"),Tp=Zs("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Dl=Zs("rp,rt"),ym=Jo(Ih,Jo(Tp,Zs("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jo(Dl,Zs("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Jo(Dl,Tp)),E=Zs("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),g=Zs("srcset"),x=Jo(E,g,Zs("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zs("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),P=Zs("script,style,template");class X{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let a=s.firstChild,u=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?u=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,u&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let c=this.checkClobberedElement(a,a.nextSibling);if(c){a=c;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(s){const a=s.nodeName.toLowerCase();if(!ym.hasOwnProperty(a))return this.sanitizedSomething=!0,!P.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const u=s.attributes;for(let c=0;c<u.length;c++){const f=u.item(c),m=f.name,y=m.toLowerCase();if(!x.hasOwnProperty(y)){this.sanitizedSomething=!0;continue}let w=f.value;E[y]&&(w=Tl(w)),g[y]&&(i=w,w=(i=String(i)).split(",").map(s=>Tl(s.trim())).join(", ")),this.buf.push(" ",m,'="',Le(w),'"')}var i;return this.buf.push(">"),!0}endElement(s){const a=s.nodeName.toLowerCase();ym.hasOwnProperty(a)&&!Ih.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(s){this.buf.push(Le(s))}checkClobberedElement(s,a){if(a&&(s.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return a}}const ve=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,qe=/([^\#-~ |!])/g;function Le(i){return i.replace(/&/g,"&amp;").replace(ve,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(qe,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let it;function zt(i,s){let a=null;try{it=it||function(i){const s=new Sv(i);return function(){try{return!!(new window.DOMParser).parseFromString(Ko(""),"text/html")}catch(i){return!1}}()?new _m(s):s}(i);let u=s?String(s):"";a=it.getInertBodyElement(u);let c=5,f=u;do{if(0===c)throw new Error("Failed to sanitize html because the input is unstable");c--,u=f,f=a.innerHTML,a=it.getInertBodyElement(u)}while(u!==f);return Ko((new X).sanitizeChildren(vn(a)||a))}finally{if(a){const u=vn(a)||a;for(;u.firstChild;)u.removeChild(u.firstChild)}}}function vn(i){return"content"in i&&function(i){return i.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===i.nodeName}(i)?i.content:null}var En=(()=>((En=En||{})[En.NONE=0]="NONE",En[En.HTML=1]="HTML",En[En.STYLE=2]="STYLE",En[En.SCRIPT=3]="SCRIPT",En[En.URL=4]="URL",En[En.RESOURCE_URL=5]="RESOURCE_URL",En))();function Dh(i){const s=function(){const i=Te();return i&&i[12]}();return s?s.sanitize(En.URL,i)||"":Ua(i,"URL")?Yo(i):Tl(oe(i))}const Nh="__ngContext__";function ui(i,s){i[Nh]=s}function Rv(i){const s=function(i){return i[Nh]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function Wc(i){return i.ngOriginalError}function xS(i,...s){i.error(...s)}class Mh{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),u=this._findContext(s),c=(i=s)&&i.ngErrorLogger||xS;var i;c(this._console,"ERROR",s),a&&c(this._console,"ORIGINAL ERROR",a),u&&c(this._console,"ERROR CONTEXT",u)}_findContext(s){return s?s.ngDebugContext||this._findContext(Wc(s)):null}_findOriginalError(s){let a=s&&Wc(s);for(;a&&Wc(a);)a=Wc(a);return a||null}}const QC=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Yt))();function ja(i){return i instanceof Function?i():i}var $a=(()=>(($a=$a||{})[$a.Important=1]="Important",$a[$a.DashCase=2]="DashCase",$a))();function Dm(i,s){return undefined(i,s)}function Np(i){const s=i[3];return Mr(s)?s[3]:s}function Am(i){return Vv(i[13])}function nb(i){return Vv(i[4])}function Vv(i){for(;null!==i&&!Mr(i);)i=i[4];return i}function zc(i,s,a,u,c){if(null!=u){let f,m=!1;Mr(u)?f=u:ks(u)&&(m=!0,u=u[0]);const y=an(u);0===i&&null!==a?null==c?ab(s,a,y):xl(s,a,y,c||null,!0):1===i&&null!==a?xl(s,a,y,c||null,!0):2===i?function(i,s,a){const u=Rm(i,s);u&&function(i,s,a,u){On(i)?i.removeChild(s,a,u):s.removeChild(a)}(i,u,s,a)}(s,y,m):3===i&&s.destroyNode(y),null!=f&&function(i,s,a,u,c){const f=a[7];f!==an(a)&&zc(s,i,u,f,c);for(let y=10;y<a.length;y++){const w=a[y];Yc(w[1],w,i,s,u,f)}}(s,i,f,a,c)}}function Uv(i,s,a){return On(i)?i.createElement(s,a):null===a?i.createElement(s):i.createElementNS(a,s)}function xm(i,s){const a=i[9],u=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,Lo(c,-1)),a.splice(u,1)}function Nm(i,s){if(i.length<=10)return;const a=10+s,u=i[a];if(u){const c=u[17];null!==c&&c!==i&&xm(c,u),s>0&&(i[a-1][4]=u[4]);const f=Di(i,10+s);!function(i,s){Yc(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=f[19];null!==m&&m.detachView(f[1]),u[3]=null,u[4]=null,u[2]&=-129}return u}function ib(i,s){if(!(256&s[2])){const a=s[11];On(a)&&a.destroyNode&&Yc(i,s,a,3,null,null),function(i){let s=i[13];if(!s)return Sl(i[1],i);for(;s;){let a=null;if(ks(s))a=s[13];else{const u=s[10];u&&(a=u)}if(!a){for(;s&&!s[4]&&s!==i;)ks(s)&&Sl(s[1],s),s=s[3];null===s&&(s=i),ks(s)&&Sl(s[1],s),a=s&&s[4]}s=a}}(s)}}function Sl(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let u=0;u<a.length;u+=2){const c=s[a[u]];if(!(c instanceof hl)){const f=a[u+1];if(Array.isArray(f))for(let m=0;m<f.length;m+=2){const y=c[f[m]],w=f[m+1];try{w.call(y)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function(i,s){const a=i.cleanup,u=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const m=a[f+1],y="function"==typeof m?m(s):an(s[m]),w=u[c=a[f+2]],T=a[f+3];"boolean"==typeof T?y.removeEventListener(a[f],w,T):T>=0?u[c=T]():u[c=-T].unsubscribe(),f+=2}else{const m=u[c=a[f+1]];a[f].call(m)}if(null!==u){for(let f=c+1;f<u.length;f++)u[f]();s[7]=null}}(i,s),1===s[1].type&&On(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&Mr(s[3])){a!==s[3]&&xm(a,s);const u=s[19];null!==u&&u.detachView(i)}}}function sb(i,s,a){return function(i,s,a){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return a[0];if(2&u.flags){const c=i.data[u.directiveStart].encapsulation;if(c===Fe.None||c===Fe.Emulated)return null}return bi(u,a)}(i,s.parent,a)}function xl(i,s,a,u,c){On(i)?i.insertBefore(s,a,u,c):s.insertBefore(a,u,c)}function ab(i,s,a){On(i)?i.appendChild(s,a):s.appendChild(a)}function ub(i,s,a,u,c){null!==u?xl(i,s,a,u,c):ab(i,s,a)}function Rm(i,s){return On(i)?i.parentNode(s):s.parentNode}let Kc=function(i,s,a){return 40&i.type?bi(i,a):null};function kh(i,s,a,u){const c=sb(i,u,s),f=s[11],y=function(i,s,a){return Kc(i,s,a)}(u.parent||s[6],u,s);if(null!=c)if(Array.isArray(a))for(let w=0;w<a.length;w++)ub(f,c,a[w],y,!1);else ub(f,c,a,y,!1)}function Om(i,s){if(null!==s){const a=s.type;if(3&a)return bi(s,i);if(4&a)return $v(-1,i[s.index]);if(8&a){const u=s.child;if(null!==u)return Om(i,u);{const c=i[s.index];return Mr(c)?$v(-1,c):an(c)}}if(32&a)return Dm(s,i)()||an(i[s.index]);{const u=jv(i,s);return null!==u?Array.isArray(u)?u[0]:Om(Np(i[16]),u):Om(i,s.next)}}return null}function jv(i,s){return null!==s?i[16][6].projection[s.projection]:null}function $v(i,s){const a=10+i+1;if(a<s.length){const u=s[a],c=u[1].firstChild;if(null!==c)return Om(u,c)}return s[7]}function km(i,s,a,u,c,f,m){for(;null!=a;){const y=u[a.index],w=a.type;if(m&&0===s&&(y&&ui(an(y),u),a.flags|=4),64!=(64&a.flags))if(8&w)km(i,s,a.child,u,c,f,!1),zc(s,i,c,y,f);else if(32&w){const T=Dm(a,u);let S;for(;S=T();)zc(s,i,c,S,f);zc(s,i,c,y,f)}else 16&w?Pl(i,s,u,a,c,f):zc(s,i,c,y,f);a=m?a.projectionNext:a.next}}function Yc(i,s,a,u,c,f){km(a,u,i.firstChild,s,c,f,!1)}function Pl(i,s,a,u,c,f){const m=a[16],w=m[6].projection[u.projection];if(Array.isArray(w))for(let T=0;T<w.length;T++)zc(s,i,c,w[T],f);else km(i,s,w,m[3],c,f,!0)}function db(i,s,a){On(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function qv(i,s,a){On(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function Zv(i,s,a){let u=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===u||i.charCodeAt(c+f)<=32)return c}a=c+1}}const hb="ng-template";function zS(i,s,a){let u=0;for(;u<i.length;){let c=i[u++];if(a&&"class"===c){if(c=i[u],-1!==Zv(c.toLowerCase(),s,0))return!0}else if(1===c){for(;u<i.length&&"string"==typeof(c=i[u++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function Gv(i){return 4===i.type&&i.value!==hb}function KS(i,s,a){return s===(4!==i.type||a?i.value:hb)}function YS(i,s,a){let u=4;const c=i.attrs||[],f=function(i){for(let s=0;s<i.length;s++)if(lp(i[s]))return s;return i.length}(c);let m=!1;for(let y=0;y<s.length;y++){const w=s[y];if("number"!=typeof w){if(!m)if(4&u){if(u=2|1&u,""!==w&&!KS(i,w,a)||""===w&&1===s.length){if(Xo(u))return!1;m=!0}}else{const T=8&u?w:s[++y];if(8&u&&null!==i.attrs){if(!zS(i.attrs,T,a)){if(Xo(u))return!1;m=!0}continue}const M=Wv(8&u?"class":w,c,Gv(i),a);if(-1===M){if(Xo(u))return!1;m=!0;continue}if(""!==T){let k;k=M>f?"":c[M+1].toLowerCase();const Z=8&u?k:null;if(Z&&-1!==Zv(Z,T,0)||2&u&&T!==k){if(Xo(u))return!1;m=!0}}}}else{if(!m&&!Xo(u)&&!Xo(w))return!1;if(m&&Xo(w))continue;m=!1,u=w|1&u}}return Xo(u)||m}function Xo(i){return 0==(1&i)}function Wv(i,s,a,u){if(null===s)return-1;let c=0;if(u||!a){let f=!1;for(;c<s.length;){const m=s[c];if(m===i)return c;if(3===m||6===m)f=!0;else{if(1===m||2===m){let y=s[++c];for(;"string"==typeof y;)y=s[++c];continue}if(4===m)break;if(0===m){c+=4;continue}}c+=f?1:2}return-1}return function(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const u=i[a];if("number"==typeof u)return-1;if(u===s)return a;a++}return-1}(s,i)}function fb(i,s,a=!1){for(let u=0;u<s.length;u++)if(YS(i,s[u],a))return!0;return!1}function gb(i,s){return i?":not("+s.trim()+")":s}function XS(i){let s=i[0],a=1,u=2,c="",f=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&u){const y=i[++a];c+="["+m+(y.length>0?'="'+y+'"':"")+"]"}else 8&u?c+="."+m:4&u&&(c+=" "+m);else""!==c&&!Xo(m)&&(s+=gb(f,c),c=""),u=m,f=f||!Xo(u);a++}return""!==c&&(s+=gb(f,c)),s}const Et={};function Ml(i){ea(xt(),Te(),br()+i,ol())}function ea(i,s,a,u){if(!u)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&Da(s,f,a)}else{const f=i.preOrderHooks;null!==f&&jo(s,f,0,a)}co(a)}function Lm(i,s){return i<<17|s<<2}function _o(i){return i>>17&32767}function zv(i){return 2|i}function li(i){return(131068&i)>>2}function Ha(i,s){return-131069&i|s<<2}function Zr(i){return 1|i}function px(i,s){const a=i.contentQueries;if(null!==a)for(let u=0;u<a.length;u+=2){const c=a[u],f=a[u+1];if(-1!==f){const m=i.data[f];Uo(c),m.contentQueries(2,s[f],f)}}}function Hm(i,s,a,u,c,f,m,y,w,T){const S=s.blueprint.slice();return S[0]=c,S[2]=140|u,rl(S),S[3]=S[15]=i,S[8]=a,S[10]=m||i&&i[10],S[11]=y||i&&i[11],S[12]=w||i&&i[12]||null,S[9]=T||i&&i[9]||null,S[6]=f,S[16]=2==s.type?i[16]:S,S}function Op(i,s,a,u,c){let f=i.data[s];if(null===f)f=function(i,s,a,u,c){const f=yu(),m=vu(),w=i.data[s]=function(i,s,a,u,c,f){return{type:a,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?f:f&&f.parent,a,s,u,c);return null===i.firstChild&&(i.firstChild=w),null!==f&&(m?null==f.child&&null!==w.parent&&(f.child=w):null===f.next&&(f.next=w)),w}(i,s,a,u,c),ut.lFrame.inI18n&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=u,f.attrs=c;const m=function(){const i=ut.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===m?-1:m.injectorIndex}return Hr(f,!0),f}function Fh(i,s,a,u){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(u),i.blueprint.push(u),i.data.push(null);return c}function kl(i,s,a){Cu(s);try{const u=i.viewQuery;null!==u&&t_(1,u,a);const c=i.template;null!==c&&kp(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&px(i,s),i.staticViewQueries&&t_(2,i.viewQuery,a);const f=i.components;null!==f&&function(i,s){for(let a=0;a<s.length;a++)kb(i,s[a])}(s,f)}catch(u){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),u}finally{s[2]&=-5,Bo()}}function Za(i,s,a,u){const c=s[2];if(256==(256&c))return;Cu(s);const f=ol();try{rl(s),function(i){ut.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&kp(i,s,a,2,u);const m=3==(3&c);if(!f)if(m){const T=i.preOrderCheckHooks;null!==T&&Da(s,T,null)}else{const T=i.preOrderHooks;null!==T&&jo(s,T,0,null),nr(s,0)}if(function(i){for(let s=Am(i);null!==s;s=nb(s)){if(!s[2])continue;const a=s[9];for(let u=0;u<a.length;u++){const c=a[u],f=c[3];0==(1024&c[2])&&Lo(f,1),c[2]|=1024}}}(s),function(i){for(let s=Am(i);null!==s;s=nb(s))for(let a=10;a<s.length;a++){const u=s[a],c=u[1];gu(u)&&Za(c,u,c.template,u[8])}}(s),null!==i.contentQueries&&px(i,s),!f)if(m){const T=i.contentCheckHooks;null!==T&&Da(s,T)}else{const T=i.contentHooks;null!==T&&jo(s,T,1),nr(s,1)}!function(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let u=0;u<a.length;u++){const c=a[u];if(c<0)co(~c);else{const f=c,m=a[++u],y=a[++u];Cc(m,f),y(2,s[f])}}}finally{co(-1)}}(i,s);const y=i.components;null!==y&&function(i,s){for(let a=0;a<s.length;a++)bO(i,s[a])}(s,y);const w=i.viewQuery;if(null!==w&&t_(2,w,u),!f)if(m){const T=i.viewCheckHooks;null!==T&&Da(s,T)}else{const T=i.viewHooks;null!==T&&jo(s,T,2),nr(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),f||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,Lo(s[3],-1))}finally{Bo()}}function qm(i,s,a,u){const c=s[10],f=!ol(),m=nl(s);try{f&&!m&&c.begin&&c.begin(),m&&kl(i,s,u),Za(i,s,a,u)}finally{f&&!m&&c.end&&c.end()}}function kp(i,s,a,u,c){const f=br(),m=2&u;try{co(-1),m&&s.length>20&&ea(i,s,20,ol()),a(u,c)}finally{co(f)}}function Fp(i,s,a){!mu()||(function(i,s,a,u){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||ho(a,s),ui(u,s);const m=a.initialInputs;for(let y=c;y<f;y++){const w=i.data[y],T=ds(w);T&&Qm(s,a,w);const S=Ut(s,i,y,a);ui(S,s),null!==m&&wO(0,y-c,S,w,0,m),T&&(ii(a.index,s)[8]=S)}}(i,s,a,bi(a,s)),128==(128&a.flags)&&function(i,s,a){const u=a.directiveStart,c=a.directiveEnd,m=a.index,y=ut.lFrame.currentDirectiveIndex;try{co(m);for(let w=u;w<c;w++){const T=i.data[w],S=s[w];bc(w),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&Ym(T,S)}}finally{co(-1),bc(y)}}(i,s,a))}function Lh(i,s,a=bi){const u=s.localNames;if(null!==u){let c=s.index+1;for(let f=0;f<u.length;f+=2){const m=u[f+1],y=-1===m?a(s,i):i[m];i[c++]=y}}}function Db(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Zm(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Zm(i,s,a,u,c,f,m,y,w,T){const S=20+u,M=S+c,k=function(i,s){const a=[];for(let u=0;u<s;u++)a.push(u<i?null:Et);return a}(S,M),Z="function"==typeof T?T():T;return k[1]={type:i,blueprint:k,template:a,queries:null,viewQuery:y,declTNode:s,data:k.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:Z,incompleteFirstPass:!1}}function mx(i,s,a,u){const c=oE(s);null===a?c.push(u):(c.push(a),i.firstCreatePass&&Bb(i).push(u,c.length-1))}function Gm(i,s,a){for(let u in i)if(i.hasOwnProperty(u)){const c=i[u];(a=null===a?{}:a).hasOwnProperty(u)?a[u].push(s,c):a[u]=[s,c]}return a}function Qi(i,s,a,u,c,f,m,y){const w=bi(s,a);let S,T=s.inputs;!y&&null!=T&&(S=T[u])?(n_(i,a,S,u,c),Ju(s)&&function(i,s){const a=ii(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(u=function(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(u),c=null!=m?m(c,s.value||"",u):c,On(f)?f.setProperty(w,u,c):Vs(u)||(w.setProperty?w.setProperty(u,c):w[u]=c))}function Lp(i,s,a,u){let c=!1;if(mu()){const f=function(i,s,a){const u=i.directiveRegistry;let c=null;if(u)for(let f=0;f<u.length;f++){const m=u[f];fb(a,m.selectors,!1)&&(c||(c=[]),Ii(ho(a,s),i,m.type),ds(m)?(Uh(i,a),c.unshift(m)):c.push(m))}return c}(i,s,a),m=null===u?null:{"":-1};if(null!==f){c=!0,wx(a,i.data.length,f.length);for(let S=0;S<f.length;S++){const M=f[S];M.providersResolver&&M.providersResolver(M)}let y=!1,w=!1,T=Fh(i,s,f.length,null);for(let S=0;S<f.length;S++){const M=f[S];a.mergedAttrs=fl(a.mergedAttrs,M.hostAttrs),Bh(i,a,s,T,M),Ex(T,M,m),null!==M.contentQueries&&(a.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(a.flags|=128);const k=M.type.prototype;!y&&(k.ngOnChanges||k.ngOnInit||k.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),y=!0),!w&&(k.ngOnChanges||k.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),w=!0),T++}!function(i,s){const u=s.directiveEnd,c=i.data,f=s.attrs,m=[];let y=null,w=null;for(let T=s.directiveStart;T<u;T++){const S=c[T],M=S.inputs,k=null===f||Gv(s)?null:CO(M,f);m.push(k),y=Gm(M,T,y),w=Gm(S.outputs,T,w)}null!==y&&(y.hasOwnProperty("class")&&(s.flags|=16),y.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=y,s.outputs=w}(i,a)}m&&function(i,s,a){if(s){const u=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new Ne("301",`Export of name '${s[c+1]}' not found!`);u.push(s[c],f)}}}(a,u,m)}return a.mergedAttrs=fl(a.mergedAttrs,a.attrs),c}function nE(i,s,a,u,c,f){const m=f.hostBindings;if(m){let y=i.hostBindingOpCodes;null===y&&(y=i.hostBindingOpCodes=[]);const w=~s.index;(function(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(y)!=w&&y.push(w),y.push(u,c,m)}}function Ym(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Uh(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function Ex(i,s,a){if(a){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)a[s.exportAs[u]]=i;ds(s)&&(a[""]=i)}}function wx(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Bh(i,s,a,u,c){i.data[u]=c;const f=c.factory||(c.factory=wi(c.type)),m=new hl(f,ds(c),null);i.blueprint[u]=m,a[u]=m,nE(i,s,0,u,Fh(i,a,c.hostVars,Et),c)}function Qm(i,s,a){const u=bi(s,i),c=Db(a),f=i[10],m=Xm(i,Hm(i,c,null,a.onPush?64:16,u,s,f,f.createRenderer(u,a),null,null));i[s.index]=m}function ta(i,s,a,u,c,f){const m=bi(i,s);!function(i,s,a,u,c,f,m){if(null==f)On(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const y=null==m?oe(f):m(f,u||"",c);On(i)?i.setAttribute(s,c,y,a):a?s.setAttributeNS(a,c,y):s.setAttribute(c,y)}}(s[11],m,f,i.value,a,u,c)}function wO(i,s,a,u,c,f){const m=f[s];if(null!==m){const y=u.setInput;for(let w=0;w<m.length;){const T=m[w++],S=m[w++],M=m[w++];null!==y?u.setInput(a,M,T,S):a[S]=M}}}function CO(i,s){let a=null,u=0;for(;u<s.length;){const c=s[u];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[u+1])),u+=2}else u+=2;else u+=4}return a}function Mb(i,s,a,u){return new Array(i,!0,!1,s,null,0,u,a,null,null)}function bO(i,s){const a=ii(s,i);if(gu(a)){const u=a[1];80&a[2]?Za(u,a,u.template,a[8]):a[5]>0&&Jm(a)}}function Jm(i){for(let u=Am(i);null!==u;u=nb(u))for(let c=10;c<u.length;c++){const f=u[c];if(1024&f[2]){const m=f[1];Za(m,f,m.template,f[8])}else f[5]>0&&Jm(f)}const a=i[1].components;if(null!==a)for(let u=0;u<a.length;u++){const c=ii(a[u],i);gu(c)&&c[5]>0&&Jm(c)}}function kb(i,s){const a=ii(s,i),u=a[1];(function(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(u,a),kl(u,a,a[8])}function Xm(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function jh(i){for(;i;){i[2]|=64;const s=Np(i);if(Er(i)&&!s)return i;i=s}return null}function e_(i,s,a){const u=s[10];u.begin&&u.begin();try{Za(i,s,i.template,a)}catch(c){throw jb(s,c),c}finally{u.end&&u.end()}}function Lb(i){!function(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],u=Rv(a),c=u[1];qm(c,u,c.template,a)}}(i[8])}function t_(i,s,a){Uo(0),s(i,a)}const Tx=(()=>Promise.resolve(null))();function oE(i){return i[7]||(i[7]=[])}function Bb(i){return i.cleanup||(i.cleanup=[])}function jb(i,s){const a=i[9],u=a?a.get(Mh,null):null;u&&u.handleError(s)}function n_(i,s,a,u,c){for(let f=0;f<a.length;){const m=a[f++],y=a[f++],w=s[m],T=i.data[m];null!==T.setInput?T.setInput(w,c,u,y):w[y]=c}}function Ou(i,s,a){const u=wa(s,i);!function(i,s,a){On(i)?i.setValue(s,a):s.textContent=a}(i[11],u,a)}function $h(i,s,a){let u=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let m=0;m<s.length;m++){const y=s[m];"number"==typeof y?f=y:1==f?c=ne(c,y):2==f&&(u=ne(u,y+": "+s[++m]+";"))}a?i.styles=u:i.stylesWithoutHost=u,a?i.classes=c:i.classesWithoutHost=c}const Hh=new kn("INJECTOR",-1);class aE{get(s,a=Ot){if(a===Ot){const u=new Error(`NullInjectorError: No provider for ${te(s)}!`);throw u.name="NullInjectorError",u}return a}}const Vp=new kn("Set Injector scope."),ku={},uE={};let lE;function cE(){return void 0===lE&&(lE=new aE),lE}function Sx(i,s=null,a=null,u){return new dE(i,a,s||cE(),u)}class dE{constructor(s,a,u,c=null){this.parent=u,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];a&&ws(a,y=>this.processProvider(y,s,a)),ws([s],y=>this.processInjectorType(y,[],f)),this.records.set(Hh,td(void 0,this));const m=this.records.get(Vp);this.scope=null!=m?m.value:null,this.source=c||("object"==typeof s?null:te(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=Ot,u=$e.Default){this.assertNotDestroyed();const c=ft(this),f=Hn(void 0);try{if(!(u&$e.SkipSelf)){let y=this.records.get(s);if(void 0===y){const w=("function"==typeof(i=s)||"object"==typeof i&&i instanceof kn)&&Jt(s);y=w&&this.injectableDefInScope(w)?td(Up(s),ku):null,this.records.set(s,y)}if(null!=y)return this.hydrate(s,y)}return(u&$e.Self?cE():this.parent).get(s,a=u&$e.Optional&&a===Ot?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[rr]=m[rr]||[]).unshift(te(s)),c)throw m;return qs(m,s,"R3InjectorError",this.source)}throw m}finally{Hn(f),ft(c)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((u,c)=>s.push(te(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(s,a,u){if(!(s=B(s)))return!1;let c=Bi(s);const f=null==c&&s.ngModule||void 0,m=void 0===f?s:f,y=-1!==u.indexOf(m);if(void 0!==f&&(c=Bi(f)),null==c)return!1;if(null!=c.imports&&!y){let S;u.push(m);try{ws(c.imports,M=>{this.processInjectorType(M,a,u)&&(void 0===S&&(S=[]),S.push(M))})}finally{}if(void 0!==S)for(let M=0;M<S.length;M++){const{ngModule:k,providers:Z}=S[M];ws(Z,J=>this.processProvider(J,k,Z||G))}}this.injectorDefTypes.add(m);const w=wi(m)||(()=>new m);this.records.set(m,td(w,ku));const T=c.providers;if(null!=T&&!y){const S=s;ws(T,M=>this.processProvider(M,S,T))}return void 0!==f&&void 0!==s.providers}processProvider(s,a,u){let c=qh(s=B(s))?s:B(s&&s.provide);const f=Gb(i=s)?td(void 0,i.useValue):td(Zb(i),ku);var i;if(qh(s)||!0!==s.multi)this.records.get(c);else{let m=this.records.get(c);m||(m=td(void 0,ku,!0),m.factory=()=>Wo(m.multi),this.records.set(c,m)),c=s,m.multi.push(s)}this.records.set(c,f)}hydrate(s,a){return a.value===ku&&(a.value=uE,a.value=a.factory()),"object"==typeof a.value&&a.value&&null!==(i=a.value)&&"object"==typeof i&&"function"==typeof i.ngOnDestroy&&this.onDestroy.add(a.value),a.value;var i}injectableDefInScope(s){if(!s.providedIn)return!1;const a=B(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Up(i){const s=Jt(i),a=null!==s?s.factory:wi(i);if(null!==a)return a;if(i instanceof kn)throw new Error(`Token ${te(i)} is missing a \u0275prov definition.`);if(i instanceof Function)return function(i){const s=i.length;if(s>0){const u=function(i,s){const a=[];for(let u=0;u<i;u++)a.push(s);return a}(s,"?");throw new Error(`Can't resolve all parameters for ${te(i)}: (${u.join(", ")}).`)}const a=function(i){const s=i&&(i[Oe]||i[zn]);if(s){const a=function(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new Error("unreachable")}function Zb(i,s,a){let u;if(qh(i)){const c=B(i);return wi(c)||Up(c)}if(Gb(i))u=()=>B(i.useValue);else if(function(i){return!(!i||!i.useFactory)}(i))u=()=>i.useFactory(...Wo(i.deps||[]));else if(function(i){return!(!i||!i.useExisting)}(i))u=()=>bn(B(i.useExisting));else{const c=B(i&&(i.useClass||i.provide));if(!function(i){return!!i.deps}(i))return wi(c)||Up(c);u=()=>new c(...Wo(i.deps))}return u}function td(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function Gb(i){return null!==i&&"object"==typeof i&&Hs in i}function qh(i){return"function"==typeof i}const Qb=function(i,s,a){return function(i,s=null,a=null,u){const c=Sx(i,s,a,u);return c._resolveInjectorDefTypes(),c}({name:a},s,i,a)};let Zn=(()=>{class i{static create(a,u){return Array.isArray(a)?Qb(a,u,""):Qb(a.providers,a.parent,a.name||"")}}return i.THROW_IF_NOT_FOUND=Ot,i.NULL=new aE,i.\u0275prov=on({token:i,providedIn:"any",factory:()=>bn(Hh)}),i.__NG_ELEMENT_ID__=-1,i})();function SO(i,s){Ta(Rv(i)[1],Cn())}function oI(i){let s=function(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const u=[i];for(;s;){let c;if(ds(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new Error("Directives cannot inherit Components");c=s.\u0275dir}if(c){if(a){u.push(c);const m=i;m.inputs=gE(i.inputs),m.declaredInputs=gE(i.declaredInputs),m.outputs=gE(i.outputs);const y=c.hostBindings;y&&na(i,y);const w=c.viewQuery,T=c.contentQueries;if(w&&Zx(i,w),T&&Ai(i,T),_e(i.inputs,c.inputs),_e(i.declaredInputs,c.declaredInputs),_e(i.outputs,c.outputs),ds(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let m=0;m<f.length;m++){const y=f[m];y&&y.ngInherit&&y(i),y===oI&&(a=!1)}}s=Object.getPrototypeOf(s)}!function(i){let s=0,a=null;for(let u=i.length-1;u>=0;u--){const c=i[u];c.hostVars=s+=c.hostVars,c.hostAttrs=fl(c.hostAttrs,a=fl(a,c.hostAttrs))}}(u)}function gE(i){return i===W?{}:i===G?[]:i}function Zx(i,s){const a=i.viewQuery;i.viewQuery=a?(u,c)=>{s(u,c),a(u,c)}:s}function Ai(i,s){const a=i.contentQueries;i.contentQueries=a?(u,c,f)=>{s(u,c,f),a(u,c,f)}:s}function na(i,s){const a=i.hostBindings;i.hostBindings=a?(u,c)=>{s(u,c),a(u,c)}:s}let a_=null;function Gh(){if(!a_){const i=Yt.Symbol;if(i&&i.iterator)a_=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const u=s[a];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(a_=u)}}}return a_}function Bp(i){return!!Wh(i)&&(Array.isArray(i)||!(i instanceof Map)&&Gh()in i)}function Wh(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Gr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function yE(i,s,a,u){const c=Te();return Gr(c,gs(),s)&&(xt(),ta(Yn(),c,i,s,a,u)),yE}function Kh(i,s,a,u){return Gr(i,gs(),a)?s+oe(a)+u:Et}function dI(i,s,a,u,c,f,m,y){const w=Te(),T=xt(),S=i+20,M=T.firstCreatePass?function(i,s,a,u,c,f,m,y,w){const T=s.consts,S=Op(s,i,4,m||null,fs(T,y));Lp(s,a,S,fs(T,w)),Ta(s,S);const M=S.tViews=Zm(2,S,u,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,S),M.queries=s.queries.embeddedTView(S)),S}(S,T,w,s,a,u,c,f,m):T.data[S];Hr(M,!1);const k=w[11].createComment("");kh(T,w,k,M),ui(k,w),Xm(w,w[S]=Mb(k,w,k,M)),du(M)&&Fp(T,w,M),null!=m&&Lh(w,M,y)}function y_(i,s=$e.Default){const a=Te();return null===a?bn(i,s):qo(Cn(),a,B(i),s)}function PE(i,s,a){const u=Te();return Gr(u,gs(),s)&&Qi(xt(),Yn(),u,i,s,u[11],a,!1),PE}function bI(i,s,a,u,c){const m=c?"class":"style";n_(i,a,s.inputs[m],m,u)}function II(i,s,a,u){const c=Te(),f=xt(),m=20+i,y=c[11],w=c[m]=Uv(y,s,ut.lFrame.currentNamespace),T=f.firstCreatePass?function(i,s,a,u,c,f,m){const y=s.consts,T=Op(s,i,2,c,fs(y,f));return Lp(s,a,T,fs(y,m)),null!==T.attrs&&$h(T,T.attrs,!1),null!==T.mergedAttrs&&$h(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(m,f,c,0,s,a,u):f.data[m];Hr(T,!0);const S=T.mergedAttrs;null!==S&&sh(y,w,S);const M=T.classes;null!==M&&qv(y,w,M);const k=T.styles;null!==k&&db(y,w,k),64!=(64&T.flags)&&kh(f,c,w,T),0===ut.lFrame.elementDepthCount&&ui(w,c),ut.lFrame.elementDepthCount++,du(T)&&(Fp(f,c,T),function(i,s,a){if(cc(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const m=i.data[f];m.contentQueries&&m.contentQueries(1,a[f],f)}}}(f,T,c)),null!==u&&Lh(c,T)}function TI(){let i=Cn();vu()?ut.lFrame.isParent=!1:(i=i.parent,Hr(i,!1));const s=i;ut.lFrame.elementDepthCount--;const a=xt();a.firstCreatePass&&(Ta(a,i),cc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function(i){return 0!=(16&i.flags)}(s)&&bI(a,s,Te(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function(i){return 0!=(32&i.flags)}(s)&&bI(a,s,Te(),s.stylesWithoutHost,!1)}function oN(i,s,a,u){II(i,s,a,u),TI()}function w_(){return Te()}function Hp(i){return!!i&&"function"==typeof i.then}function C_(i){return!!i&&"function"==typeof i.subscribe}const qp=C_;function Vl(i,s,a,u){const c=Te(),f=xt(),m=Cn();return function(i,s,a,u,c,f,m,y){const w=du(u),S=i.firstCreatePass&&Bb(i),M=s[8],k=oE(s);let Z=!0;if(3&u.type||y){const ie=bi(u,s),Pe=y?y(ie):ie,we=k.length,ze=y?pt=>y(an(pt[u.index])):u.index;if(On(a)){let pt=null;if(!y&&w&&(pt=function(i,s,a,u){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const m=c[f];if(m===a&&c[f+1]===u){const y=s[7],w=c[f+2];return y.length>w?y[w]:null}"string"==typeof m&&(f+=2)}return null}(i,s,c,u.index)),null!==pt)(pt.__ngLastListenerFn__||pt).__ngNextListenerFn__=f,pt.__ngLastListenerFn__=f,Z=!1;else{f=I_(u,s,M,f,!1);const Kt=a.listen(Pe,c,f);k.push(f,Kt),S&&S.push(c,ze,we,we+1)}}else f=I_(u,s,M,f,!0),Pe.addEventListener(c,f,m),k.push(f),S&&S.push(c,ze,we,m)}else f=I_(u,s,M,f,!1);const J=u.outputs;let he;if(Z&&null!==J&&(he=J[c])){const ie=he.length;if(ie)for(let Pe=0;Pe<ie;Pe+=2){const _r=s[he[Pe]][he[Pe+1]].subscribe(f),Mi=k.length;k.push(f,_r),S&&S.push(c,u.index,Mi,-(Mi+1))}}}(f,c,c[11],m,i,s,!!a,u),Vl}function AI(i,s,a,u){try{return!1!==a(u)}catch(c){return jb(i,c),!1}}function I_(i,s,a,u,c){return function f(m){if(m===Function)return u;const y=2&i.flags?ii(i.index,s):s;0==(32&s[2])&&jh(y);let w=AI(s,0,u,m),T=f.__ngNextListenerFn__;for(;T;)w=AI(s,0,T,m)&&w,T=T.__ngNextListenerFn__;return c&&!1===w&&(m.preventDefault(),m.returnValue=!1),w}}function SI(i=1){return function(i){return(ut.lFrame.contextLView=function(i,s){for(;i>0;)s=s[15],i--;return s}(i,ut.lFrame.contextLView))[8]}(i)}function T_(i,s,a,u,c){const f=Te(),m=Kh(f,s,a,u);return m!==Et&&Qi(xt(),Yn(),f,i,m,f[11],c,!1),T_}function D_(i,s,a,u,c){const f=i[a+1],m=null===s;let y=u?_o(f):li(f),w=!1;for(;0!==y&&(!1===w||m);){const S=i[y+1];BI(i[y],s)&&(w=!0,i[y+1]=u?Zr(S):zv(S)),y=u?_o(S):li(S)}w&&(i[a+1]=u?zv(f):Zr(f))}function BI(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&go(i,s)>=0}const Lr={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function jI(i){return i.substring(Lr.key,Lr.keyEnd)}function A_(i,s){const a=Lr.textEnd;return a===s?-1:(s=Lr.keyEnd=function(i,s,a){for(;s<a&&i.charCodeAt(s)>32;)s++;return s}(i,Lr.key=s,a),Ya(i,s,a))}function Ya(i,s,a){for(;s<a&&i.charCodeAt(s)<=32;)s++;return s}function ci(i,s){return function(i,s,a,u){const c=Te(),f=xt(),m=Cr(2);f.firstUpdatePass&&rf(f,i,m,u),s!==Et&&Gr(c,m,s)&&x_(f,f.data[br()],c,c[11],i,c[m+1]=function(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=te(Yo(i)))),i}(s,a),u,m)}(i,s,null,!0),ci}function ZI(i){!function(i,s,a,u){const c=xt(),f=Cr(2);c.firstUpdatePass&&rf(c,null,f,u);const m=Te();if(a!==Et&&Gr(m,f,a)){const y=c.data[br()];if(sf(y,u)&&!GI(c,f)){let w=u?y.classesWithoutHost:y.stylesWithoutHost;null!==w&&(a=ne(w,a||"")),bI(c,y,m,a,u)}else!function(i,s,a,u,c,f,m,y){c===Et&&(c=G);let w=0,T=0,S=0<c.length?c[0]:null,M=0<f.length?f[0]:null;for(;null!==S||null!==M;){const k=w<c.length?c[w+1]:void 0,Z=T<f.length?f[T+1]:void 0;let he,J=null;S===M?(w+=2,T+=2,k!==Z&&(J=M,he=Z)):null===M||null!==S&&S<M?(w+=2,J=S):(T+=2,J=M,he=Z),null!==J&&x_(i,s,a,u,J,he,m,y),S=w<c.length?c[w]:null,M=T<f.length?f[T]:null}}(c,y,m,m[11],m[f+1],m[f+1]=function(i,s,a){if(null==a||""===a)return G;const u=[],c=Yo(a);if(Array.isArray(c))for(let f=0;f<c.length;f++)i(u,c[f],!0);else if("object"==typeof c)for(const f in c)c.hasOwnProperty(f)&&i(u,f,c[f]);else"string"==typeof c&&s(u,c);return u}(i,s,a),u,f)}}(Jn,zr,i,!0)}function zr(i,s){for(let a=function(i){return function(i){Lr.key=0,Lr.keyEnd=0,Lr.value=0,Lr.valueEnd=0,Lr.textEnd=i.length}(i),A_(i,Ya(i,0,Lr.textEnd))}(s);a>=0;a=A_(s,a))Jn(i,jI(s),!0)}function GI(i,s){return s>=i.expandoStartIndex}function rf(i,s,a,u){const c=i.data;if(null===c[a+1]){const f=c[br()],m=GI(i,a);sf(f,u)&&null===s&&!m&&(s=!1),s=function(i,s,a,u){const c=function(i){const s=ut.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=u?s.residualClasses:s.residualStyles;if(null===c)0===(u?s.classBindings:s.styleBindings)&&(a=Zp(a=UE(null,i,s,a,u),s.attrs,u),f=null);else{const m=s.directiveStylingLast;if(-1===m||i[m]!==c)if(a=UE(c,i,s,a,u),null===f){let w=function(i,s,a){const u=a?s.classBindings:s.styleBindings;if(0!==li(u))return i[_o(u)]}(i,s,u);void 0!==w&&Array.isArray(w)&&(w=UE(null,i,s,w[1],u),w=Zp(w,s.attrs,u),function(i,s,a,u){i[_o(a?s.classBindings:s.styleBindings)]=u}(i,s,u,w))}else f=function(i,s,a){let u;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)u=Zp(u,i[f].hostAttrs,a);return Zp(u,s.attrs,a)}(i,s,u)}return void 0!==f&&(u?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,u),function(i,s,a,u,c,f){let m=f?s.classBindings:s.styleBindings,y=_o(m),w=li(m);i[u]=a;let S,T=!1;if(Array.isArray(a)){const M=a;S=M[1],(null===S||go(M,S)>0)&&(T=!0)}else S=a;if(c)if(0!==w){const k=_o(i[y+1]);i[u+1]=Lm(k,y),0!==k&&(i[k+1]=Ha(i[k+1],u)),i[y+1]=function(i,s){return 131071&i|s<<17}(i[y+1],u)}else i[u+1]=Lm(y,0),0!==y&&(i[y+1]=Ha(i[y+1],u)),y=u;else i[u+1]=Lm(w,0),0===y?y=u:i[w+1]=Ha(i[w+1],u),w=u;T&&(i[u+1]=zv(i[u+1])),D_(i,S,u,!0),D_(i,S,u,!1),function(i,s,a,u,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&go(f,s)>=0&&(a[u+1]=Zr(a[u+1]))}(s,S,i,u,f),m=Lm(y,w),f?s.classBindings=m:s.styleBindings=m}(c,f,s,a,m,u)}}function UE(i,s,a,u,c){let f=null;const m=a.directiveEnd;let y=a.directiveStylingLast;for(-1===y?y=a.directiveStart:y++;y<m&&(f=s[y],u=Zp(u,f.hostAttrs,c),f!==i);)y++;return null!==i&&(a.directiveStylingLast=y),u}function Zp(i,s,a){const u=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const m=s[f];"number"==typeof m?c=m:c===u&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),Jn(i,m,!!a||s[++f]))}return void 0===i?null:i}function x_(i,s,a,u,c,f,m,y){if(!(3&s.type))return;const w=i.data,T=w[y+1];Vu(function(i){return 1==(1&i)}(T)?Gp(w,s,a,c,li(T),m):void 0)||(Vu(f)||function(i){return 2==(2&i)}(T)&&(f=Gp(w,null,a,c,y,m)),function(i,s,a,u,c){const f=On(i);if(s)c?f?i.addClass(a,u):a.classList.add(u):f?i.removeClass(a,u):a.classList.remove(u);else{let m=-1===u.indexOf("-")?void 0:$a.DashCase;if(null==c)f?i.removeStyle(a,u,m):a.style.removeProperty(u);else{const y="string"==typeof c&&c.endsWith("!important");y&&(c=c.slice(0,-10),m|=$a.Important),f?i.setStyle(a,u,c,m):a.style.setProperty(u,c,y?"important":"")}}}(u,m,wa(br(),a),c,f))}function Gp(i,s,a,u,c,f){const m=null===s;let y;for(;c>0;){const w=i[c],T=Array.isArray(w),S=T?w[1]:w,M=null===S;let k=a[c+1];k===Et&&(k=M?G:void 0);let Z=M?Tr(k,u):S===u?k:void 0;if(T&&!Vu(Z)&&(Z=Tr(w,u)),Vu(Z)&&(y=Z,m))return y;const J=i[c+1];c=m?_o(J):li(J)}if(null!==s){let w=f?s.residualClasses:s.residualStyles;null!=w&&(y=Tr(w,u))}return y}function Vu(i){return void 0!==i}function sf(i,s){return 0!=(i.flags&(s?16:32))}function QI(i,s=""){const a=Te(),u=xt(),c=i+20,f=u.firstCreatePass?Op(u,c,1,s,null):u.data[c],m=a[c]=function(i,s){return On(i)?i.createText(s):i.createTextNode(s)}(a[11],s);kh(u,a,m,f),Hr(f,!1)}function BE(i){return Ul("",i,""),BE}function Ul(i,s,a){const u=Te(),c=Kh(u,i,s,a);return c!==Et&&Ou(u,br(),c),Ul}function t0(i,s,a){const u=Te();return Gr(u,gs(),s)&&Qi(xt(),Yn(),u,i,s,u[11],a,!0),t0}const Eo=void 0;var wN=["en",[["a","p"],["AM","PM"],Eo],[["AM","PM"],Eo,Eo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Eo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Eo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Eo,"{1} 'at' {0}",Eo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(i){const s=Math.floor(Math.abs(i)),a=i.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let of={};function ld(i){const s=function(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=pT(s);if(a)return a;const u=s.split("-")[0];if(a=pT(u),a)return a;if("en"===u)return wN;throw new Error(`Missing locale data for the locale "${i}".`)}function fT(i){return ld(i)[ct.PluralCase]}function pT(i){return i in of||(of[i]=Yt.ng&&Yt.ng.common&&Yt.ng.common.locales&&Yt.ng.common.locales[i]),of[i]}var ct=(()=>((ct=ct||{})[ct.LocaleId=0]="LocaleId",ct[ct.DayPeriodsFormat=1]="DayPeriodsFormat",ct[ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",ct[ct.DaysFormat=3]="DaysFormat",ct[ct.DaysStandalone=4]="DaysStandalone",ct[ct.MonthsFormat=5]="MonthsFormat",ct[ct.MonthsStandalone=6]="MonthsStandalone",ct[ct.Eras=7]="Eras",ct[ct.FirstDayOfWeek=8]="FirstDayOfWeek",ct[ct.WeekendRange=9]="WeekendRange",ct[ct.DateFormat=10]="DateFormat",ct[ct.TimeFormat=11]="TimeFormat",ct[ct.DateTimeFormat=12]="DateTimeFormat",ct[ct.NumberSymbols=13]="NumberSymbols",ct[ct.NumberFormats=14]="NumberFormats",ct[ct.CurrencyCode=15]="CurrencyCode",ct[ct.CurrencySymbol=16]="CurrencySymbol",ct[ct.CurrencyName=17]="CurrencyName",ct[ct.Currencies=18]="Currencies",ct[ct.Directionality=19]="Directionality",ct[ct.PluralCase=20]="PluralCase",ct[ct.ExtraData=21]="ExtraData",ct))();const zp="en-US";let mT=zp;function R_(i){tn(i,"Expected localeId to be defined"),"string"==typeof i&&(mT=i.toLowerCase().replace(/_/g,"-"))}function Hl(i,s,a,u,c){if(i=B(i),Array.isArray(i))for(let f=0;f<i.length;f++)Hl(i[f],s,a,u,c);else{const f=xt(),m=Te();let y=qh(i)?i:B(i.provide),w=Zb(i);const T=Cn(),S=1048575&T.providerIndexes,M=T.directiveStart,k=T.providerIndexes>>20;if(qh(i)||!i.multi){const Z=new hl(w,c,y_),J=w0(y,s,c?S:S+k,M);-1===J?(Ii(ho(T,m),f,y),fd(f,i,s.length),s.push(y),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Z),m.push(Z)):(a[J]=Z,m[J]=Z)}else{const Z=w0(y,s,S+k,M),J=w0(y,s,S,S+k),he=Z>=0&&a[Z],ie=J>=0&&a[J];if(c&&!ie||!c&&!he){Ii(ho(T,m),f,y);const Pe=function(i,s,a,u,c){const f=new hl(i,a,y_);return f.multi=[],f.index=s,f.componentProviders=0,df(f,c,u&&!a),f}(c?tg:C0,a.length,c,u,w);!c&&ie&&(a[J].providerFactory=Pe),fd(f,i,s.length,0),s.push(y),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Pe),m.push(Pe)}else fd(f,i,Z>-1?Z:J,df(a[c?J:Z],w,!c&&u));!c&&u&&ie&&a[J].componentProviders++}}}function fd(i,s,a,u){const c=qh(s);if(c||function(i){return!!i.useClass}(s)){const m=(s.useClass||s).prototype.ngOnDestroy;if(m){const y=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const w=y.indexOf(a);-1===w?y.push(a,[u,m]):y[w+1].push(u,m)}else y.push(a,m)}}}function df(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function w0(i,s,a,u){for(let c=a;c<u;c++)if(s[c]===i)return c;return-1}function C0(i,s,a,u){return b0(this.multi,[])}function tg(i,s,a,u){const c=this.multi;let f;if(this.providerFactory){const m=this.providerFactory.componentProviders,y=Ut(a,a[1],this.providerFactory.index,u);f=y.slice(0,m),b0(c,f);for(let w=m;w<y.length;w++)f.push(y[w])}else f=[],b0(c,f);return f}function b0(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function NT(i,s=[]){return a=>{a.providersResolver=(u,c)=>function(i,s,a){const u=xt();if(u.firstCreatePass){const c=ds(i);Hl(a,u.data,u.blueprint,c,!0),Hl(s,u.data,u.blueprint,c,!1)}}(u,c?c(i):i,s)}}class RT{}const PT="ngComponent";class UN{resolveComponentFactory(s){throw function(i){const s=Error(`No component factory found for ${te(i)}. Did you add it to @NgModule.entryComponents?`);return s[PT]=i,s}(s)}}let Bu=(()=>{class i{}return i.NULL=new UN,i})();function pd(...i){}function ju(i,s){return new eu(bi(i,s))}const I0=function(){return ju(Cn(),Te())};let eu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=I0,i})();function kT(i){return i instanceof eu?i.nativeElement:i}class U_{}let HN=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>T0(),i})();const T0=function(){const i=Te(),a=ii(Cn().index,i);return function(i){return i[11]}(ks(a)?a:i)};let ff=(()=>{class i{}return i.\u0275prov=on({token:i,providedIn:"root",factory:()=>null}),i})();class pf{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const $u=new pf("12.2.11");class gd{constructor(){}supports(s){return Bp(s)}create(s){return new ZN(s)}}const ql=(i,s)=>s;class ZN{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||ql}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,u=this._removalsHead,c=0,f=null;for(;a||u;){const m=!u||a&&a.currentIndex<rg(u,c,f)?a:u,y=rg(m,c,f),w=m.currentIndex;if(m===u)c--,u=u._nextRemoved;else if(a=a._next,null==m.previousIndex)c++;else{f||(f=[]);const T=y-c,S=w-c;if(T!=S){for(let k=0;k<T;k++){const Z=k<f.length?f[k]:f[k]=0,J=Z+k;S<=J&&J<T&&(f[k]=Z+1)}f[m.previousIndex]=S-T}}y!==w&&s(m,y,w)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Bp(s))throw new Error(`Error trying to diff '${te(s)}'. Only arrays and iterables are allowed`);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,m,a=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let y=0;y<this.length;y++)f=s[y],m=this._trackByFn(y,f),null!==a&&Object.is(a.trackById,m)?(u&&(a=this._verifyReinsertion(a,f,m,y)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,m,y),u=!0),a=a._next}else c=0,function(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[Gh()]();let u;for(;!(u=a.next()).done;)s(u.value)}}(s,y=>{m=this._trackByFn(c,y),null!==a&&Object.is(a.trackById,m)?(u&&(a=this._verifyReinsertion(a,y,m,c)),Object.is(a.item,y)||this._addIdentityChange(a,y)):(a=this._mismatch(a,y,m,c),u=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,u,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new ng(a,u),f,c),s}_verifyReinsertion(s,a,u,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,u),this._addToMoves(s,u),s}_moveAfter(s,a,u){return this._unlink(s),this._insertAfter(s,a,u),this._addToMoves(s,u),s}_addAfter(s,a,u){return this._insertAfter(s,a,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,u){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new FT),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,u=s._next;return null===a?this._itHead=u:a._next=u,null===u?this._itTail=a:u._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FT),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class ng{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class GN{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===a||a<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const a=s._prevDup,u=s._nextDup;return null===a?this._head=u:a._nextDup=u,null===u?this._tail=a:u._prevDup=a,null===this._head}}class FT{constructor(){this.map=new Map}put(s){const a=s.trackById;let u=this.map.get(a);u||(u=new GN,this.map.set(a,u)),u.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function rg(i,s,a){const u=i.previousIndex;if(null===u)return u;let c=0;return a&&u<a.length&&(c=a[u]),u+s+c}class gf{constructor(){}supports(s){return s instanceof Map||Wh(s)}create(){return new LT}}class LT{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||Wh(s)))throw new Error(`Error trying to diff '${te(s)}'. Only maps and objects are allowed`)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,u),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,u);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let u=a;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const u=s._prev;return a._next=s,a._prev=u,s._prev=a,u&&(u._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,m=c._next;return f&&(f._next=m),m&&(m._prev=f),c._next=null,c._prev=null,c}const u=new B_(s);return this._records.set(s,u),u.currentValue=a,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(u=>a(s[u],u))}}class B_{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Zl(){return new mf([new gd])}let mf=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(null!=u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Zl()),deps:[[i,new kr,new ka]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(null!=u)return u;throw new Error(`Cannot find a differ supporting object '${a}' of type '${function(i){return i.name||typeof i}(a)}'`)}}return i.\u0275prov=on({token:i,providedIn:"root",factory:Zl}),i})();function Un(){return new bs([new gf])}let bs=(()=>{class i{constructor(a){this.factories=a}static create(a,u){if(u){const c=u.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:u=>i.create(a,u||Un()),deps:[[i,new kr,new ka]]}}find(a){const u=this.factories.find(c=>c.supports(a));if(u)return u;throw new Error(`Cannot find a differ supporting object '${a}'`)}}return i.\u0275prov=on({token:i,providedIn:"root",factory:Un}),i})();function Gl(i,s,a,u,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&u.push(an(f)),Mr(f))for(let y=10;y<f.length;y++){const w=f[y],T=w[1].firstChild;null!==T&&Gl(w[1],w,T,u)}const m=a.type;if(8&m)Gl(i,s,a.child,u);else if(32&m){const y=Dm(a,s);let w;for(;w=y();)u.push(w)}else if(16&m){const y=jv(s,a);if(Array.isArray(y))u.push(...y);else{const w=Np(s[16]);Gl(w[1],w,y,u,!0)}}a=c?a.projectionNext:a.next}return u}class md{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Gl(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(Mr(s)){const a=s[8],u=a?a.indexOf(this):-1;u>-1&&(Nm(s,u),Di(a,u))}this._attachedToViewContainer=!1}ib(this._lView[1],this._lView)}onDestroy(s){mx(this._lView[1],this._lView,null,s)}markForCheck(){jh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){e_(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(i,s,a){lo(!0);try{e_(i,s,a)}finally{lo(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var s;this._appRef=null,Yc(this._lView[1],s=this._lView,s[11],2,null,null)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=s}}class VT extends md{constructor(s){super(s),this._view=s}detectChanges(){Lb(this._view)}checkNoChanges(){!function(i){lo(!0);try{Lb(i)}finally{lo(!1)}}(this._view)}get context(){return null}}const UT=function(i){return function(i,s,a){if(Ju(i)&&!a){const u=ii(i.index,s);return new md(u,u)}return 47&i.type?new md(s[16],s):null}(Cn(),Te(),16==(16&i))};let Wl=(()=>{class i{}return i.__NG_ELEMENT_ID__=UT,i})();const BT=[new gf],zN=new mf([new gd]),KN=new bs(BT),QN=function(){return $_(Cn(),Te())};let ig=(()=>{class i{}return i.__NG_ELEMENT_ID__=QN,i})();const JN=ig,jT=class extends JN{constructor(s,a,u){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=u}createEmbeddedView(s){const a=this._declarationTContainer.tViews,u=Hm(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);u[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(u[19]=f.createEmbeddedView(a)),kl(a,u,s),new md(u)}};function $_(i,s){return 4&i.type?new jT(s,i,ju(i,s)):null}class _d{}class HT{}const eR=function(){return R0(Cn(),Te())};let yd=(()=>{class i{}return i.__NG_ELEMENT_ID__=eR,i})();const qT=yd,sg=class extends qT{constructor(s,a,u){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=u}get element(){return ju(this._hostTNode,this._hostLView)}get injector(){return new ys(this._hostTNode,this._hostLView)}get parentInjector(){const s=Qe(this._hostTNode,this._hostLView);if(xc(s)){const a=Us(s,this._hostLView),u=qi(s);return new ys(a[1].data[u+8],a)}return new ys(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=ZT(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,u){const c=s.createEmbeddedView(a||{});return this.insert(c,u),c}createComponent(s,a,u,c,f){const m=u||this.parentInjector;if(!f&&null==s.ngModule&&m){const w=m.get(_d,null);w&&(f=w)}const y=s.create(m,c,void 0,f);return this.insert(y.hostView,a),y}insert(s,a){const u=s._lView,c=u[1];if(Mr(u[3])){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const M=u[3],k=new sg(M,M[6],M[3]);k.detach(k.indexOf(s))}}const f=this._adjustIndex(a),m=this._lContainer;!function(i,s,a,u){const c=10+u,f=a.length;u>0&&(a[c-1][4]=s),u<f-10?(s[4]=a[c],Du(a,10+u,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const y=s[19];null!==y&&y.insertView(i),s[2]|=128}(c,u,m,f);const y=$v(f,m),w=u[11],T=Rm(w,m[7]);return null!==T&&function(i,s,a,u,c,f){u[0]=c,u[6]=s,Yc(i,u,a,1,c,f)}(c,m[6],w,u,T,y),s.attachToViewContainerRef(),Du(og(m),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=ZT(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),u=Nm(this._lContainer,a);u&&(Di(og(this._lContainer),a),ib(u[1],u))}detach(s){const a=this._adjustIndex(s,-1),u=Nm(this._lContainer,a);return u&&null!=Di(og(this._lContainer),a)?new md(u):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function ZT(i){return i[8]}function og(i){return i[8]||(i[8]=[])}function R0(i,s){let a;const u=s[i.index];if(Mr(u))a=u;else{let c;if(8&i.type)c=an(u);else{const f=s[11];c=f.createComment("");const m=bi(i,s);xl(f,Rm(f,m),c,function(i,s){return On(i)?i.nextSibling(s):s.nextSibling}(f,m),!1)}s[i.index]=a=Mb(u,s,c,i),Xm(s,a)}return new sg(a,i,s)}const bf={};class uD extends Bu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=dn(s);return new sw(a,this.ngModule)}}function lD(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}const cD=new kn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>QC});class sw extends RT{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=s.selectors.map(XS).join(","),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return lD(this.componentDef.inputs)}get outputs(){return lD(this.componentDef.outputs)}create(s,a,u,c){const f=(c=c||this.ngModule)?function(i,s){return{get:(a,u,c)=>{const f=i.get(a,bf,c);return f!==bf||u===bf?f:s.get(a,u,c)}}}(s,c.injector):s,m=f.get(U_,wr),y=f.get(ff,null),w=m.createRenderer(null,this.componentDef),T=this.componentDef.selectors[0][0]||"div",S=u?function(i,s,a){if(On(i))return i.selectRootElement(s,a===Fe.ShadowDom);let u="string"==typeof s?i.querySelector(s):s;return u.textContent="",u}(w,u,this.componentDef.encapsulation):Uv(m.createRenderer(null,this.componentDef),T,function(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(T)),M=this.componentDef.onPush?576:528,k=function(i,s){return{components:[],scheduler:i||QC,clean:Tx,playerHandler:s||null,flags:0}}(),Z=Zm(0,null,null,1,0,null,null,null,null,null),J=Hm(null,Z,k,M,null,null,m,w,y,f);let he,ie;Cu(J);try{const Pe=function(i,s,a,u,c,f){const m=a[1];a[20]=i;const w=Op(m,20,2,"#host",null),T=w.mergedAttrs=s.hostAttrs;null!==T&&($h(w,T,!0),null!==i&&(sh(c,i,T),null!==w.classes&&qv(c,i,w.classes),null!==w.styles&&db(c,i,w.styles)));const S=u.createRenderer(i,s),M=Hm(a,Db(s),null,s.onPush?64:16,a[20],w,u,S,f||null,null);return m.firstCreatePass&&(Ii(ho(w,a),m,s.type),Uh(m,w),wx(w,a.length,1)),Xm(a,M),a[20]=M}(S,this.componentDef,J,m,w);if(S)if(u)sh(w,S,["ng-version",$u.full]);else{const{attrs:we,classes:ze}=function(i){const s=[],a=[];let u=1,c=2;for(;u<i.length;){let f=i[u];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++u]):8===c&&a.push(f);else{if(!Xo(c))break;c=f}u++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);we&&sh(w,S,we),ze&&ze.length>0&&qv(w,S,ze.join(" "))}if(ie=vc(Z,20),void 0!==a){const we=ie.projection=[];for(let ze=0;ze<this.ngContentSelectors.length;ze++){const pt=a[ze];we.push(null!=pt?Array.from(pt):null)}}he=function(i,s,a,u,c){const f=a[1],m=function(i,s,a){const u=Cn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Bh(i,u,s,Fh(i,s,1,null),a));const c=Ut(s,i,u.directiveStart,u);ui(c,s);const f=bi(u,s);return f&&ui(f,s),c}(f,a,s);if(u.components.push(m),i[8]=m,c&&c.forEach(w=>w(m,s)),s.contentQueries){const w=Cn();s.contentQueries(1,m,w.directiveStart)}const y=Cn();return!f.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(co(y.index),nE(a[1],y,0,y.directiveStart,y.directiveEnd,s),Ym(s,m)),m}(Pe,this.componentDef,J,k,[SO]),kl(Z,J,null)}finally{Bo()}return new ow(this.componentType,he,ju(ie,J),J,ie)}}class ow extends class{}{constructor(s,a,u,c,f){super(),this.location=u,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new VT(c),this.componentType=s}get injector(){return new ys(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}const If=new Map;class bR extends _d{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uD(this);const u=xn(s),c=s[at]||null;c&&R_(c),this._bootstrapComponents=ja(u.bootstrap),this._r3Injector=Sx(s,a,[{provide:_d,useValue:this},{provide:Bu,useValue:this.componentFactoryResolver}],te(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=Zn.THROW_IF_NOT_FOUND,u=$e.Default){return s===Zn||s===_d||s===Hh?this:this._r3Injector.get(s,a,u)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class uw extends HT{constructor(s){super(),this.moduleType=s,null!==xn(s)&&function(i){const s=new Set;!function a(u){const c=xn(u,!0),f=c.id;null!==f&&(function(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${te(s)} vs ${te(s.name)}`)}(f,If.get(f),u),If.set(f,u));const m=ja(c.imports);for(const y of m)s.has(y)||(s.add(y),a(y))}(i)}(s)}create(s){return new bR(this.moduleType,s)}}function pD(i,s,a){const u=function(){const i=ut.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}()+i,c=Te();return c[u]===Et?function(i,s,a){return i[s]=a}(c,u,a?s.call(a):s()):function(i,s){return i[s]}(c,u)}function Si(i){return s=>{setTimeout(i,void 0,s)}}const Ys=class extends d.xQ{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,u){var c,f,m;let y=s,w=a||(()=>null),T=u;if(s&&"object"==typeof s){const M=s;y=null===(c=M.next)||void 0===c?void 0:c.bind(M),w=null===(f=M.error)||void 0===f?void 0:f.bind(M),T=null===(m=M.complete)||void 0===m?void 0:m.bind(M)}this.__isAsync&&(w=Si(w),y&&(y=Si(y)),T&&(T=Si(T)));const S=super.subscribe({next:y,error:w,complete:T});return s instanceof H.w&&s.add(S),S}};function Ql(){return this._results[Gh()]()}class Id{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Gh(),u=Id.prototype;u[a]||(u[a]=Ql)}get changes(){return this._changes||(this._changes=new Ys)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const u=this;u.dirty=!1;const c=Gi(s);(this._changesDetected=!function(i,s,a){if(i.length!==s.length)return!1;for(let u=0;u<i.length;u++){let c=i[u],f=s[u];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(u._results,c,a))&&(u._results=c,u.length=c.length,u.last=c[this.length-1],u.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class iy{constructor(s){this.queryList=s,this.matches=null}clone(){return new iy(this.queryList)}setDirty(){this.queryList.setDirty()}}class Hu{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const u=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<u;f++){const m=a.getByIndex(f);c.push(this.queries[m.indexInDeclarationView].clone())}return new Hu(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ao(s,a).matches&&this.queries[a].setDirty()}}class RR{constructor(s,a,u=null){this.predicate=s,this.flags=a,this.read=u}}class _w{constructor(s=[]){this.queries=s}elementStart(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let u=0;u<this.length;u++){const c=null!==a?a.length:0,f=this.getByIndex(u).embeddedTView(s,c);f&&(f.indexInDeclarationView=u,null!==a?a.push(f):a=[f])}return null!==a?new _w(a):null}template(s,a){for(let u=0;u<this.queries.length;u++)this.queries[u].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class yw{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new yw(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let u=s.parent;for(;null!==u&&8&u.type&&u.index!==a;)u=u.parent;return a===(null!==u?u.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const u=this.metadata.predicate;if(Array.isArray(u))for(let c=0;c<u.length;c++){const f=u[c];this.matchTNodeWithReadOption(s,a,vw(a,f)),this.matchTNodeWithReadOption(s,a,ml(a,s,f,!1,!1))}else u===ig?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,ml(a,s,u,!1,!1))}matchTNodeWithReadOption(s,a,u){if(null!==u){const c=this.metadata.read;if(null!==c)if(c===eu||c===yd||c===ig&&4&a.type)this.addMatch(a.index,-2);else{const f=ml(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,u)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function vw(i,s){const a=i.localNames;if(null!==a)for(let u=0;u<a.length;u+=2)if(a[u]===s)return a[u+1];return null}function MR(i,s,a,u){return-1===a?function(i,s){return 11&i.type?ju(i,s):4&i.type?$_(i,s):null}(s,i):-2===a?function(i,s,a){return a===eu?ju(s,i):a===ig?$_(s,i):a===yd?R0(s,i):void 0}(i,s,u):Ut(i,i[1],a,s)}function vD(i,s,a,u){const c=s[19].queries[u];if(null===c.matches){const f=i.data,m=a.matches,y=[];for(let w=0;w<m.length;w+=2){const T=m[w];y.push(T<0?null:MR(s,f[T],m[w+1],a.metadata.read))}c.matches=y}return c.matches}function Sf(i,s,a,u){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const m=vD(i,s,c,a);for(let y=0;y<f.length;y+=2){const w=f[y];if(w>0)u.push(m[y/2]);else{const T=f[y+1],S=s[-w];for(let M=10;M<S.length;M++){const k=S[M];k[17]===k[3]&&Sf(k[1],k,T,u)}if(null!==S[9]){const M=S[9];for(let k=0;k<M.length;k++){const Z=M[k];Sf(Z[1],Z,T,u)}}}}}return u}function vg(i){const s=Te(),a=xt(),u=Ic();Uo(u+1);const c=Ao(a,u);if(i.dirty&&nl(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?Sf(a,s,u,[]):vD(a,s,c,u);i.reset(f,kT),i.notifyOnChanges()}return!0}return!1}function sy(i,s,a,u){const c=xt();if(c.firstCreatePass){const f=Cn();(function(i,s,a){null===i.queries&&(i.queries=new _w),i.queries.track(new yw(s,a))})(c,new RR(s,a,u),f.index),function(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function(i,s,a){const u=new Id(4==(4&a));mx(i,s,u,u.destroy),null===s[19]&&(s[19]=new Hu),s[19].queries.push(new iy(u))}(c,Te(),a)}function Ew(){return i=Te(),s=Ic(),i[19].queries[s].queryList;var i,s}function Ao(i,s){return i.queries.getByIndex(s)}const dy=new kn("Application Initializer");let Nf=(()=>{class i{constructor(a){this.appInits=a,this.resolve=pd,this.reject=pd,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,c)=>{this.resolve=u,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Hp(f))a.push(f);else if(qp(f)){const m=new Promise((y,w)=>{f.subscribe({complete:y,error:w})});a.push(m)}}Promise.all(a).then(()=>{u()}).catch(c=>{this.reject(c)}),0===a.length&&u(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(bn(dy,8))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();const HD=new kn("AppId"),qD={provide:HD,useFactory:function(){return`${ZD()}${ZD()}${ZD()}`},deps:[]};function ZD(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bg=new kn("Platform Initializer"),GD=new kn("Platform ID"),WD=new kn("appBootstrapListener");let zD=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();const hy=new kn("LocaleId"),KD=new kn("DefaultCurrencyCode");class oP{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}const Aw=function(i){return new uw(i)},aP=Aw,uP=function(i){return Promise.resolve(Aw(i))},YD=function(i){const s=Aw(i),u=ja(xn(i).declarations).reduce((c,f)=>{const m=dn(f);return m&&c.push(new sw(m)),c},[]);return new oP(s,u)},lP=YD,cP=function(i){return Promise.resolve(YD(i))};let Ig=(()=>{class i{constructor(){this.compileModuleSync=aP,this.compileModuleAsync=uP,this.compileModuleAndAllComponentsSync=lP,this.compileModuleAndAllComponentsAsync=cP}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();const fP=(()=>Promise.resolve(0))();function xw(i){"undefined"==typeof Zone?fP.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class Qs{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ys(!1),this.onMicrotaskEmpty=new Ys(!1),this.onStable=new Ys(!1),this.onError=new Ys(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!u&&a,c.shouldCoalesceRunChangeDetection=u,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function(){let i=Yt.requestAnimationFrame,s=Yt.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function(i){const s=()=>{!function(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Yt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Rw(i),i.isCheckStableRunning=!0,Nw(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Rw(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,u,c,f,m,y)=>{try{return QD(i),a.invokeTask(c,f,m,y)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),JD(i)}},onInvoke:(a,u,c,f,m,y,w)=>{try{return QD(i),a.invoke(c,f,m,y,w)}finally{i.shouldCoalesceRunChangeDetection&&s(),JD(i)}},onHasTask:(a,u,c,f)=>{a.hasTask(c,f),u===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,Rw(i),Nw(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,u,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,u){return this._inner.run(s,a,u)}runTask(s,a,u,c){const f=this._inner,m=f.scheduleEventTask("NgZoneEvent: "+c,s,gP,pd,pd);try{return f.runTask(m,a,u)}finally{f.cancelTask(m)}}runGuarded(s,a,u){return this._inner.runGuarded(s,a,u)}runOutsideAngular(s){return this._outer.run(s)}}const gP={};function Nw(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Rw(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function QD(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function JD(i){i._nesting--,Nw(i)}class yP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ys,this.onMicrotaskEmpty=new Ys,this.onStable=new Ys,this.onError=new Ys}run(s,a,u){return s.apply(a,u)}runGuarded(s,a,u){return s.apply(a,u)}runOutsideAngular(s){return s()}runTask(s,a,u,c){return s.apply(a,u)}}let XD=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qs.assertNotInAngularZone(),xw(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())xw(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(a)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,u,c){let f=-1;u&&u>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==f),a(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,u,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,u,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,u,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(bn(Qs))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})(),eA=(()=>{class i{constructor(){this._applications=new Map,qu.addToWindow(this)}registerApplication(a,u){this._applications.set(a,u)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,u=!0){return qu.findTestabilityInTree(this,a,u)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();class vP{addToWindow(s){}findTestabilityInTree(s,a,u){return null}}function EP(i){qu=i}let qu=new vP,tA=!0,nA=!1;function Pw(){return nA=!0,tA}function wP(){if(nA)throw new Error("Cannot enable prod mode after platform setup.");tA=!1}let la;const py=new kn("AllowMultipleToken");class It{constructor(s,a){this.name=s,this.token=a}}function my(i,s,a=[]){const u=`Platform: ${s}`,c=new kn(u);return(f=[])=>{let m=_y();if(!m||m.injector.get(py,!1))if(i)i(a.concat(f).concat({provide:c,useValue:!0}));else{const y=a.concat(f).concat({provide:c,useValue:!0},{provide:Vp,useValue:"platform"});!function(i){if(la&&!la.destroyed&&!la.injector.get(py,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");la=i.get(sA);const s=i.get(bg,null);s&&s.forEach(a=>a())}(Zn.create({providers:y,name:u}))}return function(i){const s=_y();if(!s)throw new Error("No platform exists!");if(!s.injector.get(i,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return s}(c)}}function _y(){return la&&!la.destroyed?la:null}let sA=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,u){const y=function(i,s){let a;return a="noop"===i?new yP:("zone.js"===i?void 0:i)||new Qs({enableLongStackTrace:Pw(),shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(u?u.ngZone:void 0,{ngZoneEventCoalescing:u&&u.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:u&&u.ngZoneRunCoalescing||!1}),w=[{provide:Qs,useValue:y}];return y.run(()=>{const T=Zn.create({providers:w,parent:this.injector,name:a.moduleType.name}),S=a.create(T),M=S.injector.get(Mh,null);if(!M)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return y.runOutsideAngular(()=>{const k=y.onError.subscribe({next:Z=>{M.handleError(Z)}});S.onDestroy(()=>{Ur(this._modules,S),k.unsubscribe()})}),function(i,s,a){try{const u=a();return Hp(u)?u.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):u}catch(u){throw s.runOutsideAngular(()=>i.handleError(u)),u}}(M,y,()=>{const k=S.injector.get(Nf);return k.runInitializers(),k.donePromise.then(()=>(R_(S.injector.get(hy,zp)||zp),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,u=[]){const c=Yr({},u);return function(i,s,a){const u=new uw(a);return Promise.resolve(u)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const u=a.injector.get(Xl);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>u.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new Error(`The module ${te(a.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);a.instance.ngDoBootstrap(u)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(bn(Zn))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();function Yr(i,s){return Array.isArray(s)?s.reduce(Yr,i):Object.assign(Object.assign({},i),s)}let Xl=(()=>{class i{constructor(a,u,c,f,m){this._zone=a,this._injector=u,this._exceptionHandler=c,this._componentFactoryResolver=f,this._initStatus=m,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const y=new O.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new O.y(T=>{let S;this._zone.runOutsideAngular(()=>{S=this._zone.onStable.subscribe(()=>{Qs.assertNotInAngularZone(),xw(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Qs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{S.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ce.T)(y,w.pipe((0,ue.B)()))}bootstrap(a,u){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let c;c=a instanceof RT?a:this._componentFactoryResolver.resolveComponentFactory(a),this.componentTypes.push(c.componentType);const f=function(i){return i.isBoundToModule}(c)?void 0:this._injector.get(_d),y=c.create(Zn.NULL,[],u||c.selector,f),w=y.location.nativeElement,T=y.injector.get(XD,null),S=T&&y.injector.get(eA);return T&&S&&S.registerApplication(w,T),y.onDestroy(()=>{this.detachView(y.hostView),Ur(this.components,y),S&&S.unregisterApplication(w)}),this._loadComponent(y),y}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const u=a;this._views.push(u),u.attachToAppRef(this)}detachView(a){const u=a;Ur(this._views,u),u.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(WD,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(bn(Qs),bn(Zn),bn(Mh),bn(Bu),bn(Nf))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();function Ur(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}class xP{}class oA{}const ns={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Ow=(()=>{class i{constructor(a,u){this._compiler=a,this._config=u||ns}load(a){return this.loadAndCompile(a)}loadAndCompile(a){let[u,c]=a.split("#");return void 0===c&&(c="default"),V(8255)(u).then(f=>f[c]).then(f=>Ni(f,u,c)).then(f=>this._compiler.compileModuleAsync(f))}loadFactory(a){let[u,c]=a.split("#"),f="NgFactory";return void 0===c&&(c="default",f=""),V(8255)(this._config.factoryPathPrefix+u+this._config.factoryPathSuffix).then(m=>m[c+f]).then(m=>Ni(m,u,c))}}return i.\u0275fac=function(a){return new(a||i)(bn(Ig),bn(oA,8))},i.\u0275prov=on({token:i,factory:i.\u0275fac}),i})();function Ni(i,s,a){if(!i)throw new Error(`Cannot find '${a}' in '${s}'`);return i}const Ri=function(i){return null},Ty=my(null,"core",[{provide:GD,useValue:"unknown"},{provide:sA,deps:[Zn]},{provide:eA,deps:[]},{provide:zD,deps:[]}]),lA=[{provide:Xl,useClass:Xl,deps:[Qs,Zn,Mh,Bu,Nf]},{provide:cD,deps:[Qs],useFactory:function(i){let s=[];return i.onStable.subscribe(()=>{for(;s.length;)s.pop()()}),function(a){s.push(a)}}},{provide:Nf,useClass:Nf,deps:[[new ka,dy]]},{provide:Ig,useClass:Ig,deps:[]},qD,{provide:mf,useFactory:function(){return zN},deps:[]},{provide:bs,useFactory:function(){return KN},deps:[]},{provide:hy,useFactory:function(i){return R_(i=i||"undefined"!=typeof $localize&&$localize.locale||zp),i},deps:[[new xu(hy),new ka,new kr]]},{provide:KD,useValue:"USD"}];let cA=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(bn(Xl))},i.\u0275mod=Ue({type:i}),i.\u0275inj=mn({providers:lA}),i})()},8939:(Je,Ce,V)=>{"use strict";V.d(Ce,{hO:()=>se,xv:()=>ne,Dh:()=>te,GT:()=>Q,cc:()=>De,on:()=>U,pX:()=>ue});var d=V(7716),H=V(7841),O=V(9845);Je=V.hmd(Je);const ce=["ngOnDestroy"],ue=(oe,fe,ye,Re={})=>new Proxy(oe,{get:(Ye,Tt)=>ye.runOutsideAngular(()=>{var Mt;if(oe[Tt])return(null===(Mt=null==Re?void 0:Re.spy)||void 0===Mt?void 0:Mt.get)&&Re.spy.get(Tt,oe[Tt]),oe[Tt];if(ce.indexOf(Tt)>-1)return()=>{};const gt=fe.toPromise().then(Tn=>{const vt=Tn&&Tn[Tt];return"function"==typeof vt?vt.bind(Tn):vt&&vt.then?vt.then(ht=>ye.run(()=>ht)):ye.run(()=>vt)});return new Proxy(()=>{},{get:(Tn,vt)=>gt[vt],apply:(Tn,vt,ht)=>gt.then(Ht=>{var ot;const Lt=Ht&&Ht(...ht);return(null===(ot=null==Re?void 0:Re.spy)||void 0===ot?void 0:ot.apply)&&Re.spy.apply(Tt,ht,Lt),Lt})})})}),Q=(oe,fe)=>{fe.forEach(ye=>{Object.getOwnPropertyNames(ye.prototype||ye).forEach(Re=>{Object.defineProperty(oe.prototype,Re,Object.getOwnPropertyDescriptor(ye.prototype||ye,Re))})})};class _e{constructor(fe){return fe}}const te=new d.OlP("angularfire2.app.options"),ne=new d.OlP("angularfire2.app.name");function U(oe,fe,ye){const Ye="object"==typeof ye&&ye||{};Ye.name=Ye.name||"string"==typeof ye&&ye||"[DEFAULT]";const Mt=H.Z.apps.filter(gt=>gt&&gt.name===Ye.name)[0]||fe.runOutsideAngular(()=>H.Z.initializeApp(oe,Ye));try{JSON.stringify(oe)!==JSON.stringify(Mt.options)&&$("error",`${Mt.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(gt){}return new _e(Mt)}const $=(oe,...fe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[oe](...fe)},B={provide:_e,useFactory:U,deps:[te,d.R0b,[new d.FiY,ne]]};let se=(()=>{class oe{constructor(ye){H.Z.registerVersion("angularfire",O.q4.full,"core"),H.Z.registerVersion("angularfire",O.q4.full,"app-compat"),H.Z.registerVersion("angular",d.q4F.full,ye.toString())}static initializeApp(ye,Re){return{ngModule:oe,providers:[{provide:te,useValue:ye},{provide:ne,useValue:Re}]}}}return oe.\u0275fac=function(ye){return new(ye||oe)(d.LFG(d.Lbi))},oe.\u0275mod=d.oAB({type:oe}),oe.\u0275inj=d.cJS({providers:[B]}),oe})();function De(oe,fe,ye,Re,Ye){const[,Tt,Mt]=globalThis.\u0275AngularfireInstanceCache.find(gt=>gt[0]===oe)||[];if(Tt)return function(oe,fe){try{return oe.toString()===fe.toString()}catch(ye){return oe===fe}}(Ye,Mt)||(pe("error",`${fe} was already initialized on the ${ye} Firebase App with different settings.${Ie?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ye,was:Mt})),Tt;{const gt=Re();return globalThis.\u0275AngularfireInstanceCache.push([oe,gt,Ye]),gt}}const Ie=!!Je.hot,pe=(oe,...fe)=>{(0,d.X6Q)()&&"undefined"!=typeof console&&console[oe](...fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},9845:(Je,Ce,V)=>{"use strict";V.d(Ce,{q4:()=>cm,iC:()=>Tr,HU:()=>ph,vb:()=>Du,JM:()=>ws});var d=V(7716),H=V(2329),O=V(8239),ce=V(8026),ue=V(3854),Q=V(3910),_e=V(5422),te=V(6676);const ne="@firebase/installations",U="0.5.3",B=`w:${U}`,se="FIS_v2",fe=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function ye(I){return I instanceof ue.ZR&&I.code.includes("request-failed")}function Re({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function Ye(I){return{token:I.token,requestStatus:2,expiresIn:Ht(I.expiresIn),creationTime:Date.now()}}function Tt(I,D){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,O.Z)(function*(I,D){const j=(yield D.json()).error;return fe.create("request-failed",{requestName:I,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function gt({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Tn(I,{refreshToken:D}){const R=gt(I);return R.append("Authorization",function(I){return`${se} ${I}`}(D)),R}function vt(I){return ht.apply(this,arguments)}function ht(){return(ht=(0,O.Z)(function*(I){const D=yield I();return D.status>=500&&D.status<600?I():D})).apply(this,arguments)}function Ht(I){return Number(I.replace("s","000"))}function Lt(I,D){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,O.Z)(function*(I,{fid:D}){const R=Re(I),de={method:"POST",headers:gt(I),body:JSON.stringify({fid:D,authVersion:se,appId:I.appId,sdkVersion:B})},Se=yield vt(()=>fetch(R,de));if(Se.ok){const Ze=yield Se.json();return{fid:Ze.fid||D,registrationStatus:2,refreshToken:Ze.refreshToken,authToken:Ye(Ze.authToken)}}throw yield Tt("Create Installation",Se)})).apply(this,arguments)}function as(I){return new Promise(D=>{setTimeout(D,I)})}const Ui=/^[cdef][\w-]{21}$/;function tn(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function(I){return function(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return Ui.test(R)?R:""}catch(I){return""}}function us(I){return`${I.appName}!${I.appId}`}const ls=new Map;function ti(I,D){const R=us(I);mn(R,D),function(I,D){const R=(!Xt&&"BroadcastChannel"in self&&(Xt=new BroadcastChannel("[Firebase] FID Change"),Xt.onmessage=I=>{mn(I.data.key,I.data.fid)}),Xt);R&&R.postMessage({key:I,fid:D}),0===ls.size&&Xt&&(Xt.close(),Xt=null)}(R,D)}function mn(I,D){const R=ls.get(I);if(R)for(const j of R)j(D)}let Xt=null;const _n="firebase-installations-store";let zn=null;function yi(){return zn||(zn=(0,te.openDb)("firebase-installations-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(_n)}})),zn}function $e(I,D){return qt.apply(this,arguments)}function qt(){return(qt=(0,O.Z)(function*(I,D){const R=us(I),ee=(yield yi()).transaction(_n,"readwrite"),de=ee.objectStore(_n),Se=yield de.get(R);return yield de.put(D,R),yield ee.complete,(!Se||Se.fid!==D.fid)&&ti(I,D.fid),D})).apply(this,arguments)}function fr(I){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,O.Z)(function*(I){const D=us(I),j=(yield yi()).transaction(_n,"readwrite");yield j.objectStore(_n).delete(D),yield j.complete})).apply(this,arguments)}function tt(I,D){return nt.apply(this,arguments)}function nt(){return(nt=(0,O.Z)(function*(I,D){const R=us(I),ee=(yield yi()).transaction(_n,"readwrite"),de=ee.objectStore(_n),Se=yield de.get(R),Ze=D(Se);return void 0===Ze?yield de.delete(R):yield de.put(Ze,R),yield ee.complete,Ze&&(!Se||Se.fid!==Ze.fid)&&ti(I,Ze.fid),Ze})).apply(this,arguments)}function Dt(I){return St.apply(this,arguments)}function St(){return(St=(0,O.Z)(function*(I){let D;const R=yield tt(I,j=>{const ee=qn(j),de=en(I,ee);return D=de.registrationPromise,de.installationEntry});return""===R.fid?{installationEntry:yield D}:{installationEntry:R,registrationPromise:D}})).apply(this,arguments)}function qn(I){return Yt(I||{fid:tn(),registrationStatus:0})}function en(I,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(fe.create("app-offline"))};const R={fid:D.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:R,registrationPromise:function(I,D){return et.apply(this,arguments)}(I,R)}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:lu(I)}:{installationEntry:D}}function et(){return(et=(0,O.Z)(function*(I,D){try{return $e(I,yield Lt(I,D))}catch(R){throw ye(R)&&409===R.customData.serverCode?yield fr(I):yield $e(I,{fid:D.fid,registrationStatus:0}),R}})).apply(this,arguments)}function lu(I){return ln.apply(this,arguments)}function ln(){return(ln=(0,O.Z)(function*(I){let D=yield nn(I);for(;1===D.registrationStatus;)yield as(100),D=yield nn(I);if(0===D.registrationStatus){const{installationEntry:R,registrationPromise:j}=yield Dt(I);return j||R}return D})).apply(this,arguments)}function nn(I){return tt(I,D=>{if(!D)throw fe.create("installation-not-found");return Yt(D)})}function Yt(I){return function(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function no(I,D){return W.apply(this,arguments)}function W(){return(W=(0,O.Z)(function*({appConfig:I,platformLoggerProvider:D},R){const j=G(I,R),ee=Tn(I,R),de=D.getImmediate({optional:!0});de&&ee.append("x-firebase-client",de.getPlatformInfoString());const Ze={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:B}})},We=yield vt(()=>fetch(j,Ze));if(We.ok)return Ye(yield We.json());throw yield Tt("Generate Auth Token",We)})).apply(this,arguments)}function G(I,{fid:D}){return`${Re(I)}/${D}/authTokens:generate`}function z(I){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,O.Z)(function*(I,D=!1){let R;const j=yield tt(I.appConfig,de=>{if(!Kn(de))throw fe.create("not-registered");const Se=de.authToken;if(!D&&tr(Se))return de;if(1===Se.requestStatus)return R=le(I,D),de;{if(!navigator.onLine)throw fe.create("app-offline");const Ze=Y(de);return R=Gt(I,Ze),Ze}});return R?yield R:j.authToken})).apply(this,arguments)}function le(I,D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(I,D){let R=yield at(I.appConfig);for(;1===R.authToken.requestStatus;)yield as(100),R=yield at(I.appConfig);const j=R.authToken;return 0===j.requestStatus?z(I,D):j})).apply(this,arguments)}function at(I){return tt(I,D=>{if(!Kn(D))throw fe.create("not-registered");return function(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function Gt(I,D){return An.apply(this,arguments)}function An(){return(An=(0,O.Z)(function*(I,D){try{const R=yield no(I,D),j=Object.assign(Object.assign({},D),{authToken:R});return yield $e(I.appConfig,j),R}catch(R){if(!ye(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const j=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield $e(I.appConfig,j)}else yield fr(I.appConfig);throw R}})).apply(this,arguments)}function Kn(I){return void 0!==I&&2===I.registrationStatus}function tr(I){return 2===I.requestStatus&&!function(I){const D=Date.now();return D<I.creationTime||I.creationTime+I.expiresIn<D+36e5}(I)}function Y(I){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:D})}function Ue(){return(Ue=(0,O.Z)(function*(I){const D=I,{installationEntry:R,registrationPromise:j}=yield Dt(D.appConfig);return j?j.catch(console.error):z(D).catch(console.error),R.fid})).apply(this,arguments)}function Pt(){return(Pt=(0,O.Z)(function*(I,D=!1){const R=I;return yield bt(R.appConfig),(yield z(R,D)).token})).apply(this,arguments)}function bt(I){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,O.Z)(function*(I){const{registrationPromise:D}=yield Dt(I);D&&(yield D)})).apply(this,arguments)}function hn(I){return fe.create("missing-app-config-values",{valueName:I})}const $r="installations";(0,ce._registerComponent)(new Q.wA($r,I=>{const D=I.getProvider("app").getImmediate();return{app:D,appConfig:function(I){if(!I||!I.options)throw hn("App Configuration");if(!I.name)throw hn("App Name");const D=["projectId","apiKey","appId"];for(const R of D)if(!I.options[R])throw hn(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(D),platformLoggerProvider:(0,ce._getProvider)(D,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ce._registerComponent)(new Q.wA("installations-internal",I=>{const D=I.getProvider("app").getImmediate(),R=(0,ce._getProvider)(D,$r).getImmediate();return{getId:()=>function(I){return Ue.apply(this,arguments)}(R),getToken:ee=>function(I){return Pt.apply(this,arguments)}(R,ee)}},"PRIVATE")),(0,ce.registerVersion)(ne,U),(0,ce.registerVersion)(ne,U,"esm2017");const ga="@firebase/remote-config",pr=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class du{constructor(D,R,j,ee){this.client=D,this.storage=R,this.storageCache=j,this.logger=ee}isCachedDataFresh(D,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-R,ee=j<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${ee}.`),ee}fetch(D){var R=this;return(0,O.Z)(function*(){const[j,ee]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(ee&&R.isCachedDataFresh(D.cacheMaxAgeMillis,j))return ee;D.eTag=ee&&ee.eTag;const de=yield R.client.fetch(D),Se=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===de.status&&Se.push(R.storage.setLastSuccessfulFetchResponse(de)),yield Promise.all(Se),de})()}}function ds(I=navigator){return I.languages&&I.languages[0]||I.language}class Er{constructor(D,R,j,ee,de,Se){this.firebaseInstallations=D,this.sdkVersion=R,this.namespace=j,this.projectId=ee,this.apiKey=de,this.appId=Se}fetch(D){var R=this;return(0,O.Z)(function*(){const[j,ee]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},We={sdk_version:R.sdkVersion,app_instance_id:j,app_instance_id_token:ee,app_id:R.appId,language_code:ds()},Ot={method:"POST",headers:Ze,body:JSON.stringify(We)},rn=fetch(Se,Ot),rr=new Promise((Hs,ai)=>{D.signal.addEventListener(()=>{const ft=new Error("The operation was aborted.");ft.name="AbortError",ai(ft)})});let oi;try{yield Promise.race([rn,rr]),oi=yield rn}catch(Hs){let ai="fetch-client-network";throw"AbortError"===Hs.name&&(ai="fetch-timeout"),pr.create(ai,{originalErrorMessage:Hs.message})}let lr=oi.status;const Ma=oi.headers.get("ETag")||void 0;let Au,Oa;if(200===oi.status){let Hs;try{Hs=yield oi.json()}catch(ai){throw pr.create("fetch-client-parse",{originalErrorMessage:ai.message})}Au=Hs.entries,Oa=Hs.state}if("INSTANCE_STATE_UNSPECIFIED"===Oa?lr=500:"NO_CHANGE"===Oa?lr=304:("NO_TEMPLATE"===Oa||"EMPTY_CONFIG"===Oa)&&(Au={}),304!==lr&&200!==lr)throw pr.create("fetch-status",{httpStatus:lr});return{status:lr,eTag:Ma,config:Au}})()}}class qd{constructor(D,R){this.client=D,this.storage=R}fetch(D){var R=this;return(0,O.Z)(function*(){const j=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(D,j)})()}attemptFetch(D,{throttleEndTimeMillis:R,backoffCount:j}){var ee=this;return(0,O.Z)(function*(){yield function(I,D){return new Promise((R,j)=>{const ee=Math.max(D-Date.now(),0),de=setTimeout(R,ee);I.addEventListener(()=>{clearTimeout(de),j(pr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,R);try{const de=yield ee.client.fetch(D);return yield ee.storage.deleteThrottleMetadata(),de}catch(de){if(!function(I){if(!(I instanceof ue.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}(de))throw de;const Se={throttleEndTimeMillis:Date.now()+(0,ue.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Se),ee.attemptFetch(D,Se)}})()}}class Gd{constructor(D,R,j,ee,de){this.app=D,this._client=R,this._storageCache=j,this._storage=ee,this._logger=de,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function hc(I,D){const R=I.target.error||void 0;return pr.create(D,{originalErrorMessage:R&&R.message})}const oo="app_namespace_store";class zd{constructor(D,R,j,ee=function(){return new Promise((I,D)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=j=>{D(hc(j,"storage-open"))},R.onsuccess=j=>{I(j.target.result)},R.onupgradeneeded=j=>{const ee=j.target.result;switch(j.oldVersion){case 0:ee.createObjectStore(oo,{keyPath:"compositeKey"})}}}catch(R){D(pr.create("storage-open",{originalErrorMessage:R}))}})}()){this.appId=D,this.appName=R,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var R=this;return(0,O.Z)(function*(){const j=yield R.openDbPromise;return new Promise((ee,de)=>{const Ze=j.transaction([oo],"readonly").objectStore(oo),We=R.createCompositeKey(D);try{const Ot=Ze.get(We);Ot.onerror=rn=>{de(hc(rn,"storage-get"))},Ot.onsuccess=rn=>{const rr=rn.target.result;ee(rr?rr.value:void 0)}}catch(Ot){de(pr.create("storage-get",{originalErrorMessage:Ot&&Ot.message}))}})})()}set(D,R){var j=this;return(0,O.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((de,Se)=>{const We=ee.transaction([oo],"readwrite").objectStore(oo),Ot=j.createCompositeKey(D);try{const rn=We.put({compositeKey:Ot,value:R});rn.onerror=rr=>{Se(hc(rr,"storage-set"))},rn.onsuccess=()=>{de()}}catch(rn){Se(pr.create("storage-set",{originalErrorMessage:rn&&rn.message}))}})})()}delete(D){var R=this;return(0,O.Z)(function*(){const j=yield R.openDbPromise;return new Promise((ee,de)=>{const Ze=j.transaction([oo],"readwrite").objectStore(oo),We=R.createCompositeKey(D);try{const Ot=Ze.delete(We);Ot.onerror=rn=>{de(hc(rn,"storage-delete"))},Ot.onsuccess=()=>{ee()}}catch(Ot){de(pr.create("storage-delete",{originalErrorMessage:Ot&&Ot.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class sm{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,O.Z)(function*(){const R=D.storage.getLastFetchStatus(),j=D.storage.getLastSuccessfulFetchTimestampMillis(),ee=D.storage.getActiveConfig(),de=yield R;de&&(D.lastFetchStatus=de);const Se=yield j;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const Ze=yield ee;Ze&&(D.activeConfig=Ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function np(){return _a.apply(this,arguments)}function _a(){return(_a=(0,O.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(I){return!1}})).apply(this,arguments)}(0,ce._registerComponent)(new Q.wA("remote-config",function(D,{instanceIdentifier:R}){const j=D.getProvider("app").getImmediate(),ee=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw pr.create("registration-window");if(!(0,ue.hl)())throw pr.create("indexed-db-unavailable");const{projectId:de,apiKey:Se,appId:Ze}=j.options;if(!de)throw pr.create("registration-project-id");if(!Se)throw pr.create("registration-api-key");if(!Ze)throw pr.create("registration-app-id");const We=new zd(Ze,j.name,R=R||"firebase"),Ot=new sm(We),rn=new _e.Yd(ga);rn.logLevel=_e.in.ERROR;const rr=new Er(ee,ce.SDK_VERSION,R,de,Se,Ze),oi=new qd(rr,We),lr=new du(oi,We,Ot,rn),Ma=new Gd(j,lr,Ot,We,rn);return function(I){const D=(0,ue.m9)(I);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(Ma),Ma},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(ga,"0.3.2"),(0,ce.registerVersion)(ga,"0.3.2","esm2017");const pc="/firebase-messaging-sw.js",Yd="/firebase-cloud-messaging-push-scope",gc="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",wi="google.c.a.c_id",Fs="google.c.a.c_l",hu="google.c.a.ts",mc="google.c.a.e";var ya=(()=>{return(I=ya||(ya={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",ya;var I})();function Ci(I){const D=new Uint8Array(I);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function rp(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(R),ee=new Uint8Array(j.length);for(let de=0;de<j.length;++de)ee[de]=j.charCodeAt(de);return ee}const va="fcm_token_details_db",_c="fcm_token_object_Store";function ji(I){return fu.apply(this,arguments)}function fu(){return(fu=(0,O.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(de=>de.name).includes(va))return null;let D=null;return(yield(0,te.openDb)(va,5,function(){var j=(0,O.Z)(function*(ee){var de;if(ee.oldVersion<2||!ee.objectStoreNames.contains(_c))return;const Se=ee.transaction.objectStore(_c),Ze=yield Se.index("fcmSenderId").get(I);if(yield Se.clear(),Ze)if(2===ee.oldVersion){const We=Ze;if(!We.auth||!We.p256dh||!We.endpoint)return;D={token:We.fcmToken,createTime:null!==(de=We.createTime)&&void 0!==de?de:Date.now(),subscriptionOptions:{auth:We.auth,p256dh:We.p256dh,endpoint:We.endpoint,swScope:We.swScope,vapidKey:"string"==typeof We.vapidKey?We.vapidKey:Ci(We.vapidKey)}}}else if(3===ee.oldVersion){const We=Ze;D={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:Ci(We.auth),p256dh:Ci(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:Ci(We.vapidKey)}}}else if(4===ee.oldVersion){const We=Ze;D={token:We.fcmToken,createTime:We.createTime,subscriptionOptions:{auth:Ci(We.auth),p256dh:Ci(We.p256dh),endpoint:We.endpoint,swScope:We.swScope,vapidKey:Ci(We.vapidKey)}}}});return function(ee){return j.apply(this,arguments)}}())).close(),yield(0,te.deleteDb)(va),yield(0,te.deleteDb)("fcm_vapid_details_db"),yield(0,te.deleteDb)("undefined"),tl(D)?D:null})).apply(this,arguments)}function tl(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:D}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const ao="firebase-messaging-store";let Ea=null;function On(){return Ea||(Ea=(0,te.openDb)("firebase-messaging-database",1,I=>{switch(I.oldVersion){case 0:I.createObjectStore(ao)}})),Ea}function pu(I){return wr.apply(this,arguments)}function wr(){return(wr=(0,O.Z)(function*(I){const D=wa(I),j=yield(yield On()).transaction(ao).objectStore(ao).get(D);if(j)return j;{const ee=yield ji(I.appConfig.senderId);if(ee)return yield uo(I,ee),ee}})).apply(this,arguments)}function uo(I,D){return an.apply(this,arguments)}function an(){return(an=(0,O.Z)(function*(I,D){const R=wa(I),ee=(yield On()).transaction(ao,"readwrite");return yield ee.objectStore(ao).put(D,R),yield ee.complete,D})).apply(this,arguments)}function sp(I){return yc.apply(this,arguments)}function yc(){return(yc=(0,O.Z)(function*(I){const D=wa(I),j=(yield On()).transaction(ao,"readwrite");yield j.objectStore(ao).delete(D),yield j.complete})).apply(this,arguments)}function wa({appConfig:I}){return I.appId}const Nn=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function vc(I,D){return $i.apply(this,arguments)}function $i(){return($i=(0,O.Z)(function*(I,D){const R=yield rl(I),j=ut(D),ee={method:"POST",headers:R,body:JSON.stringify(j)};let de;try{de=yield(yield fetch(fs(I.appConfig),ee)).json()}catch(Se){throw Nn.create("token-subscribe-failed",{errorInfo:Se})}if(de.error)throw Nn.create("token-subscribe-failed",{errorInfo:de.error.message});if(!de.token)throw Nn.create("token-subscribe-no-token");return de.token})).apply(this,arguments)}function ii(I,D){return nl.apply(this,arguments)}function nl(){return(nl=(0,O.Z)(function*(I,D){const R=yield rl(I),j=ut(D.subscriptionOptions),ee={method:"PATCH",headers:R,body:JSON.stringify(j)};let de;try{de=yield(yield fetch(`${fs(I.appConfig)}/${D.token}`,ee)).json()}catch(Se){throw Nn.create("token-update-failed",{errorInfo:Se})}if(de.error)throw Nn.create("token-update-failed",{errorInfo:de.error.message});if(!de.token)throw Nn.create("token-update-no-token");return de.token})).apply(this,arguments)}function gu(I,D){return gr.apply(this,arguments)}function gr(){return(gr=(0,O.Z)(function*(I,D){const j={method:"DELETE",headers:yield rl(I)};try{const de=yield(yield fetch(`${fs(I.appConfig)}/${D}`,j)).json();if(de.error)throw Nn.create("token-unsubscribe-failed",{errorInfo:de.error.message})}catch(ee){throw Nn.create("token-unsubscribe-failed",{errorInfo:ee})}})).apply(this,arguments)}function fs({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function rl(I){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,O.Z)(function*({appConfig:I,installations:D}){const R=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function ut({p256dh:I,auth:D,endpoint:R,vapidKey:j}){const ee={web:{endpoint:R,auth:D,p256dh:I}};return j!==gc&&(ee.web.applicationPubKey=j),ee}const Jd=6048e5;function Xd(I){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,O.Z)(function*(I){const D=yield _u(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:D.endpoint,auth:Ci(D.getKey("auth")),p256dh:Ci(D.getKey("p256dh"))},j=yield pu(I.firebaseDependencies);if(j){if(yu(j.subscriptionOptions,R))return Date.now()>=j.createTime+Jd?wc(I,{token:j.token,createTime:Date.now(),subscriptionOptions:R}):j.token;try{yield gu(I.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return Te(I.firebaseDependencies,R)}return Te(I.firebaseDependencies,R)})).apply(this,arguments)}function il(I){return mu.apply(this,arguments)}function mu(){return(mu=(0,O.Z)(function*(I){const D=yield pu(I.firebaseDependencies);D&&(yield gu(I.firebaseDependencies,D.token),yield sp(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function wc(I,D){return ps.apply(this,arguments)}function ps(){return(ps=(0,O.Z)(function*(I,D){try{const R=yield ii(I.firebaseDependencies,D),j=Object.assign(Object.assign({},D),{token:R,createTime:Date.now()});return yield uo(I.firebaseDependencies,j),R}catch(R){throw yield il(I),R}})).apply(this,arguments)}function Te(I,D){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(I,D){const j={token:yield vc(I,D),createTime:Date.now(),subscriptionOptions:D};return yield uo(I,j),j.token})).apply(this,arguments)}function _u(I,D){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,O.Z)(function*(I,D){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:rp(D)})})).apply(this,arguments)}function yu(I,D){return D.vapidKey===I.vapidKey&&D.endpoint===I.endpoint&&D.auth===I.auth&&D.p256dh===I.p256dh}function Hi(I){const D={from:I.from,collapseKey:I.collapse_key,messageId:I.fcm_message_id};return function(I,D){if(!D.notification)return;I.notification={};const R=D.notification.title;R&&(I.notification.title=R);const j=D.notification.body;j&&(I.notification.body=j);const ee=D.notification.image;ee&&(I.notification.image=ee)}(D,I),function(I,D){!D.data||(I.data=D.data)}(D,I),function(I,D){if(!D.fcmOptions)return;I.fcmOptions={};const R=D.fcmOptions.link;R&&(I.fcmOptions.link=R);const j=D.fcmOptions.analytics_label;j&&(I.fcmOptions.analyticsLabel=j)}(D,I),D}function op(I){return"object"==typeof I&&!!I&&wi in I}function sl(I,D){const R=[];for(let j=0;j<I.length;j++)R.push(I.charAt(j)),j<D.length&&R.push(D.charAt(j));return R.join("")}function lo(I){return Nn.create("missing-app-config-values",{valueName:I})}sl("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),sl("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ur{constructor(D,R,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function(I){if(!I||!I.options)throw lo("App Configuration Object");if(!I.name)throw lo("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const j of D)if(!R[j])throw lo(j);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:ee,installations:R,analyticsProvider:j}}_delete(){return Promise.resolve()}}function qr(I){return ba.apply(this,arguments)}function ba(){return(ba=(0,O.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(pc,{scope:Yd}),I.swRegistration.update().catch(()=>{})}catch(D){throw Nn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function gs(I,D){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,O.Z)(function*(I,D){if(!D&&!I.swRegistration&&(yield qr(I)),D||!I.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Nn.create("invalid-sw-registration");I.swRegistration=D}})).apply(this,arguments)}function om(I,D){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,O.Z)(function*(I,D){D?I.vapidKey=D:I.vapidKey||(I.vapidKey=gc)})).apply(this,arguments)}function Eu(){return(Eu=(0,O.Z)(function*(I,D){if(!navigator)throw Nn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Nn.create("permission-blocked");return yield om(I,null==D?void 0:D.vapidKey),yield gs(I,null==D?void 0:D.serviceWorkerRegistration),Xd(I)})).apply(this,arguments)}function bc(I,D,R){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,O.Z)(function*(I,D,R){const j=Ic(D);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:R[wi],message_name:R[Fs],message_time:R[hu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ic(I){switch(I){case ya.NOTIFICATION_CLICKED:return"notification_open";case ya.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function al(){return(al=(0,O.Z)(function*(I,D){const R=D.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===ya.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Hi(R)):I.onMessageHandler.next(Hi(R)));const j=R.data;op(j)&&"1"===j[mc]&&(yield bc(I,R.messageType,j))})).apply(this,arguments)}const wu="@firebase/messaging";function ll(){return Bo.apply(this,arguments)}function Bo(){return(Bo=(0,O.Z)(function*(){return"undefined"!=typeof window&&(0,ue.hl)()&&(yield(0,ue.eu)())&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ce._registerComponent)(new Q.wA("messaging",I=>{const D=new ur(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function(I,D){return al.apply(this,arguments)}(D,R)),D},"PUBLIC")),(0,ce._registerComponent)(new Q.wA("messaging-internal",I=>{const D=I.getProvider("messaging").getImmediate();return{getToken:j=>function(I,D){return Eu.apply(this,arguments)}(D,j)}},"PRIVATE")),(0,ce.registerVersion)(wu,"0.9.3"),(0,ce.registerVersion)(wu,"0.9.3","esm2017");const dl="analytics",Tc="firebase_id",Da="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",jo="https://www.googletagmanager.com/gtag/js",nr=new _e.Yd("@firebase/analytics");function Ac(I){return Promise.all(I.map(D=>D.catch(R=>R)))}function nh(I,D){const R=document.createElement("script");R.src=`${jo}?l=${I}&id=${D}`,R.async=!0,document.head.appendChild(R)}function hl(I,D,R,j,ee,de){return $o.apply(this,arguments)}function $o(){return($o=(0,O.Z)(function*(I,D,R,j,ee,de){const Se=j[ee];try{if(Se)yield D[Se];else{const We=(yield Ac(R)).find(Ot=>Ot.measurementId===ee);We&&(yield D[We.appId])}}catch(Ze){nr.error(Ze)}I("config",ee,de)})).apply(this,arguments)}function rh(I,D,R,j,ee){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,O.Z)(function*(I,D,R,j,ee){try{let de=[];if(ee&&ee.send_to){let Se=ee.send_to;Array.isArray(Se)||(Se=[Se]);const Ze=yield Ac(R);for(const We of Se){const Ot=Ze.find(rr=>rr.measurementId===We),rn=Ot&&D[Ot.appId];if(!rn){de=[];break}de.push(rn)}}0===de.length&&(de=Object.values(D)),yield Promise.all(de),I("event",j,ee||{})}catch(de){nr.error(de)}})).apply(this,arguments)}function am(){const I=window.document.getElementsByTagName("script");for(const D of Object.values(I))if(D.src&&D.src.includes(jo))return D;return null}const _s=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),fl=new class{constructor(D={},R=1e3){this.throttleMetadata=D,this.intervalMillis=R}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,R){this.throttleMetadata[D]=R}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function cp(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function xc(I){return qi.apply(this,arguments)}function qi(){return(qi=(0,O.Z)(function*(I){var D;const{appId:R,apiKey:j}=I,ee={method:"GET",headers:cp(j)},de=Da.replace("{app-id}",R),Se=yield fetch(de,ee);if(200!==Se.status&&304!==Se.status){let Ze="";try{const We=yield Se.json();(null===(D=We.error)||void 0===D?void 0:D.message)&&(Ze=We.error.message)}catch(We){}throw _s.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Ze})}return Se.json()})).apply(this,arguments)}function Aa(I){return Us.apply(this,arguments)}function Us(){return(Us=(0,O.Z)(function*(I,D=fl,R){const{appId:j,apiKey:ee,measurementId:de}=I.options;if(!j)throw _s.create("no-app-id");if(!ee){if(de)return{measurementId:de,appId:j};throw _s.create("no-api-key")}const Se=D.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new Rc;return setTimeout((0,O.Z)(function*(){Ze.abort()}),void 0!==R?R:6e4),Nc({appId:j,apiKey:ee,measurementId:de},Se,Ze,D)})).apply(this,arguments)}function Nc(I,D,R){return Sa.apply(this,arguments)}function Sa(){return(Sa=(0,O.Z)(function*(I,{throttleEndTimeMillis:D,backoffCount:R},j,ee=fl){const{appId:de,measurementId:Se}=I;try{yield vv(j,D)}catch(Ze){if(Se)return nr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:de,measurementId:Se};throw Ze}try{const Ze=yield xc(I);return ee.deleteThrottleMetadata(de),Ze}catch(Ze){if(!oh(Ze)){if(ee.deleteThrottleMetadata(de),Se)return nr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:de,measurementId:Se};throw Ze}const We=503===Number(Ze.customData.httpStatus)?(0,ue.$s)(R,ee.intervalMillis,30):(0,ue.$s)(R,ee.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+We,backoffCount:R+1};return ee.setThrottleMetadata(de,Ot),nr.debug(`Calling attemptFetch again in ${We} millis`),Nc(I,Ot,j,ee)}})).apply(this,arguments)}function vv(I,D){return new Promise((R,j)=>{const ee=Math.max(D-Date.now(),0),de=setTimeout(R,ee);I.addEventListener(()=>{clearTimeout(de),j(_s.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function oh(I){if(!(I instanceof ue.ZR&&I.customData))return!1;const D=Number(I.customData.httpStatus);return 429===D||500===D||503===D||504===D}class Rc{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ah(){return uh.apply(this,arguments)}function uh(){return(uh=(0,O.Z)(function*(){if(!(0,ue.hl)())return nr.warn(_s.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(I){return nr.warn(_s.create("indexeddb-unavailable",{errorInfo:I}).message),!1}return!0})).apply(this,arguments)}function Iu(){return(Iu=(0,O.Z)(function*(I,D,R,j,ee,de,Se){var Ze;const We=Aa(I);We.then(lr=>{R[lr.measurementId]=lr.appId,I.options.measurementId&&lr.measurementId!==I.options.measurementId&&nr.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${lr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(lr=>nr.error(lr)),D.push(We);const Ot=ah().then(lr=>{if(lr)return j.getId()}),[rn,rr]=yield Promise.all([We,Ot]);am()||nh(de,rn.measurementId),ee("js",new Date);const oi=null!==(Ze=null==Se?void 0:Se.config)&&void 0!==Ze?Ze:{};return oi.origin="firebase",oi.update=!0,null!=rr&&(oi[Tc]=rr),ee("config",rn.measurementId,oi),rn.measurementId})).apply(this,arguments)}class Rn{constructor(D){this.app=D}_delete(){return delete Qe[this.app.options.appId],Promise.resolve()}}let Qe={},Ii=[];const lh={};let qo,mr,Ir="dataLayer",pl=!1;function Ut(I,D,R){!function(){const I=[];if((0,ue.ru)()&&I.push("This is a browser extension environment."),(0,ue.zI)()||I.push("Cookies are not available."),I.length>0){const D=I.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),R=_s.create("invalid-analytics-context",{errorInfo:D});nr.warn(R.message)}}();const j=I.options.appId;if(!j)throw _s.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw _s.create("no-api-key");nr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Qe[j])throw _s.create("already-exists",{id:j});if(!pl){!function(I){let D=[];Array.isArray(window[I])?D=window[I]:window[I]=D}(Ir);const{wrappedGtag:de,gtagCore:Se}=function(I,D,R,j,ee){let de=function(...Se){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(de=window[ee]),window[ee]=function(I,D,R,j){function de(){return(de=(0,O.Z)(function*(Se,Ze,We){try{"event"===Se?yield rh(I,D,R,Ze,We):"config"===Se?yield hl(I,D,R,j,Ze,We):I("set",Ze)}catch(Ot){nr.error(Ot)}})).apply(this,arguments)}return function(Se,Ze,We){return de.apply(this,arguments)}}(de,I,D,R),{gtagCore:de,wrappedGtag:window[ee]}}(Qe,Ii,lh,Ir,"gtag");mr=de,qo=Se,pl=!0}return Qe[j]=function(I,D,R,j,ee,de,Se){return Iu.apply(this,arguments)}(I,Ii,lh,D,qo,Ir,R),new Rn(I)}function xa(){return(xa=(0,O.Z)(function*(I,D,R,j,ee){if(ee&&ee.global)I("event",R,j);else{const de=yield D;I("event",R,Object.assign(Object.assign({},j),{send_to:de}))}})).apply(this,arguments)}function fo(){return _l.apply(this,arguments)}function _l(){return(_l=(0,O.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch(I){return!1}})).apply(this,arguments)}const dp="@firebase/analytics";(0,ce._registerComponent)(new Q.wA(dl,(D,{options:R})=>Ut(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ce._registerComponent)(new Q.wA("analytics-internal",function(D){try{const R=D.getProvider(dl).getImmediate();return{logEvent:(j,ee,de)=>function(I,D,R,j){I=(0,ue.m9)(I),function(I,D,R,j,ee){return xa.apply(this,arguments)}(mr,Qe[I.app.options.appId],D,R,j).catch(ee=>nr.error(ee))}(R,j,ee,de)}}catch(R){throw _s.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ce.registerVersion)(dp,"0.7.3"),(0,ce.registerVersion)(dp,"0.7.3","esm2017");var fp=V(7771),lm=V(3637),kc=V(3342),Na=V(3101),fh=V(6136);const cm=new d.GfV("7.1.1"),Fc="__angularfire_symbol__analyticsIsSupported",po="__angularfire_symbol__remoteConfigIsSupported",Pa="__angularfire_symbol__messagingIsSupported";function ws(I,D,R){if(D){if(1===D.length)return D[0];const de=D.filter(Se=>Se.app===R);if(1===de.length)return de[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Fc]||(globalThis[Fc]=fo().then(I=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=I)),globalThis[Pa]||(globalThis[Pa]=ll().then(I=>globalThis.__angularfire_symbol__messagingIsSupportedValue=I)),globalThis[po]||(globalThis[po]=np().then(I=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=I));const Du=(I,D)=>{const R=D?[D]:(0,H.C6)(),j=[];return R.forEach(ee=>{ee.container.getProvider(I).instances.forEach(Se=>{j.includes(Se)||j.push(Se)})}),j};function Di(){}class js{constructor(D,R=fp.N){this.zone=D,this.delegate=R}now(){return this.delegate.now()}schedule(D,R,j){const ee=this.zone;return this.delegate.schedule(function(Se){ee.runGuarded(()=>{D.apply(this,[Se])})},R,j)}}class Vc{constructor(D){this.zone=D,this.task=null}call(D,R){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Di,{},Di,Di)),R.pipe((0,kc.b)({next:j,complete:j,error:j})).subscribe(D).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ph=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new js(Zone.current)),this.insideAngular=R.run(()=>new js(Zone.current,lm.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(d.LFG(d.R0b))},I.\u0275prov=d.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function Go(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function Tr(I){return Go(),function(I){return function(R){return(R=R.lift(new Vc(I.ngZone))).pipe((0,Na.R)(I.outsideAngular),(0,fh.QV)(I.insideAngular))}}(Go())(I)}},7354:(Je,Ce,V)=>{"use strict";V.d(Ce,{$:()=>om,A:()=>to,E:()=>Mr,G:()=>Er,I:()=>Ls,K:()=>Ps,L:()=>pu,M:()=>sp,N:()=>yc,P:()=>ee,Q:()=>wa,R:()=>Go,T:()=>an,U:()=>$i,V:()=>ii,W:()=>rl,X:()=>Hi,Y:()=>vu,Z:()=>op,_:()=>ur,a:()=>qo,a0:()=>Cc,a1:()=>bc,a2:()=>Ic,a3:()=>al,a4:()=>Cu,a5:()=>ap,a6:()=>eh,a7:()=>Bo,a8:()=>up,a9:()=>Yn,aA:()=>zo,aB:()=>qs,aC:()=>Pr,aG:()=>gl,aJ:()=>Nn,aa:()=>yv,ab:()=>dl,ae:()=>Da,af:()=>nr,ag:()=>Ac,aj:()=>Ec,ak:()=>um,am:()=>Nc,an:()=>uh,ao:()=>ep,ap:()=>zn,aq:()=>cu,ar:()=>Ms,as:()=>Jt,at:()=>bh,au:()=>vh,av:()=>Xt,aw:()=>Oe,ax:()=>$e,ay:()=>dt,az:()=>El,b:()=>Ir,c:()=>lr,d:()=>Hs,e:()=>Au,f:()=>xu,g:()=>_h,h:()=>kr,i:()=>fp,j:()=>pm,k:()=>qc,l:()=>Tr,m:()=>Ih,o:()=>as,r:()=>gp,s:()=>pp,u:()=>R,z:()=>us});var d=V(8239),H=V(3854),O=V(8026);function _e(E,g){var _={};for(var C in E)Object.prototype.hasOwnProperty.call(E,C)&&g.indexOf(C)<0&&(_[C]=E[C]);if(null!=E&&"function"==typeof Object.getOwnPropertySymbols){var x=0;for(C=Object.getOwnPropertySymbols(E);x<C.length;x++)g.indexOf(C[x])<0&&Object.prototype.propertyIsEnumerable.call(E,C[x])&&(_[C[x]]=E[C[x]])}return _}var ot=V(5422),Lt=V(3910);const as={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},to={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const us=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ls=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ti=new H.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),cs=new ot.Yd("@firebase/auth");function mn(E,...g){cs.logLevel<=ot.in.ERROR&&cs.error(`Auth (${O.SDK_VERSION}): ${E}`,...g)}function Jt(E,...g){throw Bi(E,...g)}function Xt(E,...g){return Bi(E,...g)}function Ns(E,g,_){const C=Object.assign(Object.assign({},ls()),{[g]:_});return new H.LL("auth","Firebase",C).create(g,{appName:E.name})}function _i(E,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Jt(E,"argument-error"),Ns(E,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Bi(E,...g){if("string"!=typeof E){const _=g[0],C=[...g.slice(1)];return C[0]&&(C[0].appName=E.name),E._errorFactory.create(_,...C)}return ti.create(E,...g)}function Oe(E,g,..._){if(!E)throw Bi(g,..._)}function _n(E){const g="INTERNAL ASSERTION FAILED: "+E;throw mn(g),new Error(g)}function zn(E,g){E||_n(g)}const yi=new Map;function $e(E){zn(E instanceof Function,"Expected a class definition");let g=yi.get(E);return g?(zn(g instanceof E,"Instance stored in cache mismatched with class"),g):(g=new E,yi.set(E,g),g)}function Hn(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.href)||""}function tt(){return"http:"===nt()||"https:"===nt()}function nt(){var E;return"undefined"!=typeof self&&(null===(E=self.location)||void 0===E?void 0:E.protocol)||null}class qn{constructor(g,_){this.shortDelay=g,this.longDelay=_,zn(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,H.uI)()||(0,H.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(tt()||(0,H.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function en(E,g){zn(E.emulator,"Emulator should always be set here");const{url:_}=E.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class Fe{static initialize(g,_,C){this.fetchImpl=g,_&&(this.headersImpl=_),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _n("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _n("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _n("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const et={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},lu=new qn(3e4,6e4);function ln(E,g){return E.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:E.tenantId}):g}function nn(E,g,_,C){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,d.Z)(function*(E,g,_,C,x={}){return cn(E,x,()=>{let P={},X={};C&&("GET"===g?X=C:P={body:JSON.stringify(C)});const ve=(0,H.xO)(Object.assign({key:E.config.apiKey},X)).slice(1),qe=new(Fe.headers());return qe.set("Content-Type","application/json"),qe.set("X-Client-Version",E._getSdkClientVersion()),E.languageCode&&qe.set("X-Firebase-Locale",E.languageCode),Fe.fetch()(z(E,E.config.apiHost,_,ve),Object.assign({method:g,headers:qe,referrerPolicy:"no-referrer"},P))})})).apply(this,arguments)}function cn(E,g,_){return no.apply(this,arguments)}function no(){return(no=(0,d.Z)(function*(E,g,_){E._canInitEmulator=!1;const C=Object.assign(Object.assign({},et),g);try{const x=new Ee(E),P=yield Promise.race([_(),x.promise]);x.clearNetworkTimeout();const X=yield P.json();if("needConfirmation"in X)throw le(E,"account-exists-with-different-credential",X);if(P.ok&&!("errorMessage"in X))return X;{const ve=P.ok?X.errorMessage:X.error.message,[qe,Le]=ve.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===qe)throw le(E,"credential-already-in-use",X);if("EMAIL_EXISTS"===qe)throw le(E,"email-already-in-use",X);const it=C[qe]||qe.toLowerCase().replace(/[_\s]+/g,"-");if(Le)throw Ns(E,it,Le);Jt(E,it)}}catch(x){if(x instanceof H.ZR)throw x;Jt(E,"network-request-failed")}})).apply(this,arguments)}function W(E,g,_,C){return G.apply(this,arguments)}function G(){return(G=(0,d.Z)(function*(E,g,_,C,x={}){const P=yield nn(E,g,_,C,x);return"mfaPendingCredential"in P&&Jt(E,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function z(E,g,_,C){const x=`${g}${_}?${C}`;return E.config.emulator?en(E.config,x):`${E.config.apiScheme}://${x}`}class Ee{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,C)=>{this.timer=setTimeout(()=>C(Xt(this.auth,"timeout")),lu.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function le(E,g,_){const C={appName:E.name};_.email&&(C.email=_.email),_.phoneNumber&&(C.phoneNumber=_.phoneNumber);const x=Xt(E,g,C);return x.customData._tokenResponse=_,x}function at(){return(at=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Gt(E,g){return An.apply(this,arguments)}function An(){return(An=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Kn(E,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function re(E){if(E)try{const g=new Date(Number(E));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function be(){return(be=(0,d.Z)(function*(E,g=!1){const _=(0,H.m9)(E),C=yield _.getIdToken(g),x=lt(C);Oe(x&&x.exp&&x.auth_time&&x.iat,_.auth,"internal-error");const P="object"==typeof x.firebase?x.firebase:void 0,X=null==P?void 0:P.sign_in_provider;return{claims:x,token:C,authTime:re(Ue(x.auth_time)),issuedAtTime:re(Ue(x.iat)),expirationTime:re(Ue(x.exp)),signInProvider:X||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function Ue(E){return 1e3*Number(E)}function lt(E){const[g,_,C]=E.split(".");if(void 0===g||void 0===_||void 0===C)return mn("JWT malformed, contained fewer than 3 sections"),null;try{const x=(0,H.tV)(_);return x?JSON.parse(x):(mn("Failed to decode base64 JWT payload"),null)}catch(x){return mn("Caught error parsing JWT payload as JSON",x),null}}function bt(E,g){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,d.Z)(function*(E,g,_=!1){if(_)return g;try{return yield g}catch(C){throw C instanceof H.ZR&&dn(C)&&E.auth.currentUser===E&&(yield E.auth.signOut()),C}})).apply(this,arguments)}function dn({code:E}){return"auth/user-disabled"===E||"auth/user-token-expired"===E}class Sn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const x=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,x)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const C=this.getInterval(g);this.timerId=setTimeout((0,d.Z)(function*(){yield _.iteration()}),C)}iteration(){var g=this;return(0,d.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class _t{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=re(this.lastLoginAt),this.creationTime=re(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function xn(E){return ro.apply(this,arguments)}function ro(){return(ro=(0,d.Z)(function*(E){var g;const _=E.auth,C=yield E.getIdToken(),x=yield bt(E,Kn(_,{idToken:C}));Oe(null==x?void 0:x.users.length,_,"internal-error");const P=x.users[0];E._notifyReloadListener(P);const X=(null===(g=P.providerUserInfo)||void 0===g?void 0:g.length)?hn(P.providerUserInfo):[],ve=Rt(E.providerData,X),it=!!E.isAnonymous&&!(E.email&&P.passwordHash||(null==ve?void 0:ve.length)),zt={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ve,metadata:new _t(P.createdAt,P.lastLoginAt),isAnonymous:it};Object.assign(E,zt)})).apply(this,arguments)}function je(){return(je=(0,d.Z)(function*(E){const g=(0,H.m9)(E);yield xn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Rt(E,g){return[...E.filter(C=>!g.some(x=>x.providerId===C.providerId)),...g]}function hn(E){return E.map(g=>{var{providerId:_}=g,C=_e(g,["providerId"]);return{providerId:_,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function Rs(){return(Rs=(0,d.Z)(function*(E,g){const _=yield cn(E,{},()=>{const C=(0,H.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:x,apiKey:P}=E.config,X=z(E,x,"/v1/token",`key=${P}`);return Fe.fetch()(X,{method:"POST",headers:{"X-Client-Version":E._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:C})});return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class $n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Oe(g.idToken,"internal-error"),Oe(void 0!==g.idToken,"internal-error"),Oe(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function(E){const g=lt(E);return Oe(g,"internal-error"),Oe(void 0!==g.exp,"internal-error"),Oe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var C=this;return(0,d.Z)(function*(){return Oe(!C.accessToken||C.refreshToken,g,"user-token-expired"),_||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(g,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var C=this;return(0,d.Z)(function*(){const{accessToken:x,refreshToken:P,expiresIn:X}=yield function(E,g){return Rs.apply(this,arguments)}(g,_);C.updateTokensAndExpiration(x,P,Number(X))})()}updateTokensAndExpiration(g,_,C){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(g,_){const{refreshToken:C,accessToken:x,expirationTime:P}=_,X=new $n;return C&&(Oe("string"==typeof C,"internal-error",{appName:g}),X.refreshToken=C),x&&(Oe("string"==typeof x,"internal-error",{appName:g}),X.accessToken=x),P&&(Oe("number"==typeof P,"internal-error",{appName:g}),X.expirationTime=P),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new $n,this.toJSON())}_performRefresh(){return _n("not implemented")}}function vr(E,g){Oe("string"==typeof E||void 0===E,"internal-error",{appName:g})}class yn{constructor(g){var{uid:_,auth:C,stsTokenManager:x}=g,P=_e(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new Sn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=C,this.stsTokenManager=x,this.accessToken=x.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.metadata=new _t(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,d.Z)(function*(){const C=yield bt(_,_.stsTokenManager.getToken(_.auth,g));return Oe(C,_.auth,"internal-error"),_.accessToken!==C&&(_.accessToken=C,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),C})()}getIdTokenResult(g){return function(E){return be.apply(this,arguments)}(this,g)}reload(){return function(E){return je.apply(this,arguments)}(this)}_assign(g){this!==g&&(Oe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new yn(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var C=this;return(0,d.Z)(function*(){let x=!1;g.idToken&&g.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(g),x=!0),_&&(yield xn(C)),yield C.auth._persistUserIfCurrent(C),x&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var g=this;return(0,d.Z)(function*(){const _=yield g.getIdToken();return yield bt(g,function(E,g){return at.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var C,x,P,X,ve,qe,Le,it;const zt=null!==(C=_.displayName)&&void 0!==C?C:void 0,vn=null!==(x=_.email)&&void 0!==x?x:void 0,Fr=null!==(P=_.phoneNumber)&&void 0!==P?P:void 0,En=null!==(X=_.photoURL)&&void 0!==X?X:void 0,Zc=null!==(ve=_.tenantId)&&void 0!==ve?ve:void 0,Th=null!==(qe=_._redirectEventId)&&void 0!==qe?qe:void 0,Dh=null!==(Le=_.createdAt)&&void 0!==Le?Le:void 0,Dp=null!==(it=_.lastLoginAt)&&void 0!==it?it:void 0,{uid:Ah,emailVerified:vm,isAnonymous:Sh,providerData:mo,stsTokenManager:Em}=_;Oe(Ah&&Em,g,"internal-error");const Al=$n.fromJSON(this.name,Em);Oe("string"==typeof Ah,g,"internal-error"),vr(zt,g.name),vr(vn,g.name),Oe("boolean"==typeof vm,g,"internal-error"),Oe("boolean"==typeof Sh,g,"internal-error"),vr(Fr,g.name),vr(En,g.name),vr(Zc,g.name),vr(Th,g.name),vr(Dh,g.name),vr(Dp,g.name);const wm=new yn({uid:Ah,auth:g,email:vn,emailVerified:vm,displayName:zt,isAnonymous:Sh,photoURL:En,phoneNumber:Fr,tenantId:Zc,stsTokenManager:Al,createdAt:Dh,lastLoginAt:Dp});return mo&&Array.isArray(mo)&&(wm.providerData=mo.map(Gc=>Object.assign({},Gc))),Th&&(wm._redirectEventId=Th),wm}static _fromIdTokenResponse(g,_,C=!1){return(0,d.Z)(function*(){const x=new $n;x.updateFromServerResponse(_);const P=new yn({uid:_.localId,auth:g,stsTokenManager:x,isAnonymous:C});return yield xn(P),P})()}}const Ps=(()=>{class E{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,d.Z)(function*(){return!0})()}_set(_,C){var x=this;return(0,d.Z)(function*(){x.storage[_]=C})()}_get(_){var C=this;return(0,d.Z)(function*(){const x=C.storage[_];return void 0===x?null:x})()}_remove(_){var C=this;return(0,d.Z)(function*(){delete C.storage[_]})()}_addListener(_,C){}_removeListener(_,C){}}return E.type="NONE",E})();function dt(E,g,_){return`firebase:${E}:${g}:${_}`}class ri{constructor(g,_,C){this.persistence=g,this.auth=_,this.userKey=C;const{config:x,name:P}=this.auth;this.fullUserKey=dt(this.userKey,x.apiKey,P),this.fullPersistenceKey=dt("persistence",x.apiKey,P),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,d.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?yn._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,d.Z)(function*(){if(_.persistence===g)return;const C=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,C?_.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,C="authUser"){return(0,d.Z)(function*(){if(!_.length)return new ri($e(Ps),g,C);const x=(yield Promise.all(_.map(function(){var Le=(0,d.Z)(function*(it){if(yield it._isAvailable())return it});return function(it){return Le.apply(this,arguments)}}()))).filter(Le=>Le);let P=x[0]||$e(Ps);const X=dt(C,g.config.apiKey,g.name);let ve=null;for(const Le of _)try{const it=yield Le._get(X);if(it){const zt=yn._fromJSON(g,it);Le!==P&&(ve=zt),P=Le;break}}catch(it){}const qe=x.filter(Le=>Le._shouldAllowMigration);return P._shouldAllowMigration&&qe.length?(P=qe[0],ve&&(yield P._set(X,ve.toJSON())),yield Promise.all(_.map(function(){var Le=(0,d.Z)(function*(it){if(it!==P)try{yield it._remove(X)}catch(zt){}});return function(it){return Le.apply(this,arguments)}}())),new ri(P,g,C)):new ri(P,g,C)})()}}function io(E){const g=E.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(ma(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(pr(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(vi(g))return"Blackberry";if(Wt(g))return"Webos";if(ko(g))return"Safari";if((g.includes("chrome/")||Nr(g))&&!g.includes("edge/"))return"Chrome";if(Ms(g))return"Android";{const C=E.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==C?void 0:C.length))return C[1]}return"Other"}function pr(E=(0,H.z$)()){return/firefox\//i.test(E)}function ko(E=(0,H.z$)()){const g=E.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Nr(E=(0,H.z$)()){return/crios\//i.test(E)}function ma(E=(0,H.z$)()){return/iemobile/i.test(E)}function Ms(E=(0,H.z$)()){return/android/i.test(E)}function vi(E=(0,H.z$)()){return/blackberry/i.test(E)}function Wt(E=(0,H.z$)()){return/webos/i.test(E)}function cu(E=(0,H.z$)()){return/iphone|ipad|ipod/i.test(E)}function ep(E=(0,H.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(E)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(E)}function Fo(E=(0,H.z$)()){return cu(E)||Ms(E)||Wt(E)||vi(E)||/windows phone/i.test(E)||ma(E)}function Os(E,g=[]){let _;switch(E){case"Browser":_=io((0,H.z$)());break;case"Worker":_=`${io((0,H.z$)())}-${E}`;break;default:_=E}const C=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${O.SDK_VERSION}/${C}`}class Rr{constructor(g,_){this.app=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ks(this),this.idTokenSubscription=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ti,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(g,_){var C=this;return _&&(this._popupRedirectResolver=$e(_)),this._initializationPromise=this.queue((0,d.Z)(function*(){var x,P;C._deleted||(C.persistenceManager=yield ri.create(C,g),!C._deleted&&((null===(x=C._popupRedirectResolver)||void 0===x?void 0:x._shouldInitProactively)&&(yield C._popupRedirectResolver._initialize(C)),yield C.initializeCurrentUser(_),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)))})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,d.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,d.Z)(function*(){var C;let x=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const P=null===(C=_.redirectUser)||void 0===C?void 0:C._redirectEventId,X=null==x?void 0:x._redirectEventId,ve=yield _.tryRedirectSignIn(g);(!P||P===X)&&(null==ve?void 0:ve.user)&&(x=ve.user)}return x?x._redirectEventId?(Oe(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===x._redirectEventId?_.directlySetCurrentUser(x):_.reloadAndSetCurrentUserOrClear(x)):_.reloadAndSetCurrentUserOrClear(x):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,d.Z)(function*(){let C=null;try{C=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(x){yield _._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,d.Z)(function*(){try{yield xn(g)}catch(C){if("auth/network-request-failed"!==C.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const E=navigator;return E.languages&&E.languages[0]||E.language||null}()}_delete(){var g=this;return(0,d.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){const C=g?(0,H.m9)(g):null;return C&&Oe(C.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(C&&C._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,d.Z)(function*(){if(!_._deleted)return g&&Oe(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,d.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,d.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,d.Z)(function*(){yield _.assertedPersistence.setPersistence($e(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new H.LL("auth","Firebase",g())}onAuthStateChanged(g,_,C){return this.registerStateListener(this.authStateSubscription,g,_,C)}onIdTokenChanged(g,_,C){return this.registerStateListener(this.idTokenSubscription,g,_,C)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var C=this;return(0,d.Z)(function*(){const x=yield C.getOrInitRedirectPersistenceManager(_);return null===g?x.removeCurrentUser():x.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,d.Z)(function*(){if(!_.redirectPersistenceManager){const C=g&&$e(g)||_._popupRedirectResolver;Oe(C,_,"argument-error"),_.redirectPersistenceManager=yield ri.create(_,[$e(C._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,d.Z)(function*(){var C,x;return _._isInitialized&&(yield _.queue((0,d.Z)(function*(){}))),(null===(C=_._currentUser)||void 0===C?void 0:C._redirectEventId)===g?_._currentUser:(null===(x=_.redirectUser)||void 0===x?void 0:x._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,d.Z)(function*(){if(g===_.currentUser)return _.queue((0,d.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,C,x){if(this._deleted)return()=>{};const P="function"==typeof _?_:_.next.bind(_),X=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(X,this,"internal-error"),X.then(()=>P(this.currentUser)),"function"==typeof _?g.addObserver(_,C,x):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,d.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Os(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function Pr(E){return(0,H.m9)(E)}class ks{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,H.ne)(_=>this.observer=_)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Mr(E,g,_){const C=Pr(E);Oe(C._canInitEmulator,C,"emulator-config-failed"),Oe(/^https?:\/\//.test(g),C,"invalid-emulator-scheme");const x=!!(null==_?void 0:_.disableWarnings),P=cc(g),{host:X,port:ve}=function(E){const g=cc(E),_=/(\/\/)?([^?#/]+)/.exec(E.substr(g.length));if(!_)return{host:"",port:null};const C=_[2].split("@").pop()||"",x=/^(\[[^\]]+\])(:|$)/.exec(C);if(x){const P=x[1];return{host:P,port:du(C.substr(P.length+1))}}{const[P,X]=C.split(":");return{host:P,port:du(X)}}}(g);C.config.emulator={url:`${P}//${X}${null===ve?"":`:${ve}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:X,port:ve,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:x})}),x||function(){function E(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",E):E())}()}function cc(E){const g=E.indexOf(":");return g<0?"":E.substr(0,g+1)}function du(E){if(!E)return null;const g=Number(E);return isNaN(g)?null:g}class Er{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return _n("not implemented")}_getIdTokenResponse(g){return _n("not implemented")}_linkToIdToken(g,_){return _n("not implemented")}_getReauthenticationResolver(g){return _n("not implemented")}}function tp(E,g){return dc.apply(this,arguments)}function dc(){return(dc=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:resetPassword",ln(E,g))})).apply(this,arguments)}function qd(E,g){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function rm(E,g){return Gd.apply(this,arguments)}function Gd(){return(Gd=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:update",ln(E,g))})).apply(this,arguments)}function oo(){return(oo=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithPassword",ln(E,g))})).apply(this,arguments)}function fc(E,g){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:sendOobCode",ln(E,g))})).apply(this,arguments)}function im(E,g){return zd.apply(this,arguments)}function zd(){return(zd=(0,d.Z)(function*(E,g){return fc(E,g)})).apply(this,arguments)}function sm(E,g){return Kd.apply(this,arguments)}function Kd(){return(Kd=(0,d.Z)(function*(E,g){return fc(E,g)})).apply(this,arguments)}function _v(E,g){return Xu.apply(this,arguments)}function Xu(){return(Xu=(0,d.Z)(function*(E,g){return fc(E,g)})).apply(this,arguments)}function np(E,g){return _a.apply(this,arguments)}function _a(){return(_a=(0,d.Z)(function*(E,g){return fc(E,g)})).apply(this,arguments)}function Yd(){return(Yd=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithEmailLink",ln(E,g))})).apply(this,arguments)}function el(){return(el=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithEmailLink",ln(E,g))})).apply(this,arguments)}class wi extends Er{constructor(g,_,C,x=null){super("password",C),this._email=g,this._password=_,this._tenantId=x}static _fromEmailAndPassword(g,_){return new wi(g,_,"password")}static _fromEmailAndCode(g,_,C=null){return new wi(g,_,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,d.Z)(function*(){switch(_.signInMethod){case"password":return function(E,g){return oo.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function(E,g){return Yd.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Jt(g,"internal-error")}})()}_linkToIdToken(g,_){var C=this;return(0,d.Z)(function*(){switch(C.signInMethod){case"password":return qd(g,{idToken:_,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function(E,g){return el.apply(this,arguments)}(g,{idToken:_,email:C._email,oobCode:C._password});default:Jt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Fs(E,g){return hu.apply(this,arguments)}function hu(){return(hu=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithIdp",ln(E,g))})).apply(this,arguments)}class Ls extends Er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new Ls(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Jt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x}=_,P=_e(_,["providerId","signInMethod"]);if(!C||!x)return null;const X=new Ls(C,x);return X.idToken=P.idToken||void 0,X.accessToken=P.accessToken||void 0,X.secret=P.secret,X.nonce=P.nonce,X.pendingToken=P.pendingToken||null,X}_getIdTokenResponse(g){return Fs(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Fs(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Fs(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,H.xO)(_)}return g}}function ya(E,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:sendVerificationCode",ln(E,g))})).apply(this,arguments)}function va(){return(va=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithPhoneNumber",ln(E,g))})).apply(this,arguments)}function _c(){return(_c=(0,d.Z)(function*(E,g){const _=yield W(E,"POST","/v1/accounts:signInWithPhoneNumber",ln(E,g));if(_.temporaryProof)throw le(E,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const ji={USER_NOT_FOUND:"user-not-found"};function tl(){return(tl=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithPhoneNumber",ln(E,Object.assign(Object.assign({},g),{operation:"REAUTH"})),ji)})).apply(this,arguments)}class hs extends Er{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new hs({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new hs({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function(E,g){return va.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function(E,g){return _c.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function(E,g){return tl.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:C,verificationCode:x}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:C,code:x}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}=g;return C||_||x||P?new hs({verificationId:_,verificationCode:C,phoneNumber:x,temporaryProof:P}):null}}class Ea{constructor(g){var _,C,x,P,X,ve;const qe=(0,H.zd)((0,H.pd)(g)),Le=null!==(_=qe.apiKey)&&void 0!==_?_:null,it=null!==(C=qe.oobCode)&&void 0!==C?C:null,zt=function(E){switch(E){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(x=qe.mode)&&void 0!==x?x:null);Oe(Le&&it&&zt,"argument-error"),this.apiKey=Le,this.operation=zt,this.code=it,this.continueUrl=null!==(P=qe.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(X=qe.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(ve=qe.tenantId)&&void 0!==ve?ve:null}static parseLink(g){const _=function(E){const g=(0,H.zd)((0,H.pd)(E)).link,_=g?(0,H.zd)((0,H.pd)(g)).deep_link_id:null,C=(0,H.zd)((0,H.pd)(E)).deep_link_id;return(C?(0,H.zd)((0,H.pd)(C)).link:null)||C||_||g||E}(g);try{return new Ea(_)}catch(C){return null}}}let pu=(()=>{class E{constructor(){this.providerId=E.PROVIDER_ID}static credential(_,C){return wi._fromEmailAndPassword(_,C)}static credentialWithLink(_,C){const x=Ea.parseLink(C);return Oe(x,"argument-error"),wi._fromEmailAndCode(_,x.code,x.tenantId)}}return E.PROVIDER_ID="password",E.EMAIL_PASSWORD_SIGN_IN_METHOD="password",E.EMAIL_LINK_SIGN_IN_METHOD="emailLink",E})();class wr{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class uo extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class an extends uo{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return Oe("providerId"in _&&"signInMethod"in _,"argument-error"),Ls._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Oe(g.idToken||g.accessToken,"argument-error"),Ls._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return an.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return an.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:C,oauthTokenSecret:x,pendingToken:P,nonce:X,providerId:ve}=g;if(!C&&!x&&!_&&!P||!ve)return null;try{return new an(ve)._credential({idToken:_,accessToken:C,nonce:X,pendingToken:P})}catch(qe){return null}}}let sp=(()=>{class E extends uo{constructor(){super("facebook.com")}static credential(_){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(C){return null}}}return E.FACEBOOK_SIGN_IN_METHOD="facebook.com",E.PROVIDER_ID="facebook.com",E})(),yc=(()=>{class E extends uo{constructor(){super("google.com"),this.addScope("profile")}static credential(_,C){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:C})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:C,oauthAccessToken:x}=_;if(!C&&!x)return null;try{return E.credential(C,x)}catch(P){return null}}}return E.GOOGLE_SIGN_IN_METHOD="google.com",E.PROVIDER_ID="google.com",E})(),wa=(()=>{class E extends uo{constructor(){super("github.com")}static credential(_){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return E.credential(_.oauthAccessToken)}catch(C){return null}}}return E.GITHUB_SIGN_IN_METHOD="github.com",E.PROVIDER_ID="github.com",E})();class Nn extends Er{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Fs(g,this.buildRequest())}_linkToIdToken(g,_){const C=this.buildRequest();return C.idToken=_,Fs(g,C)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Fs(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:C,signInMethod:x,pendingToken:P}=_;return C&&x&&P&&C===x?new Nn(C,P):null}static _create(g,_){return new Nn(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class $i extends wr{constructor(g){Oe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return $i.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return $i.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Nn.fromJSON(g);return Oe(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:C}=g;if(!_||!C)return null;try{return Nn._create(C,_)}catch(x){return null}}}let ii=(()=>{class E extends uo{constructor(){super("twitter.com")}static credential(_,C){return Ls._fromParams({providerId:E.PROVIDER_ID,signInMethod:E.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:C})}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:C,oauthTokenSecret:x}=_;if(!C||!x)return null;try{return E.credential(C,x)}catch(P){return null}}}return E.TWITTER_SIGN_IN_METHOD="twitter.com",E.PROVIDER_ID="twitter.com",E})();function nl(E,g){return gu.apply(this,arguments)}function gu(){return(gu=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signUp",ln(E,g))})).apply(this,arguments)}class gr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,C,x=!1){return(0,d.Z)(function*(){const P=yield yn._fromIdTokenResponse(g,C,x),X=fs(C);return new gr({user:P,providerId:X,_tokenResponse:C,operationType:_})})()}static _forOperation(g,_,C){return(0,d.Z)(function*(){yield g._updateTokensIfNecessary(C,!0);const x=fs(C);return new gr({user:g,providerId:x,_tokenResponse:C,operationType:_})})()}}function fs(E){return E.providerId?E.providerId:"phoneNumber"in E?"phone":null}function rl(E){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,d.Z)(function*(E){var g;const _=Pr(E);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new gr({user:_.currentUser,providerId:null,operationType:"signIn"});const C=yield nl(_,{returnSecureToken:!0}),x=yield gr._fromIdTokenResponse(_,"signIn",C,!0);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class ut extends H.ZR{constructor(g,_,C,x){var P;super(_.code,_.message),this.operationType=C,this.user=x,Object.setPrototypeOf(this,ut.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:_.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(g,_,C,x){return new ut(g,_,C,x)}}function Jd(E,g,_,C){return("reauthenticate"===g?_._getReauthenticationResolver(E):_._getIdTokenResponse(E)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?ut._fromErrorAndOperation(E,P,g,C):P})}function Xd(E){return new Set(E.map(({providerId:g})=>g).filter(g=>!!g))}function Ec(E,g){return il.apply(this,arguments)}function il(){return(il=(0,d.Z)(function*(E,g){const _=(0,H.m9)(E);yield ps(!0,_,g);const{providerUserInfo:C}=yield Gt(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),x=Xd(C||[]);return _.providerData=_.providerData.filter(P=>x.has(P.providerId)),x.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function mu(E,g){return wc.apply(this,arguments)}function wc(){return(wc=(0,d.Z)(function*(E,g,_=!1){const C=yield bt(E,g._linkToIdToken(E.auth,yield E.getIdToken()),_);return gr._forOperation(E,"link",C)})).apply(this,arguments)}function ps(E,g,_){return Te.apply(this,arguments)}function Te(){return(Te=(0,d.Z)(function*(E,g,_){yield xn(g);const x=!1===E?"provider-already-linked":"no-such-provider";Oe(Xd(g.providerData).has(_)===E,g.auth,x)})).apply(this,arguments)}function xt(E,g){return _u.apply(this,arguments)}function _u(){return(_u=(0,d.Z)(function*(E,g,_=!1){const{auth:C}=E,x="reauthenticate";try{const P=yield bt(E,Jd(C,x,g,E),_);Oe(P.idToken,C,"internal-error");const X=lt(P.idToken);Oe(X,C,"internal-error");const{sub:ve}=X;return Oe(E.uid===ve,C,"user-mismatch"),gr._forOperation(E,x,P)}catch(P){throw"auth/user-not-found"===(null==P?void 0:P.code)&&Jt(C,"user-mismatch"),P}})).apply(this,arguments)}function Cn(E,g){return yu.apply(this,arguments)}function yu(){return(yu=(0,d.Z)(function*(E,g,_=!1){const C="signIn",x=yield Jd(E,C,g),P=yield gr._fromIdTokenResponse(E,C,x);return _||(yield E._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Hi(E,g){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,d.Z)(function*(E,g){return Cn(Pr(E),g)})).apply(this,arguments)}function vu(E,g){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,d.Z)(function*(E,g){const _=(0,H.m9)(E);return yield ps(!1,_,g.providerId),mu(_,g)})).apply(this,arguments)}function op(E,g){return sl.apply(this,arguments)}function sl(){return(sl=(0,d.Z)(function*(E,g){return xt((0,H.m9)(E),g)})).apply(this,arguments)}function ol(E,g){return lo.apply(this,arguments)}function lo(){return(lo=(0,d.Z)(function*(E,g){return W(E,"POST","/v1/accounts:signInWithCustomToken",ln(E,g))})).apply(this,arguments)}function ur(E,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,d.Z)(function*(E,g){const _=Pr(E),C=yield ol(_,{token:g,returnSecureToken:!0}),x=yield gr._fromIdTokenResponse(_,"signIn",C);return yield _._updateCurrentUser(x.user),x})).apply(this,arguments)}class ba{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?gs._fromServerResponse(g,_):Jt(g,"internal-error")}}class gs extends ba{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new gs(_)}}function Cr(E,g,_){var C;Oe((null===(C=_.url)||void 0===C?void 0:C.length)>0,E,"invalid-continue-uri"),Oe(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,E,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(Oe(_.iOS.bundleId.length>0,E,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(Oe(_.android.packageName.length>0,E,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function om(E,g,_){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E),x={requestType:"PASSWORD_RESET",email:g};_&&Cr(C,x,_),yield sm(C,x)})).apply(this,arguments)}function Cc(E,g,_){return Eu.apply(this,arguments)}function Eu(){return(Eu=(0,d.Z)(function*(E,g,_){yield tp((0,H.m9)(E),{oobCode:g,newPassword:_})})).apply(this,arguments)}function bc(E,g){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,d.Z)(function*(E,g){yield rm((0,H.m9)(E),{oobCode:g})})).apply(this,arguments)}function Ic(E,g){return Uo.apply(this,arguments)}function Uo(){return(Uo=(0,d.Z)(function*(E,g){const _=(0,H.m9)(E),C=yield tp(_,{oobCode:g}),x=C.requestType;switch(Oe(x,_,"internal-error"),x){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(C.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(C.mfaInfo,_,"internal-error");default:Oe(C.email,_,"internal-error")}let P=null;return C.mfaInfo&&(P=ba._fromServerResponse(Pr(_),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:x}})).apply(this,arguments)}function al(E,g){return wu.apply(this,arguments)}function wu(){return(wu=(0,d.Z)(function*(E,g){const{data:_}=yield Ic((0,H.m9)(E),g);return _.email})).apply(this,arguments)}function Cu(E,g,_){return ul.apply(this,arguments)}function ul(){return(ul=(0,d.Z)(function*(E,g,_){const C=Pr(E),x=yield nl(C,{returnSecureToken:!0,email:g,password:_}),P=yield gr._fromIdTokenResponse(C,"signIn",x);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function ap(E,g,_){return Hi((0,H.m9)(E),pu.credential(g,_))}function eh(E,g,_){return ll.apply(this,arguments)}function ll(){return(ll=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E),x={requestType:"EMAIL_SIGNIN",email:g};Oe(_.handleCodeInApp,C,"argument-error"),_&&Cr(C,x,_),yield _v(C,x)})).apply(this,arguments)}function Bo(E,g){const _=Ea.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function up(E,g,_){return bu.apply(this,arguments)}function bu(){return(bu=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E),x=pu.credentialWithLink(g,_||Hn());return Oe(x._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),Hi(C,x)})).apply(this,arguments)}function br(E,g){return co.apply(this,arguments)}function co(){return(co=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:createAuthUri",ln(E,g))})).apply(this,arguments)}function Yn(E,g){return cl.apply(this,arguments)}function cl(){return(cl=(0,d.Z)(function*(E,g){const C={identifier:g,continueUri:tt()?Hn():"http://localhost"},{signinMethods:x}=yield br((0,H.m9)(E),C);return x||[]})).apply(this,arguments)}function yv(E,g){return th.apply(this,arguments)}function th(){return(th=(0,d.Z)(function*(E,g){const _=(0,H.m9)(E),x={requestType:"VERIFY_EMAIL",idToken:yield E.getIdToken()};g&&Cr(_.auth,x,g);const{email:P}=yield im(_.auth,x);P!==E.email&&(yield E.reload())})).apply(this,arguments)}function dl(E,g,_){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield E.getIdToken(),newEmail:g};_&&Cr(C.auth,P,_);const{email:X}=yield np(C.auth,P);X!==E.email&&(yield E.reload())})).apply(this,arguments)}function Dc(E,g){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,d.Z)(function*(E,g){return nn(E,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Da(E,g){return jo.apply(this,arguments)}function jo(){return(jo=(0,d.Z)(function*(E,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const C=(0,H.m9)(E),P={idToken:yield C.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},X=yield bt(C,Dc(C.auth,P));C.displayName=X.displayName||null,C.photoURL=X.photoUrl||null;const ve=C.providerData.find(({providerId:qe})=>"password"===qe);ve&&(ve.displayName=C.displayName,ve.photoURL=C.photoURL),yield C._updateTokensIfNecessary(X)})).apply(this,arguments)}function nr(E,g){return nh((0,H.m9)(E),g,null)}function Ac(E,g){return nh((0,H.m9)(E),null,g)}function nh(E,g,_){return ms.apply(this,arguments)}function ms(){return(ms=(0,d.Z)(function*(E,g,_){const{auth:C}=E,P={idToken:yield E.getIdToken(),returnSecureToken:!0};g&&(P.email=g),_&&(P.password=_);const X=yield bt(E,qd(C,P));yield E._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class $o{constructor(g,_,C={}){this.isNewUser=g,this.providerId=_,this.profile=C}}class rh extends $o{constructor(g,_,C,x){super(g,_,C),this.username=x}}class Ho extends $o{constructor(g,_){super(g,"facebook.com",_)}}class Sc extends rh{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class ih extends $o{constructor(g,_){super(g,"google.com",_)}}class am extends rh{constructor(g,_,C){super(g,"twitter.com",_,C)}}function um(E){const{user:g,_tokenResponse:_}=E;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function(E){var g,_;if(!E)return null;const{providerId:C}=E,x=E.rawUserInfo?JSON.parse(E.rawUserInfo):{},P=E.isNewUser||"identitytoolkit#SignupNewUserResponse"===E.kind;if(!C&&(null==E?void 0:E.idToken)){const X=null===(_=null===(g=lt(E.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(X)return new $o(P,"anonymous"!==X&&"custom"!==X?X:null)}if(!C)return null;switch(C){case"facebook.com":return new Ho(P,x);case"github.com":return new Sc(P,x);case"google.com":return new ih(P,x);case"twitter.com":return new am(P,x,E.screenName||null);case"custom":case"anonymous":return new $o(P,null);default:return new $o(P,C,x)}}(_)}class Aa{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Aa("enroll",g)}static _fromMfaPendingCredential(g){return new Aa("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,C;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Aa._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(C=g.multiFactorSession)||void 0===C?void 0:C.idToken)return Aa._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Us{constructor(g,_,C){this.session=g,this.hints=_,this.signInResolver=C}static _fromError(g,_){const C=Pr(g),x=_.customData._serverResponse,P=(x.mfaInfo||[]).map(ve=>ba._fromServerResponse(C,ve));Oe(x.mfaPendingCredential,C,"internal-error");const X=Aa._fromMfaPendingCredential(x.mfaPendingCredential);return new Us(X,P,function(){var ve=(0,d.Z)(function*(qe){const Le=yield qe._process(C,X);delete x.mfaInfo,delete x.mfaPendingCredential;const it=Object.assign(Object.assign({},x),{idToken:Le.idToken,refreshToken:Le.refreshToken});switch(_.operationType){case"signIn":const zt=yield gr._fromIdTokenResponse(C,_.operationType,it);return yield C._updateCurrentUser(zt.user),zt;case"reauthenticate":return Oe(_.user,C,"internal-error"),gr._forOperation(_.user,_.operationType,it);default:Jt(C,"internal-error")}});return function(qe){return ve.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,d.Z)(function*(){return _.signInResolver(g)})()}}function Nc(E,g){var _;const C=(0,H.m9)(E),x=g;return Oe(g.customData.operationType,C,"argument-error"),Oe(null===(_=x.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,C,"argument-error"),Us._fromError(C,x)}function Sa(E,g){return nn(E,"POST","/v2/accounts/mfaEnrollment:start",ln(E,g))}class Rc{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(C=>ba._fromServerResponse(g.auth,C)))})}static _fromUser(g){return new Rc(g)}getSession(){var g=this;return(0,d.Z)(function*(){return Aa._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var C=this;return(0,d.Z)(function*(){const x=g,P=yield C.getSession(),X=yield bt(C.user,x._process(C.user.auth,P,_));return yield C.user._updateTokensIfNecessary(X),C.user.reload()})()}unenroll(g){var _=this;return(0,d.Z)(function*(){const C="string"==typeof g?g:g.uid,x=yield _.user.getIdToken(),P=yield bt(_.user,function(E,g){return nn(E,"POST","/v2/accounts/mfaEnrollment:withdraw",ln(E,g))}(_.user.auth,{idToken:x,mfaEnrollmentId:C}));_.enrolledFactors=_.enrolledFactors.filter(({uid:X})=>X!==C),yield _.user._updateTokensIfNecessary(P);try{yield _.user.reload()}catch(X){if("auth/user-token-expired"!==X.code)throw X}})()}}const ah=new WeakMap;function uh(E){const g=(0,H.m9)(E);return ah.has(g)||ah.set(g,Rc._fromUser(g)),ah.get(g)}const ho="__sak";class Iu{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ho,"1"),this.storage.removeItem(ho),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ir=(()=>{class E extends Iu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,C)=>this.onStorageEvent(_,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const E=(0,H.z$)();return ko(E)||cu(E)}()&&function(){try{return!(!window||window===window.top)}catch(E){return!1}}(),this.fallbackToPolling=Fo(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const C of Object.keys(this.listeners)){const x=this.storage.getItem(C),P=this.localCache[C];x!==P&&_(C,P,x)}}onStorageEvent(_,C=!1){if(!_.key)return void this.forAllChangedKeys((ve,qe,Le)=>{this.notifyListeners(ve,Le)});const x=_.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ve=this.storage.getItem(x);if(_.newValue!==ve)null!==_.newValue?this.storage.setItem(x,_.newValue):this.storage.removeItem(x);else if(this.localCache[x]===_.newValue&&!C)return}const P=()=>{const ve=this.storage.getItem(x);!C&&this.localCache[x]===ve||this.notifyListeners(x,ve)},X=this.storage.getItem(x);(0,H.w1)()&&10===document.documentMode&&X!==_.newValue&&_.newValue!==_.oldValue?setTimeout(P,10):P()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,C,x)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:C,newValue:x}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,C){var x=()=>super._set,P=this;return(0,d.Z)(function*(){yield x().call(P,_,C),P.localCache[_]=JSON.stringify(C)})()}_get(_){var C=()=>super._get,x=this;return(0,d.Z)(function*(){const P=yield C().call(x,_);return x.localCache[_]=JSON.stringify(P),P})()}_remove(_){var C=()=>super._remove,x=this;return(0,d.Z)(function*(){yield C().call(x,_),delete x.localCache[_]})()}}return E.type="LOCAL",E})(),qo=(()=>{class E extends Iu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,C){}_removeListener(_,C){}}return E.type="SESSION",E})();let pl=(()=>{class E{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const C=this.receivers.find(P=>P.isListeningto(_));if(C)return C;const x=new E(_);return this.receivers.push(x),x}isListeningto(_){return this.eventTarget===_}handleEvent(_){var C=this;return(0,d.Z)(function*(){const x=_,{eventId:P,eventType:X,data:ve}=x.data,qe=C.handlersMap[X];if(!(null==qe?void 0:qe.size))return;x.ports[0].postMessage({status:"ack",eventId:P,eventType:X});const Le=Array.from(qe).map(function(){var zt=(0,d.Z)(function*(vn){return vn(x.origin,ve)});return function(vn){return zt.apply(this,arguments)}}()),it=yield function(E){return Promise.all(E.map(function(){var g=(0,d.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(C){return{fulfilled:!1,reason:C}}});return function(_){return g.apply(this,arguments)}}()))}(Le);x.ports[0].postMessage({status:"done",eventId:P,eventType:X,response:it})})()}_subscribe(_,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(C)}_unsubscribe(_,C){this.handlersMap[_]&&C&&this.handlersMap[_].delete(C),(!C||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return E.receivers=[],E})();function gl(E="",g=10){let _="";for(let C=0;C<g;C++)_+=Math.floor(10*Math.random());return E+_}class ml{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,C=50){var x=this;return(0,d.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let X,ve;return new Promise((qe,Le)=>{const it=gl("",20);P.port1.start();const zt=setTimeout(()=>{Le(new Error("unsupported_event"))},C);ve={messageChannel:P,onMessage(vn){const Fr=vn;if(Fr.data.eventId===it)switch(Fr.data.status){case"ack":clearTimeout(zt),X=setTimeout(()=>{Le(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),qe(Fr.data.response);break;default:clearTimeout(zt),clearTimeout(X),Le(new Error("invalid_response"))}}},x.handlers.add(ve),P.port1.addEventListener("message",ve.onMessage),x.target.postMessage({eventType:g,eventId:it,data:_},[P.port2])}).finally(()=>{ve&&x.removeMessageHandler(ve)})})()}}function Ut(){return window}function xa(){return void 0!==Ut().WorkerGlobalScope&&"function"==typeof Ut().importScripts}function ys(){return(ys=(0,d.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(E){return null}})).apply(this,arguments)}const Oc="firebaseLocalStorageDb",Ti="firebaseLocalStorage",Bs="fbase_key";class vs{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function si(E,g){return E.transaction([Ti],g?"readwrite":"readonly").objectStore(Ti)}function _l(){const E=indexedDB.open(Oc,1);return new Promise((g,_)=>{E.addEventListener("error",()=>{_(E.error)}),E.addEventListener("upgradeneeded",()=>{const C=E.result;try{C.createObjectStore(Ti,{keyPath:Bs})}catch(x){_(x)}}),E.addEventListener("success",(0,d.Z)(function*(){const C=E.result;C.objectStoreNames.contains(Ti)?g(C):(C.close(),yield function(){const E=indexedDB.deleteDatabase(Oc);return new vs(E).toPromise()}(),g(yield _l()))}))})}function mt(E,g,_){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,d.Z)(function*(E,g,_){const C=si(E,!0).put({[Bs]:g,value:_});return new vs(C).toPromise()})).apply(this,arguments)}function hh(){return(hh=(0,d.Z)(function*(E,g){const _=si(E,!1).get(g),C=yield new vs(_).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function kn(E,g){const _=si(E,!0).delete(g);return new vs(_).toPromise()}const fp=(()=>{class E{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,d.Z)(function*(){return _.db||(_.db=yield _l()),_.db})()}_withRetries(_){var C=this;return(0,d.Z)(function*(){let x=0;for(;;)try{const P=yield C._openDb();return yield _(P)}catch(P){if(x++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,d.Z)(function*(){return xa()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,d.Z)(function*(){_.receiver=pl._getInstance(xa()?self:null),_.receiver._subscribe("keyChanged",function(){var C=(0,d.Z)(function*(x,P){return{keyProcessed:(yield _._poll()).includes(P.key)}});return function(x,P){return C.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var C=(0,d.Z)(function*(x,P){return["keyChanged"]});return function(x,P){return C.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,d.Z)(function*(){var C,x;if(_.activeServiceWorker=yield function(){return ys.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new ml(_.activeServiceWorker);const P=yield _.sender._send("ping",{},800);!P||(null===(C=P[0])||void 0===C?void 0:C.fulfilled)&&(null===(x=P[0])||void 0===x?void 0:x.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var C=this;return(0,d.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function(){var E;return(null===(E=null==navigator?void 0:navigator.serviceWorker)||void 0===E?void 0:E.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:_},C.serviceWorkerReceiverAvailable?800:50)}catch(x){}})()}_isAvailable(){return(0,d.Z)(function*(){try{if(!indexedDB)return!1;const _=yield _l();return yield mt(_,ho,"1"),yield kn(_,ho),!0}catch(_){}return!1})()}_withPendingWrite(_){var C=this;return(0,d.Z)(function*(){C.pendingWrites++;try{yield _()}finally{C.pendingWrites--}})()}_set(_,C){var x=this;return(0,d.Z)(function*(){return x._withPendingWrite((0,d.Z)(function*(){return yield x._withRetries(P=>mt(P,_,C)),x.localCache[_]=C,x.notifyServiceWorker(_)}))})()}_get(_){var C=this;return(0,d.Z)(function*(){const x=yield C._withRetries(P=>function(E,g){return hh.apply(this,arguments)}(P,_));return C.localCache[_]=x,x})()}_remove(_){var C=this;return(0,d.Z)(function*(){return C._withPendingWrite((0,d.Z)(function*(){return yield C._withRetries(x=>kn(x,_)),delete C.localCache[_],C.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,d.Z)(function*(){const C=yield _._withRetries(X=>{const ve=si(X,!1).getAll();return new vs(ve).toPromise()});if(!C)return[];if(0!==_.pendingWrites)return[];const x=[],P=new Set;for(const{fbase_key:X,value:ve}of C)P.add(X),JSON.stringify(_.localCache[X])!==JSON.stringify(ve)&&(_.notifyListeners(X,ve),x.push(X));for(const X of Object.keys(_.localCache))_.localCache[X]&&!P.has(X)&&(_.notifyListeners(X,null),x.push(X));return x})()}notifyListeners(_,C){this.localCache[_]=C;const x=this.listeners[_];if(x)for(const P of Array.from(x))P(C)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,d.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(C)}_removeListener(_,C){this.listeners[_]&&(this.listeners[_].delete(C),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return E.type="LOCAL",E})();function lm(E,g){return nn(E,"POST","/v2/accounts/mfaSignIn:start",ln(E,g))}function fh(){return(fh=(0,d.Z)(function*(E){return(yield nn(E,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Es(E){return new Promise((g,_)=>{const C=document.createElement("script");C.setAttribute("src",E),C.onload=g,C.onerror=x=>{const P=Xt("internal-error");P.customData=x,_(P)},C.type="text/javascript",C.charset="UTF-8",function(){var E,g;return null!==(g=null===(E=document.getElementsByTagName("head"))||void 0===E?void 0:E[0])&&void 0!==g?g:document}().appendChild(C)})}function Fc(E){return`__${E}${Math.floor(1e6*Math.random())}`}const Fn=1e12;class Pa{constructor(g){this.auth=g,this.counter=Fn,this._widgets=new Map}render(g,_){const C=this.counter;return this._widgets.set(C,new Qn(g,this.auth.name,_||{})),this.counter++,C}reset(g){var _;const C=g||Fn;null===(_=this._widgets.get(C))||void 0===_||_.delete(),this._widgets.delete(C)}getResponse(g){var _;return(null===(_=this._widgets.get(g||Fn))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,d.Z)(function*(){var C;return null===(C=_._widgets.get(g||Fn))||void 0===C||C.execute(),""})()}}class Qn{constructor(g,_,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const x="string"==typeof g?document.getElementById(g):g;Oe(x,"argument-error",{appName:_}),this.container=x,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(E){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<50;C++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}();const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(C){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(C){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const vl=Fc("rcb"),Gi=new qn(3e4,6e4);class Du{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Ut().grecaptcha}load(g,_=""){return Oe((E=_).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(E),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Ut().grecaptcha):new Promise((C,x)=>{const P=Ut().setTimeout(()=>{x(Xt(g,"network-request-failed"))},Gi.get());Ut()[vl]=()=>{Ut().clearTimeout(P),delete Ut()[vl];const ve=Ut().grecaptcha;if(!ve)return void x(Xt(g,"internal-error"));const qe=ve.render;ve.render=(Le,it)=>{const zt=qe(Le,it);return this.counter++,zt},this.hostLanguage=_,C(ve)},Es(`https://www.google.com/recaptcha/api.js??${(0,H.xO)({onload:vl,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(P),x(Xt(g,"internal-error"))})});var E}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Ut().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class js{load(g){return(0,d.Z)(function*(){return new Pa(g)})()}clearedOneInstance(){}}const Vc="recaptcha",ph={theme:"light",type:"image"};class Go{constructor(g,_=Object.assign({},ph),C){this.parameters=_,this.type=Vc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Pr(C),this.isInvisible="invisible"===this.parameters.size,Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const x="string"==typeof g?document.getElementById(g):g;Oe(x,this.auth,"argument-error"),this.container=x,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new js:new Du,this.validateStartingState()}verify(){var g=this;return(0,d.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),C=g.getAssertedRecaptcha();return C.getResponse(_)||new Promise(P=>{const X=ve=>{!ve||(g.tokenChangeListeners.delete(X),P(ve))};g.tokenChangeListeners.add(X),g.isInvisible&&C.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(C=>C(_)),"function"==typeof g)g(_);else if("string"==typeof g){const C=Ut()[g];"function"==typeof C&&C(_)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,d.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const C=document.createElement("div");_.appendChild(C),_=C}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,d.Z)(function*(){Oe(tt()&&!xa(),g.auth,"internal-error"),yield function(){let E=null;return new Promise(g=>{"complete"!==document.readyState?(E=()=>g(),window.addEventListener("load",E)):g()}).catch(g=>{throw E&&window.removeEventListener("load",E),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function(E){return fh.apply(this,arguments)}(g.auth);Oe(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class $s{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=hs._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function pp(E,g,_){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,d.Z)(function*(E,g,_){const C=Pr(E),x=yield I(C,g,(0,H.m9)(_));return new $s(x,P=>Hi(C,P))})).apply(this,arguments)}function Tr(E,g,_){return go.apply(this,arguments)}function go(){return(go=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E);yield ps(!1,C,"phone");const x=yield I(C.auth,g,(0,H.m9)(_));return new $s(x,P=>vu(C,P))})).apply(this,arguments)}function gp(E,g,_){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E),x=yield I(C.auth,g,(0,H.m9)(_));return new $s(x,P=>op(C,P))})).apply(this,arguments)}function I(E,g,_){return D.apply(this,arguments)}function D(){return(D=(0,d.Z)(function*(E,g,_){var C;const x=yield _.verify();try{let P;if(Oe("string"==typeof x,E,"argument-error"),Oe(_.type===Vc,E,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const X=P.session;if("phoneNumber"in P)return Oe("enroll"===X.type,E,"internal-error"),(yield Sa(E,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:x}})).phoneSessionInfo.sessionInfo;{Oe("signin"===X.type,E,"internal-error");const ve=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return Oe(ve,E,"missing-multi-factor-info"),(yield lm(E,{mfaPendingCredential:X.credential,mfaEnrollmentId:ve,phoneSignInInfo:{recaptchaToken:x}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield ya(E,{phoneNumber:P.phoneNumber,recaptchaToken:x});return X}}finally{_._reset()}})).apply(this,arguments)}function R(E,g){return j.apply(this,arguments)}function j(){return(j=(0,d.Z)(function*(E,g){yield mu((0,H.m9)(E),g)})).apply(this,arguments)}let ee=(()=>{class E{constructor(_){this.providerId=E.PROVIDER_ID,this.auth=Pr(_)}verifyPhoneNumber(_,C){return I(this.auth,_,(0,H.m9)(C))}static credential(_,C){return hs._fromVerification(_,C)}static credentialFromResult(_){return E.credentialFromTaggedObject(_)}static credentialFromError(_){return E.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:C,temporaryProof:x}=_;return C&&x?hs._fromTokenResponse(C,x):null}}return E.PROVIDER_ID="phone",E.PHONE_SIGN_IN_METHOD="phone",E})();function de(E,g){return g?$e(g):(Oe(E._popupRedirectResolver,E,"argument-error"),E._popupRedirectResolver)}class Se extends Er{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Fs(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Fs(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Fs(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function Ze(E){return Cn(E.auth,new Se(E),E.bypassAuthState)}function We(E){const{auth:g,user:_}=E;return Oe(_,g,"internal-error"),xt(_,new Se(E),E.bypassAuthState)}function Ot(E){return rn.apply(this,arguments)}function rn(){return(rn=(0,d.Z)(function*(E){const{auth:g,user:_}=E;return Oe(_,g,"internal-error"),mu(_,new Se(E),E.bypassAuthState)})).apply(this,arguments)}class rr{constructor(g,_,C,x,P=!1){this.auth=g,this.resolver=C,this.user=x,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,d.Z)(function*(C,x){g.pendingPromise={resolve:C,reject:x};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(C,x){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,d.Z)(function*(){const{urlResponse:C,sessionId:x,postBody:P,tenantId:X,error:ve,type:qe}=g;if(ve)return void _.reject(ve);const Le={auth:_.auth,requestUri:C,sessionId:x,tenantId:X||void 0,postBody:P||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(qe)(Le))}catch(it){_.reject(it)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ze;case"linkViaPopup":case"linkViaRedirect":return Ot;case"reauthViaPopup":case"reauthViaRedirect":return We;default:Jt(this.auth,"internal-error")}}resolve(g){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const oi=new qn(2e3,1e4);function lr(E,g,_){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,d.Z)(function*(E,g,_){const C=Pr(E);_i(E,g,wr);const x=de(C,_);return new ft(C,"signInViaPopup",g,x).executeNotNull()})).apply(this,arguments)}function Au(E,g,_){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E);_i(C.auth,g,wr);const x=de(C.auth,_);return new ft(C.auth,"reauthViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}function Hs(E,g,_){return ai.apply(this,arguments)}function ai(){return(ai=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E);_i(C.auth,g,wr);const x=de(C.auth,_);return new ft(C.auth,"linkViaPopup",g,x,C).executeNotNull()})).apply(this,arguments)}let ft=(()=>{class E extends rr{constructor(_,C,x,P,X){super(_,C,P,X),this.provider=x,this.authWindow=null,this.pollId=null,E.currentPopupAction&&E.currentPopupAction.cancel(),E.currentPopupAction=this}executeNotNull(){var _=this;return(0,d.Z)(function*(){const C=yield _.execute();return Oe(C,_.auth,"internal-error"),C})()}onExecution(){var _=this;return(0,d.Z)(function*(){zn(1===_.filter.length,"Popup operations only handle one event");const C=gl();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],C),_.authWindow.associatedEvent=C,_.resolver._originValidation(_.auth).catch(x=>{_.reject(x)}),_.resolver._isIframeWebStorageSupported(_.auth,x=>{x||_.reject(Xt(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(Xt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,E.currentPopupAction=null}pollUserCancellation(){const _=()=>{var C,x;this.pollId=(null===(x=null===(C=this.authWindow)||void 0===C?void 0:C.window)||void 0===x?void 0:x.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Xt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,oi.get())};_()}}return E.currentPopupAction=null,E})();const bn=new Map;class mp extends rr{constructor(g,_,C=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,C),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,d.Z)(function*(){let C=bn.get(_.auth._key());if(!C){try{const P=(yield function(E,g){return Wo.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;C=()=>Promise.resolve(P)}catch(x){C=()=>Promise.reject(x)}bn.set(_.auth._key(),C)}return _.bypassAuthState||bn.set(_.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,C=this;return(0,d.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(C,g);if("unknown"!==g.type){if(g.eventId){const x=yield C.auth._redirectUserForId(g.eventId);if(x)return C.user=x,_().call(C,g);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,d.Z)(function*(){})()}cleanUp(){}}function Wo(){return(Wo=(0,d.Z)(function*(E,g){const _=fm(g),C=gh(E);if(!(yield C._isAvailable()))return!1;const x="true"===(yield C._get(_));return yield C._remove(_),x})).apply(this,arguments)}function Su(E,g){return _p.apply(this,arguments)}function _p(){return(_p=(0,d.Z)(function*(E,g){return gh(E)._set(fm(g),"true")})).apply(this,arguments)}function qs(){bn.clear()}function gh(E){return $e(E._redirectPersistence)}function fm(E){return dt("pendingRedirect",E.config.apiKey,E.name)}function xu(E,g,_){return function(E,g,_){return Xn.apply(this,arguments)}(E,g,_)}function Xn(){return(Xn=(0,d.Z)(function*(E,g,_){const C=Pr(E);_i(E,g,wr);const x=de(C,_);return yield Su(x,C),x._openRedirect(C,g,"signInViaRedirect")})).apply(this,arguments)}function kr(E,g,_){return function(E,g,_){return mh.apply(this,arguments)}(E,g,_)}function mh(){return(mh=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E);_i(C.auth,g,wr);const x=de(C.auth,_);yield Su(x,C.auth);const P=yield jc(C);return x._openRedirect(C.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function _h(E,g,_){return function(E,g,_){return yh.apply(this,arguments)}(E,g,_)}function yh(){return(yh=(0,d.Z)(function*(E,g,_){const C=(0,H.m9)(E);_i(C.auth,g,wr);const x=de(C.auth,_);yield ps(!1,C,g.providerId),yield Su(x,C.auth);const P=yield jc(C);return x._openRedirect(C.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function pm(E,g){return yp.apply(this,arguments)}function yp(){return(yp=(0,d.Z)(function*(E,g){return yield Pr(E)._initializationPromise,zo(E,g,!1)})).apply(this,arguments)}function zo(E,g){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,d.Z)(function*(E,g,_=!1){const C=Pr(E),x=de(C,g),X=yield new mp(C,x,_).execute();return X&&!_&&(delete X.user._redirectEventId,yield C._persistUserIfCurrent(X.user),yield C._setRedirectUser(null,g)),X})).apply(this,arguments)}function jc(E){return La.apply(this,arguments)}function La(){return(La=(0,d.Z)(function*(E){const g=gl(`${E.uid}:::`);return E._redirectEventId=g,yield E.auth._setRedirectUser(E),yield E.auth._persistUserIfCurrent(E),g})).apply(this,arguments)}class El{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(g,C)&&(_=!0,this.sendToConsumer(g,C),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function(E){switch(E.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Va(E);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var C;if(g.error&&!Va(g)){const x=(null===(C=g.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";_.onError(Xt(this.auth,x))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const C=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&C}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cv(g))}saveEventToCache(g){this.cachedEventUids.add(Cv(g)),this.lastProcessedEventTime=Date.now()}}function Cv(E){return[E.type,E.eventId,E.sessionId,E.tenantId].filter(g=>g).join("-")}function Va({type:E,error:g}){return"unknown"===E&&"auth/no-auth-event"===(null==g?void 0:g.code)}function vh(E){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,d.Z)(function*(E,g={}){return nn(E,"GET","/v1/projects",g)})).apply(this,arguments)}const vp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ko=/^https?/;function Eh(){return(Eh=(0,d.Z)(function*(E){if(E.config.emulator)return;const{authorizedDomains:g}=yield vh(E);for(const _ of g)try{if(Ep(_))return}catch(C){}Jt(E,"unauthorized-domain")})).apply(this,arguments)}function Ep(E){const g=Hn(),{protocol:_,hostname:C}=new URL(g);if(E.startsWith("chrome-extension://")){const X=new URL(E);return""===X.hostname&&""===C?"chrome-extension:"===_&&E.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&X.hostname===C}if(!Ko.test(_))return!1;if(vp.test(E))return C===E;const x=E.replace(/\./g,"\\.");return new RegExp("^(.+\\."+x+"|"+x+")$","i").test(C)}const wh=new qn(3e4,6e4);function wl(){const E=Ut().___jsl;if(null==E?void 0:E.H)for(const g of Object.keys(E.H))if(E.H[g].r=E.H[g].r||[],E.H[g].L=E.H[g].L||[],E.H[g].r=[...E.H[g].L],E.CP)for(let _=0;_<E.CP.length;_++)E.CP[_]=null}let Cl=null;function wp(E){return Cl=Cl||function(E){return new Promise((g,_)=>{var C,x,P;function X(){wl(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{wl(),_(Xt(E,"network-request-failed"))},timeout:wh.get()})}if(null===(x=null===(C=Ut().gapi)||void 0===C?void 0:C.iframes)||void 0===x?void 0:x.Iframe)g(gapi.iframes.getContext());else{if(!(null===(P=Ut().gapi)||void 0===P?void 0:P.load)){const ve=Fc("iframefcb");return Ut()[ve]=()=>{gapi.load?X():_(Xt(E,"network-request-failed"))},Es(`https://apis.google.com/js/api.js?onload=${ve}`)}X()}}).catch(g=>{throw Cl=null,g})}(E),Cl}const Ru=new qn(5e3,15e3),Ch={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true"},Dv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Av(E){const g=E.config;Oe(g.authDomain,E,"auth-domain-config-required");const _=g.emulator?en(g,"emulator/auth/iframe"):`https://${E.config.authDomain}/__/auth/iframe`,C={apiKey:g.apiKey,appName:E.name,v:O.SDK_VERSION},x=Dv.get(E.config.apiHost);x&&(C.eid=x);const P=E._getFrameworks();return P.length&&(C.fw=P.join(",")),`${_}?${(0,H.xO)(C).slice(1)}`}function Ua(){return(Ua=(0,d.Z)(function*(E){const g=yield wp(E),_=Ut().gapi;return Oe(_,E,"internal-error"),g.open({where:document.body,url:Av(E),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ch,dontclear:!0},C=>new Promise(function(){var x=(0,d.Z)(function*(P,X){yield C.restyle({setHideOnLeave:!1});const ve=Xt(E,"network-request-failed"),qe=Ut().setTimeout(()=>{X(ve)},Ru.get());function Le(){Ut().clearTimeout(qe),P(C)}C.ping(Le).then(Le,()=>{X(ve)})});return function(P,X){return x.apply(this,arguments)}}()))})).apply(this,arguments)}const gm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class bl{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function bh(E,g,_,C,x,P){Oe(E.config.authDomain,E,"auth-domain-config-required"),Oe(E.config.apiKey,E,"invalid-api-key");const X={apiKey:E.config.apiKey,appName:E.name,authType:_,redirectUrl:C,v:O.SDK_VERSION,eventId:x};if(g instanceof wr){g.setDefaultLanguage(E.languageCode),X.providerId=g.providerId||"",(0,H.xb)(g.getCustomParameters())||(X.customParameters=JSON.stringify(g.getCustomParameters()));for(const[qe,Le]of Object.entries(P||{}))X[qe]=Le}if(g instanceof uo){const qe=g.getScopes().filter(Le=>""!==Le);qe.length>0&&(X.scopes=qe.join(","))}E.tenantId&&(X.tid=E.tenantId);const ve=X;for(const qe of Object.keys(ve))void 0===ve[qe]&&delete ve[qe];return`${function({config:E}){return E.emulator?en(E,"emulator/auth/handler"):`https://${E.authDomain}/__/auth/handler`}(E)}?${(0,H.xO)(ve).slice(1)}`}const Il="webStorageSupport",qc=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qo,this._completeRedirectFn=zo}_openPopup(g,_,C,x){var P=this;return(0,d.Z)(function*(){var X;zn(null===(X=P.eventManagers[g._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const ve=bh(g,_,C,Hn(),x);return function(E,g,_,C=500,x=600){const P=Math.max((window.screen.availHeight-x)/2,0).toString(),X=Math.max((window.screen.availWidth-C)/2,0).toString();let ve="";const qe=Object.assign(Object.assign({},gm),{width:C.toString(),height:x.toString(),top:P,left:X}),Le=(0,H.z$)().toLowerCase();_&&(ve=Nr(Le)?"_blank":_),pr(Le)&&(g=g||"http://localhost",qe.scrollbars="yes");const it=Object.entries(qe).reduce((vn,[Fr,En])=>`${vn}${Fr}=${En},`,"");if(function(E=(0,H.z$)()){var g;return cu(E)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(Le)&&"_self"!==ve)return function(E,g){const _=document.createElement("a");_.href=E,_.target=g;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(C)}(g||"",ve),new bl(null);const zt=window.open(g||"",ve,it);Oe(zt,E,"popup-blocked");try{zt.focus()}catch(vn){}return new bl(zt)}(g,ve,gl())})()}_openRedirect(g,_,C,x){var P=this;return(0,d.Z)(function*(){return yield P._originValidation(g),E=bh(g,_,C,Hn(),x),Ut().location.href=E,new Promise(()=>{});var E})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:x,promise:P}=this.eventManagers[_];return x?Promise.resolve(x):(zn(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(g);return this.eventManagers[_]={promise:C},C}initAndGetManager(g){var _=this;return(0,d.Z)(function*(){const C=yield function(E){return Ua.apply(this,arguments)}(g),x=new El(g);return C.register("authEvent",P=>(Oe(null==P?void 0:P.authEvent,g,"invalid-auth-event"),{status:x.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:x},_.iframes[g._key()]=C,x})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(Il,{type:Il},x=>{var P;const X=null===(P=null==x?void 0:x[0])||void 0===P?void 0:P[Il];void 0!==X&&_(!!X),Jt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function(E){return Eh.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Fo()||ko()||cu()}};class Jo extends class{constructor(g){this.factorId=g}_process(g,_,C){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,C);case"signin":return this._finalizeSignIn(g,_.credential);default:return _n("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new Jo(g)}_finalizeEnroll(g,_,C){return function(E,g){return nn(E,"POST","/v2/accounts/mfaEnrollment:finalize",ln(E,g))}(g,{idToken:_,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function(E,g){return nn(E,"POST","/v2/accounts/mfaSignIn:finalize",ln(E,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Ih=(()=>{class E{constructor(){}static assertion(_){return Jo._fromCredential(_)}}return E.FACTOR_ID="phone",E})();var E,Tp="@firebase/auth";class xv{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,d.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(C=>{var x;g((null===(x=C)||void 0===x?void 0:x.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}E="Browser",(0,O._registerComponent)(new Lt.wA("auth",(g,{options:_})=>{const C=g.getProvider("app").getImmediate(),{apiKey:x,authDomain:P}=C.options;return(X=>{Oe(x&&!x.includes(":"),"invalid-api-key",{appName:X.name}),Oe(!(null==P?void 0:P.includes(":")),"argument-error",{appName:X.name});const ve={apiKey:x,authDomain:P,clientPlatform:E,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Os(E)},qe=new Rr(X,ve);return function(E,g){const _=(null==g?void 0:g.persistence)||[],C=(Array.isArray(_)?_:[_]).map($e);(null==g?void 0:g.errorMap)&&E._updateErrorMap(g.errorMap),E._initializeWithPersistence(C,null==g?void 0:g.popupRedirectResolver)}(qe,_),qe})(C)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,C)=>{g.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new Lt.wA("auth-internal",g=>{const _=Pr(g.getProvider("auth").getImmediate());return new xv(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(Tp,"0.19.1",void 0),(0,O.registerVersion)(Tp,"0.19.1","esm2017")},3854:(Je,Ce,V)=>{"use strict";V.d(Ce,{BH:()=>se,LL:()=>Xe,ZR:()=>Lt,gQ:()=>_n,zI:()=>ht,hu:()=>H,g5:()=>O,US:()=>Q,tV:()=>ne,h$:()=>_e,$s:()=>nn,r3:()=>on,Sg:()=>De,ne:()=>zn,p$:()=>U,vZ:()=>Xt,ZB:()=>$,gK:()=>tt,pd:()=>Oe,m9:()=>no,z$:()=>Ne,GJ:()=>ti,jU:()=>oe,ru:()=>fe,d:()=>Re,xb:()=>mn,w1:()=>Ye,hl:()=>Tn,uI:()=>Ie,UG:()=>pe,Yr:()=>Mt,b$:()=>ye,G6:()=>gt,Mn:()=>Tt,w9:()=>ls,cI:()=>Ui,UI:()=>Jt,xO:()=>_i,zd:()=>Bi,DV:()=>cs,ug:()=>en,dS:()=>qn,Pz:()=>to,Dv:()=>Hn,Wj:()=>Dt,lb:()=>St,eu:()=>vt});const H=function(W,G){if(!W)throw O(G)},O=function(W){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+W)},ce=function(W){const G=[];let z=0;for(let Ee=0;Ee<W.length;Ee++){let le=W.charCodeAt(Ee);le<128?G[z++]=le:le<2048?(G[z++]=le>>6|192,G[z++]=63&le|128):55296==(64512&le)&&Ee+1<W.length&&56320==(64512&W.charCodeAt(Ee+1))?(le=65536+((1023&le)<<10)+(1023&W.charCodeAt(++Ee)),G[z++]=le>>18|240,G[z++]=le>>12&63|128,G[z++]=le>>6&63|128,G[z++]=63&le|128):(G[z++]=le>>12|224,G[z++]=le>>6&63|128,G[z++]=63&le|128)}return G},Q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(W,G){if(!Array.isArray(W))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ee=[];for(let le=0;le<W.length;le+=3){const Ge=W[le],at=le+1<W.length,Gt=at?W[le+1]:0,An=le+2<W.length,Kn=An?W[le+2]:0;let Y=(15&Gt)<<2|Kn>>6,K=63&Kn;An||(K=64,at||(Y=64)),Ee.push(z[Ge>>2],z[(3&Ge)<<4|Gt>>4],z[Y],z[K])}return Ee.join("")},encodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(W):this.encodeByteArray(ce(W),G)},decodeString(W,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(W):function(W){const G=[];let z=0,Ee=0;for(;z<W.length;){const le=W[z++];if(le<128)G[Ee++]=String.fromCharCode(le);else if(le>191&&le<224){const Ge=W[z++];G[Ee++]=String.fromCharCode((31&le)<<6|63&Ge)}else if(le>239&&le<365){const An=((7&le)<<18|(63&W[z++])<<12|(63&W[z++])<<6|63&W[z++])-65536;G[Ee++]=String.fromCharCode(55296+(An>>10)),G[Ee++]=String.fromCharCode(56320+(1023&An))}else{const Ge=W[z++],at=W[z++];G[Ee++]=String.fromCharCode((15&le)<<12|(63&Ge)<<6|63&at)}}return G.join("")}(this.decodeStringToByteArray(W,G))},decodeStringToByteArray(W,G){this.init_();const z=G?this.charToByteMapWebSafe_:this.charToByteMap_,Ee=[];for(let le=0;le<W.length;){const Ge=z[W.charAt(le++)],Gt=le<W.length?z[W.charAt(le)]:0;++le;const Kn=le<W.length?z[W.charAt(le)]:64;++le;const re=le<W.length?z[W.charAt(le)]:64;if(++le,null==Ge||null==Gt||null==Kn||null==re)throw Error();Ee.push(Ge<<2|Gt>>4),64!==Kn&&(Ee.push(Gt<<4&240|Kn>>2),64!==re&&Ee.push(Kn<<6&192|re))}return Ee},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let W=0;W<this.ENCODED_VALS.length;W++)this.byteToCharMap_[W]=this.ENCODED_VALS.charAt(W),this.charToByteMap_[this.byteToCharMap_[W]]=W,this.byteToCharMapWebSafe_[W]=this.ENCODED_VALS_WEBSAFE.charAt(W),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[W]]=W,W>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(W)]=W,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(W)]=W)}}},_e=function(W){const G=ce(W);return Q.encodeByteArray(G,!0)},te=function(W){return _e(W).replace(/\./g,"")},ne=function(W){try{return Q.decodeString(W,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function U(W){return $(void 0,W)}function $(W,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===W&&(W={});break;case Array:W=[];break;default:return G}for(const z in G)!G.hasOwnProperty(z)||!B(z)||(W[z]=$(W[z],G[z]));return W}function B(W){return"__proto__"!==W}class se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,z)=>{this.resolve=G,this.reject=z})}wrapCallback(G){return(z,Ee)=>{z?this.reject(z):this.resolve(Ee),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(z):G(z,Ee))}}}function De(W,G){if(W.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ee=G||"demo-project",le=W.iat||0,Ge=W.sub||W.user_id;if(!Ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const at=Object.assign({iss:`https://securetoken.google.com/${Ee}`,aud:Ee,iat:le,exp:le+3600,auth_time:le,sub:Ge,user_id:Ge,firebase:{sign_in_provider:"custom",identities:{}}},W);return[te(JSON.stringify({alg:"none",type:"JWT"})),te(JSON.stringify(at)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ie(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(W){return!1}}function oe(){return"object"==typeof self&&self.self===self}function fe(){const W="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof W&&void 0!==W.id}function ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Re(){return Ne().indexOf("Electron/")>=0}function Ye(){const W=Ne();return W.indexOf("MSIE ")>=0||W.indexOf("Trident/")>=0}function Tt(){return Ne().indexOf("MSAppHost/")>=0}function Mt(){return!1}function gt(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Tn(){return"object"==typeof indexedDB}function vt(){return new Promise((W,G)=>{try{let z=!0;const Ee="validate-browser-context-for-indexeddb-analytics-module",le=self.indexedDB.open(Ee);le.onsuccess=()=>{le.result.close(),z||self.indexedDB.deleteDatabase(Ee),W(!0)},le.onupgradeneeded=()=>{z=!1},le.onerror=()=>{var Ge;G((null===(Ge=le.error)||void 0===Ge?void 0:Ge.message)||"")}}catch(z){G(z)}})}function ht(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Lt extends Error{constructor(G,z,Ee){super(z),this.code=G,this.customData=Ee,this.name="FirebaseError",Object.setPrototypeOf(this,Lt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xe.prototype.create)}}class Xe{constructor(G,z,Ee){this.service=G,this.serviceName=z,this.errors=Ee}create(G,...z){const Ee=z[0]||{},le=`${this.service}/${G}`,Ge=this.errors[G],at=Ge?function(W,G){return W.replace(uu,(z,Ee)=>{const le=G[Ee];return null!=le?String(le):`<${Ee}?>`})}(Ge,Ee):"Error";return new Lt(le,`${this.serviceName}: ${at} (${le}).`,Ee)}}const uu=/\{\$([^}]+)}/g;function Ui(W){return JSON.parse(W)}function to(W){return JSON.stringify(W)}const tn=function(W){let G={},z={},Ee={},le="";try{const Ge=W.split(".");G=Ui(ne(Ge[0])||""),z=Ui(ne(Ge[1])||""),le=Ge[2],Ee=z.d||{},delete z.d}catch(Ge){}return{header:G,claims:z,data:Ee,signature:le}},ls=function(W){const z=tn(W).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},ti=function(W){const G=tn(W).claims;return"object"==typeof G&&!0===G.admin};function on(W,G){return Object.prototype.hasOwnProperty.call(W,G)}function cs(W,G){if(Object.prototype.hasOwnProperty.call(W,G))return W[G]}function mn(W){for(const G in W)if(Object.prototype.hasOwnProperty.call(W,G))return!1;return!0}function Jt(W,G,z){const Ee={};for(const le in W)Object.prototype.hasOwnProperty.call(W,le)&&(Ee[le]=G.call(z,W[le],le,W));return Ee}function Xt(W,G){if(W===G)return!0;const z=Object.keys(W),Ee=Object.keys(G);for(const le of z){if(!Ee.includes(le))return!1;const Ge=W[le],at=G[le];if(Ns(Ge)&&Ns(at)){if(!Xt(Ge,at))return!1}else if(Ge!==at)return!1}for(const le of Ee)if(!z.includes(le))return!1;return!0}function Ns(W){return null!==W&&"object"==typeof W}function _i(W){const G=[];for(const[z,Ee]of Object.entries(W))Array.isArray(Ee)?Ee.forEach(le=>{G.push(encodeURIComponent(z)+"="+encodeURIComponent(le))}):G.push(encodeURIComponent(z)+"="+encodeURIComponent(Ee));return G.length?"&"+G.join("&"):""}function Bi(W){const G={};return W.replace(/^\?/,"").split("&").forEach(Ee=>{if(Ee){const[le,Ge]=Ee.split("=");G[decodeURIComponent(le)]=decodeURIComponent(Ge)}}),G}function Oe(W){const G=W.indexOf("?");if(!G)return"";const z=W.indexOf("#",G);return W.substring(G,z>0?z:void 0)}class _n{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,z){z||(z=0);const Ee=this.W_;if("string"==typeof G)for(let re=0;re<16;re++)Ee[re]=G.charCodeAt(z)<<24|G.charCodeAt(z+1)<<16|G.charCodeAt(z+2)<<8|G.charCodeAt(z+3),z+=4;else for(let re=0;re<16;re++)Ee[re]=G[z]<<24|G[z+1]<<16|G[z+2]<<8|G[z+3],z+=4;for(let re=16;re<80;re++){const Y=Ee[re-3]^Ee[re-8]^Ee[re-14]^Ee[re-16];Ee[re]=4294967295&(Y<<1|Y>>>31)}let Kn,tr,le=this.chain_[0],Ge=this.chain_[1],at=this.chain_[2],Gt=this.chain_[3],An=this.chain_[4];for(let re=0;re<80;re++){re<40?re<20?(Kn=Gt^Ge&(at^Gt),tr=1518500249):(Kn=Ge^at^Gt,tr=1859775393):re<60?(Kn=Ge&at|Gt&(Ge|at),tr=2400959708):(Kn=Ge^at^Gt,tr=3395469782);const Y=(le<<5|le>>>27)+Kn+An+tr+Ee[re]&4294967295;An=Gt,Gt=at,at=4294967295&(Ge<<30|Ge>>>2),Ge=le,le=Y}this.chain_[0]=this.chain_[0]+le&4294967295,this.chain_[1]=this.chain_[1]+Ge&4294967295,this.chain_[2]=this.chain_[2]+at&4294967295,this.chain_[3]=this.chain_[3]+Gt&4294967295,this.chain_[4]=this.chain_[4]+An&4294967295}update(G,z){if(null==G)return;void 0===z&&(z=G.length);const Ee=z-this.blockSize;let le=0;const Ge=this.buf_;let at=this.inbuf_;for(;le<z;){if(0===at)for(;le<=Ee;)this.compress_(G,le),le+=this.blockSize;if("string"==typeof G){for(;le<z;)if(Ge[at]=G.charCodeAt(le),++at,++le,at===this.blockSize){this.compress_(Ge),at=0;break}}else for(;le<z;)if(Ge[at]=G[le],++at,++le,at===this.blockSize){this.compress_(Ge),at=0;break}}this.inbuf_=at,this.total_+=z}digest(){const G=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let le=this.blockSize-1;le>=56;le--)this.buf_[le]=255&z,z/=256;this.compress_(this.buf_);let Ee=0;for(let le=0;le<5;le++)for(let Ge=24;Ge>=0;Ge-=8)G[Ee]=this.chain_[le]>>Ge&255,++Ee;return G}}function zn(W,G){const z=new yi(W,G);return z.subscribe.bind(z)}class yi{constructor(G,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{G(this)}).catch(Ee=>{this.error(Ee)})}next(G){this.forEachObserver(z=>{z.next(G)})}error(G){this.forEachObserver(z=>{z.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,z,Ee){let le;if(void 0===G&&void 0===z&&void 0===Ee)throw new Error("Missing Observer.");le=function(W,G){if("object"!=typeof W||null===W)return!1;for(const z of["next","error","complete"])if(z in W&&"function"==typeof W[z])return!0;return!1}(G)?G:{next:G,error:z,complete:Ee},void 0===le.next&&(le.next=fr),void 0===le.error&&(le.error=fr),void 0===le.complete&&(le.complete=fr);const Ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?le.error(this.finalError):le.complete()}catch(at){}}),this.observers.push(le),Ge}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,G)}sendOne(G,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{z(this.observers[G])}catch(Ee){"undefined"!=typeof console&&console.error&&console.error(Ee)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fr(){}const Hn=function(W,G,z,Ee){let le;if(Ee<G?le="at least "+G:Ee>z&&(le=0===z?"none":"no more than "+z),le)throw new Error(W+" failed: Was called with "+Ee+(1===Ee?" argument.":" arguments.")+" Expects "+le+".")};function tt(W,G){return`${W} failed: ${G} argument `}function Dt(W,G,z,Ee){if((!Ee||z)&&"function"!=typeof z)throw new Error(tt(W,G)+"must be a valid function.")}function St(W,G,z,Ee){if((!Ee||z)&&("object"!=typeof z||null===z))throw new Error(tt(W,G)+"must be a valid context object.")}const qn=function(W){const G=[];let z=0;for(let Ee=0;Ee<W.length;Ee++){let le=W.charCodeAt(Ee);if(le>=55296&&le<=56319){const Ge=le-55296;Ee++,H(Ee<W.length,"Surrogate pair missing trail surrogate."),le=65536+(Ge<<10)+(W.charCodeAt(Ee)-56320)}le<128?G[z++]=le:le<2048?(G[z++]=le>>6|192,G[z++]=63&le|128):le<65536?(G[z++]=le>>12|224,G[z++]=le>>6&63|128,G[z++]=63&le|128):(G[z++]=le>>18|240,G[z++]=le>>12&63|128,G[z++]=le>>6&63|128,G[z++]=63&le|128)}return G},en=function(W){let G=0;for(let z=0;z<W.length;z++){const Ee=W.charCodeAt(z);Ee<128?G++:Ee<2048?G+=2:Ee>=55296&&Ee<=56319?(G+=4,z++):G+=3}return G};function nn(W,G=1e3,z=2){const Ee=G*Math.pow(z,W),le=Math.round(.5*Ee*(Math.random()-.5)*2);return Math.min(144e5,Ee+le)}function no(W){return W&&W._delegate?W._delegate:W}},2329:(Je,Ce,V)=>{"use strict";V.d(Ce,{Mq:()=>d.getApp,C6:()=>d.getApps});var d=V(8026);(0,d.registerVersion)("firebase","9.3.0","app")},7841:(Je,Ce,V)=>{"use strict";V.d(Ce,{Z:()=>d.Z});var d=V(3394);d.Z.registerVersion("firebase","9.3.0","app-compat")},4828:(Je,Ce,V)=>{"use strict";V.r(Ce);var d=V(8239),H=V(3394),O=V(7354),ce=V(3854),_e=(V(8026),V(5422),V(3910));function te(){return window}function $(){return($=(0,d.Z)(function*(re,Y,K){var be;const{BuildInfo:Ue}=te();(0,O.ap)(Y.sessionId,"AuthEvent did not contain a session ID");const lt=yield oe(Y.sessionId),Pt={};return(0,O.aq)()?Pt.ibi=Ue.packageName:(0,O.ar)()?Pt.apn=Ue.packageName:(0,O.as)(re,"operation-not-supported-in-this-environment"),Ue.displayName&&(Pt.appDisplayName=Ue.displayName),Pt.sessionId=lt,(0,O.at)(re,K,Y.type,void 0,null!==(be=Y.eventId)&&void 0!==be?be:void 0,Pt)})).apply(this,arguments)}function se(){return(se=(0,d.Z)(function*(re){const{BuildInfo:Y}=te(),K={};(0,O.aq)()?K.iosBundleId=Y.packageName:(0,O.ar)()?K.androidPackageName=Y.packageName:(0,O.as)(re,"operation-not-supported-in-this-environment"),yield(0,O.au)(re,K)})).apply(this,arguments)}function Ie(){return(Ie=(0,d.Z)(function*(re,Y,K){const{cordova:be}=te();let Ue=()=>{};try{yield new Promise((lt,Pt)=>{let bt=null;function Mn(){var _t;lt();const xn=null===(_t=be.plugins.browsertab)||void 0===_t?void 0:_t.close;"function"==typeof xn&&xn(),"function"==typeof(null==K?void 0:K.close)&&K.close()}function dn(){bt||(bt=window.setTimeout(()=>{Pt((0,O.av)(re,"redirect-cancelled-by-user"))},2e3))}function Sn(){"visible"===(null==document?void 0:document.visibilityState)&&dn()}Y.addPassiveListener(Mn),document.addEventListener("resume",dn,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",Sn,!1),Ue=()=>{Y.removePassiveListener(Mn),document.removeEventListener("resume",dn,!1),document.removeEventListener("visibilitychange",Sn,!1),bt&&window.clearTimeout(bt)}})}finally{Ue()}})).apply(this,arguments)}function oe(re){return fe.apply(this,arguments)}function fe(){return(fe=(0,d.Z)(function*(re){const Y=ye(re),K=yield crypto.subtle.digest("SHA-256",Y);return Array.from(new Uint8Array(K)).map(Ue=>Ue.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function ye(re){if((0,O.ap)(/[0-9a-zA-Z]+/.test(re),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(re);const Y=new ArrayBuffer(re.length),K=new Uint8Array(Y);for(let be=0;be<re.length;be++)K[be]=re.charCodeAt(be);return K}class Ye extends O.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Y=>{this.resolveInialized=Y})}addPassiveListener(Y){this.passiveListeners.add(Y)}removePassiveListener(Y){this.passiveListeners.delete(Y)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Y){return this.resolveInialized(),this.passiveListeners.forEach(K=>K(Y)),super.onEvent(Y)}initialized(){var Y=this;return(0,d.Z)(function*(){yield Y.initPromise})()}}function gt(re){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,d.Z)(function*(re){const Y=yield Ht()._get(ot(re));return Y&&(yield Ht()._remove(ot(re))),Y})).apply(this,arguments)}function ht(){const re=[],Y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let K=0;K<20;K++){const be=Math.floor(Math.random()*Y.length);re.push(Y.charAt(be))}return re.join("")}function Ht(){return(0,O.ax)(O.b)}function ot(re){return(0,O.ay)("authEvent",re.config.apiKey,re.name)}function as(re){if(!(null==re?void 0:re.includes("?")))return{};const[Y,...K]=re.split("?");return(0,ce.zd)(K.join("?"))}function tn(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.av)("no-auth-event")}}function on(){var re;return(null===(re=null==self?void 0:self.location)||void 0===re?void 0:re.protocol)||null}function mn(re=(0,ce.z$)()){return!("file:"!==on()&&"ionic:"!==on()||!re.toLowerCase().match(/iphone|ipad|ipod|android/))}function Bi(){try{const re=self.localStorage,Y=O.aG();if(re)return re.setItem(Y,"1"),re.removeItem(Y),!function(re=(0,ce.z$)()){return(0,ce.w1)()&&11===(null==document?void 0:document.documentMode)||function(re=(0,ce.z$)()){return/Edge\/\d+/.test(re)}(re)}()||(0,ce.hl)()}catch(re){return Oe()&&(0,ce.hl)()}return!1}function Oe(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _n(){return("http:"===on()||"https:"===on()||(0,ce.ru)()||mn())&&!((0,ce.b$)()||(0,ce.UG)())&&Bi()&&!Oe()}function zn(){return mn()&&"undefined"!=typeof document}function $e(){return($e=(0,d.Z)(function*(){return!!zn()&&new Promise(re=>{const Y=setTimeout(()=>{re(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Y),re(!0)})})})).apply(this,arguments)}const qt={LOCAL:"local",NONE:"none",SESSION:"session"},fr=O.aw,Hn="persistence";function nt(re){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,d.Z)(function*(re){yield re._initializationPromise;const Y=qn(),K=O.ay(Hn,re.config.apiKey,re.name);(null==Y?void 0:Y.sessionStorage)&&Y.sessionStorage.setItem(K,re._getPersistence())})).apply(this,arguments)}function qn(){return"undefined"!=typeof window?window:null}const en=O.aw;class Fe{constructor(){this.browserResolver=O.ax(O.k),this.cordovaResolver=O.ax(class{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aA}_initialize(Y){var K=this;return(0,d.Z)(function*(){const be=Y._key();let Ue=K.eventManagers.get(be);return Ue||(Ue=new Ye(Y),K.eventManagers.set(be,Ue),K.attachCallbackListeners(Y,Ue)),Ue})()}_openPopup(Y){(0,O.as)(Y,"operation-not-supported-in-this-environment")}_openRedirect(Y,K,be,Ue){var lt=this;return(0,d.Z)(function*(){!function(re){var Y,K,be,Ue,lt,Pt,bt,Mn,dn,Sn;const _t=te();(0,O.aw)("function"==typeof(null===(Y=null==_t?void 0:_t.universalLinks)||void 0===Y?void 0:Y.subscribe),re,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.aw)(void 0!==(null===(K=null==_t?void 0:_t.BuildInfo)||void 0===K?void 0:K.packageName),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.aw)("function"==typeof(null===(lt=null===(Ue=null===(be=null==_t?void 0:_t.cordova)||void 0===be?void 0:be.plugins)||void 0===Ue?void 0:Ue.browsertab)||void 0===lt?void 0:lt.openUrl),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Mn=null===(bt=null===(Pt=null==_t?void 0:_t.cordova)||void 0===Pt?void 0:Pt.plugins)||void 0===bt?void 0:bt.browsertab)||void 0===Mn?void 0:Mn.isAvailable),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.aw)("function"==typeof(null===(Sn=null===(dn=null==_t?void 0:_t.cordova)||void 0===dn?void 0:dn.InAppBrowser)||void 0===Sn?void 0:Sn.open),re,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Y);const Pt=yield lt._initialize(Y);yield Pt.initialized(),Pt.resetRedirect(),(0,O.aB)(),yield lt._originValidation(Y);const bt=function(re,Y,K=null){return{type:Y,eventId:K,urlResponse:null,sessionId:ht(),postBody:null,tenantId:re.tenantId,error:(0,O.av)(re,"no-auth-event")}}(Y,be,Ue);yield function(re,Y){return Ht()._set(ot(re),Y)}(Y,bt);const Mn=yield function(re,Y,K){return $.apply(this,arguments)}(Y,bt,K),dn=yield function(re){const{cordova:Y}=te();return new Promise(K=>{Y.plugins.browsertab.isAvailable(be=>{let Ue=null;be?Y.plugins.browsertab.openUrl(re):Ue=Y.InAppBrowser.open(re,(0,O.ao)()?"_blank":"_system","location=yes"),K(Ue)})})}(Mn);return function(re,Y,K){return Ie.apply(this,arguments)}(Y,Pt,dn)})()}_isIframeWebStorageSupported(Y,K){throw new Error("Method not implemented.")}_originValidation(Y){const K=Y._key();return this.originValidationPromises[K]||(this.originValidationPromises[K]=function(re){return se.apply(this,arguments)}(Y)),this.originValidationPromises[K]}attachCallbackListeners(Y,K){const{universalLinks:be,handleOpenURL:Ue,BuildInfo:lt}=te(),Pt=setTimeout((0,d.Z)(function*(){yield gt(Y),K.onEvent(tn())}),500),bt=function(){var Sn=(0,d.Z)(function*(_t){clearTimeout(Pt);const xn=yield gt(Y);let ro=null;xn&&(null==_t?void 0:_t.url)&&(ro=function(re,Y){var K,be;const Ue=function(re){const Y=as(re),K=Y.link?decodeURIComponent(Y.link):void 0,be=as(K).link,Ue=Y.deep_link_id?decodeURIComponent(Y.deep_link_id):void 0;return as(Ue).link||Ue||be||K||re}(Y);if(Ue.includes("/__/auth/callback")){const lt=as(Ue),Pt=lt.firebaseError?function(re){try{return JSON.parse(re)}catch(Y){return null}}(decodeURIComponent(lt.firebaseError)):null,bt=null===(be=null===(K=null==Pt?void 0:Pt.code)||void 0===K?void 0:K.split("auth/"))||void 0===be?void 0:be[1],Mn=bt?(0,O.av)(bt):null;return Mn?{type:re.type,eventId:re.eventId,tenantId:re.tenantId,error:Mn,urlResponse:null,sessionId:null,postBody:null}:{type:re.type,eventId:re.eventId,tenantId:re.tenantId,sessionId:re.sessionId,urlResponse:Ue,postBody:null}}return null}(xn,_t.url)),K.onEvent(ro||tn())});return function(xn){return Sn.apply(this,arguments)}}();void 0!==be&&"function"==typeof be.subscribe&&be.subscribe(null,bt);const Mn=Ue,dn=`${lt.packageName.toLowerCase()}://`;te().handleOpenURL=function(){var Sn=(0,d.Z)(function*(_t){if(_t.toLowerCase().startsWith(dn)&&bt({url:_t}),"function"==typeof Mn)try{Mn(_t)}catch(xn){console.error(xn)}});return function(_t){return Sn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aA}_initialize(Y){var K=this;return(0,d.Z)(function*(){return yield K.selectUnderlyingResolver(),K.assertedUnderlyingResolver._initialize(Y)})()}_openPopup(Y,K,be,Ue){var lt=this;return(0,d.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openPopup(Y,K,be,Ue)})()}_openRedirect(Y,K,be,Ue){var lt=this;return(0,d.Z)(function*(){return yield lt.selectUnderlyingResolver(),lt.assertedUnderlyingResolver._openRedirect(Y,K,be,Ue)})()}_isIframeWebStorageSupported(Y,K){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Y,K)}_originValidation(Y){return this.assertedUnderlyingResolver._originValidation(Y)}get _shouldInitProactively(){return zn()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return en(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Y=this;return(0,d.Z)(function*(){if(Y.underlyingResolver)return;const K=yield function(){return $e.apply(this,arguments)}();Y.underlyingResolver=K?Y.cordovaResolver:Y.browserResolver})()}}function et(re){return re.unwrap()}function ln(re){return Yt(re)}function Yt(re){const{_tokenResponse:Y}=re instanceof ce.ZR?re.customData:re;if(!Y)return null;if(!(re instanceof ce.ZR)&&"temporaryProof"in Y&&"phoneNumber"in Y)return O.P.credentialFromResult(re);const K=Y.providerId;if(!K||K===O.o.PASSWORD)return null;let be;switch(K){case O.o.GOOGLE:be=O.N;break;case O.o.FACEBOOK:be=O.M;break;case O.o.GITHUB:be=O.Q;break;case O.o.TWITTER:be=O.V;break;default:const{oauthIdToken:Ue,oauthAccessToken:lt,oauthTokenSecret:Pt,pendingToken:bt,nonce:Mn}=Y;return lt||Pt||Ue||bt?bt?K.startsWith("saml.")?O.aJ._create(K,bt):O.I._fromParams({providerId:K,signInMethod:K,pendingToken:bt,idToken:Ue,accessToken:lt}):new O.T(K).credential({idToken:Ue,accessToken:lt,rawNonce:Mn}):null}return re instanceof ce.ZR?be.credentialFromError(re):be.credentialFromResult(re)}function cn(re,Y){return Y.catch(K=>{throw K instanceof ce.ZR&&function(re,Y){var K;const be=null===(K=Y.customData)||void 0===K?void 0:K._tokenResponse;if("auth/multi-factor-auth-required"===Y.code)Y.resolver=new G(re,O.am(re,Y));else if(be){const Ue=Yt(Y),lt=Y;Ue&&(lt.credential=Ue,lt.tenantId=be.tenantId||void 0,lt.email=be.email||void 0,lt.phoneNumber=be.phoneNumber||void 0)}}(re,K),K}).then(K=>{const Ue=K.user;return{operationType:K.operationType,credential:ln(K),additionalUserInfo:O.ak(K),user:z.getOrCreate(Ue)}})}function no(re,Y){return W.apply(this,arguments)}function W(){return(W=(0,d.Z)(function*(re,Y){const K=yield Y;return{verificationId:K.verificationId,confirm:be=>cn(re,K.confirm(be))}})).apply(this,arguments)}class G{constructor(Y,K){this.resolver=K,this.auth=Y.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Y){return cn(et(this.auth),this.resolver.resolveSignIn(Y))}}class z{constructor(Y){this._delegate=Y,this.multiFactor=O.an(Y)}static getOrCreate(Y){return z.USER_MAP.has(Y)||z.USER_MAP.set(Y,new z(Y)),z.USER_MAP.get(Y)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Y){return this._delegate.getIdTokenResult(Y)}getIdToken(Y){return this._delegate.getIdToken(Y)}linkAndRetrieveDataWithCredential(Y){return this.linkWithCredential(Y)}linkWithCredential(Y){var K=this;return(0,d.Z)(function*(){return cn(K.auth,O.Y(K._delegate,Y))})()}linkWithPhoneNumber(Y,K){var be=this;return(0,d.Z)(function*(){return no(be.auth,O.l(be._delegate,Y,K))})()}linkWithPopup(Y){var K=this;return(0,d.Z)(function*(){return cn(K.auth,O.d(K._delegate,Y,Fe))})()}linkWithRedirect(Y){var K=this;return(0,d.Z)(function*(){return yield nt(O.aC(K.auth)),O.g(K._delegate,Y,Fe)})()}reauthenticateAndRetrieveDataWithCredential(Y){return this.reauthenticateWithCredential(Y)}reauthenticateWithCredential(Y){var K=this;return(0,d.Z)(function*(){return cn(K.auth,O.Z(K._delegate,Y))})()}reauthenticateWithPhoneNumber(Y,K){return no(this.auth,O.r(this._delegate,Y,K))}reauthenticateWithPopup(Y){return cn(this.auth,O.e(this._delegate,Y,Fe))}reauthenticateWithRedirect(Y){var K=this;return(0,d.Z)(function*(){return yield nt(O.aC(K.auth)),O.h(K._delegate,Y,Fe)})()}sendEmailVerification(Y){return O.aa(this._delegate,Y)}unlink(Y){var K=this;return(0,d.Z)(function*(){return yield O.aj(K._delegate,Y),K})()}updateEmail(Y){return O.af(this._delegate,Y)}updatePassword(Y){return O.ag(this._delegate,Y)}updatePhoneNumber(Y){return O.u(this._delegate,Y)}updateProfile(Y){return O.ae(this._delegate,Y)}verifyBeforeUpdateEmail(Y,K){return O.ab(this._delegate,Y,K)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}z.USER_MAP=new WeakMap;const Ee=O.aw;let le=(()=>{class re{constructor(K,be){if(this.app=K,be.isInitialized())return this._delegate=be.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Ue}=K.options;Ee(Ue,"invalid-api-key",{appName:K.name});let lt=[O.K];if("undefined"!=typeof window){lt=function(re,Y){const K=qn();if(!(null==K?void 0:K.sessionStorage))return[];const be=O.ay(Hn,re,Y);switch(K.sessionStorage.getItem(be)){case qt.NONE:return[O.K];case qt.LOCAL:return[O.i,O.a];case qt.SESSION:return[O.a];default:return[]}}(Ue,K.name);for(const bt of[O.i,O.b,O.a])lt.includes(bt)||lt.push(bt)}Ee(Ue,"invalid-api-key",{appName:K.name});const Pt="undefined"!=typeof window?Fe:void 0;this._delegate=be.initialize({options:{persistence:lt,popupRedirectResolver:Pt}}),this._delegate._updateErrorMap(O.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?z.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(K){this._delegate.languageCode=K}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(K){this._delegate.tenantId=K}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(K,be){O.E(this._delegate,K,be)}applyActionCode(K){return O.a1(this._delegate,K)}checkActionCode(K){return O.a2(this._delegate,K)}confirmPasswordReset(K,be){return O.a0(this._delegate,K,be)}createUserWithEmailAndPassword(K,be){var Ue=this;return(0,d.Z)(function*(){return cn(Ue._delegate,O.a4(Ue._delegate,K,be))})()}fetchProvidersForEmail(K){return this.fetchSignInMethodsForEmail(K)}fetchSignInMethodsForEmail(K){return O.a9(this._delegate,K)}isSignInWithEmailLink(K){return O.a7(this._delegate,K)}getRedirectResult(){var K=this;return(0,d.Z)(function*(){Ee(_n(),K._delegate,"operation-not-supported-in-this-environment");const be=yield O.j(K._delegate,Fe);return be?cn(K._delegate,Promise.resolve(be)):{credential:null,user:null}})()}addFrameworkForLogging(K){!function(re,Y){(0,O.aC)(re)._logFramework(Y)}(this._delegate,K)}onAuthStateChanged(K,be,Ue){const{next:lt,error:Pt,complete:bt}=Ge(K,be,Ue);return this._delegate.onAuthStateChanged(lt,Pt,bt)}onIdTokenChanged(K,be,Ue){const{next:lt,error:Pt,complete:bt}=Ge(K,be,Ue);return this._delegate.onIdTokenChanged(lt,Pt,bt)}sendSignInLinkToEmail(K,be){return O.a6(this._delegate,K,be)}sendPasswordResetEmail(K,be){return O.$(this._delegate,K,be||void 0)}setPersistence(K){var be=this;return(0,d.Z)(function*(){let Ue;switch(function(re,Y){fr(Object.values(qt).includes(Y),re,"invalid-persistence-type"),(0,ce.b$)()?fr(Y!==qt.SESSION,re,"unsupported-persistence-type"):(0,ce.UG)()?fr(Y===qt.NONE,re,"unsupported-persistence-type"):Oe()?fr(Y===qt.NONE||Y===qt.LOCAL&&(0,ce.hl)(),re,"unsupported-persistence-type"):fr(Y===qt.NONE||Bi(),re,"unsupported-persistence-type")}(be._delegate,K),K){case qt.SESSION:Ue=O.a;break;case qt.LOCAL:Ue=(yield O.ax(O.i)._isAvailable())?O.i:O.b;break;case qt.NONE:Ue=O.K;break;default:return O.as("argument-error",{appName:be._delegate.name})}return be._delegate.setPersistence(Ue)})()}signInAndRetrieveDataWithCredential(K){return this.signInWithCredential(K)}signInAnonymously(){return cn(this._delegate,O.W(this._delegate))}signInWithCredential(K){return cn(this._delegate,O.X(this._delegate,K))}signInWithCustomToken(K){return cn(this._delegate,O._(this._delegate,K))}signInWithEmailAndPassword(K,be){return cn(this._delegate,O.a5(this._delegate,K,be))}signInWithEmailLink(K,be){return cn(this._delegate,O.a8(this._delegate,K,be))}signInWithPhoneNumber(K,be){return no(this._delegate,O.s(this._delegate,K,be))}signInWithPopup(K){var be=this;return(0,d.Z)(function*(){return Ee(_n(),be._delegate,"operation-not-supported-in-this-environment"),cn(be._delegate,O.c(be._delegate,K,Fe))})()}signInWithRedirect(K){var be=this;return(0,d.Z)(function*(){return Ee(_n(),be._delegate,"operation-not-supported-in-this-environment"),yield nt(be._delegate),O.f(be._delegate,K,Fe)})()}updateCurrentUser(K){return this._delegate.updateCurrentUser(K)}verifyPasswordResetCode(K){return O.a3(this._delegate,K)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return re.Persistence=qt,re})();function Ge(re,Y,K){let be=re;"function"!=typeof re&&({next:be,error:Y,complete:K}=re);const Ue=be;return{next:Pt=>Ue(Pt&&z.getOrCreate(Pt)),error:Y,complete:K}}class at{constructor(){this.providerId="phone",this._delegate=new O.P(et(H.Z.auth()))}static credential(Y,K){return O.P.credential(Y,K)}verifyPhoneNumber(Y,K){return this._delegate.verifyPhoneNumber(Y,K)}unwrap(){return this._delegate}}at.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,at.PROVIDER_ID=O.P.PROVIDER_ID;const Gt=O.aw;var re;(re=H.Z).INTERNAL.registerComponent(new _e.wA("auth-compat",Y=>{const K=Y.getProvider("app-compat").getImmediate(),be=Y.getProvider("auth");return new le(K,be)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.L,FacebookAuthProvider:O.M,GithubAuthProvider:O.Q,GoogleAuthProvider:O.N,OAuthProvider:O.T,SAMLAuthProvider:O.U,PhoneAuthProvider:at,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:class{constructor(Y,K,be=H.Z.app()){var Ue;Gt(null===(Ue=be.options)||void 0===Ue?void 0:Ue.apiKey,"invalid-api-key",{appName:be.name}),this._delegate=new O.R(Y,K,be.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:O.V,Auth:le,AuthCredential:O.G,Error:ce.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),re.registerVersion("@firebase/auth-compat","0.2.1")},6676:function(Je,Ce){!function(V){"use strict";function d(pe){return Array.prototype.slice.call(pe)}function H(pe){return new Promise(function(oe,fe){pe.onsuccess=function(){oe(pe.result)},pe.onerror=function(){fe(pe.error)}})}function O(pe,oe,fe){var ye,Re=new Promise(function(Ye,Tt){H(ye=pe[oe].apply(pe,fe)).then(Ye,Tt)});return Re.request=ye,Re}function ce(pe,oe,fe){var ye=O(pe,oe,fe);return ye.then(function(Re){if(Re)return new U(Re,ye.request)})}function ue(pe,oe,fe){fe.forEach(function(ye){Object.defineProperty(pe.prototype,ye,{get:function(){return this[oe][ye]},set:function(Re){this[oe][ye]=Re}})})}function Q(pe,oe,fe,ye){ye.forEach(function(Re){Re in fe.prototype&&(pe.prototype[Re]=function(){return O(this[oe],Re,arguments)})})}function _e(pe,oe,fe,ye){ye.forEach(function(Re){Re in fe.prototype&&(pe.prototype[Re]=function(){return this[oe][Re].apply(this[oe],arguments)})})}function te(pe,oe,fe,ye){ye.forEach(function(Re){Re in fe.prototype&&(pe.prototype[Re]=function(){return ce(this[oe],Re,arguments)})})}function ne(pe){this._index=pe}function U(pe,oe){this._cursor=pe,this._request=oe}function $(pe){this._store=pe}function B(pe){this._tx=pe,this.complete=new Promise(function(oe,fe){pe.oncomplete=function(){oe()},pe.onerror=function(){fe(pe.error)},pe.onabort=function(){fe(pe.error)}})}function se(pe,oe,fe){this._db=pe,this.oldVersion=oe,this.transaction=new B(fe)}function De(pe){this._db=pe}ue(ne,"_index",["name","keyPath","multiEntry","unique"]),Q(ne,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),te(ne,"_index",IDBIndex,["openCursor","openKeyCursor"]),ue(U,"_cursor",["direction","key","primaryKey","value"]),Q(U,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(pe){pe in IDBCursor.prototype&&(U.prototype[pe]=function(){var oe=this,fe=arguments;return Promise.resolve().then(function(){return oe._cursor[pe].apply(oe._cursor,fe),H(oe._request).then(function(ye){if(ye)return new U(ye,oe._request)})})})}),$.prototype.createIndex=function(){return new ne(this._store.createIndex.apply(this._store,arguments))},$.prototype.index=function(){return new ne(this._store.index.apply(this._store,arguments))},ue($,"_store",["name","keyPath","indexNames","autoIncrement"]),Q($,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),te($,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),_e($,"_store",IDBObjectStore,["deleteIndex"]),B.prototype.objectStore=function(){return new $(this._tx.objectStore.apply(this._tx,arguments))},ue(B,"_tx",["objectStoreNames","mode"]),_e(B,"_tx",IDBTransaction,["abort"]),se.prototype.createObjectStore=function(){return new $(this._db.createObjectStore.apply(this._db,arguments))},ue(se,"_db",["name","version","objectStoreNames"]),_e(se,"_db",IDBDatabase,["deleteObjectStore","close"]),De.prototype.transaction=function(){return new B(this._db.transaction.apply(this._db,arguments))},ue(De,"_db",["name","version","objectStoreNames"]),_e(De,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(pe){[$,ne].forEach(function(oe){pe in oe.prototype&&(oe.prototype[pe.replace("open","iterate")]=function(){var fe=d(arguments),ye=fe[fe.length-1],Re=this._store||this._index,Ye=Re[pe].apply(Re,fe.slice(0,-1));Ye.onsuccess=function(){ye(Ye.result)}})})}),[ne,$].forEach(function(pe){pe.prototype.getAll||(pe.prototype.getAll=function(oe,fe){var ye=this,Re=[];return new Promise(function(Ye){ye.iterateCursor(oe,function(Tt){Tt?(Re.push(Tt.value),void 0===fe||Re.length!=fe?Tt.continue():Ye(Re)):Ye(Re)})})})}),V.openDb=function(pe,oe,fe){var ye=O(indexedDB,"open",[pe,oe]),Re=ye.request;return Re&&(Re.onupgradeneeded=function(Ye){fe&&fe(new se(Re.result,Ye.oldVersion,Re.transaction))}),ye.then(function(Ye){return new De(Ye)})},V.deleteDb=function(pe){return O(indexedDB,"deleteDatabase",[pe])},Object.defineProperty(V,"__esModule",{value:!0})}(Ce)},7574:(Je,Ce,V)=>{"use strict";V.d(Ce,{y:()=>$});var d=V(7393),O=V(9181),ce=V(6490),Q=V(6554),_e=V(4487);var U=V(2494);let $=(()=>{class se{constructor(Ne){this._isScalar=!1,Ne&&(this._subscribe=Ne)}lift(Ne){const Ie=new se;return Ie.source=this,Ie.operator=Ne,Ie}subscribe(Ne,Ie,pe){const{operator:oe}=this,fe=function(se,De,Ne){if(se){if(se instanceof d.L)return se;if(se[O.b])return se[O.b]()}return se||De||Ne?new d.L(se,De,Ne):new d.L(ce.c)}(Ne,Ie,pe);if(fe.add(oe?oe.call(fe,this.source):this.source||U.v.useDeprecatedSynchronousErrorHandling&&!fe.syncErrorThrowable?this._subscribe(fe):this._trySubscribe(fe)),U.v.useDeprecatedSynchronousErrorHandling&&fe.syncErrorThrowable&&(fe.syncErrorThrowable=!1,fe.syncErrorThrown))throw fe.syncErrorValue;return fe}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Ie){U.v.useDeprecatedSynchronousErrorHandling&&(Ne.syncErrorThrown=!0,Ne.syncErrorValue=Ie),function(se){for(;se;){const{closed:De,destination:Ne,isStopped:Ie}=se;if(De||Ie)return!1;se=Ne&&Ne instanceof d.L?Ne:null}return!0}(Ne)?Ne.error(Ie):console.warn(Ie)}}forEach(Ne,Ie){return new(Ie=B(Ie))((pe,oe)=>{let fe;fe=this.subscribe(ye=>{try{Ne(ye)}catch(Re){oe(Re),fe&&fe.unsubscribe()}},oe,pe)})}_subscribe(Ne){const{source:Ie}=this;return Ie&&Ie.subscribe(Ne)}[Q.L](){return this}pipe(...Ne){return 0===Ne.length?this:function(se){return 0===se.length?_e.y:1===se.length?se[0]:function(Ne){return se.reduce((Ie,pe)=>pe(Ie),Ne)}}(Ne)(this)}toPromise(Ne){return new(Ne=B(Ne))((Ie,pe)=>{let oe;this.subscribe(fe=>oe=fe,fe=>pe(fe),()=>Ie(oe))})}}return se.create=De=>new se(De),se})();function B(se){if(se||(se=U.v.Promise||Promise),!se)throw new Error("no Promise impl found");return se}},6490:(Je,Ce,V)=>{"use strict";V.d(Ce,{c:()=>O});var d=V(2494),H=V(4449);const O={closed:!0,next(ce){},error(ce){if(d.v.useDeprecatedSynchronousErrorHandling)throw ce;(0,H.z)(ce)},complete(){}}},9765:(Je,Ce,V)=>{"use strict";V.d(Ce,{Yc:()=>_e,xQ:()=>te});var d=V(7574),H=V(7393),O=V(5319),ce=V(7971),ue=V(8858),Q=V(9181);class _e extends H.L{constructor($){super($),this.destination=$}}let te=(()=>{class U extends d.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[Q.b](){return new _e(this)}lift(B){const se=new ne(this,this);return se.operator=B,se}next(B){if(this.closed)throw new ce.N;if(!this.isStopped){const{observers:se}=this,De=se.length,Ne=se.slice();for(let Ie=0;Ie<De;Ie++)Ne[Ie].next(B)}}error(B){if(this.closed)throw new ce.N;this.hasError=!0,this.thrownError=B,this.isStopped=!0;const{observers:se}=this,De=se.length,Ne=se.slice();for(let Ie=0;Ie<De;Ie++)Ne[Ie].error(B);this.observers.length=0}complete(){if(this.closed)throw new ce.N;this.isStopped=!0;const{observers:B}=this,se=B.length,De=B.slice();for(let Ne=0;Ne<se;Ne++)De[Ne].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(B){if(this.closed)throw new ce.N;return super._trySubscribe(B)}_subscribe(B){if(this.closed)throw new ce.N;return this.hasError?(B.error(this.thrownError),O.w.EMPTY):this.isStopped?(B.complete(),O.w.EMPTY):(this.observers.push(B),new ue.W(this,B))}asObservable(){const B=new d.y;return B.source=this,B}}return U.create=($,B)=>new ne($,B),U})();class ne extends te{constructor($,B){super(),this.destination=$,this.source=B}next($){const{destination:B}=this;B&&B.next&&B.next($)}error($){const{destination:B}=this;B&&B.error&&this.destination.error($)}complete(){const{destination:$}=this;$&&$.complete&&this.destination.complete()}_subscribe($){const{source:B}=this;return B?this.source.subscribe($):O.w.EMPTY}}},8858:(Je,Ce,V)=>{"use strict";V.d(Ce,{W:()=>H});var d=V(5319);class H extends d.w{constructor(ce,ue){super(),this.subject=ce,this.subscriber=ue,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ce=this.subject,ue=ce.observers;if(this.subject=null,!ue||0===ue.length||ce.isStopped||ce.closed)return;const Q=ue.indexOf(this.subscriber);-1!==Q&&ue.splice(Q,1)}}},7393:(Je,Ce,V)=>{"use strict";V.d(Ce,{L:()=>_e});var d=V(9105),H=V(6490),O=V(5319),ce=V(9181),ue=V(2494),Q=V(4449);class _e extends O.w{constructor(U,$,B){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=H.c;break;case 1:if(!U){this.destination=H.c;break}if("object"==typeof U){U instanceof _e?(this.syncErrorThrowable=U.syncErrorThrowable,this.destination=U,U.add(this)):(this.syncErrorThrowable=!0,this.destination=new te(this,U));break}default:this.syncErrorThrowable=!0,this.destination=new te(this,U,$,B)}}[ce.b](){return this}static create(U,$,B){const se=new _e(U,$,B);return se.syncErrorThrowable=!1,se}next(U){this.isStopped||this._next(U)}error(U){this.isStopped||(this.isStopped=!0,this._error(U))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(U){this.destination.next(U)}_error(U){this.destination.error(U),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:U}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=U,this}}class te extends _e{constructor(U,$,B,se){super(),this._parentSubscriber=U;let De,Ne=this;(0,d.m)($)?De=$:$&&(De=$.next,B=$.error,se=$.complete,$!==H.c&&(Ne=Object.create($),(0,d.m)(Ne.unsubscribe)&&this.add(Ne.unsubscribe.bind(Ne)),Ne.unsubscribe=this.unsubscribe.bind(this))),this._context=Ne,this._next=De,this._error=B,this._complete=se}next(U){if(!this.isStopped&&this._next){const{_parentSubscriber:$}=this;ue.v.useDeprecatedSynchronousErrorHandling&&$.syncErrorThrowable?this.__tryOrSetError($,this._next,U)&&this.unsubscribe():this.__tryOrUnsub(this._next,U)}}error(U){if(!this.isStopped){const{_parentSubscriber:$}=this,{useDeprecatedSynchronousErrorHandling:B}=ue.v;if(this._error)B&&$.syncErrorThrowable?(this.__tryOrSetError($,this._error,U),this.unsubscribe()):(this.__tryOrUnsub(this._error,U),this.unsubscribe());else if($.syncErrorThrowable)B?($.syncErrorValue=U,$.syncErrorThrown=!0):(0,Q.z)(U),this.unsubscribe();else{if(this.unsubscribe(),B)throw U;(0,Q.z)(U)}}}complete(){if(!this.isStopped){const{_parentSubscriber:U}=this;if(this._complete){const $=()=>this._complete.call(this._context);ue.v.useDeprecatedSynchronousErrorHandling&&U.syncErrorThrowable?(this.__tryOrSetError(U,$),this.unsubscribe()):(this.__tryOrUnsub($),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(U,$){try{U.call(this._context,$)}catch(B){if(this.unsubscribe(),ue.v.useDeprecatedSynchronousErrorHandling)throw B;(0,Q.z)(B)}}__tryOrSetError(U,$,B){if(!ue.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{$.call(this._context,B)}catch(se){return ue.v.useDeprecatedSynchronousErrorHandling?(U.syncErrorValue=se,U.syncErrorThrown=!0,!0):((0,Q.z)(se),!0)}return!1}_unsubscribe(){const{_parentSubscriber:U}=this;this._context=null,this._parentSubscriber=null,U.unsubscribe()}}},5319:(Je,Ce,V)=>{"use strict";V.d(Ce,{w:()=>Q});var d=V(9796),H=V(1555),O=V(9105);const ue=(()=>{function te(ne){return Error.call(this),this.message=ne?`${ne.length} errors occurred during unsubscription:\n${ne.map((U,$)=>`${$+1}) ${U.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ne,this}return te.prototype=Object.create(Error.prototype),te})();class Q{constructor(ne){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ne&&(this._ctorUnsubscribe=!0,this._unsubscribe=ne)}unsubscribe(){let ne;if(this.closed)return;let{_parentOrParents:U,_ctorUnsubscribe:$,_unsubscribe:B,_subscriptions:se}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,U instanceof Q)U.remove(this);else if(null!==U)for(let De=0;De<U.length;++De)U[De].remove(this);if((0,O.m)(B)){$&&(this._unsubscribe=void 0);try{B.call(this)}catch(De){ne=De instanceof ue?_e(De.errors):[De]}}if((0,d.k)(se)){let De=-1,Ne=se.length;for(;++De<Ne;){const Ie=se[De];if((0,H.K)(Ie))try{Ie.unsubscribe()}catch(pe){ne=ne||[],pe instanceof ue?ne=ne.concat(_e(pe.errors)):ne.push(pe)}}}if(ne)throw new ue(ne)}add(ne){let U=ne;if(!ne)return Q.EMPTY;switch(typeof ne){case"function":U=new Q(ne);case"object":if(U===this||U.closed||"function"!=typeof U.unsubscribe)return U;if(this.closed)return U.unsubscribe(),U;if(!(U instanceof Q)){const se=U;U=new Q,U._subscriptions=[se]}break;default:throw new Error("unrecognized teardown "+ne+" added to Subscription.")}let{_parentOrParents:$}=U;if(null===$)U._parentOrParents=this;else if($ instanceof Q){if($===this)return U;U._parentOrParents=[$,this]}else{if(-1!==$.indexOf(this))return U;$.push(this)}const B=this._subscriptions;return null===B?this._subscriptions=[U]:B.push(U),U}remove(ne){const U=this._subscriptions;if(U){const $=U.indexOf(ne);-1!==$&&U.splice($,1)}}}var te;function _e(te){return te.reduce((ne,U)=>ne.concat(U instanceof ue?U.errors:U),[])}Q.EMPTY=((te=new Q).closed=!0,te)},2494:(Je,Ce,V)=>{"use strict";V.d(Ce,{v:()=>H});let d=!1;const H={Promise:void 0,set useDeprecatedSynchronousErrorHandling(O){if(O){const ce=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ce.stack)}else d&&console.log("RxJS: Back to a better error behavior. Thank you. <3");d=O},get useDeprecatedSynchronousErrorHandling(){return d}}},5345:(Je,Ce,V)=>{"use strict";V.d(Ce,{IY:()=>ce,Ds:()=>Q,ft:()=>te});var d=V(7393),H=V(7574),O=V(7444);class ce extends d.L{constructor(U){super(),this.parent=U}_next(U){this.parent.notifyNext(U)}_error(U){this.parent.notifyError(U),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Q extends d.L{notifyNext(U){this.destination.next(U)}notifyError(U){this.destination.error(U)}notifyComplete(){this.destination.complete()}}function te(ne,U){if(U.closed)return;if(ne instanceof H.y)return ne.subscribe(U);let $;try{$=(0,O.s)(ne)(U)}catch(B){U.error(B)}return $}},2441:(Je,Ce,V)=>{"use strict";V.d(Ce,{c:()=>ue,N:()=>Q});var d=V(9765),H=V(7574),O=V(5319),ce=V(1307);class ue extends H.y{constructor($,B){super(),this.source=$,this.subjectFactory=B,this._refCount=0,this._isComplete=!1}_subscribe($){return this.getSubject().subscribe($)}getSubject(){const $=this._subject;return(!$||$.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let $=this._connection;return $||(this._isComplete=!1,$=this._connection=new O.w,$.add(this.source.subscribe(new _e(this.getSubject(),this))),$.closed&&(this._connection=null,$=O.w.EMPTY)),$}refCount(){return(0,ce.x)()(this)}}const Q=(()=>{const U=ue.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:U._subscribe},_isComplete:{value:U._isComplete,writable:!0},getSubject:{value:U.getSubject},connect:{value:U.connect},refCount:{value:U.refCount}}})();class _e extends d.Yc{constructor($,B){super($),this.connectable=B}_error($){this._unsubscribe(),super._error($)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const $=this.connectable;if($){this.connectable=null;const B=$._connection;$._refCount=0,$._subject=null,$._connection=null,B&&B.unsubscribe()}}}},9193:(Je,Ce,V)=>{"use strict";V.d(Ce,{E:()=>H,c:()=>O});var d=V(7574);const H=new d.y(ue=>ue.complete());function O(ue){return ue?function(ue){return new d.y(Q=>ue.schedule(()=>Q.complete()))}(ue):H}},4402:(Je,Ce,V)=>{"use strict";V.d(Ce,{D:()=>Ne});var d=V(7574),H=V(7444),O=V(5319),ce=V(6554),_e=V(4087),te=V(377),$=V(4072),B=V(9489);function Ne(Ie,pe){return pe?function(Ie,pe){if(null!=Ie){if(function(Ie){return Ie&&"function"==typeof Ie[ce.L]}(Ie))return function(Ie,pe){return new d.y(oe=>{const fe=new O.w;return fe.add(pe.schedule(()=>{const ye=Ie[ce.L]();fe.add(ye.subscribe({next(Re){fe.add(pe.schedule(()=>oe.next(Re)))},error(Re){fe.add(pe.schedule(()=>oe.error(Re)))},complete(){fe.add(pe.schedule(()=>oe.complete()))}}))})),fe})}(Ie,pe);if((0,$.t)(Ie))return function(Ie,pe){return new d.y(oe=>{const fe=new O.w;return fe.add(pe.schedule(()=>Ie.then(ye=>{fe.add(pe.schedule(()=>{oe.next(ye),fe.add(pe.schedule(()=>oe.complete()))}))},ye=>{fe.add(pe.schedule(()=>oe.error(ye)))}))),fe})}(Ie,pe);if((0,B.z)(Ie))return(0,_e.r)(Ie,pe);if(function(Ie){return Ie&&"function"==typeof Ie[te.hZ]}(Ie)||"string"==typeof Ie)return function(Ie,pe){if(!Ie)throw new Error("Iterable cannot be null");return new d.y(oe=>{const fe=new O.w;let ye;return fe.add(()=>{ye&&"function"==typeof ye.return&&ye.return()}),fe.add(pe.schedule(()=>{ye=Ie[te.hZ](),fe.add(pe.schedule(function(){if(oe.closed)return;let Re,Ye;try{const Tt=ye.next();Re=Tt.value,Ye=Tt.done}catch(Tt){return void oe.error(Tt)}Ye?oe.complete():(oe.next(Re),this.schedule())}))})),fe})}(Ie,pe)}throw new TypeError((null!==Ie&&typeof Ie||Ie)+" is not observable")}(Ie,pe):Ie instanceof d.y?Ie:new d.y((0,H.s)(Ie))}},6693:(Je,Ce,V)=>{"use strict";V.d(Ce,{n:()=>ce});var d=V(7574),H=V(5015),O=V(4087);function ce(ue,Q){return Q?(0,O.r)(ue,Q):new d.y((0,H.V)(ue))}},6682:(Je,Ce,V)=>{"use strict";V.d(Ce,{T:()=>ue});var d=V(7574),H=V(4869),O=V(3282),ce=V(6693);function ue(...Q){let _e=Number.POSITIVE_INFINITY,te=null,ne=Q[Q.length-1];return(0,H.K)(ne)?(te=Q.pop(),Q.length>1&&"number"==typeof Q[Q.length-1]&&(_e=Q.pop())):"number"==typeof ne&&(_e=Q.pop()),null===te&&1===Q.length&&Q[0]instanceof d.y?Q[0]:(0,O.J)(_e)((0,ce.n)(Q,te))}},5917:(Je,Ce,V)=>{"use strict";V.d(Ce,{of:()=>ce});var d=V(4869),H=V(6693),O=V(4087);function ce(...ue){let Q=ue[ue.length-1];return(0,d.K)(Q)?(ue.pop(),(0,O.r)(ue,Q)):(0,H.n)(ue)}},205:(Je,Ce,V)=>{"use strict";V.d(Ce,{_:()=>H});var d=V(7574);function H(ce,ue){return new d.y(ue?Q=>ue.schedule(O,0,{error:ce,subscriber:Q}):Q=>Q.error(ce))}function O({error:ce,subscriber:ue}){ue.error(ce)}},8002:(Je,Ce,V)=>{"use strict";V.d(Ce,{U:()=>H});var d=V(7393);function H(ue,Q){return function(te){if("function"!=typeof ue)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return te.lift(new O(ue,Q))}}class O{constructor(Q,_e){this.project=Q,this.thisArg=_e}call(Q,_e){return _e.subscribe(new ce(Q,this.project,this.thisArg))}}class ce extends d.L{constructor(Q,_e,te){super(Q),this.project=_e,this.count=0,this.thisArg=te||this}_next(Q){let _e;try{_e=this.project.call(this.thisArg,Q,this.count++)}catch(te){return void this.destination.error(te)}this.destination.next(_e)}}},3282:(Je,Ce,V)=>{"use strict";V.d(Ce,{J:()=>O});var d=V(9773),H=V(4487);function O(ce=Number.POSITIVE_INFINITY){return(0,d.zg)(H.y,ce)}},9773:(Je,Ce,V)=>{"use strict";V.d(Ce,{zg:()=>ce});var d=V(8002),H=V(4402),O=V(5345);function ce(te,ne,U=Number.POSITIVE_INFINITY){return"function"==typeof ne?$=>$.pipe(ce((B,se)=>(0,H.D)(te(B,se)).pipe((0,d.U)((De,Ne)=>ne(B,De,se,Ne))),U)):("number"==typeof ne&&(U=ne),$=>$.lift(new ue(te,U)))}class ue{constructor(ne,U=Number.POSITIVE_INFINITY){this.project=ne,this.concurrent=U}call(ne,U){return U.subscribe(new Q(ne,this.project,this.concurrent))}}class Q extends O.Ds{constructor(ne,U,$=Number.POSITIVE_INFINITY){super(ne),this.project=U,this.concurrent=$,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ne){this.active<this.concurrent?this._tryNext(ne):this.buffer.push(ne)}_tryNext(ne){let U;const $=this.index++;try{U=this.project(ne,$)}catch(B){return void this.destination.error(B)}this.active++,this._innerSub(U)}_innerSub(ne){const U=new O.IY(this),$=this.destination;$.add(U);const B=(0,O.ft)(ne,U);B!==U&&$.add(B)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ne){this.destination.next(ne)}notifyComplete(){const ne=this.buffer;this.active--,ne.length>0?this._next(ne.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},6136:(Je,Ce,V)=>{"use strict";V.d(Ce,{ht:()=>ne,QV:()=>_e});var d=V(7393),H=V(9193),O=V(5917),ce=V(205);class Q{constructor(B,se,De){this.kind=B,this.value=se,this.error=De,this.hasValue="N"===B}observe(B){switch(this.kind){case"N":return B.next&&B.next(this.value);case"E":return B.error&&B.error(this.error);case"C":return B.complete&&B.complete()}}do(B,se,De){switch(this.kind){case"N":return B&&B(this.value);case"E":return se&&se(this.error);case"C":return De&&De()}}accept(B,se,De){return B&&"function"==typeof B.next?this.observe(B):this.do(B,se,De)}toObservable(){switch(this.kind){case"N":return(0,O.of)(this.value);case"E":return(0,ce._)(this.error);case"C":return(0,H.c)()}throw new Error("unexpected notification kind value")}static createNext(B){return void 0!==B?new Q("N",B):Q.undefinedValueNotification}static createError(B){return new Q("E",void 0,B)}static createComplete(){return Q.completeNotification}}function _e($,B=0){return function(De){return De.lift(new te($,B))}}Q.completeNotification=new Q("C"),Q.undefinedValueNotification=new Q("N",void 0);class te{constructor(B,se=0){this.scheduler=B,this.delay=se}call(B,se){return se.subscribe(new ne(B,this.scheduler,this.delay))}}class ne extends d.L{constructor(B,se,De=0){super(B),this.scheduler=se,this.delay=De}static dispatch(B){const{notification:se,destination:De}=B;se.observe(De),this.unsubscribe()}scheduleMessage(B){this.destination.add(this.scheduler.schedule(ne.dispatch,this.delay,new U(B,this.destination)))}_next(B){this.scheduleMessage(Q.createNext(B))}_error(B){this.scheduleMessage(Q.createError(B)),this.unsubscribe()}_complete(){this.scheduleMessage(Q.createComplete()),this.unsubscribe()}}class U{constructor(B,se){this.notification=B,this.destination=se}}},1307:(Je,Ce,V)=>{"use strict";V.d(Ce,{x:()=>H});var d=V(7393);function H(){return function(Q){return Q.lift(new O(Q))}}class O{constructor(Q){this.connectable=Q}call(Q,_e){const{connectable:te}=this;te._refCount++;const ne=new ce(Q,te),U=_e.subscribe(ne);return ne.closed||(ne.connection=te.connect()),U}}class ce extends d.L{constructor(Q,_e){super(Q),this.connectable=_e}_unsubscribe(){const{connectable:Q}=this;if(!Q)return void(this.connection=null);this.connectable=null;const _e=Q._refCount;if(_e<=0)return void(this.connection=null);if(Q._refCount=_e-1,_e>1)return void(this.connection=null);const{connection:te}=this,ne=Q._connection;this.connection=null,ne&&(!te||ne===te)&&ne.unsubscribe()}}},8819:(Je,Ce,V)=>{"use strict";V.d(Ce,{B:()=>_e});var d=V(2441);var ce=V(1307),ue=V(9765);function Q(){return new ue.xQ}function _e(){return te=>(0,ce.x)()(function(te,ne){return function($){let B;B="function"==typeof te?te:function(){return te};const se=Object.create($,d.N);return se.source=$,se.subjectFactory=B,se}}(Q)(te))}},3101:(Je,Ce,V)=>{"use strict";V.d(Ce,{R:()=>pe});var d=V(7574);let H=1;const O=Promise.resolve(),ce={};function ue(fe){return fe in ce&&(delete ce[fe],!0)}const Q={setImmediate(fe){const ye=H++;return ce[ye]=!0,O.then(()=>ue(ye)&&fe()),ye},clearImmediate(fe){ue(fe)}};var te=V(6465),U=V(6102);const se=new class extends U.v{flush(ye){this.active=!0,this.scheduled=void 0;const{actions:Re}=this;let Ye,Tt=-1,Mt=Re.length;ye=ye||Re.shift();do{if(Ye=ye.execute(ye.state,ye.delay))break}while(++Tt<Mt&&(ye=Re.shift()));if(this.active=!1,Ye){for(;++Tt<Mt&&(ye=Re.shift());)ye.unsubscribe();throw Ye}}}(class extends te.o{constructor(ye,Re){super(ye,Re),this.scheduler=ye,this.work=Re}requestAsyncId(ye,Re,Ye=0){return null!==Ye&&Ye>0?super.requestAsyncId(ye,Re,Ye):(ye.actions.push(this),ye.scheduled||(ye.scheduled=Q.setImmediate(ye.flush.bind(ye,null))))}recycleAsyncId(ye,Re,Ye=0){if(null!==Ye&&Ye>0||null===Ye&&this.delay>0)return super.recycleAsyncId(ye,Re,Ye);0===ye.actions.length&&(Q.clearImmediate(Re),ye.scheduled=void 0)}});var De=V(9796);class Ie extends d.y{constructor(ye,Re=0,Ye=se){var fe;super(),this.source=ye,this.delayTime=Re,this.scheduler=Ye,(!(!(0,De.k)(fe=Re)&&fe-parseFloat(fe)+1>=0)||Re<0)&&(this.delayTime=0),(!Ye||"function"!=typeof Ye.schedule)&&(this.scheduler=se)}static create(ye,Re=0,Ye=se){return new Ie(ye,Re,Ye)}static dispatch(ye){const{source:Re,subscriber:Ye}=ye;return this.add(Re.subscribe(Ye))}_subscribe(ye){return this.scheduler.schedule(Ie.dispatch,this.delayTime,{source:this.source,subscriber:ye})}}function pe(fe,ye=0){return function(Ye){return Ye.lift(new oe(fe,ye))}}class oe{constructor(ye,Re){this.scheduler=ye,this.delay=Re}call(ye,Re){return new Ie(Re,this.delay,this.scheduler).subscribe(ye)}}},3342:(Je,Ce,V)=>{"use strict";V.d(Ce,{b:()=>ce});var d=V(7393);function H(){}var O=V(9105);function ce(_e,te,ne){return function($){return $.lift(new ue(_e,te,ne))}}class ue{constructor(te,ne,U){this.nextOrObserver=te,this.error=ne,this.complete=U}call(te,ne){return ne.subscribe(new Q(te,this.nextOrObserver,this.error,this.complete))}}class Q extends d.L{constructor(te,ne,U,$){super(te),this._tapNext=H,this._tapError=H,this._tapComplete=H,this._tapError=U||H,this._tapComplete=$||H,(0,O.m)(ne)?(this._context=this,this._tapNext=ne):ne&&(this._context=ne,this._tapNext=ne.next||H,this._tapError=ne.error||H,this._tapComplete=ne.complete||H)}_next(te){try{this._tapNext.call(this._context,te)}catch(ne){return void this.destination.error(ne)}this.destination.next(te)}_error(te){try{this._tapError.call(this._context,te)}catch(ne){return void this.destination.error(ne)}this.destination.error(te)}_complete(){try{this._tapComplete.call(this._context)}catch(te){return void this.destination.error(te)}return this.destination.complete()}}},4087:(Je,Ce,V)=>{"use strict";V.d(Ce,{r:()=>O});var d=V(7574),H=V(5319);function O(ce,ue){return new d.y(Q=>{const _e=new H.w;let te=0;return _e.add(ue.schedule(function(){te!==ce.length?(Q.next(ce[te++]),Q.closed||_e.add(this.schedule())):Q.complete()})),_e})}},6465:(Je,Ce,V)=>{"use strict";V.d(Ce,{o:()=>O});var d=V(5319);class H extends d.w{constructor(ue,Q){super()}schedule(ue,Q=0){return this}}class O extends H{constructor(ue,Q){super(ue,Q),this.scheduler=ue,this.work=Q,this.pending=!1}schedule(ue,Q=0){if(this.closed)return this;this.state=ue;const _e=this.id,te=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(te,_e,Q)),this.pending=!0,this.delay=Q,this.id=this.id||this.requestAsyncId(te,this.id,Q),this}requestAsyncId(ue,Q,_e=0){return setInterval(ue.flush.bind(ue,this),_e)}recycleAsyncId(ue,Q,_e=0){if(null!==_e&&this.delay===_e&&!1===this.pending)return Q;clearInterval(Q)}execute(ue,Q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ue,Q);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ue,Q){let te,_e=!1;try{this.work(ue)}catch(ne){_e=!0,te=!!ne&&ne||new Error(ne)}if(_e)return this.unsubscribe(),te}_unsubscribe(){const ue=this.id,Q=this.scheduler,_e=Q.actions,te=_e.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==te&&_e.splice(te,1),null!=ue&&(this.id=this.recycleAsyncId(Q,ue,null)),this.delay=null}}},6102:(Je,Ce,V)=>{"use strict";V.d(Ce,{v:()=>H});let d=(()=>{class O{constructor(ue,Q=O.now){this.SchedulerAction=ue,this.now=Q}schedule(ue,Q=0,_e){return new this.SchedulerAction(this,ue).schedule(_e,Q)}}return O.now=()=>Date.now(),O})();class H extends d{constructor(ce,ue=d.now){super(ce,()=>H.delegate&&H.delegate!==this?H.delegate.now():ue()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ce,ue=0,Q){return H.delegate&&H.delegate!==this?H.delegate.schedule(ce,ue,Q):super.schedule(ce,ue,Q)}flush(ce){const{actions:ue}=this;if(this.active)return void ue.push(ce);let Q;this.active=!0;do{if(Q=ce.execute(ce.state,ce.delay))break}while(ce=ue.shift());if(this.active=!1,Q){for(;ce=ue.shift();)ce.unsubscribe();throw Q}}}},3637:(Je,Ce,V)=>{"use strict";V.d(Ce,{z:()=>O});var d=V(6465);const O=new(V(6102).v)(d.o)},7771:(Je,Ce,V)=>{"use strict";V.d(Ce,{c:()=>Q,N:()=>ue});var d=V(6465),O=V(6102);const ue=new class extends O.v{}(class extends d.o{constructor(te,ne){super(te,ne),this.scheduler=te,this.work=ne}schedule(te,ne=0){return ne>0?super.schedule(te,ne):(this.delay=ne,this.state=te,this.scheduler.flush(this),this)}execute(te,ne){return ne>0||this.closed?super.execute(te,ne):this._execute(te,ne)}requestAsyncId(te,ne,U=0){return null!==U&&U>0||null===U&&this.delay>0?super.requestAsyncId(te,ne,U):te.flush(this)}}),Q=ue},377:(Je,Ce,V)=>{"use strict";V.d(Ce,{hZ:()=>H});const H="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:(Je,Ce,V)=>{"use strict";V.d(Ce,{L:()=>d});const d="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:(Je,Ce,V)=>{"use strict";V.d(Ce,{b:()=>d});const d="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:(Je,Ce,V)=>{"use strict";V.d(Ce,{N:()=>H});const H=(()=>{function O(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return O.prototype=Object.create(Error.prototype),O})()},4449:(Je,Ce,V)=>{"use strict";function d(H){setTimeout(()=>{throw H},0)}V.d(Ce,{z:()=>d})},4487:(Je,Ce,V)=>{"use strict";function d(H){return H}V.d(Ce,{y:()=>d})},9796:(Je,Ce,V)=>{"use strict";V.d(Ce,{k:()=>d});const d=Array.isArray||(H=>H&&"number"==typeof H.length)},9489:(Je,Ce,V)=>{"use strict";V.d(Ce,{z:()=>d});const d=H=>H&&"number"==typeof H.length&&"function"!=typeof H},9105:(Je,Ce,V)=>{"use strict";function d(H){return"function"==typeof H}V.d(Ce,{m:()=>d})},1555:(Je,Ce,V)=>{"use strict";function d(H){return null!==H&&"object"==typeof H}V.d(Ce,{K:()=>d})},4072:(Je,Ce,V)=>{"use strict";function d(H){return!!H&&"function"!=typeof H.subscribe&&"function"==typeof H.then}V.d(Ce,{t:()=>d})},4869:(Je,Ce,V)=>{"use strict";function d(H){return H&&"function"==typeof H.schedule}V.d(Ce,{K:()=>d})},7444:(Je,Ce,V)=>{"use strict";V.d(Ce,{s:()=>$});var d=V(5015),H=V(4449),ce=V(377),Q=V(6554),te=V(9489),ne=V(4072),U=V(1555);const $=B=>{if(B&&"function"==typeof B[Q.L])return(B=>se=>{const De=B[Q.L]();if("function"!=typeof De.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return De.subscribe(se)})(B);if((0,te.z)(B))return(0,d.V)(B);if((0,ne.t)(B))return(B=>se=>(B.then(De=>{se.closed||(se.next(De),se.complete())},De=>se.error(De)).then(null,H.z),se))(B);if(B&&"function"==typeof B[ce.hZ])return(B=>se=>{const De=B[ce.hZ]();for(;;){let Ne;try{Ne=De.next()}catch(Ie){return se.error(Ie),se}if(Ne.done){se.complete();break}if(se.next(Ne.value),se.closed)break}return"function"==typeof De.return&&se.add(()=>{De.return&&De.return()}),se})(B);{const De=`You provided ${(0,U.K)(B)?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(De)}}},5015:(Je,Ce,V)=>{"use strict";V.d(Ce,{V:()=>d});const d=H=>O=>{for(let ce=0,ue=H.length;ce<ue&&!O.closed;ce++)O.next(H[ce]);O.complete()}},2072:(Je,Ce,V)=>{"use strict";var d=V(7716);let H=null;function O(){return H}const _e=new d.OlP("DocumentToken");let te=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:ne,token:n,providedIn:"platform"}),n})();function ne(){return(0,d.LFG)($)}const U=new d.OlP("Location Initialized");let $=(()=>{class n extends te{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){B()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){B()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e))},n.\u0275prov=(0,d.Yz7)({factory:se,token:n,providedIn:"platform"}),n})();function B(){return!!window.history.pushState}function se(){return new $((0,d.LFG)(_e))}function De(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ie(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:oe,token:n,providedIn:"root"}),n})();function oe(n){const e=(0,d.LFG)(_e).location;return new ye((0,d.LFG)(te),e&&e.origin||"")}const fe=new d.OlP("appBaseHref");let ye=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return De(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ie(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,l){const h=this.prepareExternalUrl(o+Ie(l));this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){const h=this.prepareExternalUrl(o+Ie(l));this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(te),d.LFG(fe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Re=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=De(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,l){let h=this.prepareExternalUrl(o+Ie(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.pushState(t,r,h)}replaceState(t,r,o,l){let h=this.prepareExternalUrl(o+Ie(l));0==h.length&&(h=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,h)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(te),d.LFG(fe,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Ye=(()=>{class n{constructor(t,r){this._subject=new d.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(gt(o)),this._platformStrategy.onPopState(l=>{this._subject.emit({url:this.path(!0),pop:!0,state:l.state,type:l.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ie(r))}normalize(t){return n.stripTrailingSlash(function(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,gt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ie(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ie(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(pe),d.LFG(te))},n.normalizeQueryParams=Ie,n.joinWithSlash=De,n.stripTrailingSlash=Ne,n.\u0275prov=(0,d.Yz7)({factory:Tt,token:n,providedIn:"root"}),n})();function Tt(){return new Ye((0,d.LFG)(pe),(0,d.LFG)(te))}function gt(n){return n.replace(/\/index.html$/,"")}var ht=(()=>((ht=ht||{})[ht.Zero=0]="Zero",ht[ht.One=1]="One",ht[ht.Two=2]="Two",ht[ht.Few=3]="Few",ht[ht.Many=4]="Many",ht[ht.Other=5]="Other",ht))();const Oe=d.kL8;class ri{}let pr=(()=>{class n extends ri{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Oe(r||this.locale)(t)){case ht.Zero:return"zero";case ht.One:return"one";case ht.Two:return"two";case ht.Few:return"few";case ht.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.soG))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class vi{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Wt=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;if(!this._differ&&t)try{this._differ=this._differs.find(t).create(this.ngForTrackBy)}catch(r){throw new Error(`Cannot find a differ supporting object '${t}' of type '${function(n){return n.name||typeof n}(t)}'. NgFor only supports binding to Iterables such as Arrays.`)}}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=[];t.forEachOperation((o,l,h)=>{if(null==o.previousIndex){const p=this._viewContainer.createEmbeddedView(this._template,new vi(null,this._ngForOf,-1,-1),null===h?void 0:h),v=new cu(o,p);r.push(v)}else if(null==h)this._viewContainer.remove(null===l?void 0:l);else if(null!==l){const p=this._viewContainer.get(l);this._viewContainer.move(p,h);const v=new cu(o,p);r.push(v)}});for(let o=0;o<r.length;o++)this._perViewChange(r[o].view,r[o].record);for(let o=0,l=this._viewContainer.length;o<l;o++){const h=this._viewContainer.get(o);h.context.index=o,h.context.count=l,h.context.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{this._viewContainer.get(o.currentIndex).context.$implicit=o.item})}_perViewChange(t,r){t.context.$implicit=r.item}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc),d.Y36(d.ZZ4))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();class cu{constructor(e,t){this.record=e,this.view=t}}let Ei=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Fo("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Fo("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.s_b),d.Y36(d.Rgc))},n.\u0275dir=d.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class lc{constructor(){this.$implicit=null,this.ngIf=null}}function Fo(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,d.AaK)(e)}'.`)}let hu=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[{provide:ri,useClass:pr}]}),n})();function va(n){return"server"===n}let fu=(()=>{class n{}return n.\u0275prov=(0,d.Yz7)({token:n,providedIn:"root",factory:()=>new tl((0,d.LFG)(_e),window)}),n})();class tl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const l=o.shadowRoot;if(l){const h=l.getElementById(e)||l.querySelector(`[name="${e}"]`);if(h)return h}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,l=this.offset();this.window.scrollTo(r-l[0],o-l[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=hs(this.window.history)||hs(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function hs(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class pu extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var n;n=new pu,H||(H=n)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(wr=wr||document.querySelector("base"),wr?wr.getAttribute("href"):null);return null==t?null:function(n){an=an||document.createElement("a"),an.setAttribute("href",n);const e=an.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){wr=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,l]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(l)}return null}(document.cookie,e)}}let an,wr=null;const yc=new d.OlP("TRANSITION_ID"),bi=[{provide:d.ip1,useFactory:function(n,e,t){return()=>{t.get(d.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let l=0;l<o.length;l++)r.remove(o[l])})}},deps:[yc,_e,d.zs3],multi:!0}];class Nn{static init(){(0,d.VLi)(new Nn)}addToWindow(e){d.dqk.getAngularTestability=(r,o=!0)=>{const l=e.findTestabilityInTree(r,o);if(null==l)throw new Error("Could not find testability for element.");return l},d.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),d.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),d.dqk.frameworkStabilizers||(d.dqk.frameworkStabilizers=[]),d.dqk.frameworkStabilizers.push(r=>{const o=d.dqk.getAllAngularTestabilities();let l=o.length,h=!1;const p=function(v){h=h||v,l--,0==l&&r(h)};o.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let vc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const ps=new d.OlP("EventManagerPlugins");let Te=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let l=0;l<o.length;l++){const h=o[l];if(h.supports(t))return this._eventNameToPlugin.set(t,h),h}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(ps),d.LFG(d.R0b))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class xt{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let _u=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Cn=(()=>{class n extends _u{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(l=>{const h=this._doc.createElement("style");h.textContent=l,o.push(r.appendChild(h))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(yu),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(yu))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function yu(n){O().remove(n)}const Hi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Hr=/%COMP%/g;function ur(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?ur(n,o,t):(o=o.replace(Hr,n),t.push(o))}return t}function qr(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gs=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Cr(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case d.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new Eu(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case d.ifc.ShadowDom:return new bc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=ur(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Te),d.LFG(Cn),d.LFG(d.AFp))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();class Cr{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Hi[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const l=Hi[o];l?e.setAttributeNS(l,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=Hi[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(d.JOm.DashCase|d.JOm.Important)?e.style.setProperty(t,r,o&d.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&d.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,qr(r)):this.eventManager.addEventListener(e,t,qr(r))}}class Eu extends Cr{constructor(e,t,r,o){super(e),this.component=r;const l=ur(o+"-"+r.id,r.styles,[]);t.addStyles(l),this.contentAttr="_ngcontent-%COMP%".replace(Hr,o+"-"+r.id),this.hostAttr="_nghost-%COMP%".replace(Hr,o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class bc extends Cr{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const l=ur(o.id,o.styles,[]);for(let h=0;h<l.length;h++){const p=document.createElement("style");p.textContent=l[h],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vo=(()=>{class n extends xt{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Bo=["alt","control","meta","shift"],bu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},br={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},th={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let dl=(()=>{class n extends xt{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const l=n.parseEventName(r),h=n.eventCallback(l.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,l.domEventName,h))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const l=n._normalizeKey(r.pop());let h="";if(Bo.forEach(v=>{const b=r.indexOf(v);b>-1&&(r.splice(b,1),h+=v+".")}),h+=l,0!=r.length||0===l.length)return null;const p={};return p.domEventName=o,p.fullKey=h,p}static getEventFullKey(t){let r="",o=function(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&br.hasOwnProperty(e)&&(e=br[e]))}return bu[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Bo.forEach(l=>{l!=o&&th[l](t)&&(r+=l+".")}),r+=o,r}static eventCallback(t,r,o){return l=>{n.getEventFullKey(l)===t&&o.runGuarded(()=>r(l))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(_e))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Ho=(0,d.eFA)(d._c5,"browser",[{provide:d.Lbi,useValue:"browser"},{provide:d.g9A,useValue:function(){pu.makeCurrent(),Nn.init()},multi:!0},{provide:_e,useFactory:function(){return(0,d.RDi)(document),document},deps:[]}]),Sc=[[],{provide:d.zSh,useValue:"root"},{provide:d.qLn,useFactory:function(){return new d.qLn},deps:[]},{provide:ps,useClass:Vo,multi:!0,deps:[_e,d.R0b,d.Lbi]},{provide:ps,useClass:dl,multi:!0,deps:[_e]},[],{provide:gs,useClass:gs,deps:[Te,Cn,d.AFp]},{provide:d.FYo,useExisting:gs},{provide:_u,useExisting:Cn},{provide:Cn,useClass:Cn,deps:[_e]},{provide:d.dDg,useClass:d.dDg,deps:[d.R0b]},{provide:Te,useClass:Te,deps:[ps,d.R0b]},{provide:class{},useClass:vc,deps:[]},[]];let ih=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:d.AFp,useValue:t.appId},{provide:yc,useExisting:d.AFp},bi]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(n,12))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:Sc,imports:[hu,d.hGG]}),n})();"undefined"!=typeof window&&window;var Rn=V(4402),Qe=V(5917),Ii=V(9765),lh=V(7971);class Ir extends Ii.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new lh.N;return this._value}next(e){super.next(this._value=e)}}var Pc=V(4869),qo=V(9796),mr=V(7393);class pl extends mr.L{notifyNext(e,t,r,o,l){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class gl extends mr.L{constructor(e,t,r){super(),this.parent=e,this.outerValue=t,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var ml=V(7444),Ut=V(7574);function ch(n,e,t,r,o=new gl(n,t,r)){if(!o.closed)return e instanceof Ut.y?e.subscribe(o):(0,ml.s)(e)(o)}var xa=V(6693);const Mc={};class dh{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Tu(e,this.resultSelector))}}class Tu extends pl{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Mc),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let r=0;r<t;r++)this.add(ch(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,r){const o=this.values,h=this.toRespond?o[r]===Mc?--this.toRespond:this.toRespond:0;o[r]=t,0===h&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}const Zi=(()=>{function n(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return n.prototype=Object.create(Error.prototype),n})();var Ti=V(3282);function vs(...n){return(0,Ti.J)(1)((0,Qe.of)(...n))}var si=V(9193);function fo(n){return new Ut.y(e=>{let t;try{t=n()}catch(o){return void e.error(o)}return(t?(0,Rn.D)(t):(0,si.c)()).subscribe(e)})}var _l=V(2441),mt=V(8002),Zo=V(5345);function Or(n,e){return"function"==typeof e?t=>t.pipe(Or((r,o)=>(0,Rn.D)(n(r,o)).pipe((0,mt.U)((l,h)=>e(r,l,o,h))))):t=>t.lift(new hh(n))}class hh{constructor(e){this.project=e}call(e,t){return t.subscribe(new kn(e,this.project))}}class kn extends Zo.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const r=this.index++;try{t=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const r=new Zo.IY(this),o=this.destination;o.add(r),this.innerSubscription=(0,Zo.ft)(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const yl=(()=>{function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return n.prototype=Object.create(Error.prototype),n})();function hp(n){return e=>0===n?(0,si.c)():e.lift(new fp(n))}class fp{constructor(e){if(this.total=e,this.total<0)throw new yl}call(e,t){return t.subscribe(new lm(e,this.total))}}class lm extends mr.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))}}function kc(...n){const e=n[n.length-1];return(0,Pc.K)(e)?(n.pop(),t=>vs(n,t,e)):t=>vs(n,t)}function Na(n,e){let t=!1;return arguments.length>=2&&(t=!0),function(o){return o.lift(new fh(n,e,t))}}class fh{constructor(e,t,r=!1){this.accumulator=e,this.seed=t,this.hasSeed=r}call(e,t){return t.subscribe(new cm(e,this.accumulator,this.seed,this.hasSeed))}}class cm extends mr.L{constructor(e,t,r,o){super(e),this.accumulator=t,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let r;try{r=this.accumulator(this.seed,e,t)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function Es(n,e){return function(r){return r.lift(new Fc(n,e))}}class Fc{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new Ra(e,this.predicate,this.thisArg))}}class Ra extends mr.L{constructor(e,t,r){super(e),this.predicate=t,this.thisArg=r,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}t&&this.destination.next(e)}}function po(n){return function(t){const r=new Fn(n),o=t.lift(r);return r.caught=o}}class Fn{constructor(e){this.selector=e}call(e,t){return t.subscribe(new Pa(e,this.selector,this.caught))}}class Pa extends Zo.Ds{constructor(e,t,r){super(e),this.selector=t,this.caught=r}error(e){if(!this.isStopped){let t;try{t=this.selector(e,this.caught)}catch(l){return void super.error(l)}this._unsubscribeAndRecycle();const r=new Zo.IY(this);this.add(r);const o=(0,Zo.ft)(t,r);o!==r&&this.add(o)}}}var Qn=V(9773);function Lc(n,e){return(0,Qn.zg)(n,e,1)}function vl(n){return function(t){return 0===n?(0,si.c)():t.lift(new Gi(n))}}class Gi{constructor(e){if(this.total=e,this.total<0)throw new yl}call(e,t){return t.subscribe(new ws(e,this.total))}}class ws extends mr.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,r=this.total,o=this.count++;t.length<r?t.push(e):t[o%r]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let l=0;l<r;l++){const h=t++%r;e.next(o[h])}}e.complete()}}function Du(n=Vc){return e=>e.lift(new Di(n))}class Di{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new js(e,this.errorFactory))}}class js extends mr.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Vc(){return new Zi}function ph(n=null){return e=>e.lift(new Go(n))}class Go{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new dm(e,this.defaultValue))}}class dm extends mr.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var $s=V(4487);function Jn(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Es((o,l)=>n(o,l,r)):$s.y,hp(1),t?ph(e):Du(()=>new Zi))}var Tr=V(3342),go=V(1307),gp=V(5319);class I{constructor(e){this.callback=e}call(e,t){return t.subscribe(new D(e,this.callback))}}class D extends mr.L{constructor(e,t){super(e),this.add(new gp.w(t))}}class R{constructor(e,t){this.id=e,this.url=t}}class j extends R{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ee extends R{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class de extends R{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Se extends R{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ze extends R{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class We extends R{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ot extends R{constructor(e,t,r,o,l){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=l}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class rn extends R{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends R{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lr{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Ma{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Au{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Oa{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hs{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ai{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const ft="primary";class Ev{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function bn(n){return new Ev(n)}const mp="ngNavigationCancelingError";function hm(n){const e=Error("NavigationCancelingError: "+n);return e[mp]=!0,e}function Su(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let l=0;l<r.length;l++){const h=r[l],p=n[l];if(h.startsWith(":"))o[h.substring(1)]=p;else if(h!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function qs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let l=0;l<t.length;l++)if(o=t[l],!gh(n[o],e[o]))return!1;return!0}function gh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,l)=>r[l]===o)}return n===e}function fm(n){return Array.prototype.concat.apply([],n)}function xu(n){return n.length>0?n[n.length-1]:null}function Xn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function kr(n){return(0,d.CqO)(n)?n:(0,d.QGY)(n)?(0,Rn.D)(Promise.resolve(n)):(0,Qe.of)(n)}const mh={exact:function pm(n,e,t){if(!Va(n.segments,e.segments)||!jc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!pm(n.children[r],e.children[r],t))return!1;return!0},subset:zo},_h={exact:function(n,e){return qs(n,e)},subset:function(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gh(n[t],e[t]))},ignored:()=>!0};function Bc(n,e,t){return mh[t.paths](n.root,e.root,t.matrixParams)&&_h[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function zo(n,e,t){return Fa(n,e,e.segments,t)}function Fa(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Va(o,t)||e.hasChildren()||!jc(o,t,r))}if(n.segments.length===t.length){if(!Va(n.segments,t)||!jc(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!zo(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),l=t.slice(n.segments.length);return!!(Va(n.segments,o)&&jc(n.segments,o,r)&&n.children[ft])&&Fa(n.children[ft],e,l,r)}}function jc(n,e,t){return e.every((r,o)=>_h[t](n[o].parameters,r.parameters))}class La{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return vp.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Xn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ko(this)}}class El{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=bn(this.parameters)),this._parameterMap}toString(){return wp(this)}}function Va(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class vh{}class Nu{parse(e){const t=new gm(e);return new La(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var n;return`${`/${$c(e.root,!0)}`}${function(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${Ep(t)}=${Ep(o)}`).join("&"):`${Ep(t)}=${Ep(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${n=e.fragment,encodeURI(n)}`:""}`}}const vp=new Nu;function Ko(n){return n.segments.map(e=>wp(e)).join("/")}function $c(n,e){if(!n.hasChildren())return Ko(n);if(e){const t=n.children[ft]?$c(n.children[ft],!1):"",r=[];return Xn(n.children,(o,l)=>{l!==ft&&r.push(`${l}:${$c(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function(n,e){let t=[];return Xn(n.children,(r,o)=>{o===ft&&(t=t.concat(e(r,o)))}),Xn(n.children,(r,o)=>{o!==ft&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===ft?[$c(n.children[ft],!1)]:[`${o}:${$c(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[ft]?`${Ko(n)}/${t[0]}`:`${Ko(n)}/(${t.join("//")})`}}function Eh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ep(n){return Eh(n).replace(/%3B/gi,";")}function wl(n){return Eh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hc(n){return decodeURIComponent(n)}function Cl(n){return Hc(n.replace(/\+/g,"%20"))}function wp(n){return`${wl(n.path)}${function(n){return Object.keys(n).map(e=>`;${wl(e)}=${wl(n[e])}`).join("")}(n.parameters)}`}const Tv=/^[^\/()?;=#]+/;function Ch(n){const e=n.match(Tv);return e?e[0]:""}const Dv=/^[^=?&#]+/,Yo=/^[^?&#]+/;class gm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ft]=new Bt(e,t)),r}parseSegment(){const e=Ch(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new El(Hc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ch(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Ch(this.remaining);o&&(r=o,this.capture(r))}e[Hc(t)]=Hc(r)}parseQueryParam(e){const t=function(n){const e=n.match(Dv);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const h=function(n){const e=n.match(Yo);return e?e[0]:""}(this.remaining);h&&(r=h,this.capture(r))}const o=Cl(t),l=Cl(r);if(e.hasOwnProperty(o)){let h=e[o];Array.isArray(h)||(h=[h],e[o]=h),h.push(l)}else e[o]=l}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ch(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let l;r.indexOf(":")>-1?(l=r.substr(0,r.indexOf(":")),this.capture(l),this.capture(":")):e&&(l=ft);const h=this.parseChildren();t[l]=1===Object.keys(h).length?h[ft]:new Bt([],h),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class mm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Cp(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Cp(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=bp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return bp(e,this._root).map(t=>t.value)}}function Cp(n,e){if(n===e.value)return e;for(const t of e.children){const r=Cp(n,t);if(r)return r}return null}function bp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=bp(n,t);if(r.length)return r.unshift(e),r}return[]}class Qo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function bl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ip extends mm{constructor(e,t){super(e),this.snapshot=t,qc(this,e)}toString(){return this.snapshot.toString()}}function _m(n,e){const t=function(n,e){const h=new Il([],{},{},"",{},ft,e,null,n.root,-1,{});return new Tl("",new Qo(h,[]))}(n,e),r=new Ir([new El("",{})]),o=new Ir({}),l=new Ir({}),h=new Ir({}),p=new Ir(""),v=new Ba(r,o,h,p,l,ft,e,t.root);return v.snapshot=t.root,new Ip(new Qo(v,[]),t)}class Ba{constructor(e,t,r,o,l,h,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=p,this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,mt.U)(e=>bn(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,mt.U)(e=>bn(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function bh(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],l=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(l.component)break;r--}}return function(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Il{constructor(e,t,r,o,l,h,p,v,b,A,N){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=l,this.outlet=h,this.component=p,this.routeConfig=v,this._urlSegment=b,this._lastPathIndex=A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=bn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=bn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Tl extends mm{constructor(e,t){super(t),this.url=e,qc(this,t)}toString(){return Zs(this._root)}}function qc(n,e){e.value._routerState=n,e.children.forEach(t=>qc(n,t))}function Zs(n){const e=n.children.length>0?` { ${n.children.map(Zs).join(", ")} } `:"";return`${n.value}${e}`}function Jo(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,qs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),qs(e.params,t.params)||n.params.next(t.params),function(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!qs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),qs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ih(n,e){return qs(n.params,e.params)&&function(n,e){return Va(n,e)&&n.every((t,r)=>qs(t.parameters,e[r].parameters))}(n.url,e.url)&&!(!n.parent!=!e.parent)&&(!n.parent||Ih(n.parent,e.parent))}function Dl(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Dl(n,r,o);return Dl(n,r)})}(n,e,t);return new Qo(r,o)}{if(n.shouldAttach(e.value)){const l=n.retrieve(e.value);if(null!==l){const h=l.route;return xv(e,h),h}}const r=function(n){return new Ba(new Ir(n.url),new Ir(n.params),new Ir(n.queryParams),new Ir(n.fragment),new Ir(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(l=>Dl(n,l));return new Qo(r,o)}}function xv(n,e){if(n.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(n.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=n.value;for(let t=0;t<n.children.length;++t)xv(n.children[t],e.children[t])}function E(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function g(n){return"object"==typeof n&&null!=n&&n.outlets}function _(n,e,t,r,o){let l={};return r&&Xn(r,(h,p)=>{l[p]=Array.isArray(h)?h.map(v=>`${v}`):`${h}`}),new La(t.root===n?e:C(t.root,n,e),l,o)}function C(n,e,t){const r={};return Xn(n.children,(o,l)=>{r[l]=o===e?t:C(o,e,t)}),new Bt(n.segments,r)}class x{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&E(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(g);if(o&&o!==xu(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class X{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function it(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return zt(n,e,t);const r=function(n,e,t){let r=0,o=e;const l={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return l;const h=n.segments[o],p=t[r];if(g(p))break;const v=`${p}`,b=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&b&&"object"==typeof b&&void 0===b.outlets){if(!Th(v,b,h))return l;r+=2}else{if(!Th(v,{},h))return l;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const l=new Bt(n.segments.slice(0,r.pathIndex),{});return l.children[ft]=new Bt(n.segments.slice(r.pathIndex),n.children),zt(l,0,o)}return r.match&&0===o.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?Fr(n,e,t):r.match?zt(n,0,o):Fr(n,e,t)}function zt(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function(n){return g(n[0])?n[0].outlets:{[ft]:n}}(t),o={};return Xn(r,(l,h)=>{"string"==typeof l&&(l=[l]),null!==l&&(o[h]=it(n.children[h],e,l))}),Xn(n.children,(l,h)=>{void 0===r[h]&&(o[h]=l)}),new Bt(n.segments,o)}}function Fr(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const l=t[o];if(g(l)){const v=En(l.outlets);return new Bt(r,v)}if(0===o&&E(t[0])){r.push(new El(n.segments[e].path,Zc(t[0]))),o++;continue}const h=g(l)?l.outlets[ft]:`${l}`,p=o<t.length-1?t[o+1]:null;h&&p&&E(p)?(r.push(new El(h,Zc(p))),o+=2):(r.push(new El(h,{})),o++)}return new Bt(r,{})}function En(n){const e={};return Xn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Fr(new Bt([],{}),0,t))}),e}function Zc(n){const e={};return Xn(n,(t,r)=>e[r]=`${t}`),e}function Th(n,e,t){return n==t.path&&qs(e,t.parameters)}class Dp{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Jo(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=bl(t);e.children.forEach(l=>{const h=l.value.outlet;this.deactivateRoutes(l,o[h],r),delete o[h]}),Xn(o,(l,h)=>{this.deactivateRouteAndItsChildren(l,r)})}deactivateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(o===l)if(o.component){const h=r.getContext(o.outlet);h&&this.deactivateChildRoutes(e,t,h.children)}else this.deactivateChildRoutes(e,t,r);else l&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),l=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:l})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,l=bl(e);for(const h of Object.keys(l))this.deactivateRouteAndItsChildren(l[h],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=bl(t);e.children.forEach(l=>{this.activateRoutes(l,o[l.value.outlet],r),this.forwardEvent(new Hs(l.value.snapshot))}),e.children.length&&this.forwardEvent(new Au(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,l=t?t.value:null;if(Jo(o),o===l)if(o.component){const h=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,h.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const h=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),h.children.onOutletReAttached(p.contexts),h.attachRef=p.componentRef,h.route=p.route.value,h.outlet&&h.outlet.attach(p.componentRef,p.route.value),Ah(p.route)}else{const p=function(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),v=p?p.module.componentFactoryResolver:null;h.attachRef=null,h.route=o,h.resolver=v,h.outlet&&h.outlet.activateWith(o,v),this.activateChildRoutes(e,null,h.children)}}else this.activateChildRoutes(e,null,r)}}function Ah(n){Jo(n.value),n.children.forEach(Ah)}class Sh{constructor(e,t){this.routes=e,this.module=t}}function mo(n){return"function"==typeof n}function Al(n){return n instanceof La}const xh=Symbol("INITIAL_VALUE");function Nh(){return Or(n=>function(...n){let e,t;return(0,Pc.K)(n[n.length-1])&&(t=n.pop()),"function"==typeof n[n.length-1]&&(e=n.pop()),1===n.length&&(0,qo.k)(n[0])&&(n=n[0]),(0,xa.n)(n,t).lift(new dh(e))}(n.map(e=>e.pipe(hp(1),kc(xh)))).pipe(Na((e,t)=>{let r=!1;return t.reduce((o,l,h)=>o!==xh?o:(l===xh&&(r=!0),r||!1!==l&&h!==t.length-1&&!Al(l)?o:l),e)},xh),Es(e=>e!==xh),(0,mt.U)(e=>Al(e)?e:!0===e),hp(1)))}let ui=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&d._UZ(0,"router-outlet")},directives:function(){return[kh]},encapsulation:2}),n})();function Rh(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];Rv(r,TS(e,r))}}function Rv(n,e){n.children&&Rh(n.children,e)}function TS(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function Pv(n){const e=n.children&&n.children.map(Pv),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ft&&(t.component=ui),t}function Gs(n){return n.outlet||ft}function ZC(n,e){const t=n.filter(r=>Gs(r)===e);return t.push(...n.filter(r=>Gs(r)!==e)),t}const Mv={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Cm(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Mv):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const l=(e.matcher||Su)(t,n,e);if(!l)return Object.assign({},Mv);const h={};Xn(l.posParams,(v,b)=>{h[b]=v.path});const p=l.consumed.length>0?Object.assign(Object.assign({},h),l.consumed[l.consumed.length-1].parameters):h;return{matched:!0,consumedSegments:l.consumed,lastChild:l.consumed.length,parameters:p,positionalParamSegments:null!==(r=l.posParams)&&void 0!==r?r:{}}}function Ap(n,e,t,r,o="corrected"){if(t.length>0&&function(n,e,t){return t.some(r=>Ph(n,e,r)&&Gs(r)!==ft)}(n,t,r)){const h=new Bt(e,function(n,e,t,r){const o={};o[ft]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const l of t)if(""===l.path&&Gs(l)!==ft){const h=new Bt([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,o[Gs(l)]=h}return o}(n,e,r,new Bt(t,n.children)));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:[]}}if(0===t.length&&function(n,e,t){return t.some(r=>Ph(n,e,r))}(n,t,r)){const h=new Bt(n.segments,function(n,e,t,r,o,l){const h={};for(const p of r)if(Ph(n,t,p)&&!o[Gs(p)]){const v=new Bt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===l?n.segments.length:e.length,h[Gs(p)]=v}return Object.assign(Object.assign({},o),h)}(n,e,t,r,n.children,o));return h._sourceSegment=n,h._segmentIndexShift=e.length,{segmentGroup:h,slicedSegments:t}}const l=new Bt(n.segments,n.children);return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}function Ph(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Ov(n,e,t,r){return!!(Gs(n)===r||r!==ft&&Ph(e,t,n))&&("**"===n.path||Cm(e,n,t).matched)}function WC(n,e,t){return 0===e.length&&!n.children[t]}class bm{constructor(e){this.segmentGroup=e||null}}class kv{constructor(e){this.urlTree=e}}function Wc(n){return new Ut.y(e=>e.error(new bm(n)))}function zC(n){return new Ut.y(e=>e.error(new kv(n)))}function xS(n){return new Ut.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class RS{constructor(e,t,r,o,l){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=l,this.allowRedirects=!0,this.ngModule=e.get(d.h0i)}apply(){const e=Ap(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,ft).pipe((0,mt.U)(l=>this.createUrlTree(Fv(l),this.urlTree.queryParams,this.urlTree.fragment))).pipe(po(l=>{if(l instanceof kv)return this.allowRedirects=!1,this.match(l.urlTree);throw l instanceof bm?this.noMatchError(l):l}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,ft).pipe((0,mt.U)(o=>this.createUrlTree(Fv(o),e.queryParams,e.fragment))).pipe(po(o=>{throw o instanceof bm?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Bt([],{[ft]:e}):e;return new La(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,mt.U)(l=>new Bt([],l))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const l of Object.keys(r.children))"primary"===l?o.unshift(l):o.push(l);return(0,Rn.D)(o).pipe(Lc(l=>{const h=r.children[l],p=ZC(t,l);return this.expandSegmentGroup(e,p,h,l).pipe((0,mt.U)(v=>({segment:v,outlet:l})))}),Na((l,h)=>(l[h.outlet]=h.segment,l),{}),function(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Es((o,l)=>n(o,l,r)):$s.y,vl(1),t?ph(e):Du(()=>new Zi))}())}expandSegment(e,t,r,o,l,h){return(0,Rn.D)(r).pipe(Lc(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,l,h).pipe(po(b=>{if(b instanceof bm)return(0,Qe.of)(null);throw b}))),Jn(p=>!!p),po((p,v)=>{if(p instanceof Zi||"EmptyError"===p.name){if(WC(t,o,l))return(0,Qe.of)(new Bt([],{}));throw new bm(t)}throw p}))}expandSegmentAgainstRoute(e,t,r,o,l,h,p){return Ov(o,t,l,h)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,l,h):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h):Wc(t):Wc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,h):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const l=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?zC(l):this.lineralizeSegments(r,l).pipe((0,Qn.zg)(h=>{const p=new Bt(h,{});return this.expandSegment(e,p,t,h,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,l,h){const{matched:p,consumedSegments:v,lastChild:b,positionalParamSegments:A}=Cm(t,o,l);if(!p)return Wc(t);const N=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?zC(N):this.lineralizeSegments(o,N).pipe((0,Qn.zg)(L=>this.expandSegment(e,t,r,L.concat(l.slice(b)),h,!1)))}matchSegmentAgainstRoute(e,t,r,o,l){if("**"===r.path)return r.loadChildren?(r._loadedConfig?(0,Qe.of)(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,mt.U)(L=>(r._loadedConfig=L,new Bt(o,{})))):(0,Qe.of)(new Bt(o,{}));const{matched:h,consumedSegments:p,lastChild:v}=Cm(t,r,o);if(!h)return Wc(t);const b=o.slice(v);return this.getChildConfig(e,r,o).pipe((0,Qn.zg)(N=>{const L=N.module,q=N.routes,{segmentGroup:ae,slicedSegments:Ae}=Ap(t,p,b,q),Ve=new Bt(ae.segments,ae.children);if(0===Ae.length&&Ve.hasChildren())return this.expandChildren(L,q,Ve).pipe((0,mt.U)(Qt=>new Bt(p,Qt)));if(0===q.length&&0===Ae.length)return(0,Qe.of)(new Bt(p,{}));const At=Gs(r)===l;return this.expandSegment(L,Ve,q,Ae,At?ft:l,!0).pipe((0,mt.U)(wn=>new Bt(p.concat(wn.segments),wn.children)))}))}getChildConfig(e,t,r){return t.children?(0,Qe.of)(new Sh(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Qe.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,Qn.zg)(o=>{return o?this.configLoader.load(e.injector,t).pipe((0,mt.U)(l=>(t._loadedConfig=l,l))):(n=t,new Ut.y(e=>e.error(hm(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))));var n})):(0,Qe.of)(new Sh([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;if(!o||0===o.length)return(0,Qe.of)(!0);const l=o.map(h=>{const p=e.get(h);let v;if((n=p)&&mo(n.canLoad))v=p.canLoad(t,r);else{if(!mo(p))throw new Error("Invalid CanLoad guard");v=p(t,r)}var n;return kr(v)});return(0,Qe.of)(l).pipe(Nh(),(0,Tr.b)(h=>{if(!Al(h))return;const p=hm(`Redirecting to "${this.urlSerializer.serialize(h)}"`);throw p.url=h,p}),(0,mt.U)(h=>!0===h))}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return(0,Qe.of)(r);if(o.numberOfChildren>1||!o.children[ft])return xS(e.redirectTo);o=o.children[ft]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const l=this.createSegmentGroup(e,t.root,r,o);return new La(l,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Xn(e,(o,l)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[l]=t[p]}else r[l]=o}),r}createSegmentGroup(e,t,r,o){const l=this.createSegments(e,t.segments,r,o);let h={};return Xn(t.children,(p,v)=>{h[v]=this.createSegmentGroup(e,p,r,o)}),new Bt(l,h)}createSegments(e,t,r,o){return t.map(l=>l.path.startsWith(":")?this.findPosParam(e,l,o):this.findOrReturn(l,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Fv(n){const e={};for(const r of Object.keys(n.children)){const l=Fv(n.children[r]);(l.segments.length>0||l.hasChildren())&&(e[r]=l)}return function(n){if(1===n.numberOfChildren&&n.children[ft]){const e=n.children[ft];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}class Sp{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zi{constructor(e,t){this.component=e,this.route=t}}function KC(n,e,t){const r=n._root;return Tm(r,e?e._root:null,t,[r.value])}function Im(n,e,t){const r=function(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function Tm(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=bl(e);return n.children.forEach(h=>{(function(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const l=n.value,h=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(h&&l.routeConfig===h.routeConfig){const v=function(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Va(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Va(n.url,e.url)||!qs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ih(n,e)||!qs(n.queryParams,e.queryParams);case"paramsChange":default:return!Ih(n,e)}}(h,l,l.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new Sp(r)):(l.data=h.data,l._resolvedData=h._resolvedData),Tm(n,e,l.component?p?p.children:null:t,r,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new zi(p.outlet.component,h))}else h&&xp(e,p,o),o.canActivateChecks.push(new Sp(r)),Tm(n,null,l.component?p?p.children:null:t,r,o)})(h,l[h.value.outlet],t,r.concat([h.value]),o),delete l[h.value.outlet]}),Xn(l,(h,p)=>xp(h,t.getContext(p),o)),o}function xp(n,e,t){const r=bl(n),o=n.value;Xn(r,(l,h)=>{xp(l,o.component?e?e.children.getContext(h):null:e,t)}),t.canDeactivateChecks.push(new zi(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class Lv{}function Dm(n){return new Ut.y(e=>e.error(n))}class XC{constructor(e,t,r,o,l,h){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=h}recognize(){const e=Ap(this.urlTree.root,[],[],this.config.filter(h=>void 0===h.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,ft);if(null===t)return null;const r=new Il([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},ft,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Qo(r,t),l=new Tl(this.url,o);return this.inheritParamsAndData(l._root),l}inheritParamsAndData(e){const t=e.value,r=bh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const l of Object.keys(t.children)){const h=t.children[l],p=ZC(e,l),v=this.processSegmentGroup(p,h,l);if(null===v)return null;r.push(...v)}const o=Am(r);return o.sort((e,t)=>e.value.outlet===ft?-1:t.value.outlet===ft?1:e.value.outlet.localeCompare(t.value.outlet)),o}processSegment(e,t,r,o){for(const l of e){const h=this.processSegmentAgainstRoute(l,t,r,o);if(null!==h)return h}return WC(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Ov(e,t,r,o))return null;let l,h=[],p=[];if("**"===e.path){const q=r.length>0?xu(r).parameters:{};l=new Il(r,q,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zc(e),Gs(e),e.component,e,Vv(t),VS(t)+r.length,Sm(e))}else{const q=Cm(t,e,r);if(!q.matched)return null;h=q.consumedSegments,p=r.slice(q.lastChild),l=new Il(h,q.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,zc(e),Gs(e),e.component,e,Vv(t),VS(t)+h.length,Sm(e))}const v=(n=e).children?n.children:n.loadChildren?n._loadedConfig.routes:[],{segmentGroup:b,slicedSegments:A}=Ap(t,h,p,v.filter(q=>void 0===q.redirectTo),this.relativeLinkResolution);var n;if(0===A.length&&b.hasChildren()){const q=this.processChildren(v,b);return null===q?null:[new Qo(l,q)]}if(0===v.length&&0===A.length)return[new Qo(l,[])];const N=Gs(e)===o,L=this.processSegment(v,b,A,N?ft:o);return null===L?null:[new Qo(l,L)]}}function tb(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Am(n){const e=[],t=new Set;for(const r of n){if(!tb(r)){e.push(r);continue}const o=e.find(l=>r.value.routeConfig===l.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Am(r.children);e.push(new Qo(r.value,o))}return e.filter(r=>!t.has(r))}function Vv(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function VS(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function zc(n){return n.data||{}}function Sm(n){return n.resolve||{}}function Bv(n){return Or(e=>{const t=n(e);return t?(0,Rn.D)(t).pipe((0,mt.U)(()=>e)):(0,Qe.of)(e)})}class qS extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const xm=new d.OlP("ROUTES");class Nm{constructor(e,t,r,o){this.loader=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,mt.U)(l=>{this.onLoadEndListener&&this.onLoadEndListener(t);const h=l.create(e);return new Sh(fm(h.injector.get(xm,void 0,d.XFs.Self|d.XFs.Optional)).map(Pv),h)}),po(l=>{throw t._loader$=void 0,l}));return t._loader$=new _l.c(o,()=>new Ii.xQ).pipe((0,go.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,Rn.D)(this.loader.load(e)):kr(e()).pipe((0,Qn.zg)(t=>t instanceof d.YKP?(0,Qe.of)(t):(0,Rn.D)(this.compiler.compileModuleAsync(t))))}}class ib{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Sl,this.attachRef=null}}class Sl{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new ib,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class GS{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sb(n){throw n}function ob(n,e,t){return e.parse("/")}function xl(n,e){return(0,Qe.of)(null)}const ab={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ub={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let cr=(()=>{class n{constructor(t,r,o,l,h,p,v,b){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=l,this.config=b,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Ii.xQ,this.errorHandler=sb,this.malformedUriErrorHandler=ob,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:xl,afterPreactivation:xl},this.urlHandlingStrategy=new GS,this.routeReuseStrategy=new qS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=h.get(d.h0i),this.console=h.get(d.c2e);const L=h.get(d.R0b);this.isNgZoneEnabled=L instanceof d.R0b&&d.R0b.isInAngularZone(),this.resetConfig(b),this.currentUrlTree=new La(new Bt([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Nm(p,v,q=>this.triggerEvent(new oi(q)),q=>this.triggerEvent(new lr(q))),this.routerState=_m(this.currentUrlTree,this.rootComponentType),this.transitions=new Ir({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Es(o=>0!==o.id),(0,mt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Or(o=>{let l=!1,h=!1;return(0,Qe.of)(o).pipe((0,Tr.b)(p=>{this.currentNavigation={id:p.id,initialUrl:p.currentRawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Or(p=>{const v=this.browserUrlTree.toString(),b=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||b)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Pm(p.source)&&(this.browserUrlTree=p.extractedUrl),(0,Qe.of)(p).pipe(Or(N=>{const L=this.transitions.getValue();return r.next(new j(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),L!==this.transitions.getValue()?si.E:Promise.resolve(N)}),function(n,e,t,r){return Or(o=>function(n,e,t,r,o){return new RS(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,mt.U)(l=>Object.assign(Object.assign({},o),{urlAfterRedirects:l}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Tr.b)(N=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:N.urlAfterRedirects})}),function(n,e,t,r,o){return(0,Qn.zg)(l=>function(n,e,t,r,o="emptyOnly",l="legacy"){try{const h=new XC(n,e,t,r,o,l).recognize();return null===h?Dm(new Lv):(0,Qe.of)(h)}catch(h){return Dm(h)}}(n,e,l.urlAfterRedirects,t(l.urlAfterRedirects),r,o).pipe((0,mt.U)(h=>Object.assign(Object.assign({},l),{targetSnapshot:h}))))}(this.rootComponentType,this.config,N=>this.serializeUrl(N),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Tr.b)(N=>{"eager"===this.urlUpdateStrategy&&(N.extras.skipLocationChange||this.setBrowserUrl(N.urlAfterRedirects,N),this.browserUrlTree=N.urlAfterRedirects);const L=new Ze(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(L)}));if(b&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:L,extractedUrl:q,source:ae,restoredState:Ae,extras:Ve}=p,At=new j(L,this.serializeUrl(q),ae,Ae);r.next(At);const $t=_m(q,this.rootComponentType).snapshot;return(0,Qe.of)(Object.assign(Object.assign({},p),{targetSnapshot:$t,urlAfterRedirects:q,extras:Object.assign(Object.assign({},Ve),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=p.rawUrl,this.browserUrlTree=p.urlAfterRedirects,p.resolve(null),si.E}),Bv(p=>{const{targetSnapshot:v,id:b,extractedUrl:A,rawUrl:N,extras:{skipLocationChange:L,replaceUrl:q}}=p;return this.hooks.beforePreactivation(v,{navigationId:b,appliedUrlTree:A,rawUrlTree:N,skipLocationChange:!!L,replaceUrl:!!q})}),(0,Tr.b)(p=>{const v=new We(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),(0,mt.U)(p=>Object.assign(Object.assign({},p),{guards:KC(p.targetSnapshot,p.currentSnapshot,this.rootContexts)})),function(n,e){return(0,Qn.zg)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:l,canDeactivateChecks:h}}=t;return 0===h.length&&0===l.length?(0,Qe.of)(Object.assign(Object.assign({},t),{guardsResult:!0})):function(n,e,t,r){return(0,Rn.D)(n).pipe((0,Qn.zg)(o=>function(n,e,t,r,o){const l=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!l||0===l.length)return(0,Qe.of)(!0);const h=l.map(p=>{const v=Im(p,e,o);let b;if(function(n){return n&&mo(n.canDeactivate)}(v))b=kr(v.canDeactivate(n,e,t,r));else{if(!mo(v))throw new Error("Invalid CanDeactivate guard");b=kr(v(n,e,t,r))}return b.pipe(Jn())});return(0,Qe.of)(h).pipe(Nh())}(o.component,o.route,t,e,r)),Jn(o=>!0!==o,!0))}(h,r,o,n).pipe((0,Qn.zg)(p=>p&&function(n){return"boolean"==typeof n}(p)?function(n,e,t,r){return(0,Rn.D)(e).pipe(Lc(o=>vs(function(n,e){return null!==n&&e&&e(new Ma(n)),(0,Qe.of)(!0)}(o.route.parent,r),function(n,e){return null!==n&&e&&e(new Oa(n)),(0,Qe.of)(!0)}(o.route,r),function(n,e,t){const r=e[e.length-1],l=e.slice(0,e.length-1).reverse().map(h=>function(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(h)).filter(h=>null!==h).map(h=>fo(()=>{const p=h.guards.map(v=>{const b=Im(v,h.node,t);let A;if(function(n){return n&&mo(n.canActivateChild)}(b))A=kr(b.canActivateChild(r,n));else{if(!mo(b))throw new Error("Invalid CanActivateChild guard");A=kr(b(r,n))}return A.pipe(Jn())});return(0,Qe.of)(p).pipe(Nh())}));return(0,Qe.of)(l).pipe(Nh())}(n,o.path,t),function(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Qe.of)(!0);const o=r.map(l=>fo(()=>{const h=Im(l,e,t);let p;if(function(n){return n&&mo(n.canActivate)}(h))p=kr(h.canActivate(e,n));else{if(!mo(h))throw new Error("Invalid CanActivate guard");p=kr(h(e,n))}return p.pipe(Jn())}));return(0,Qe.of)(o).pipe(Nh())}(n,o.route,t))),Jn(o=>!0!==o,!0))}(r,l,n,e):(0,Qe.of)(p)),(0,mt.U)(p=>Object.assign(Object.assign({},t),{guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),(0,Tr.b)(p=>{if(Al(p.guardsResult)){const b=hm(`Redirecting to "${this.serializeUrl(p.guardsResult)}"`);throw b.url=p.guardsResult,b}const v=new Ot(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),Es(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,""),!1)),Bv(p=>{if(p.guards.canActivateChecks.length)return(0,Qe.of)(p).pipe((0,Tr.b)(v=>{const b=new rn(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}),Or(v=>{let b=!1;return(0,Qe.of)(v).pipe(function(n,e){return(0,Qn.zg)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return(0,Qe.of)(t);let l=0;return(0,Rn.D)(o).pipe(Lc(h=>function(n,e,t,r){return function(n,e,t,r){const o=Object.keys(n);if(0===o.length)return(0,Qe.of)({});const l={};return(0,Rn.D)(o).pipe((0,Qn.zg)(h=>function(n,e,t,r){const o=Im(n,e,r);return kr(o.resolve?o.resolve(e,t):o(e,t))}(n[h],e,t,r).pipe((0,Tr.b)(p=>{l[h]=p}))),vl(1),(0,Qn.zg)(()=>Object.keys(l).length===o.length?(0,Qe.of)(l):si.E))}(n._resolve,n,e,r).pipe((0,mt.U)(l=>(n._resolvedData=l,n.data=Object.assign(Object.assign({},n.data),bh(n,t).resolve),null)))}(h.route,r,n,e)),(0,Tr.b)(()=>l++),vl(1),(0,Qn.zg)(h=>l===o.length?(0,Qe.of)(t):si.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Tr.b)({next:()=>b=!0,complete:()=>{b||(this.restoreHistory(v),this.cancelNavigationTransition(v,"At least one route resolver didn't emit any value."))}}))}),(0,Tr.b)(v=>{const b=new rr(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(b)}))}),Bv(p=>{const{targetSnapshot:v,id:b,extractedUrl:A,rawUrl:N,extras:{skipLocationChange:L,replaceUrl:q}}=p;return this.hooks.afterPreactivation(v,{navigationId:b,appliedUrlTree:A,rawUrlTree:N,skipLocationChange:!!L,replaceUrl:!!q})}),(0,mt.U)(p=>{const v=function(n,e,t){const r=Dl(n,e._root,t?t._root:void 0);return new Ip(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return Object.assign(Object.assign({},p),{targetRouterState:v})}),(0,Tr.b)(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,mt.U)(r=>(new Dp(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),(0,Tr.b)({next(){l=!0},complete(){l=!0}}),function(n){return e=>e.lift(new I(n))}(()=>{var p;if(!l&&!h){const v=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,v)):this.cancelNavigationTransition(o,v)}(null===(p=this.currentNavigation)||void 0===p?void 0:p.id)===o.id&&(this.currentNavigation=null)}),po(p=>{if(h=!0,function(n){return n&&n[mp]}(p)){const v=Al(p.url);v||(this.navigated=!0,this.restoreHistory(o,!0));const b=new de(o.id,this.serializeUrl(o.extractedUrl),p.message);r.next(b),v?setTimeout(()=>{const A=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),N={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Pm(o.source)};this.scheduleNavigation(A,"imperative",null,N,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new Se(o.id,this.serializeUrl(o.extractedUrl),p);r.next(v);try{o.resolve(this.errorHandler(p))}catch(b){o.reject(b)}}return si.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:l,urlTree:h}=r,p={replaceUrl:!0};if(l){const v=Object.assign({},l);delete v.navigationId,delete v.\u0275routerPageId,0!==Object.keys(v).length&&(p.state=v)}this.scheduleNavigation(h,o,l,p)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(t){var r;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,r){if(!t)return!0;const o=r.urlTree.toString()===t.urlTree.toString();return r.transitionId!==t.transitionId||!o||!("hashchange"===r.source&&"popstate"===t.source||"popstate"===r.source&&"hashchange"===t.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Rh(t),this.config=t.map(Pv),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:l,fragment:h,queryParamsHandling:p,preserveFragment:v}=r,b=o||this.routerState.root,A=v?this.currentUrlTree.fragment:h;let N=null;switch(p){case"merge":N=Object.assign(Object.assign({},this.currentUrlTree.queryParams),l);break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=l||null}return null!==N&&(N=this.removeEmptyProps(N)),function(n,e,t,r,o){if(0===t.length)return _(e.root,e.root,e,r,o);const l=function(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new x(!0,0,n);let e=0,t=!1;const r=n.reduce((o,l,h)=>{if("object"==typeof l&&null!=l){if(l.outlets){const p={};return Xn(l.outlets,(v,b)=>{p[b]="string"==typeof v?v.split("/"):v}),[...o,{outlets:p}]}if(l.segmentPath)return[...o,l.segmentPath]}return"string"!=typeof l?[...o,l]:0===h?(l.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,l]},[]);return new x(t,e,r)}(t);if(l.toRoot())return _(e.root,new Bt([],{}),e,r,o);const h=function(n,e,t){if(n.isAbsolute)return new X(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const l=t.snapshot._urlSegment;return new X(l,l===e.root,0)}const r=E(n.commands[0])?0:1;return function(n,e,t){let r=n,o=e,l=t;for(;l>o;){if(l-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new X(r,!1,o-l)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(l,e,n),p=h.processChildren?zt(h.segmentGroup,h.index,l.commands):it(h.segmentGroup,h.index,l.commands);return _(h.segmentGroup,p,e,r,o)}(b,this.currentUrlTree,t,N,null!=A?A:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Al(t)?t:this.parseUrl(t),l=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(l,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},ab):!1===r?Object.assign({},ub):r,Al(t))return Bc(this.currentUrlTree,t,o);const l=this.parseUrl(t);return Bc(this.currentUrlTree,l,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const l=t[o];return null!=l&&(r[o]=l),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,l,h){var p,v;if(this.disposed)return Promise.resolve(!1);const b=this.getTransition(),A=Pm(r)&&b&&!Pm(b.source),q=(this.lastSuccessfulId===b.id||this.currentNavigation?b.rawUrl:b.urlAfterRedirects).toString()===t.toString();if(A&&q)return Promise.resolve(!0);let ae,Ae,Ve;h?(ae=h.resolve,Ae=h.reject,Ve=h.promise):Ve=new Promise((wn,Qt)=>{ae=wn,Ae=Qt});const At=++this.navigationId;let $t;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),$t=o&&o.\u0275routerPageId?o.\u0275routerPageId:l.replaceUrl||l.skipLocationChange?null!==(p=this.browserPageId)&&void 0!==p?p:0:(null!==(v=this.browserPageId)&&void 0!==v?v:0)+1):$t=0,this.setTransition({id:At,targetPageId:$t,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:l,resolve:ae,reject:Ae,promise:Ve,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Ve.catch(wn=>Promise.reject(wn))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),l=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",l):this.location.go(o,"",l)}restoreHistory(t,r=!1){var o,l;if("computed"===this.canceledNavigationResolution){const h=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===h?this.currentUrlTree===(null===(l=this.currentNavigation)||void 0===l?void 0:l.finalUrl)&&0===h&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(h)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new de(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.DyG),d.LFG(vh),d.LFG(Sl),d.LFG(Ye),d.LFG(d.zs3),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(void 0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function Pm(n){return"imperative"!==n}let Nl=(()=>{class n{constructor(t,r,o,l,h){this.router=t,this.route=r,this.commands=[],this.onChanges=new Ii.xQ,null==o&&l.setAttribute(h.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Kc(this.skipLocationChange),replaceUrl:Kc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr),d.Y36(Ba),d.$8M("tabindex"),d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&d.NdJ("click",function(){return r.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[d.TTD]}),n})(),Rl=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new Ii.xQ,this.subscription=t.events.subscribe(l=>{l instanceof ee&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,l,h){if(0!==t||r||o||l||h||"string"==typeof this.target&&"_self"!=this.target)return!0;const p={skipLocationChange:Kc(this.skipLocationChange),replaceUrl:Kc(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,p),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kc(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr),d.Y36(Ba),d.Y36(pe))},n.\u0275dir=d.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&d.NdJ("click",function(l){return r.onClick(l.button,l.ctrlKey,l.shiftKey,l.altKey,l.metaKey)}),2&t&&(d.Ikx("href",r.href,d.LSH),d.uIk("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[d.TTD]}),n})();function Kc(n){return""===n||!!n}let Mm=(()=>{class n{constructor(t,r,o,l,h,p){this.router=t,this.element=r,this.renderer=o,this.cdr=l,this.link=h,this.linkWithHref=p,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=t.events.subscribe(v=>{v instanceof ee&&this.update()})}ngAfterContentInit(){(0,Qe.of)(this.links.changes,this.linksWithHrefs.changes,(0,Qe.of)(null)).pipe((0,Ti.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(o=>!!o).map(o=>o.onChanges);this.linkInputChangesSubscription=(0,Rn.D)(r).pipe((0,Ti.J)()).subscribe(o=>{this.isActive!==this.isLinkActive(this.router)(o)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(o=>!!o)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}))})}isLinkActive(t){const r=function(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return o=>t.isActive(o.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(cr),d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(d.sBO),d.Y36(Nl,8),d.Y36(Rl,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,o){if(1&t&&(d.Suo(o,Nl,5),d.Suo(o,Rl,5)),2&t){let l;d.iGM(l=d.CRH())&&(r.links=l),d.iGM(l=d.CRH())&&(r.linksWithHrefs=l)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[d.TTD]}),n})(),kh=(()=>{class n{constructor(t,r,o,l,h){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=h,this.activated=null,this._activatedRoute=null,this.activateEvents=new d.vpe,this.deactivateEvents=new d.vpe,this.name=l||ft,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const h=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),p=this.parentContexts.getOrCreateContext(this.name).children,v=new Om(t,p,this.location.injector);this.activated=this.location.createComponent(h,this.location.length,v),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Sl),d.Y36(d.s_b),d.Y36(d._Vd),d.$8M("name"),d.Y36(d.sBO))},n.\u0275dir=d.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),n})();class Om{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ba?this.route:e===Sl?this.childContexts:this.parent.get(e,t)}}class jv{}class Hv{preload(e,t){return(0,Qe.of)(null)}}let km=(()=>{class n{constructor(t,r,o,l,h){this.router=t,this.injector=l,this.preloadingStrategy=h,this.loader=new Nm(r,o,b=>t.triggerEvent(new oi(b)),b=>t.triggerEvent(new lr(b)))}setUpPreloading(){this.subscription=this.router.events.pipe(Es(t=>t instanceof ee),Lc(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(d.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const l of r)if(l.loadChildren&&!l.canLoad&&l._loadedConfig){const h=l._loadedConfig;o.push(this.processRoutes(h.module,h.routes))}else l.loadChildren&&!l.canLoad?o.push(this.preloadConfig(t,l)):l.children&&o.push(this.processRoutes(t,l.children));return(0,Rn.D)(o).pipe((0,Ti.J)(),(0,mt.U)(l=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?(0,Qe.of)(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,Qn.zg)(l=>(r._loadedConfig=l,this.processRoutes(l.module,l.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cr),d.LFG(d.v3s),d.LFG(d.Sil),d.LFG(d.zs3),d.LFG(jv))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})(),Yc=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof j?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof ee&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof ai&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new ai(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cr),d.LFG(fu),d.LFG(void 0))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();const Pl=new d.OlP("ROUTER_CONFIGURATION"),cb=new d.OlP("ROUTER_FORROOT_GUARD"),db=[Ye,{provide:vh,useClass:Nu},{provide:cr,useFactory:function(n,e,t,r,o,l,h,p={},v,b){const A=new cr(null,n,e,t,r,o,l,fm(h));return v&&(A.urlHandlingStrategy=v),b&&(A.routeReuseStrategy=b),function(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy)}(p,A),p.enableTracing&&A.events.subscribe(N=>{var L,q;null===(L=console.group)||void 0===L||L.call(console,`Router Event: ${N.constructor.name}`),console.log(N.toString()),console.log(N),null===(q=console.groupEnd)||void 0===q||q.call(console)}),A},deps:[vh,Sl,Ye,d.zs3,d.v3s,d.Sil,xm,Pl,[class{},new d.FiY],[class{},new d.FiY]]},Sl,{provide:Ba,useFactory:function(n){return n.routerState.root},deps:[cr]},{provide:d.v3s,useClass:d.EAV},km,Hv,class{preload(e,t){return t().pipe(po(()=>(0,Qe.of)(null)))}},{provide:Pl,useValue:{enableTracing:!1}}];function qv(){return new d.PXZ("Router",cr)}let Zv=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[db,Gv(t),{provide:cb,useFactory:zS,deps:[[cr,new d.FiY,new d.tp0]]},{provide:Pl,useValue:r||{}},{provide:pe,useFactory:hb,deps:[te,[new d.tBr(fe),new d.FiY],Pl]},{provide:Yc,useFactory:gO,deps:[cr,fu,Pl]},{provide:jv,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Hv},{provide:d.PXZ,multi:!0,useFactory:qv},[Wv,{provide:d.ip1,multi:!0,useFactory:fb,deps:[Wv]},{provide:pb,useFactory:QS,deps:[Wv]},{provide:d.tb,multi:!0,useExisting:pb}]]}}static forChild(t){return{ngModule:n,providers:[Gv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(cb,8),d.LFG(cr,8))},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();function gO(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new Yc(n,e,t)}function hb(n,e,t={}){return t.useHash?new Re(n,e):new ye(n,e)}function zS(n){return"guarded"}function Gv(n){return[{provide:d.deG,multi:!0,useValue:n},{provide:xm,multi:!0,useValue:n}]}let Wv=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Ii.xQ}appInitializer(){return this.injector.get(U,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(p=>r=p),l=this.injector.get(cr),h=this.injector.get(Pl);return"disabled"===h.initialNavigation?(l.setUpLocationChangeListener(),r(!0)):"enabled"===h.initialNavigation||"enabledBlocking"===h.initialNavigation?(l.hooks.afterPreactivation=()=>this.initNavigation?(0,Qe.of)(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),l.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Pl),o=this.injector.get(km),l=this.injector.get(Yc),h=this.injector.get(cr),p=this.injector.get(d.z2F);t===p.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&h.initialNavigation(),o.setUpPreloading(),l.init(),h.resetRootComponentType(p.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(d.zs3))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac}),n})();function fb(n){return n.appInitializer.bind(n)}function QS(n){return n.bootstrapListener.bind(n)}const pb=new d.OlP("Router Initializer");let gb=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-inicio"]],decls:2,vars:0,template:function(t,r){1&t&&(d.TgZ(0,"h2"),d._uU(1,"Bienvenido a nuestra aplicaci\xf3n Compras App"),d.qZA())},styles:[""]}),n})();var XS=V(1555);function Fm(n,e){return new Ut.y(t=>{const r=n.length;if(0===r)return void t.complete();const o=new Array(r);let l=0,h=0;for(let p=0;p<r;p++){const v=(0,Rn.D)(n[p]);let b=!1;t.add(v.subscribe({next:A=>{b||(b=!0,h++),o[p]=A},error:A=>t.error(A),complete:()=>{l++,(l===r||!b)&&(h===r&&t.next(e?e.reduce((A,N,L)=>(A[N]=o[L],A),{}):o),t.complete())}}))}})}let Et=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq))},n.\u0275dir=d.lG2({type:n}),n})(),Ml=(()=>{class n extends Et{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();const ea=new d.OlP("NgValueAccessor"),mb={provide:ea,useExisting:(0,d.Gpc)(()=>li),multi:!0},zv=new d.OlP("CompositionEventMode");let li=(()=>{class n extends Et{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.Qsj),d.Y36(d.SBq),d.Y36(zv,8))},n.\u0275dir=d.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(l){return r._handleInput(l.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(l){return r._compositionEnd(l.target.value)})},features:[d._Bn([mb]),d.qOj]}),n})();function Ha(n){return null==n||0===n.length}function Kv(n){return null!=n&&"number"==typeof n.length}const Zr=new d.OlP("NgValidators"),Qc=new d.OlP("NgAsyncValidators"),_b=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ke{static min(e){return n=e,e=>{if(Ha(e.value)||Ha(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null};var n}static max(e){return n=e,e=>{if(Ha(e.value)||Ha(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null};var n}static required(e){return Pp(e)}static requiredTrue(e){return!0===e.value?null:{required:!0}}static email(e){return Ha((n=e).value)||_b.test(n.value)?null:{email:!0};var n}static minLength(e){return n=e,e=>Ha(e.value)||!Kv(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static maxLength(e){return n=e,e=>Kv(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null;var n}static pattern(e){return function(n){if(!n)return Ol;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Ha(r.value))return null;const o=r.value;return e.test(o)?null:{pattern:{requiredPattern:t,actualValue:o}}}}(e)}static nullValidator(e){return null}static compose(e){return ox(e)}static composeAsync(e){return ax(e)}}function Pp(n){return Ha(n.value)?{required:!0}:null}function Ol(n){return null}function ix(n){return null!=n}function Qv(n){const e=(0,d.QGY)(n)?(0,Rn.D)(n):n;return(0,d.CqO)(e),e}function Jv(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function vb(n,e){return e.map(t=>t(n))}function sx(n){return n.map(e=>function(n){return!n.validate}(e)?e:t=>e.validate(t))}function ox(n){if(!n)return null;const e=n.filter(ix);return 0==e.length?null:function(t){return Jv(vb(t,e))}}function Eb(n){return null!=n?ox(sx(n)):null}function ax(n){if(!n)return null;const e=n.filter(ix);return 0==e.length?null:function(t){return function(...n){if(1===n.length){const e=n[0];if((0,qo.k)(e))return Fm(e,null);if((0,XS.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Fm(t.map(r=>e[r]),t)}}if("function"==typeof n[n.length-1]){const e=n.pop();return Fm(n=1===n.length&&(0,qo.k)(n[0])?n[0]:n,null).pipe((0,mt.U)(t=>e(...t)))}return Fm(n,null)}(vb(t,e).map(Qv)).pipe((0,mt.U)(Jv))}}function wb(n){return null!=n?ax(sx(n)):null}function ux(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lx(n){return n._rawValidators}function cx(n){return n._rawAsyncValidators}function Cb(n){return n?Array.isArray(n)?n:[n]:[]}function eE(n,e){return Array.isArray(n)?n.includes(e):n===e}function dx(n,e){const t=Cb(e);return Cb(n).forEach(o=>{eE(t,o)||t.push(o)}),t}function Pu(n,e){return Cb(e).filter(t=>!eE(n,t))}let Um=(()=>{class n{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Eb(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=wb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,r){return!!this.control&&this.control.hasError(t,r)}getError(t,r){return this.control?this.control.getError(t,r):null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n}),n})(),Ki=(()=>{class n extends Um{get formDirective(){return null}get path(){return null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,features:[d.qOj]}),n})();class Mu extends Um{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Bm{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}let Jc=(()=>{class n extends Bm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Mu,2))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[d.qOj]}),n})(),Yi=(()=>{class n extends Bm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ki,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&d.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))("ng-submitted",r.is("submitted"))},features:[d.qOj]}),n})();function Za(n,e){Fp(n,e),e.valueAccessor.writeValue(n.value),function(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&Ab(n,e)})}(n,e),function(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&Ab(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function qm(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Lh(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function kp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fp(n,e){const t=lx(n);null!==e.validator?n.setValidators(ux(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=cx(n);null!==e.asyncValidator?n.setAsyncValidators(ux(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();kp(e._rawValidators,o),kp(e._rawAsyncValidators,o)}function Lh(n,e){let t=!1;if(null!==n){if(null!==e.validator){const o=lx(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(h=>h!==e.validator);l.length!==o.length&&(t=!0,n.setValidators(l))}}if(null!==e.asyncValidator){const o=cx(n);if(Array.isArray(o)&&o.length>0){const l=o.filter(h=>h!==e.asyncValidator);l.length!==o.length&&(t=!0,n.setAsyncValidators(l))}}}const r=()=>{};return kp(e._rawValidators,r),kp(e._rawAsyncValidators,r),t}function Ab(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gx(n,e){Fp(n,e)}function Nb(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function Wm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const zm="VALID",tE="INVALID",Xc="PENDING",Km="DISABLED";function Lp(n){return(iE(n)?n.validators:n)||null}function nE(n){return Array.isArray(n)?Eb(n):n||null}function rE(n,e){return(iE(e)?e.asyncValidators:n)||null}function Rb(n){return Array.isArray(n)?wb(n):n||null}function iE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Ym{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=nE(this._rawValidators),this._composedAsyncValidatorFn=Rb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===zm}get invalid(){return this.status===tE}get pending(){return this.status==Xc}get disabled(){return this.status===Km}get enabled(){return this.status!==Km}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=nE(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Rb(e)}addValidators(e){this.setValidators(dx(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dx(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Pu(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Pu(e,this._rawAsyncValidators))}hasValidator(e){return eE(this._rawValidators,e)}hasAsyncValidator(e){return eE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Xc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Km,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=zm,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zm||this.status===Xc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Km:zm}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Xc,this._hasOwnPendingAsyncValidator=!0;const t=Qv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=r instanceof Uh?r.controls.hasOwnProperty(o)?r.controls[o]:null:r instanceof sE&&r.at(o)||null}),r}(this,e)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new d.vpe,this.statusChanges=new d.vpe}_calculateStatus(){return this._allControlsDisabled()?Km:this.errors?tE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Xc)?Xc:this._anyControlsHaveStatus(tE)?tE:zm}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){iE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Vh extends Ym{constructor(e=null,t,r){super(Lp(t),rE(r,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Wm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Wm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Uh extends Ym{constructor(e,t,r){super(Lp(t),rE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(r=>{this._throwIfControlMissing(r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t instanceof Vh?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,l)=>{r=t(r,o,l)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control with name: '${r}'.`)})}}class sE extends Ym{constructor(e,t,r){super(Lp(t),rE(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((r,o)=>{this._throwIfControlMissing(o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Vh?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,r)=>{if(void 0===e[r])throw new Error(`Must supply a value for form control at index: ${r}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Ex={provide:Ki,useExisting:(0,d.Gpc)(()=>Qm)},Bh=(()=>Promise.resolve(null))();let Qm=(()=>{class n extends Ki{constructor(t,r){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new d.vpe,this.form=new Uh({},Eb(t),wb(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Bh.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Za(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Bh.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),Wm(this._directives,t)})}addFormGroup(t){Bh.then(()=>{const r=this._findContainer(t.path),o=new Uh({});gx(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Bh.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Bh.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Nb(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zr,10),d.Y36(Qc,10))},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Ex]),d.qOj]}),n})(),Fl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const Xm={provide:ea,useExisting:(0,d.Gpc)(()=>jh),multi:!0};let jh=(()=>{class n extends Ml{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("input",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},features:[d._Bn([Xm]),d.qOj]}),n})(),e_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({}),n})();const Ub=new d.OlP("NgModelWithFormControlWarning"),Bb={provide:Ki,useExisting:(0,d.Gpc)(()=>Ga)};let Ga=(()=>{class n extends Ki{constructor(t,r){super(),this.validators=t,this.asyncValidators=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new d.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Lh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return Za(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){qm(t.control||null,t,!1),Wm(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,Nb(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,o=this.form.get(t.path);r!==o&&(qm(r||null,t),o instanceof Vh&&(Za(o,t),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);gx(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function(n,e){return Lh(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fp(this.form,this),this._oldForm&&Lh(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Zr,10),d.Y36(Qc,10))},n.\u0275dir=d.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&d.NdJ("submit",function(l){return r.onSubmit(l)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[d._Bn([Bb]),d.qOj,d.TTD]}),n})();const Dx={provide:Mu,useExisting:(0,d.Gpc)(()=>ed)};let ed=(()=>{class n extends Mu{constructor(t,r,o,l,h){super(),this._ngModelWarningConfig=h,this._added=!1,this.update=new d.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(l=>{l.constructor===li?t=l:function(n){return Object.getPrototypeOf(n.constructor)===Ml}(l)?r=l:o=l}),o||r||t||null}(0,l)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Ki,13),d.Y36(Zr,10),d.Y36(Qc,10),d.Y36(ea,10),d.Y36(Ub,8))},n.\u0275dir=d.lG2({type:n,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[d._Bn([Dx]),d.qOj,d.TTD]}),n._ngModelWarningSentOnce=!1,n})();const Hh={provide:ea,useExisting:(0,d.Gpc)(()=>ku),multi:!0};function aE(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let ku=(()=>{class n extends Ml{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=this._getOptionId(t);null==r&&this.setProperty("selectedIndex",-1);const o=aE(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r):t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(l){return r.onChange(l.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([Hh]),d.qOj]}),n})(),uE=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(aE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(ku,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const lE={provide:ea,useExisting:(0,d.Gpc)(()=>dE),multi:!0};function cE(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let dE=(()=>{class n extends Ml{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let r;if(this.value=t,Array.isArray(t)){const o=t.map(l=>this._getOptionId(l));r=(l,h)=>{l._setSelected(o.indexOf(h.toString())>-1)}}else r=(o,l)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{const o=[];if(void 0!==r.selectedOptions){const l=r.selectedOptions;for(let h=0;h<l.length;h++){const p=l.item(h),v=this._getOptionValue(p.value);o.push(v)}}else{const l=r.options;for(let h=0;h<l.length;h++){const p=l.item(h);if(p.selected){const v=this._getOptionValue(p.value);o.push(v)}}}this.value=o,t(o)}}_registerOption(t){const r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(const r of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){const r=function(n){return n.split(":")[0]}(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=d.n5z(n)))(r||n)}}(),n.\u0275dir=d.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,r){1&t&&d.NdJ("change",function(l){return r.onChange(l.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[d._Bn([lE]),d.qOj]}),n})(),Up=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(cE(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(cE(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(d.SBq),d.Y36(d.Qsj),d.Y36(dE,9))},n.\u0275dir=d.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const xx={provide:Zr,useExisting:(0,d.Gpc)(()=>nd),multi:!0};let nd=(()=>{class n{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&"false"!=`${t}`,this._onChange&&this._onChange()}validate(t){return this.required?Pp(t):null}registerOnValidatorChange(t){this._onChange=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=d.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&d.uIk("required",r.required?"":null)},inputs:{required:"required"},features:[d._Bn([xx])]}),n})(),Px=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[e_]]}),n})(),Mx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Px]}),n})(),eI=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Ub,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[Px]}),n})(),rd=(()=>{class n{group(t,r=null){const o=this._reduceControls(t);let p,l=null,h=null;return null!=r&&(function(n){return void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn}(r)?(l=null!=r.validators?r.validators:null,h=null!=r.asyncValidators?r.asyncValidators:null,p=null!=r.updateOn?r.updateOn:void 0):(l=null!=r.validator?r.validator:null,h=null!=r.asyncValidator?r.asyncValidator:null)),new Uh(o,{asyncValidators:h,updateOn:p,validators:l})}control(t,r,o){return new Vh(t,r,o)}array(t,r,o){const l=t.map(h=>this._createControl(h));return new sE(l,r,o)}_reduceControls(t){const r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){return t instanceof Vh||t instanceof Uh||t instanceof sE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=(0,d.Yz7)({factory:function(){return new n},token:n,providedIn:eI}),n})();var ge=V(8239),kx=V(7354),F=V(3854),Ji=V(8026),Ws=V(5422),Wa=V(3910),r_=V(6682),Zh=V(6136),nI=V(7771),Fx=V(8858);class Lx extends Ii.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,r){super(),this.scheduler=r,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new Vx(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,r=t?this._events:this._trimBufferThenGetEvents(),o=this.scheduler,l=r.length;let h;if(this.closed)throw new lh.N;if(this.isStopped||this.hasError?h=gp.w.EMPTY:(this.observers.push(e),h=new Fx.W(this,e)),o&&e.add(e=new Zh.ht(e,o)),t)for(let p=0;p<l&&!e.closed;p++)e.next(r[p]);else for(let p=0;p<l&&!e.closed;p++)e.next(r[p].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),h}_getNow(){return(this.scheduler||nI.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,r=this._windowTime,o=this._events,l=o.length;let h=0;for(;h<l&&!(e-o[h].time<r);)h++;return l>t&&(h=Math.max(h,l-t)),h>0&&o.splice(0,h),o}}class Vx{constructor(e,t){this.time=e,this.value=t}}function rI(n,e,t){let r;return r=n&&"object"==typeof n?n:{bufferSize:n,windowTime:e,refCount:!1,scheduler:t},o=>o.lift(function({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:t,scheduler:r}){let o,h,l=0,p=!1,v=!1;return function(A){let N;l++,!o||p?(p=!1,o=new Lx(n,e,r),N=o.subscribe(this),h=A.subscribe({next(L){o.next(L)},error(L){p=!0,o.error(L)},complete(){v=!0,h=void 0,o.complete()}}),v&&(h=void 0)):N=o.subscribe(this),this.add(()=>{l--,N.unsubscribe(),N=void 0,h&&!v&&t&&0===l&&(h.unsubscribe(),h=void 0,o=void 0)})}}(r))}function Ux(n,e){return e?Or(()=>n,e):Or(()=>n)}var i_=V(3101),Gn=V(9845),Xi=V(8939);V(2329);const aI=new Map,gE={activated:!1,tokenObservers:[]},Zx={initialized:!1,enabled:!1};function Ai(n){return aI.get(n)||gE}function na(n,e){aI.set(n,e)}function o_(){return Zx}class ra{constructor(e,t,r,o,l){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=l,this.pending=null,this.nextErrorWaitInterval=o,o>l)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new F.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new F.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const yo=new F.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error."});function ia(n){if(!Ai(n).activated)throw yo.create("use-before-activation",{appName:n.name})}function Gr(n,e){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,ge.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});o&&(r["X-Firebase-Client"]=o.getPlatformInfoString());const l={method:"POST",body:JSON.stringify(e),headers:r};let h,p;try{h=yield fetch(n,l)}catch(N){throw yo.create("fetch-network-error",{originalErrorMessage:N.message})}if(200!==h.status)throw yo.create("fetch-status-error",{httpStatus:h.status});try{p=yield h.json()}catch(N){throw yo.create("fetch-parse-error",{originalErrorMessage:N.message})}const v=p.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw yo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(v[1]),A=Date.now();return{token:p.attestationToken,expireTimeMillis:A+b,issuedAtTimeMillis:A}})).apply(this,arguments)}function yE(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Ka="firebase-app-check-store";let Lu=null;function sd(){return Lu||(Lu=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(yo.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{const o=r.target.result;switch(r.oldVersion){case 0:o.createObjectStore(Ka,{keyPath:"compositeKey"})}}}catch(t){e(yo.create("storage-open",{originalErrorMessage:t.message}))}}),Lu)}function l_(){return(l_=(0,ge.Z)(function*(n,e){const r=(yield sd()).transaction(Ka,"readwrite"),l=r.objectStore(Ka).put({compositeKey:n,value:e});return new Promise((h,p)=>{l.onsuccess=v=>{h()},r.onerror=v=>{var b;p(yo.create("storage-set",{originalErrorMessage:null===(b=v.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const $p=new Ws.Yd("@firebase/app-check");function cI(n,e){return(0,F.hl)()?function(n,e){return function(n,e){return l_.apply(this,arguments)}(function(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{$p.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hI(){return o_().enabled}function bE(){return IE.apply(this,arguments)}function IE(){return(IE=(0,ge.Z)(function*(){const n=o_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const zx={error:"UNKNOWN_ERROR"};function fI(n){return F.US.encodeString(JSON.stringify(n),!1)}function h_(n){return f_.apply(this,arguments)}function f_(){return(f_=(0,ge.Z)(function*(n,e=!1){const t=n.app;ia(t);const r=Ai(t);let l,h,o=r.token;if(!o){const p=yield r.cachedTokenPromise;p&&Xh(p)&&(o=p,na(t,Object.assign(Object.assign({},r),{token:o})),gI(t,{token:o.token}))}if(!e&&o&&Xh(o))return{token:o.token};if(hI()){const p=yield Gr(yE(t,yield bE()),n.platformLoggerProvider);return yield cI(t,p),na(t,Object.assign(Object.assign({},r),{token:p})),{token:p.token}}try{o=yield r.provider.getToken()}catch(p){$p.error(p),l=p}return o?(h={token:o.token},na(t,Object.assign(Object.assign({},r),{token:o})),yield cI(t,o)):h=RO(l),gI(t,h),h})).apply(this,arguments)}function TE(n,e){const t=Ai(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),na(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function gI(n,e){const t=Ai(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function Xh(n){return n.expireTimeMillis-Date.now()>0}function RO(n){return{token:fI(zx),error:n}}class PO{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Ai(this.app);for(const t of e)TE(this.app,t.next);return Promise.resolve()}}const vI="app-check-internal";(0,Ji._registerComponent)(new Wa.wA("app-check",n=>function(n,e){return new PO(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vI).initialize()})),(0,Ji._registerComponent)(new Wa.wA(vI,n=>function(n){return{getToken:e=>h_(n,e),addTokenListener:e=>function(n,e,t,r){const{app:o}=n,l=Ai(o),h={next:t,error:r,type:e},p=Object.assign(Object.assign({},l),{tokenObservers:[...l.tokenObservers,h]});if(!p.tokenRefresher){const v=function(n){const{app:e}=n;return new ra((0,ge.Z)(function*(){let r;if(r=Ai(e).token?yield h_(n,!0):yield h_(n),r.error)throw r.error}),()=>!0,()=>{const t=Ai(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n);p.tokenRefresher=v}if(!p.tokenRefresher.isRunning()&&l.isTokenAutoRefreshEnabled&&p.tokenRefresher.start(),l.token&&Xh(l.token)){const v=l.token;Promise.resolve().then(()=>t({token:v.token})).catch(()=>{})}else null==l.token&&l.cachedTokenPromise.then(v=>{v&&Xh(v)&&t({token:v.token})}).catch(()=>{});na(o,p)}(n,"INTERNAL",e),removeTokenListener:e=>TE(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ji.registerVersion)("@firebase/app-check","0.5.0");class m_{constructor(){return(0,Gn.vb)("app-check")}}"undefined"!=typeof window&&window;var aN=V(7841);const v_=new d.OlP("angularfire2.auth.use-emulator"),E_=new d.OlP("angularfire2.auth.settings"),ME=new d.OlP("angularfire2.auth.tenant-id"),w_=new d.OlP("angularfire2.auth.langugage-code"),Hp=new d.OlP("angularfire2.auth.use-device-language"),C_=new d.OlP("angularfire.auth.persistence"),qp=(n,e,t,r,o,l,h,p)=>(0,Xi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,l&&v.useDeviceLanguage(),h)for(const[b,A]of Object.entries(h))v.settings[b]=A;return p&&v.setPersistence(p),v},[t,r,o,l,h,p]);let Vl=(()=>{class n{constructor(t,r,o,l,h,p,v,b,A,N,L,q){const ae=new Ii.xQ,Ae=(0,Qe.of)(void 0).pipe((0,Zh.QV)(h.outsideAngular),Or(()=>l.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,4828)))),(0,mt.U)(()=>(0,Xi.on)(t,l,r)),(0,mt.U)(Ve=>qp(Ve,l,p,b,A,N,v,L)),rI({bufferSize:1,refCount:!1}));if(va(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Qe.of)(null);else{Ae.pipe(Jn()).subscribe();const At=Ae.pipe(Or(Qt=>Qt.getRedirectResult().then(xr=>xr,()=>null)),Gn.iC,rI({bufferSize:1,refCount:!1})),$t=Ae.pipe(Or(Qt=>new Ut.y(xr=>({unsubscribe:l.runOutsideAngular(()=>Qt.onAuthStateChanged(au=>xr.next(au),au=>xr.error(au),()=>xr.complete()))})))),wn=Ae.pipe(Or(Qt=>new Ut.y(xr=>({unsubscribe:l.runOutsideAngular(()=>Qt.onIdTokenChanged(au=>xr.next(au),au=>xr.error(au),()=>xr.complete()))}))));this.authState=At.pipe(Ux($t),(0,i_.R)(h.outsideAngular),(0,Zh.QV)(h.insideAngular)),this.user=At.pipe(Ux(wn),(0,i_.R)(h.outsideAngular),(0,Zh.QV)(h.insideAngular)),this.idToken=this.user.pipe(Or(Qt=>Qt?(0,Rn.D)(Qt.getIdToken()):(0,Qe.of)(null))),this.idTokenResult=this.user.pipe(Or(Qt=>Qt?(0,Rn.D)(Qt.getIdTokenResult()):(0,Qe.of)(null))),this.credential=(0,r_.T)(At,ae,this.authState.pipe(Es(Qt=>!Qt))).pipe((0,mt.U)(Qt=>(null==Qt?void 0:Qt.user)?Qt:null),(0,i_.R)(h.outsideAngular),(0,Zh.QV)(h.insideAngular))}return(0,Xi.pX)(this,Ae,l,{spy:{apply:(Ve,At,$t)=>{(Ve.startsWith("signIn")||Ve.startsWith("createUser"))&&$t.then(wn=>ae.next(wn))}}})}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xi.Dh),d.LFG(Xi.xv,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Gn.HU),d.LFG(v_,8),d.LFG(E_,8),d.LFG(ME,8),d.LFG(w_,8),d.LFG(Hp,8),d.LFG(C_,8),d.LFG(m_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DI=(()=>{class n{constructor(){aN.Z.registerVersion("angularfire",Gn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[Vl]}),n})(),b_=(()=>{class n{constructor(t){this.authf=t,this.user=null,this.ready=!1,this.$ready=null,this.checkSSO()}googleLogin(){return this.authf.signInWithPopup(new kx.N)}logout(){var t=this;return new Promise(function(){var r=(0,ge.Z)(function*(o,l){if(t.isLogged)try{yield t.authf.signOut(),t.setUser(null),t.ready=!1,console.log(t.ready),o()}catch(h){l(h)}});return function(o,l){return r.apply(this,arguments)}}())}setUser(t){var r,o,l,h;t&&t.user&&(this.user={displayName:null===(r=t.user)||void 0===r?void 0:r.displayName,email:null===(o=t.user)||void 0===o?void 0:o.email,photoURL:null===(l=t.user)||void 0===l?void 0:l.photoURL,uid:null===(h=t.user)||void 0===h?void 0:h.uid})}get isLogged(){return this.ready}checkSSO(){this.$ready=new Ut.y(t=>{try{this.authf.authState.subscribe(r=>{console.log(r),this.ready=!0,null!=r?(this.setUser({user:r}),t.next(!0)):(this.ready=!1,this.setUser(null),t.next(!1)),t.complete()})}catch(r){this.ready=!1,console.log("error"),t.next(!1),t.complete()}}),console.log("checkSSO")}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vl))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ef=(()=>{class n{constructor(t,r){this.afAuth=t,this.ruote=r,this.conect=!1}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{window.alert("Te has registrado con exito"),console.log(o.user),this.conect=!0,console.log(this.conect)}).catch(o=>{window.alert(o.message)})}sigIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(o=>{window.alert("Te has conectado"),this.ruote.navigate(["/inicio"]),this.conect=!0}).catch(o=>{window.alert(o.message),this.conect=!1})}sigOut(){return this.afAuth.signOut().then(t=>{this.ruote.navigate(["/login"]),this.conect=!1,console.log(this.conect)})}get isLogged(){return this.conect}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Vl),d.LFG(cr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function AI(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," splahScreen\n"),d.qZA())}let I_=(()=>{class n{constructor(t,r,o,l){this.fb=t,this.authS=r,this.router=o,this.autentification=l,this.validator=this.fb.group({email:["",[ke.required,ke.email]],password:["",[ke.required,ke.pattern("^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$"),ke.minLength(6)]]})}ngOnInit(){var t;null===(t=this.authS.$ready)||void 0===t||t.subscribe(r=>{r&&this.router.navigate(["/inicio"])})}login(){this.autentification.sigIn(this.validator.value.email,this.validator.value.password),this.router.navigate(["/inicio"])}loginGoogle(){this.authS.googleLogin().then(t=>{this.authS.setUser(t),this.authS.isLogged&&this.router.navigate(["/inicio"])}).catch(t=>{console.log(t)})}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rd),d.Y36(b_),d.Y36(cr),d.Y36(ef))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-login"]],decls:18,vars:2,consts:[[1,"wrapper"],[1,"form-signin",3,"formGroup"],[1,"form-signin-heading"],["type","text","name","username","placeholder","Email Address","formControlName","email","required","","autofocus","",1,"form-control"],["type","password","name","password","placeholder","Password","formControlName","password","required","",1,"form-control"],["type","submit",1,"btn","btn-lg","btn-primary","btn-block",3,"click"],["routerLink","/registro","type","submit",1,"btn","btn-lg","btn-primary","btn-block"],["id","gSignInWrapper",3,"click"],["id","customBtn",1,"customGPlusSignIn"],[1,"icon"],[1,"buttonText"],[4,"ngIf"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"form",1),d.TgZ(2,"h2",2),d._uU(3,"Please login"),d.qZA(),d._UZ(4,"input",3),d._UZ(5,"input",4),d.TgZ(6,"div"),d.TgZ(7,"button",5),d.NdJ("click",function(){return r.login()}),d._uU(8,"Entrar"),d.qZA(),d.TgZ(9,"button",6),d._uU(10,"Registrar"),d.qZA(),d.qZA(),d.TgZ(11,"div"),d.TgZ(12,"div",7),d.NdJ("click",function(){return r.loginGoogle()}),d.TgZ(13,"div",8),d._UZ(14,"span",9),d.TgZ(15,"span",10),d._uU(16,"Google"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.YNc(17,AI,2,0,"div",11)),2&t&&(d.xp6(1),d.Q6J("formGroup",r.validator),d.xp6(16),d.Q6J("ngIf",!r.authS.ready))},directives:[Fl,Yi,Ga,li,Jc,ed,nd,Nl,Ei],styles:["#customBtn[_ngcontent-%COMP%]{display:inline-block;background:white;color:#444;width:190px;border-radius:5px;border:thin solid #888;box-shadow:1px 1px 1px gray;white-space:nowrap}#customBtn[_ngcontent-%COMP%]:hover{cursor:pointer}span.label[_ngcontent-%COMP%]{font-family:serif;font-weight:normal}span.icon[_ngcontent-%COMP%]{background:url(/identity/sign-in/g-normal.png) transparent 5px 50% no-repeat;display:inline-block;vertical-align:middle;width:42px;height:42px}span.buttonText[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;padding-left:42px;padding-right:42px;font-size:14px;font-weight:bold}body[_ngcontent-%COMP%]{background:#eee!important}.wrapper[_ngcontent-%COMP%]{margin-top:80px;margin-bottom:80px}.form-signin[_ngcontent-%COMP%]{max-width:380px;padding:15px 35px 45px;margin:0 auto;background-color:#fff;border:1px solid rgba(0,0,0,.1)}.form-signin-heading[_ngcontent-%COMP%], .checkbox[_ngcontent-%COMP%]{margin-bottom:30px}.checkbox[_ngcontent-%COMP%]{font-weight:normal}.form-control[_ngcontent-%COMP%]{position:relative;font-size:16px;height:auto;padding:10px}input[type=text][_ngcontent-%COMP%]{margin-bottom:-1px;border-bottom-left-radius:0;border-bottom-right-radius:0}input[type=password][_ngcontent-%COMP%]{margin-bottom:20px;border-top-left-radius:0;border-top-right-radius:0}"]}),n})(),SI=(()=>{class n{constructor(t,r,o){this.fb=t,this.autentification=r,this.router=o,this.validator=this.fb.group({email:["",[ke.required,ke.email]],password:["",[ke.required,ke.pattern("^(?=.*[0-9])(?=.*[a-zA-Z])([a-zA-Z0-9]+)$"),ke.minLength(6)]]})}ngOnInit(){}onSubmit(){this.validator.status&&(this.autentification.signUp(this.validator.value.email,this.validator.value.password),this.router.navigate(["/inicio"]))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rd),d.Y36(ef),d.Y36(cr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-registro"]],decls:14,vars:1,consts:[[1,"row"],[1,"col-md-6","offset-md-3"],[3,"formGroup","ngSubmit"],["type","email","id","inputEmail","placeholder","nombre de usuario","formControlName","email",1,"form-control"],["type","password","id","inputPassword","placeholder","Contrase\xf1a","formControlName","password",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,r){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"form",2),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(3,"h4"),d._uU(4,"Introduzca sus datos de registro"),d.qZA(),d.TgZ(5,"label"),d._uU(6,"Correo Electr\xf3nico"),d.qZA(),d._UZ(7,"input",3),d.TgZ(8,"label"),d._uU(9,"Contrase\xf1a"),d.qZA(),d._UZ(10,"input",4),d._UZ(11,"hr"),d.TgZ(12,"button",5),d._uU(13,"Registrar"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(2),d.Q6J("formGroup",r.validator))},directives:[Fl,Yi,Ga,li,Jc,ed],styles:[""]}),n})();var xI=V(205),NI=V(3637),lN=V(8819);function OE(n,e){return t=>t.lift(new T_(n,e))}class T_{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new RI(e,this.compare,this.keySelector))}}class RI extends mr.L{constructor(e,t,r){super(e),this.keySelector=r,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:o}=this;t=o?o(e):e}catch(o){return this.destination.error(o)}let r=!1;if(this.hasKey)try{const{compare:o}=this;r=o(this.key,t)}catch(o){return this.destination.error(o)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}class MI{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new OI(e,this.observables,this.project))}}class OI extends pl{constructor(e,t,r){super(e),this.observables=t,this.project=r,this.toRespond=[];const o=t.length;this.values=new Array(o);for(let l=0;l<o;l++)this.toRespond.push(l);for(let l=0;l<o;l++)this.add(ch(this,t[l],void 0,l))}notifyNext(e,t,r){this.values[r]=t;const o=this.toRespond;if(o.length>0){const l=o.indexOf(r);-1!==l&&o.splice(l,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(t)}}class FI{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new LI(e,this.predicate))}}class LI extends mr.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}V(4828);var dN=V(3394);const VI="@firebase/database";let D_="";function BI(n){D_=n}class Lr{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,F.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,F.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class jI{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,F.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const $I=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Lr(e)}}catch(e){}return new jI},ad=$I("localStorage"),A_=$I("sessionStorage"),tf=new Ws.Yd("@firebase/database"),kE=function(){let n=1;return function(){return n++}}(),FE=function(n){const e=(0,F.dS)(n),t=new F.gQ;t.update(e);const r=t.digest();return F.US.encodeByteArray(r)},Ya=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Ya.apply(null,r):e+="object"==typeof r?(0,F.Pz)(r):r,e+=" "}return e};let ud=null,HI=!0;const LE=function(n,e){(0,F.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(tf.logLevel=Ws.in.VERBOSE,ud=tf.log.bind(tf),e&&A_.set("logging_enabled",!0)):"function"==typeof n?ud=n:(ud=null,A_.remove("logging_enabled"))},Wr=function(...n){if(!0===HI&&(HI=!1,null===ud&&!0===A_.get("logging_enabled")&&LE(!0)),ud){const e=Ya.apply(null,n);ud(e)}},nf=function(n){return function(...e){Wr(n,...e)}},qI=function(...n){const e="FIREBASE INTERNAL ERROR: "+Ya(...n);tf.error(e)},sa=function(...n){const e=`FIREBASE FATAL ERROR: ${Ya(...n)}`;throw tf.error(e),new Error(e)},ci=function(...n){const e="FIREBASE WARNING: "+Ya(...n);tf.warn(e)},S_=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},zr="[MIN_NAME]",Dr="[MAX_NAME]",di=function(n,e){if(n===e)return 0;if(n===zr||e===Dr)return-1;if(e===zr||n===Dr)return 1;{const t=Gp(n),r=Gp(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},GI=function(n,e){return n===e?0:n<e?-1:1},rf=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,F.Pz)(e))},VE=function(n){if("object"!=typeof n||null===n)return(0,F.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,F.Pz)(e[r]),t+=":",t+=VE(n[e[r]]);return t+="}",t},WI=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let o=0;o<t;o+=e)r.push(n.substring(o,o+e>t?t:o+e));return r};function Kr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const zI=function(n){(0,F.hu)(!S_(n),"Invalid JSON number");const r=1023;let o,l,h,p,v;0===n?(l=0,h=0,o=1/n==-1/0?1:0):(o=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),l=p+r,h=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(l=0,h=Math.round(n/Math.pow(2,-1074))));const b=[];for(v=52;v;v-=1)b.push(h%2?1:0),h=Math.floor(h/2);for(v=11;v;v-=1)b.push(l%2?1:0),l=Math.floor(l/2);b.push(o?1:0),b.reverse();const A=b.join("");let N="";for(v=0;v<64;v+=8){let L=parseInt(A.substr(v,8),2).toString(16);1===L.length&&(L="0"+L),N+=L}return N.toLowerCase()},KI=new RegExp("^-?(0*)\\d{1,10}$"),YI=-2147483648,x_=2147483647,Gp=function(n){if(KI.test(n)){const e=Number(n);if(e>=YI&&e<=x_)return e}return null},Vu=function(n){try{n()}catch(e){setTimeout(()=>{throw ci("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},sf=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class QI{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ci(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class BE{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Wr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ci(e)}}let Ul=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const ZE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,XI="websocket",eT="long_polling";class zE{constructor(e,t,r,o,l=!1,h="",p=!1){this.secure=t,this.namespace=r,this.webSocketOnly=o,this.nodeAdmin=l,this.persistenceKey=h,this.includeNamespaceInQueryParams=p,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ad.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ad.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function tT(n,e,t){let r;if((0,F.hu)("string"==typeof e,"typeof type must == string"),(0,F.hu)("object"==typeof t,"typeof params must == object"),e===XI)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==eT)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const o=[];return Kr(t,(l,h)=>{o.push(l+"="+h)}),r+o.join("&")}class gN{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,F.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,F.p$)(this.counters_)}}const KE={},YE={};function QE(n){const e=n.toString();return KE[e]||(KE[e]=new gN),KE[e]}class _N{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<r.length;++o)r[o]&&Vu(()=>{this.onMessage_(r[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Eo{constructor(e,t,r,o,l,h,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=o,this.authToken=l,this.transportSessionId=h,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nf(e),this.stats_=QE(t),this.urlFn=v=>(this.appCheckToken&&(v.ac=this.appCheckToken),tT(t,eT,v))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new _N(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,F.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new n0((...l)=>{const[h,p,v,b,A]=l;if(this.incrementIncomingBytes_(l),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===h)this.id=p,this.password=v;else{if("close"!==h)throw new Error("Unrecognized command received: "+h);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...l)=>{const[h,p]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(h,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&ZE.test(location.hostname)&&(r.r="f");const o=this.urlFn(r);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Eo.forceAllow_=!0}static forceDisallow(){Eo.forceDisallow_=!0}static isAvailable(){return!((0,F.Yr)()||!Eo.forceAllow_&&(Eo.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,F.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,F.h$)(t),o=WI(r,1840);for(let l=0;l<o.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[l]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,F.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,F.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class n0{constructor(e,t,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,F.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=kE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=n0.createIFrame_();let l="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(l='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(p){Wr("frame writing exception"),p.stack&&Wr(p.stack),Wr(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Wr("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const h=this.pendingSegs.shift();r=r+"&seg"+o+"="+h.seg+"&ts"+o+"="+h.ts+"&d"+o+"="+h.d,o++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},o=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(o),r()})}addTag(e,t){(0,F.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const o=r.readyState;(!o||"loaded"===o||"complete"===o)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Wr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let N_=null;"undefined"!=typeof MozWebSocket?N_=MozWebSocket:"undefined"!=typeof WebSocket&&(N_=WebSocket);let ld=(()=>{class n{constructor(t,r,o,l,h,p,v){this.connId=t,this.applicationId=o,this.appCheckToken=l,this.authToken=h,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nf(this.connId),this.stats_=QE(r),this.connURL=n.connectionURL_(r,p,v,l),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,o,l){const h={v:"5"};return!(0,F.Yr)()&&"undefined"!=typeof location&&location.hostname&&ZE.test(location.hostname)&&(h.r="f"),r&&(h.s=r),o&&(h.ls=o),l&&(h.ac=l),tT(t,XI,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ad.set("previous_websocket_failure",!0);try{if((0,F.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${D_}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,p=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;p&&(l.proxy={origin:p}),this.mySock=new N_(this.connURL,[],l)}else this.mySock=new N_(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(o){this.log_("Error instantiating WebSocket.");const l=o.message||o.data;return l&&this.log_(l),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=o=>{this.handleIncomingFrame(o)},this.mySock.onerror=o=>{this.log_("WebSocket error.  Closing connection.");const l=o.message||o.data;l&&this.log_(l),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const o=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);o&&o.length>1&&parseFloat(o[1])<4.4&&(t=!0)}return!t&&null!==N_&&!n.forceDisallow_}static previouslyFailed(){return ad.isInMemoryStorage||!0===ad.get("previous_websocket_failure")}markConnectionHealthy(){ad.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const o=(0,F.cI)(r);this.onMessage(o)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,F.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const o=this.extractFrameCount_(r);null!==o&&this.appendFrame_(o)}}send(t){this.resetKeepAlive();const r=(0,F.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const o=WI(r,16384);o.length>1&&this.sendString_(String(o.length));for(let l=0;l<o.length;l++)this.sendString_(o[l])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class hT{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Eo,ld]}initTransports_(e){const t=ld&&ld.isAvailable();let r=t&&!ld.previouslyFailed();if(e.webSocketOnly&&(t||ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ld];else{const o=this.transports_=[];for(const l of hT.ALL_TRANSPORTS)l&&l.isAvailable()&&o.push(l)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class R_{constructor(e,t,r,o,l,h,p,v,b,A){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=o,this.authToken_=l,this.onMessage_=h,this.onReady_=p,this.onDisconnect_=v,this.onKill_=b,this.lastSessionId=A,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nf("c:"+this.id+":"),this.transportManager_=new hT(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=sf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rf("t",e),r=rf("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rf("t",e),r=rf("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rf("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?qI("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qI("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ci("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),sf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):sf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ad.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class _T{put(e,t,r,o){}merge(e,t,r,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class s0{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,F.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const o=this.getInitialEvent(e);o&&t.apply(r,o)}off(e,t,r){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let l=0;l<o.length;l++)if(o[l].callback===t&&(!r||r===o[l].context))return void o.splice(l,1)}validateEventType_(e){(0,F.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Qp extends s0{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,F.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Qp}getInitialEvent(e){return(0,F.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class In{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[r]=this.pieces_[o],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function fn(){return new In("")}function jt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function wo(n){return n.pieces_.length-n.pieceNum_}function Ln(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new In(n.pieces_,e)}function u0(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Bl(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function l0(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new In(e,0)}function Wn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof In)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let o=0;o<r.length;o++)r[o].length>0&&t.push(r[o])}return new In(t,0)}function kt(n){return n.pieceNum_>=n.pieces_.length}function es(n,e){const t=jt(n),r=jt(e);if(null===t)return e;if(t===r)return es(Ln(n),Ln(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Jp(n,e){const t=Bl(n,0),r=Bl(e,0);for(let o=0;o<t.length&&o<r.length;o++){const l=di(t[o],r[o]);if(0!==l)return l}return t.length===r.length?0:t.length<r.length?-1:1}function cd(n,e){if(wo(n)!==wo(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Co(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(wo(n)>wo(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class DN{constructor(e,t){this.errorPrefix_=t,this.parts_=Bl(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,F.ug)(this.parts_[r]);c0(this)}}function c0(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+jl(n))}function jl(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class d0 extends s0{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new d0}getInitialEvent(e){return(0,F.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const af=1e3;let Xp,Ja=(()=>{class n extends _T{constructor(t,r,o,l,h,p,v,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=o,this.onConnectStatus_=l,this.onServerInfoUpdate_=h,this.authTokenProvider_=p,this.appCheckTokenProvider_=v,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=nf("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=af,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,F.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");d0.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Qp.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,o){const l=++this.requestNumber_,h={r:l,a:t,b:r};this.log_((0,F.Pz)(h)),(0,F.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(h),o&&(this.requestCBHash_[l]=o)}get(t){this.initConnection_();const r=new F.BH,o={p:t._path.toString(),q:t._queryObject},l={action:"g",request:o,onComplete:p=>{const v=p.d;"ok"===p.s?(this.onDataUpdate_(o.p,v,!1,null),r.resolve(v)):r.reject(v)}};this.outstandingGets_.push(l),this.outstandingGetCount_++;const h=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const p=this.outstandingGets_[h];void 0===p||l!==p||(delete this.outstandingGets_[h],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+h+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(h),r.promise}listen(t,r,o,l){this.initConnection_();const h=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+h),this.listens.has(p)||this.listens.set(p,new Map),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,F.hu)(!this.listens.get(p).has(h),"listen() called twice for same path/queryId.");const v={onComplete:l,hashFn:r,query:t,tag:o};this.listens.get(p).set(h,v),this.connected_&&this.sendListen_(v)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,o=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(o)})}sendListen_(t){const r=t.query,o=r._path.toString(),l=r._queryIdentifier;this.log_("Listen on "+o+" for "+l);const h={p:o};t.tag&&(h.q=r._queryObject,h.t=t.tag),h.h=t.hashFn(),this.sendRequest("q",h,v=>{const b=v.d,A=v.s;n.warnOnListenWarnings_(b,r),(this.listens.get(o)&&this.listens.get(o).get(l))===t&&(this.log_("listen response",v),"ok"!==A&&this.removeListen_(o,l),t.onComplete&&t.onComplete(A,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,F.r3)(t,"w")){const o=(0,F.DV)(t,"w");if(Array.isArray(o)&&~o.indexOf("no_index")){const l='".indexOn": "'+r._queryParams.getIndex().toString()+'"',h=r._path.toString();ci(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${l} at ${h} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,F.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,F.w9)(t)?"auth":"gauth",o={cred:t};null===this.authOverride_?o.noauth=!0:"object"==typeof this.authOverride_&&(o.authvar=this.authOverride_),this.sendRequest(r,o,l=>{const h=l.s,p=l.d||"error";this.authToken_===t&&("ok"===h?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(h,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,o=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,o)})}unlisten(t,r){const o=t._path.toString(),l=t._queryIdentifier;this.log_("Unlisten called for "+o+" "+l),(0,F.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(o,l)&&this.connected_&&this.sendUnlisten_(o,l,t._queryObject,r)}sendUnlisten_(t,r,o,l){this.log_("Unlisten on "+t+" for "+r);const h={p:t};l&&(h.q=o,h.t=l),this.sendRequest("n",h)}onDisconnectPut(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:o})}onDisconnectMerge(t,r,o){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,o):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:o})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,o,l){const h={p:r,d:o};this.log_("onDisconnect "+t,h),this.sendRequest(t,h,p=>{l&&setTimeout(()=>{l(p.s,p.d)},Math.floor(0))})}put(t,r,o,l){this.putInternal("p",t,r,o,l)}merge(t,r,o,l){this.putInternal("m",t,r,o,l)}putInternal(t,r,o,l,h){this.initConnection_();const p={p:r,d:o};void 0!==h&&(p.h=h),this.outstandingPuts_.push({action:t,request:p,onComplete:l}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,o=this.outstandingPuts_[t].request,l=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,o,h=>{this.log_(r+" response",h),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),l&&l(h.s,h.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,o=>{"ok"!==o.s&&this.log_("reportStats","Error sending stats: "+o.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,F.Pz)(t));const r=t.r,o=this.requestCBHash_[r];o&&(delete this.requestCBHash_[r],o(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):qI("Unrecognized action received from server: "+(0,F.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,F.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=af,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=af,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=af),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,ge.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),o=t.onReady_.bind(t),l=t.onRealtimeDisconnect_.bind(t),h=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let v=!1,b=null;const A=function(){b?b.close():(v=!0,l())};t.realtime_={close:A,sendRequest:function(q){(0,F.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(q)}};const L=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[q,ae]=yield Promise.all([t.authTokenProvider_.getToken(L),t.appCheckTokenProvider_.getToken(L)]);v?Wr("getToken() completed but was canceled"):(Wr("getToken() completed. Creating connection."),t.authToken_=q&&q.accessToken,t.appCheckToken_=ae&&ae.token,b=new R_(h,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,o,l,Ae=>{ci(Ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(q){t.log_("Failed to get token: "+q),v||(t.repoInfo_.nodeAdmin&&ci(q),A())}}})()}interrupt(t){Wr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Wr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,F.xb)(this.interruptReasons_)&&(this.reconnectDelay_=af,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let o;o=r?r.map(h=>VE(h)).join("$"):"default";const l=this.removeListen_(t,o);l&&l.onComplete&&l.onComplete("permission_denied")}removeListen_(t,r){const o=new In(t).toString();let l;if(this.listens.has(o)){const h=this.listens.get(o);l=h.get(r),h.delete(r),0===h.size&&this.listens.delete(o)}else l=void 0;return l}onAuthRevoked_(t,r){Wr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Wr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,F.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+D_.replace(/\./g,"-")]=1,(0,F.uI)()?t["framework.cordova"]=1:(0,F.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Qp.getInstance().currentlyOnline();return(0,F.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class P_{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(zr,e),o=new Zt(zr,t);return 0!==this.compare(r,o)}minPost(){return Zt.MIN}}class uf extends P_{static get __EMPTY_NODE(){return Xp}static set __EMPTY_NODE(e){Xp=e}compare(e,t){return di(e.name,t.name)}isDefinedOn(e){throw(0,F.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(Dr,Xp)}makePost(e,t){return(0,F.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,Xp)}toString(){return".key"}}const Xa=new uf;class M_{constructor(e,t,r,o,l=null){this.isReverse_=o,this.resultGenerator_=l,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=t?r(e.key,t):1,o&&(h*=-1),h<0)e=this.isReverse_?e.left:e.right;else{if(0===h){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let p0,oa=(()=>{class n{constructor(t,r,o,l,h){this.key=t,this.value=r,this.color=null!=o?o:n.RED,this.left=null!=l?l:Cs.EMPTY_NODE,this.right=null!=h?h:Cs.EMPTY_NODE}copy(t,r,o,l,h){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=l?l:this.left,null!=h?h:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,o){let l=this;const h=o(t,l.key);return l=h<0?l.copy(null,null,null,l.left.insert(t,r,o),null):0===h?l.copy(null,r,null,null,null):l.copy(null,null,null,null,l.right.insert(t,r,o)),l.fixUp_()}removeMin_(){if(this.left.isEmpty())return Cs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let o,l;if(o=this,r(t,o.key)<0)!o.left.isEmpty()&&!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.remove(t,r),null);else{if(o.left.isRed_()&&(o=o.rotateRight_()),!o.right.isEmpty()&&!o.right.isRed_()&&!o.right.left.isRed_()&&(o=o.moveRedRight_()),0===r(t,o.key)){if(o.right.isEmpty())return Cs.EMPTY_NODE;l=o.right.min_(),o=o.copy(l.key,l.value,null,null,o.right.removeMin_())}o=o.copy(null,null,null,null,o.right.remove(t,r))}return o.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Cs{constructor(e,t=Cs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Cs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,oa.BLACK,null,null))}remove(e){return new Cs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,oa.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,o=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return o?o.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(o=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new M_(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new M_(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new M_(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new M_(this.root_,null,this.comparator_,!0,e)}}function vT(n,e){return di(n.name,e.name)}function f0(n,e){return di(n,e)}Cs.EMPTY_NODE=new class{copy(e,t,r,o,l){return this}insert(e,t,r){return new oa(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ET=function(n){return"number"==typeof n?"number:"+zI(n):"string:"+n},g0=function(n){if(n.isLeafNode()){const e=n.val();(0,F.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,F.r3)(e,".sv"),"Priority must be a string or number.")}else(0,F.hu)(n===p0||n.isEmpty(),"priority of unexpected type.");(0,F.hu)(n===p0||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let wT,CT,m0,dd=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,F.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),g0(this.priorityNode_)}static set __childrenNodeConstructor(t){wT=t}static get __childrenNodeConstructor(){return wT}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return kt(t)?this:".priority"===jt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const o=jt(t);return null===o?r:r.isEmpty()&&".priority"!==o?this:((0,F.hu)(".priority"!==o||1===wo(t),".priority must be the last token in a path"),this.updateImmediateChild(o,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ln(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+ET(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?zI(this.value_):this.value_,this.lazyHash_=FE(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,F.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,o=typeof this.value_,l=n.VALUE_TYPE_ORDER.indexOf(r),h=n.VALUE_TYPE_ORDER.indexOf(o);return(0,F.hu)(l>=0,"Unknown leaf type: "+r),(0,F.hu)(h>=0,"Unknown leaf type: "+o),l===h?"object"===o?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:h-l}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Vn=new class extends P_{compare(e,t){const r=e.node.getPriority(),o=t.node.getPriority(),l=r.compareTo(o);return 0===l?di(e.name,t.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(Dr,new dd("[PRIORITY-POST]",m0))}makePost(e,t){const r=CT(e);return new Zt(t,new dd("[PRIORITY-POST]",r))}toString(){return".priority"}},bT=Math.log(2);class ON{constructor(e){this.count=parseInt(Math.log(e+1)/bT,10),this.current_=this.count-1;const o=(l=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const O_=function(n,e,t,r){n.sort(e);const o=function(v,b){const A=b-v;let N,L;if(0===A)return null;if(1===A)return N=n[v],L=t?t(N):N,new oa(L,N.node,oa.BLACK,null,null);{const q=parseInt(A/2,10)+v,ae=o(v,q),Ae=o(q+1,b);return N=n[q],L=t?t(N):N,new oa(L,N.node,oa.BLACK,ae,Ae)}},p=function(v){let b=null,A=null,N=n.length;const L=function(ae,Ae){const Ve=N-ae,At=N;N-=ae;const $t=o(Ve+1,At),wn=n[Ve],Qt=t?t(wn):wn;q(new oa(Qt,wn.node,Ae,null,$t))},q=function(ae){b?(b.left=ae,b=ae):(A=ae,b=ae)};for(let ae=0;ae<v.count;++ae){const Ae=v.nextBitIsOne(),Ve=Math.pow(2,v.count-(ae+1));Ae?L(Ve,oa.BLACK):(L(Ve,oa.BLACK),L(Ve,oa.RED))}return A}(new ON(n.length));return new Cs(r||e,p)};let y0;const $l={};class Uu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,F.hu)($l&&Vn,"ChildrenNode.ts has not been loaded"),y0=y0||new Uu({".priority":$l},{".priority":Vn}),y0}get(e){const t=(0,F.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Cs?t:null}hasIndex(e){return(0,F.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,F.hu)(e!==Xa,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let o=!1;const l=t.getIterator(Zt.Wrap);let p,h=l.getNext();for(;h;)o=o||e.isDefinedOn(h.node),r.push(h),h=l.getNext();p=o?O_(r,e.getCompare()):$l;const v=e.toString(),b=Object.assign({},this.indexSet_);b[v]=e;const A=Object.assign({},this.indexes_);return A[v]=p,new Uu(A,b)}addToIndexes(e,t){const r=(0,F.UI)(this.indexes_,(o,l)=>{const h=(0,F.DV)(this.indexSet_,l);if((0,F.hu)(h,"Missing index implementation for "+l),o===$l){if(h.isDefinedOn(e.node)){const p=[],v=t.getIterator(Zt.Wrap);let b=v.getNext();for(;b;)b.name!==e.name&&p.push(b),b=v.getNext();return p.push(e),O_(p,h.getCompare())}return $l}{const p=t.get(e.name);let v=o;return p&&(v=v.remove(new Zt(e.name,p))),v.insert(e,e.node)}});return new Uu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,F.UI)(this.indexes_,o=>{if(o===$l)return o;{const l=t.get(e.name);return l?o.remove(new Zt(e.name,l)):o}});return new Uu(r,this.indexSet_)}}let cf,Nt=(()=>{class n{constructor(t,r,o){this.children_=t,this.priorityNode_=r,this.indexMap_=o,this.lazyHash_=null,this.priorityNode_&&g0(this.priorityNode_),this.children_.isEmpty()&&(0,F.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return cf||(cf=new n(new Cs(f0),null,Uu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||cf}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?cf:r}}getChild(t){const r=jt(t);return null===r?this:this.getImmediateChild(r).getChild(Ln(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,F.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const o=new Zt(t,r);let l,h;r.isEmpty()?(l=this.children_.remove(t),h=this.indexMap_.removeFromIndexes(o,this.children_)):(l=this.children_.insert(t,r),h=this.indexMap_.addToIndexes(o,this.children_));const p=l.isEmpty()?cf:this.priorityNode_;return new n(l,p,h)}}updateChild(t,r){const o=jt(t);if(null===o)return r;{(0,F.hu)(".priority"!==jt(t)||1===wo(t),".priority must be the last token in a path");const l=this.getImmediateChild(o).updateChild(Ln(t),r);return this.updateImmediateChild(o,l)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let o=0,l=0,h=!0;if(this.forEachChild(Vn,(p,v)=>{r[p]=v.val(t),o++,h&&n.INTEGER_REGEXP_.test(p)?l=Math.max(l,Number(p)):h=!1}),!t&&h&&l<2*o){const p=[];for(const v in r)p[v]=r[v];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+ET(this.getPriority().val())+":"),this.forEachChild(Vn,(r,o)=>{const l=o.hash();""!==l&&(t+=":"+r+":"+l)}),this.lazyHash_=""===t?"":FE(t)}return this.lazyHash_}getPredecessorChildName(t,r,o){const l=this.resolveIndex_(o);if(l){const h=l.getPredecessorKey(new Zt(t,r));return h?h.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.minKey();return o&&o.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const o=r.maxKey();return o&&o.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const o=this.resolveIndex_(t);return o?o.inorderTraversal(l=>r(l.name,l.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getIteratorFrom(t,l=>l);{const l=this.children_.getIteratorFrom(t.name,Zt.Wrap);let h=l.peek();for(;null!=h&&r.compare(h,t)<0;)l.getNext(),h=l.peek();return l}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const o=this.resolveIndex_(r);if(o)return o.getReverseIteratorFrom(t,l=>l);{const l=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let h=l.peek();for(;null!=h&&r.compare(h,t)>0;)l.getNext(),h=l.peek();return l}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===eg?-1:0}withIndex(t){if(t===Xa||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Xa||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const o=this.getIterator(Vn),l=r.getIterator(Vn);let h=o.getNext(),p=l.getNext();for(;h&&p;){if(h.name!==p.name||!h.node.equals(p.node))return!1;h=o.getNext(),p=l.getNext()}return null===h&&null===p}return!1}return!1}}resolveIndex_(t){return t===Xa?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const eg=new class extends Nt{constructor(){super(new Cs(f0),Nt.EMPTY_NODE,Uu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Nt.EMPTY_NODE}isEmpty(){return!1}};function sr(n,e=null){if(null===n)return Nt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,F.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new dd(n,sr(e));if(n instanceof Array){let t=Nt.EMPTY_NODE;return Kr(n,(r,o)=>{if((0,F.r3)(n,r)&&"."!==r.substring(0,1)){const l=sr(o);(l.isLeafNode()||!l.isEmpty())&&(t=t.updateImmediateChild(r,l))}}),t.updatePriority(sr(e))}{const t=[];let r=!1;if(Kr(n,(h,p)=>{if("."!==h.substring(0,1)){const v=sr(p);v.isEmpty()||(r=r||!v.getPriority().isEmpty(),t.push(new Zt(h,v)))}}),0===t.length)return Nt.EMPTY_NODE;const l=O_(t,vT,h=>h.name,f0);if(r){const h=O_(t,Vn.getCompare());return new Nt(l,sr(e),new Uu({".priority":h},{".priority":Vn}))}return new Nt(l,sr(e),Uu.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(zr,Nt.EMPTY_NODE)},MAX:{value:new Zt(Dr,eg)}}),uf.__EMPTY_NODE=Nt.EMPTY_NODE,dd.__childrenNodeConstructor=Nt,p0=eg,m0=eg,function(n){CT=n}(sr);class v0 extends P_{constructor(e){super(),this.indexPath_=e,(0,F.hu)(!kt(e)&&".priority"!==jt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),o=this.extractChild(t.node),l=r.compareTo(o);return 0===l?di(e.name,t.name):l}makePost(e,t){const r=sr(e),o=Nt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,o)}maxPost(){const e=Nt.EMPTY_NODE.updateChild(this.indexPath_,eg);return new Zt(Dr,e)}toString(){return Bl(this.indexPath_,0).join("/")}}const E0=new class extends P_{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?di(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=sr(e);return new Zt(t,r)}toString(){return".value"}},hd="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",DT=function(){let n=0;const e=[];return function(t){const r=t===n;let o;n=t;const l=new Array(8);for(o=7;o>=0;o--)l[o]=hd.charAt(t%64),t=Math.floor(t/64);(0,F.hu)(0===t,"Cannot push at time == 0");let h=l.join("");if(r){for(o=11;o>=0&&63===e[o];o--)e[o]=0;e[o]++}else for(o=0;o<12;o++)e[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)h+=hd.charAt(e[o]);return(0,F.hu)(20===h.length,"nextPushId: Length should be 20."),h}}(),AT=function(n){if(n===""+x_)return"-";const e=Gp(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let h=0;h<t.length;h++)t[h]=n.charAt(h);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Dr;const l=hd.charAt(hd.indexOf(t[r])+1);return t[r]=l,t.slice(0,r+1).join("")},ST=function(n){if(n===""+YI)return zr;const e=Gp(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+x_:(delete t[t.length-1],t.join("")):(t[t.length-1]=hd.charAt(hd.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function xT(n){return{type:"value",snapshotNode:n}}function Hl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function fd(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function df(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class C0{constructor(e){this.index_=e}updateChild(e,t,r,o,l,h){(0,F.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(o).equals(r.getChild(o))&&p.isEmpty()===r.isEmpty()||(null!=h&&(r.isEmpty()?e.hasChild(t)?h.trackChildChange(fd(t,p)):(0,F.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?h.trackChildChange(Hl(t,r)):h.trackChildChange(df(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Vn,(o,l)=>{t.hasChild(o)||r.trackChildChange(fd(o,l))}),t.isLeafNode()||t.forEachChild(Vn,(o,l)=>{if(e.hasChild(o)){const h=e.getImmediateChild(o);h.equals(l)||r.trackChildChange(df(o,l,h))}else r.trackChildChange(Hl(o,l))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Nt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class tg{constructor(e){this.indexedFilter_=new C0(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tg.getStartPost_(e),this.endPost_=tg.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,o,l,h){return this.matches(new Zt(t,r))||(r=Nt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,o,l,h)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Nt.EMPTY_NODE);let o=t.withIndex(this.index_);o=o.updatePriority(Nt.EMPTY_NODE);const l=this;return t.forEachChild(Vn,(h,p)=>{l.matches(new Zt(h,p))||(o=o.updateImmediateChild(h,Nt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class b0{constructor(e){this.rangedFilter_=new tg(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,o,l,h){return this.rangedFilter_.matches(new Zt(t,r))||(r=Nt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,o,l,h):this.fullLimitUpdateChild_(e,t,r,l,h)}updateFullNode(e,t,r){let o;if(t.isLeafNode()||t.isEmpty())o=Nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let l;o=Nt.EMPTY_NODE.withIndex(this.index_),l=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;l.hasNext()&&h<this.limit_;){const p=l.getNext();let v;if(v=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),p)<=0:this.index_.compare(p,this.rangedFilter_.getEndPost())<=0,!v)break;o=o.updateImmediateChild(p.name,p.node),h++}}else{let l,h,p,v;if(o=t.withIndex(this.index_),o=o.updatePriority(Nt.EMPTY_NODE),this.reverse_){v=o.getReverseIterator(this.index_),l=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();const N=this.index_.getCompare();p=(L,q)=>N(q,L)}else v=o.getIterator(this.index_),l=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),p=this.index_.getCompare();let b=0,A=!1;for(;v.hasNext();){const N=v.getNext();!A&&p(l,N)<=0&&(A=!0),A&&b<this.limit_&&p(N,h)<=0?b++:o=o.updateImmediateChild(N.name,Nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,o,l){let h;if(this.reverse_){const N=this.index_.getCompare();h=(L,q)=>N(q,L)}else h=this.index_.getCompare();const p=e;(0,F.hu)(p.numChildren()===this.limit_,"");const v=new Zt(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),A=this.rangedFilter_.matches(v);if(p.hasChild(t)){const N=p.getImmediateChild(t);let L=o.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=L&&(L.name===t||p.hasChild(L.name));)L=o.getChildAfterChild(this.index_,L,this.reverse_);const q=null==L?1:h(L,v);if(A&&!r.isEmpty()&&q>=0)return null!=l&&l.trackChildChange(df(t,r,N)),p.updateImmediateChild(t,r);{null!=l&&l.trackChildChange(fd(t,N));const Ae=p.updateImmediateChild(t,Nt.EMPTY_NODE);return null!=L&&this.rangedFilter_.matches(L)?(null!=l&&l.trackChildChange(Hl(L.name,L.node)),Ae.updateImmediateChild(L.name,L.node)):Ae}}return r.isEmpty()?e:A&&h(b,v)>=0?(null!=l&&(l.trackChildChange(fd(b.name,b.node)),l.trackChildChange(Hl(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,Nt.EMPTY_NODE)):e}}class F_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Vn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,F.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:zr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,F.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Dr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,F.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Vn}copy(){const e=new F_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function L_(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function MT(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function Bu(n,e){const t=n.copy();return t.index_=e,t}function BN(n){const e={};if(n.isDefault())return e;let t;return n.index_===Vn?t="$priority":n.index_===E0?t="$value":n.index_===Xa?t="$key":((0,F.hu)(n.index_ instanceof v0,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,F.Pz)(t),n.startSet_&&(e.startAt=(0,F.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,F.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,F.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,F.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function V_(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Vn&&(e.i=n.index_.toString()),e}class pd extends _T{constructor(e,t,r,o){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=o,this.log_=nf("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,F.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,o){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const h=pd.getListenId_(e,r),p={};this.listens_[h]=p;const v=BN(e._queryParams);this.restRequest_(l+".json",v,(b,A)=>{let N=A;if(404===b&&(N=null,b=null),null===b&&this.onDataUpdate_(l,N,!1,r),(0,F.DV)(this.listens_,h)===p){let L;L=b?401===b?"permission_denied":"rest_error:"+b:"ok",o(L,null)}})}unlisten(e,t){const r=pd.getListenId_(e,t);delete this.listens_[r]}get(e){const t=BN(e._queryParams),r=e._path.toString(),o=new F.BH;return this.restRequest_(r+".json",t,(l,h)=>{let p=h;404===l&&(p=null,l=null),null===l?(this.onDataUpdate_(r,p,!1,null),o.resolve(p)):o.reject(new Error(p))}),o.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,l])=>{o&&o.accessToken&&(t.auth=o.accessToken),l&&l.token&&(t.ac=l.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,F.xO)(t);this.log_("Sending REST request for "+h);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+h+" received. status:",p.status,"response:",p.responseText);let v=null;if(p.status>=200&&p.status<300){try{v=(0,F.cI)(p.responseText)}catch(b){ci("Failed to parse JSON response for "+h+": "+p.responseText)}r(null,v)}else 401!==p.status&&404!==p.status&&ci("Got unsuccessful REST response for "+h+" Status: "+p.status),r(p.status);r=null}},p.open("GET",h,!0),p.send()})}}class jN{constructor(){this.rootNode_=Nt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ju(){return{value:null,children:new Map}}function hf(n,e,t){if(kt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=jt(e);n.children.has(r)||n.children.set(r,ju()),hf(n.children.get(r),e=Ln(e),t)}}function OT(n,e){if(kt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Vn,(r,o)=>{hf(n,new In(r),o)}),OT(n,e)}}if(n.children.size>0){const t=jt(e);return e=Ln(e),n.children.has(t)&&OT(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function I0(n,e,t){null!==n.value?t(e,n.value):function(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,o)=>{I0(o,new In(e.toString()+"/"+r),t)})}class kT{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Kr(this.last_,(r,o)=>{t[r]=t[r]-o}),this.last_=e,t}}class qN{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new kT(e);const r=1e4+2e4*Math.random();sf(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Kr(e,(o,l)=>{l>0&&(0,F.r3)(this.statsToReport_,o)&&(t[o]=l,r=!0)}),r&&this.server_.reportStats(t),sf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var aa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(aa||(aa={})),aa))();function A0(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ff{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=aa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(kt(this.path)){if(null!=this.affectedTree.value)return(0,F.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new In(e));return new ff(fn(),t,this.revert)}}return(0,F.hu)(jt(this.path)===e,"operationForChild called for unrelated child."),new ff(Ln(this.path),this.affectedTree,this.revert)}}class pf{constructor(e,t){this.source=e,this.path=t,this.type=aa.LISTEN_COMPLETE}operationForChild(e){return kt(this.path)?new pf(this.source,fn()):new pf(this.source,Ln(this.path))}}class $u{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=aa.OVERWRITE}operationForChild(e){return kt(this.path)?new $u(this.source,fn(),this.snap.getImmediateChild(e)):new $u(this.source,Ln(this.path),this.snap)}}class gd{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=aa.MERGE}operationForChild(e){if(kt(this.path)){const t=this.children.subtree(new In(e));return t.isEmpty()?null:t.value?new $u(this.source,fn(),t.value):new gd(this.source,fn(),t)}return(0,F.hu)(jt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new gd(this.source,Ln(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class ql{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(kt(e))return this.isFullyInitialized()&&!this.filtered_;const t=jt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class WO{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ng(n,e,t,r,o,l){const h=r.filter(p=>p.type===t);h.sort((p,v)=>function(n,e,t){if(null==e.childName||null==t.childName)throw(0,F.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),o=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,o)}(n,p,v)),h.forEach(p=>{const v=function(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,l);o.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(v,n.query_))})})}function rg(n,e){return{eventCache:n,serverCache:e}}function gf(n,e,t,r){return rg(new ql(e,t,r),n.serverCache)}function LT(n,e,t,r){return rg(n.eventCache,new ql(e,t,r))}function B_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Zl(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let mf;class Un{constructor(e,t=(()=>(mf||(mf=new Cs(GI)),mf))()){this.value=e,this.children=t}static fromObject(e){let t=new Un(null);return Kr(e,(r,o)=>{t=t.set(new In(r),o)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:fn(),value:this.value};if(kt(e))return null;{const r=jt(e),o=this.children.get(r);if(null!==o){const l=o.findRootMostMatchingPathAndValue(Ln(e),t);return null!=l?{path:Wn(new In(r),l.path),value:l.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(kt(e))return this;{const t=jt(e),r=this.children.get(t);return null!==r?r.subtree(Ln(e)):new Un(null)}}set(e,t){if(kt(e))return new Un(t,this.children);{const r=jt(e),l=(this.children.get(r)||new Un(null)).set(Ln(e),t),h=this.children.insert(r,l);return new Un(this.value,h)}}remove(e){if(kt(e))return this.children.isEmpty()?new Un(null):new Un(null,this.children);{const t=jt(e),r=this.children.get(t);if(r){const o=r.remove(Ln(e));let l;return l=o.isEmpty()?this.children.remove(t):this.children.insert(t,o),null===this.value&&l.isEmpty()?new Un(null):new Un(this.value,l)}return this}}get(e){if(kt(e))return this.value;{const t=jt(e),r=this.children.get(t);return r?r.get(Ln(e)):null}}setTree(e,t){if(kt(e))return t;{const r=jt(e),l=(this.children.get(r)||new Un(null)).setTree(Ln(e),t);let h;return h=l.isEmpty()?this.children.remove(r):this.children.insert(r,l),new Un(this.value,h)}}fold(e){return this.fold_(fn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((o,l)=>{r[o]=l.fold_(Wn(e,o),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,fn(),t)}findOnPath_(e,t,r){const o=!!this.value&&r(t,this.value);if(o)return o;if(kt(e))return null;{const l=jt(e),h=this.children.get(l);return h?h.findOnPath_(Ln(e),Wn(t,l),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,fn(),t)}foreachOnPath_(e,t,r){if(kt(e))return this;{this.value&&r(t,this.value);const o=jt(e),l=this.children.get(o);return l?l.foreachOnPath_(Ln(e),Wn(t,o),r):new Un(null)}}foreach(e){this.foreach_(fn(),e)}foreach_(e,t){this.children.inorderTraversal((r,o)=>{o.foreach_(Wn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class bs{constructor(e){this.writeTree_=e}static empty(){return new bs(new Un(null))}}function Gl(n,e,t){if(kt(e))return new bs(new Un(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const o=r.path;let l=r.value;const h=es(o,e);return l=l.updateChild(h,t),new bs(n.writeTree_.set(o,l))}{const o=new Un(t),l=n.writeTree_.setTree(e,o);return new bs(l)}}}function md(n,e,t){let r=n;return Kr(t,(o,l)=>{r=Gl(r,Wn(e,o),l)}),r}function VT(n,e){if(kt(e))return bs.empty();{const t=n.writeTree_.setTree(e,new Un(null));return new bs(t)}}function S0(n,e){return null!=_f(n,e)}function _f(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(es(t.path,e)):null}function UT(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Vn,(r,o)=>{e.push(new Zt(r,o))}):n.writeTree_.children.inorderTraversal((r,o)=>{null!=o.value&&e.push(new Zt(r,o.value))}),e}function Wl(n,e){if(kt(e))return n;{const t=_f(n,e);return new bs(null!=t?new Un(t):n.writeTree_.subtree(e))}}function x0(n){return n.writeTree_.isEmpty()}function yf(n,e){return BT(fn(),n.writeTree_,e)}function BT(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((o,l)=>{".priority"===o?((0,F.hu)(null!==l.value,"Priority writes must always be leaf nodes"),r=l.value):t=BT(Wn(n,o),l,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Wn(n,".priority"),r)),t}}function j_(n,e){return P0(e,n)}function QN(n,e){if(n.snap)return Co(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Co(Wn(n.path,t),e))return!0;return!1}function JN(n){return n.visible}function jT(n,e,t){let r=bs.empty();for(let o=0;o<n.length;++o){const l=n[o];if(e(l)){const h=l.path;let p;if(l.snap)Co(t,h)?(p=es(t,h),r=Gl(r,p,l.snap)):Co(h,t)&&(p=es(h,t),r=Gl(r,fn(),l.snap.getChild(p)));else{if(!l.children)throw(0,F.g5)("WriteRecord should have .snap or .children");if(Co(t,h))p=es(t,h),r=md(r,p,l.children);else if(Co(h,t))if(p=es(h,t),kt(p))r=md(r,fn(),l.children);else{const v=(0,F.DV)(l.children,jt(p));if(v){const b=v.getChild(Ln(p));r=Gl(r,fn(),b)}}}}}return r}function $T(n,e,t,r,o){if(r||o){const l=Wl(n.visibleWrites,e);return!o&&x0(l)?t:o||null!=t||S0(l,fn())?yf(jT(n.allWrites,function(b){return(b.visible||o)&&(!r||!~r.indexOf(b.writeId))&&(Co(b.path,e)||Co(e,b.path))},e),t||Nt.EMPTY_NODE):null}{const l=_f(n.visibleWrites,e);if(null!=l)return l;{const h=Wl(n.visibleWrites,e);return x0(h)?t:null!=t||S0(h,fn())?yf(h,t||Nt.EMPTY_NODE):null}}}function yd(n,e,t,r){return $T(n.writeTree,n.treePath,e,t,r)}function N0(n,e){return function(n,e,t){let r=Nt.EMPTY_NODE;const o=_f(n.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(Vn,(l,h)=>{r=r.updateImmediateChild(l,h)}),r;if(t){const l=Wl(n.visibleWrites,e);return t.forEachChild(Vn,(h,p)=>{const v=yf(Wl(l,new In(h)),p);r=r.updateImmediateChild(h,v)}),UT(l).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}return UT(Wl(n.visibleWrites,e)).forEach(h=>{r=r.updateImmediateChild(h.name,h.node)}),r}(n.writeTree,n.treePath,e)}function qT(n,e,t,r){return function(n,e,t,r,o){(0,F.hu)(r||o,"Either existingEventSnap or existingServerSnap must exist");const l=Wn(e,t);if(S0(n.visibleWrites,l))return null;{const h=Wl(n.visibleWrites,l);return x0(h)?o.getChild(t):yf(h,o.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function sg(n,e){return function(n,e){return _f(n.visibleWrites,e)}(n.writeTree,Wn(n.treePath,e))}function og(n,e,t){return function(n,e,t,r){const o=Wn(e,t),l=_f(n.visibleWrites,o);return null!=l?l:r.isCompleteForChild(t)?yf(Wl(n.visibleWrites,o),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function R0(n,e){return P0(Wn(n.treePath,e),n.writeTree)}function P0(n,e){return{treePath:n,writeTree:e}}class tR{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,F.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,F.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const o=this.changeMap.get(r);if(o){const l=o.type;if("child_added"===t&&"child_removed"===l)this.changeMap.set(r,df(r,e.snapshotNode,o.snapshotNode));else if("child_removed"===t&&"child_added"===l)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===l)this.changeMap.set(r,fd(r,o.oldSnap));else if("child_changed"===t&&"child_added"===l)this.changeMap.set(r,Hl(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==l)throw(0,F.g5)("Illegal combination of changes: "+e+" occurred after "+o);this.changeMap.set(r,df(r,e.snapshotNode,o.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const M0=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class O0{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new ql(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return og(this.writes_,e,r)}}getChildAfterChild(e,t,r){const o=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Zl(this.viewCache_),l=function(n,e,t,r,o,l){return function(n,e,t,r,o,l,h){let p;const v=Wl(n.visibleWrites,e),b=_f(v,fn());if(null!=b)p=b;else{if(null==t)return[];p=yf(v,t)}if(p=p.withIndex(h),p.isEmpty()||p.isLeafNode())return[];{const A=[],N=h.getCompare(),L=l?p.getReverseIteratorFrom(r,h):p.getIteratorFrom(r,h);let q=L.getNext();for(;q&&A.length<o;)0!==N(q,r)&&A.push(q),q=L.getNext();return A}}(n.writeTree,n.treePath,e,t,r,o,l)}(this.writes_,o,t,1,r,e);return 0===l.length?null:l[0]}}function vf(n,e,t,r,o,l){const h=e.eventCache;if(null!=sg(r,t))return e;{let p,v;if(kt(t))if((0,F.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=Zl(e),N=N0(r,b instanceof Nt?b:Nt.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),N,l)}else{const b=yd(r,Zl(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,l)}else{const b=jt(t);if(".priority"===b){(0,F.hu)(1===wo(t),"Can't have a priority with additional path components");const A=h.getNode();v=e.serverCache.getNode();const N=qT(r,t,A,v);p=null!=N?n.filter.updatePriority(A,N):h.getNode()}else{const A=Ln(t);let N;if(h.isCompleteForChild(b)){v=e.serverCache.getNode();const L=qT(r,t,h.getNode(),v);N=null!=L?h.getNode().getImmediateChild(b).updateChild(A,L):h.getNode().getImmediateChild(b)}else N=og(r,b,e.serverCache);p=null!=N?n.filter.updateChild(h.getNode(),b,N,A,o,l):h.getNode()}}return gf(e,p,h.isFullyInitialized()||kt(t),n.filter.filtersNodes())}}function un(n,e,t,r,o,l,h,p){const v=e.serverCache;let b;const A=h?n.filter:n.filter.getIndexedFilter();if(kt(t))b=A.updateFullNode(v.getNode(),r,null);else if(A.filtersNodes()&&!v.isFiltered()){const q=v.getNode().updateChild(t,r);b=A.updateFullNode(v.getNode(),q,null)}else{const q=jt(t);if(!v.isCompleteForPath(t)&&wo(t)>1)return e;const ae=Ln(t),Ve=v.getNode().getImmediateChild(q).updateChild(ae,r);b=".priority"===q?A.updatePriority(v.getNode(),Ve):A.updateChild(v.getNode(),q,Ve,ae,M0,null)}const N=LT(e,b,v.isFullyInitialized()||kt(t),A.filtersNodes());return vf(n,N,t,o,new O0(o,N,l),p)}function tu(n,e,t,r,o,l,h){const p=e.eventCache;let v,b;const A=new O0(o,e,l);if(kt(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,h),v=gf(e,b,!0,n.filter.filtersNodes());else{const N=jt(t);if(".priority"===N)b=n.filter.updatePriority(e.eventCache.getNode(),r),v=gf(e,b,p.isFullyInitialized(),p.isFiltered());else{const L=Ln(t),q=p.getNode().getImmediateChild(N);let ae;if(kt(L))ae=r;else{const Ae=A.getCompleteChild(N);ae=null!=Ae?".priority"===u0(L)&&Ae.getChild(l0(L)).isEmpty()?Ae:Ae.updateChild(L,r):Nt.EMPTY_NODE}v=q.equals(ae)?e:gf(e,n.filter.updateChild(p.getNode(),N,ae,L,A,h),p.isFullyInitialized(),n.filter.filtersNodes())}}return v}function vd(n,e){return n.eventCache.isCompleteForChild(e)}function rR(n,e,t){return t.foreach((r,o)=>{e=e.updateChild(r,o)}),e}function yt(n,e,t,r,o,l,h,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,v=e;b=kt(t)?r:new Un(null).setTree(t,r);const A=e.serverCache.getNode();return b.children.inorderTraversal((N,L)=>{if(A.hasChild(N)){const ae=rR(0,e.serverCache.getNode().getImmediateChild(N),L);v=un(n,v,new In(N),ae,o,l,h,p)}}),b.children.inorderTraversal((N,L)=>{const q=!e.serverCache.isCompleteForChild(N)&&void 0===L.value;if(!A.hasChild(N)&&!q){const Ae=rR(0,e.serverCache.getNode().getImmediateChild(N),L);v=un(n,v,new In(N),Ae,o,l,h,p)}}),v}class QO{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,o=new C0(r.getIndex()),l=function(n){return n.loadsAllData()?new C0(n.getIndex()):n.hasLimit()?new b0(n):new tg(n)}(r);this.processor_=function(n){return{filter:n}}(l);const h=t.serverCache,p=t.eventCache,v=o.updateFullNode(Nt.EMPTY_NODE,h.getNode(),null),b=l.updateFullNode(Nt.EMPTY_NODE,p.getNode(),null),A=new ql(v,h.isFullyInitialized(),o.filtersNodes()),N=new ql(b,p.isFullyInitialized(),l.filtersNodes());this.viewCache_=rg(N,A),this.eventGenerator_=new WO(this.query_)}get query(){return this.query_}}function JO(n,e){const t=Zl(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!kt(e)&&!t.getImmediateChild(jt(e)).isEmpty())?t.getChild(e):null}function KT(n){return 0===n.eventRegistrations_.length}function zs(n,e,t){const r=[];if(t){(0,F.hu)(null==e,"A cancel should cancel all event registrations.");const o=n.query._path;n.eventRegistrations_.forEach(l=>{const h=l.createCancelEvent(t,o);h&&r.push(h)})}if(e){let o=[];for(let l=0;l<n.eventRegistrations_.length;++l){const h=n.eventRegistrations_[l];if(h.matches(e)){if(e.hasAnyCallback()){o=o.concat(n.eventRegistrations_.slice(l+1));break}}else o.push(h)}n.eventRegistrations_=o}else n.eventRegistrations_=[];return r}function er(n,e,t,r){e.type===aa.MERGE&&null!==e.source.queryId&&((0,F.hu)(Zl(n.viewCache_),"We should always have a full cache before handling merges"),(0,F.hu)(B_(n.viewCache_),"Missing event cache, even though we have a server cache"));const o=n.viewCache_,l=function(n,e,t,r,o){const l=new tR;let h,p;if(t.type===aa.OVERWRITE){const b=t;b.source.fromUser?h=tu(n,e,b.path,b.snap,r,o,l):((0,F.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!kt(b.path),h=un(n,e,b.path,b.snap,r,o,p,l))}else if(t.type===aa.MERGE){const b=t;b.source.fromUser?h=function(n,e,t,r,o,l,h){let p=e;return r.foreach((v,b)=>{const A=Wn(t,v);vd(e,jt(A))&&(p=tu(n,p,A,b,o,l,h))}),r.foreach((v,b)=>{const A=Wn(t,v);vd(e,jt(A))||(p=tu(n,p,A,b,o,l,h))}),p}(n,e,b.path,b.children,r,o,l):((0,F.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),h=yt(n,e,b.path,b.children,r,o,p,l))}else if(t.type===aa.ACK_USER_WRITE){const b=t;h=b.revert?function(n,e,t,r,o,l){let h;if(null!=sg(r,t))return e;{const p=new O0(r,e,o),v=e.eventCache.getNode();let b;if(kt(t)||".priority"===jt(t)){let A;if(e.serverCache.isFullyInitialized())A=yd(r,Zl(e));else{const N=e.serverCache.getNode();(0,F.hu)(N instanceof Nt,"serverChildren would be complete if leaf node"),A=N0(r,N)}A=A,b=n.filter.updateFullNode(v,A,l)}else{const A=jt(t);let N=og(r,A,e.serverCache);null==N&&e.serverCache.isCompleteForChild(A)&&(N=v.getImmediateChild(A)),b=null!=N?n.filter.updateChild(v,A,N,Ln(t),p,l):e.eventCache.getNode().hasChild(A)?n.filter.updateChild(v,A,Nt.EMPTY_NODE,Ln(t),p,l):v,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=yd(r,Zl(e)),h.isLeafNode()&&(b=n.filter.updateFullNode(b,h,l)))}return h=e.serverCache.isFullyInitialized()||null!=sg(r,fn()),gf(e,b,h,n.filter.filtersNodes())}}(n,e,b.path,r,o,l):function(n,e,t,r,o,l,h){if(null!=sg(o,t))return e;const p=e.serverCache.isFiltered(),v=e.serverCache;if(null!=r.value){if(kt(t)&&v.isFullyInitialized()||v.isCompleteForPath(t))return un(n,e,t,v.getNode().getChild(t),o,l,p,h);if(kt(t)){let b=new Un(null);return v.getNode().forEachChild(Xa,(A,N)=>{b=b.set(new In(A),N)}),yt(n,e,t,b,o,l,p,h)}return e}{let b=new Un(null);return r.foreach((A,N)=>{const L=Wn(t,A);v.isCompleteForPath(L)&&(b=b.set(A,v.getNode().getChild(L)))}),yt(n,e,t,b,o,l,p,h)}}(n,e,b.path,b.affectedTree,r,o,l)}else{if(t.type!==aa.LISTEN_COMPLETE)throw(0,F.g5)("Unknown operation type: "+t.type);h=function(n,e,t,r,o){const l=e.serverCache;return vf(n,LT(e,l.getNode(),l.isFullyInitialized()||kt(t),l.isFiltered()),t,r,M0,o)}(n,e,t.path,r,l)}const v=l.getChanges();return function(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const o=r.getNode().isLeafNode()||r.getNode().isEmpty(),l=B_(n);(t.length>0||!n.eventCache.isFullyInitialized()||o&&!r.getNode().equals(l)||!r.getNode().getPriority().equals(l.getPriority()))&&t.push(xT(B_(e)))}}(e,h,v),{viewCache:h,changes:v}}(n.processor_,o,e,t,r);return function(n,e){(0,F.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,F.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,l.viewCache),(0,F.hu)(l.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=l.viewCache,F0(n,l.changes,l.viewCache.eventCache.getNode(),null)}function F0(n,e,t,r){return function(n,e,t,r){const o=[],l=[];return e.forEach(h=>{"child_changed"===h.type&&n.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&l.push(function(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(h.childName,h.snapshotNode))}),ng(n,o,"child_removed",e,r,t),ng(n,o,"child_added",e,r,t),ng(n,o,"child_moved",l,r,t),ng(n,o,"child_changed",e,r,t),ng(n,o,"value",e,r,t),o}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Z_,wd;class L0{constructor(){this.views=new Map}}function U0(n,e,t,r){const o=e.source.queryId;if(null!==o){const l=n.views.get(o);return(0,F.hu)(null!=l,"SyncTree gave us an op for an invalid query."),er(l,e,t,r)}{let l=[];for(const h of n.views.values())l=l.concat(er(h,e,t,r));return l}}function zl(n,e,t,r,o){const h=n.views.get(e._queryIdentifier);if(!h){let p=yd(t,o?r:null),v=!1;p?v=!0:r instanceof Nt?(p=N0(t,r),v=!1):(p=Nt.EMPTY_NODE,v=!1);const b=rg(new ql(p,v,!1),new ql(r,o,!1));return new QO(e,b)}return h}function G_(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Io(n,e){let t=null;for(const r of n.views.values())t=t||JO(r,e);return t}function W_(n,e){return e._queryParams.loadsAllData()?z_(n):n.views.get(e._queryIdentifier)}function B0(n,e){return null!=W_(n,e)}function Ks(n){return null!=z_(n)}function z_(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let XT=1;class lg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Un(null),this.pendingWriteTree_={visibleWrites:bs.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function j0(n,e,t,r,o){return function(n,e,t,r,o){(0,F.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:o}),o&&(n.visibleWrites=Gl(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,o),o?wf(n,new $u({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function nu(n,e,t=!1){const r=function(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,F.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let o=r.visible,l=!1,h=n.allWrites.length-1;for(;o&&h>=0;){const p=n.allWrites[h];p.visible&&(h>=t&&QN(p,r.path)?o=!1:Co(r.path,p.path)&&(l=!0)),h--}return!!o&&(l?(function(n){n.visibleWrites=jT(n.allWrites,JN,fn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=VT(n.visibleWrites,r.path):Kr(r.children,v=>{n.visibleWrites=VT(n.visibleWrites,Wn(r.path,v))}),!0))}(n.pendingWriteTree_,e)){let l=new Un(null);return null!=r.snap?l=l.set(fn(),!0):Kr(r.children,h=>{l=l.set(new In(h),!0)}),wf(n,new ff(r.path,l,t))}return[]}function K_(n,e,t){return wf(n,new $u({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Cd(n,e,t,r){const o=e._path,l=n.syncPointTree_.get(o);let h=[];if(l&&("default"===e._queryIdentifier||B0(l,e))){const p=function(n,e,t,r){const o=e._queryIdentifier,l=[];let h=[];const p=Ks(n);if("default"===o)for(const[v,b]of n.views.entries())h=h.concat(zs(b,t,r)),KT(b)&&(n.views.delete(v),b.query._queryParams.loadsAllData()||l.push(b.query));else{const v=n.views.get(o);v&&(h=h.concat(zs(v,t,r)),KT(v)&&(n.views.delete(o),v.query._queryParams.loadsAllData()||l.push(v.query)))}return p&&!Ks(n)&&l.push(new((0,F.hu)(Z_,"Reference.ts has not been loaded"),Z_)(e._repo,e._path)),{removed:l,events:h}}(l,e,t,r);(function(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(o));const v=p.removed;h=p.events;const b=-1!==v.findIndex(N=>N._queryParams.loadsAllData()),A=n.syncPointTree_.findOnPath(o,(N,L)=>Ks(L));if(b&&!A){const N=n.syncPointTree_.subtree(o);if(!N.isEmpty()){const L=function(n){return n.fold((e,t,r)=>{if(t&&Ks(t))return[z_(t)];{let o=[];return t&&(o=G_(t)),Kr(r,(l,h)=>{o=o.concat(h)}),o}})}(N);for(let q=0;q<L.length;++q){const ae=L[q],Ae=ae.query,Ve=nD(n,ae);n.listenProvider_.startListening(cg(Ae),Cf(n,Ae),Ve.hashFn,Ve.onComplete)}}}if(!A&&v.length>0&&!r)if(b){const N=null;n.listenProvider_.stopListening(cg(e),N)}else v.forEach(N=>{const L=n.queryToTagMap.get(Y_(N));n.listenProvider_.stopListening(cg(N),L)});!function(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const o=Y_(r),l=n.queryToTagMap.get(o);n.queryToTagMap.delete(o),n.tagToQueryMap.delete(l)}}}(n,v)}return h}function eD(n,e,t){const r=e._path;let o=null,l=!1;n.syncPointTree_.foreachOnPath(r,(N,L)=>{const q=es(N,r);o=o||Io(L,q),l=l||Ks(L)});let p,h=n.syncPointTree_.get(r);h?(l=l||Ks(h),o=o||Io(h,fn())):(h=new L0,n.syncPointTree_=n.syncPointTree_.set(r,h)),null!=o?p=!0:(p=!1,o=Nt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((L,q)=>{const ae=Io(q,fn());ae&&(o=o.updateImmediateChild(L,ae))}));const v=B0(h,e);if(!v&&!e._queryParams.loadsAllData()){const N=Y_(e);(0,F.hu)(!n.queryToTagMap.has(N),"View does not exist, but we have a tag");const L=XT++;n.queryToTagMap.set(N,L),n.tagToQueryMap.set(L,N)}let A=function(n,e,t,r,o,l){const h=zl(n,e,r,o,l);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,h),function(n,e){n.eventRegistrations_.push(e)}(h,t),function(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Vn,(l,h)=>{r.push(Hl(l,h))}),t.isFullyInitialized()&&r.push(xT(t.getNode())),F0(n,r,t.getNode(),e)}(h,t)}(h,e,t,j_(n.pendingWriteTree_,r),o,p);if(!v&&!l){const N=W_(h,e);A=A.concat(function(n,e,t){const r=e._path,o=Cf(n,e),l=nD(n,t),h=n.listenProvider_.startListening(cg(e),o,l.hashFn,l.onComplete),p=n.syncPointTree_.subtree(r);if(o)(0,F.hu)(!Ks(p.value),"If we're adding a query, it shouldn't be shadowed");else{const v=p.fold((b,A,N)=>{if(!kt(b)&&A&&Ks(A))return[z_(A).query];{let L=[];return A&&(L=L.concat(G_(A).map(q=>q.query))),Kr(N,(q,ae)=>{L=L.concat(ae)}),L}});for(let b=0;b<v.length;++b){const A=v[b];n.listenProvider_.stopListening(cg(A),Cf(n,A))}}return h}(n,e,N))}return A}function H0(n,e,t){const o=n.pendingWriteTree_,l=n.syncPointTree_.findOnPath(e,(h,p)=>{const b=Io(p,es(h,e));if(b)return b});return $T(o,e,l,t,!0)}function wf(n,e){return hi(e,n.syncPointTree_,null,j_(n.pendingWriteTree_,fn()))}function hi(n,e,t,r){if(kt(n.path))return tD(n,e,t,r);{const o=e.get(fn());null==t&&null!=o&&(t=Io(o,fn()));let l=[];const h=jt(n.path),p=n.operationForChild(h),v=e.children.get(h);if(v&&p){const b=t?t.getImmediateChild(h):null,A=R0(r,h);l=l.concat(hi(p,v,b,A))}return o&&(l=l.concat(U0(o,n,r,t))),l}}function tD(n,e,t,r){const o=e.get(fn());null==t&&null!=o&&(t=Io(o,fn()));let l=[];return e.children.inorderTraversal((h,p)=>{const v=t?t.getImmediateChild(h):null,b=R0(r,h),A=n.operationForChild(h);A&&(l=l.concat(tD(A,p,v,b)))}),o&&(l=l.concat(U0(o,n,r,t))),l}function nD(n,e){const t=e.query,r=Cf(n,t);return{hashFn:()=>(function(n){return n.viewCache_.serverCache.getNode()}(e)||Nt.EMPTY_NODE).hash(),onComplete:o=>{if("ok"===o)return r?function(n,e,t){const r=q0(n,t);if(r){const o=Z0(r),l=o.path,h=o.queryId,p=es(l,e);return G0(n,l,new pf(A0(h),p))}return[]}(n,t._path,r):function(n,e){return wf(n,new pf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const l=function(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(o,t);return Cd(n,t,null,l)}}}}function Cf(n,e){const t=Y_(e);return n.queryToTagMap.get(t)}function Y_(n){return n._path.toString()+"$"+n._queryIdentifier}function q0(n,e){return n.tagToQueryMap.get(e)}function Z0(n){const e=n.indexOf("$");return(0,F.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new In(n.substr(0,e))}}function G0(n,e,t){const r=n.syncPointTree_.get(e);return(0,F.hu)(r,"Missing sync point for query tag that we're tracking"),U0(r,t,j_(n.pendingWriteTree_,e),null)}function cg(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new((0,F.hu)(wd,"Reference.ts has not been loaded"),wd)(n._repo,n._path):n}class Q_{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Q_(t)}node(){return this.node_}}class dg{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Wn(this.path_,e);return new dg(this.syncTree_,t)}node(){return H0(this.syncTree_,this.path_)}}const hR=function(n,e,t){return n&&"object"==typeof n?((0,F.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?fR(n[".sv"],e,t):"object"==typeof n[".sv"]?pR(n[".sv"],e):void(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},fR=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:(0,F.hu)(!1,"Unexpected server value: "+n)}},pR=function(n,e,t){n.hasOwnProperty("increment")||(0,F.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,F.hu)(!1,"Unexpected increment value: "+r);const o=e.node();if((0,F.hu)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;const h=o.getValue();return"number"!=typeof h?r:h+r},rD=function(n,e,t,r){return K0(e,new dg(t,n),r)},z0=function(n,e,t){return K0(n,new Q_(e),t)};function K0(n,e,t){const r=n.getPriority().val(),o=hR(r,e.getImmediateChild(".priority"),t);let l;if(n.isLeafNode()){const h=n,p=hR(h.getValue(),e,t);return p!==h.getValue()||o!==h.getPriority().val()?new dd(p,sr(o)):n}{const h=n;return l=h,o!==h.getPriority().val()&&(l=l.updatePriority(new dd(o))),h.forEachChild(Vn,(p,v)=>{const b=K0(v,e.getImmediateChild(p),t);b!==v&&(l=l.updateImmediateChild(p,b))}),l}}class Y0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function Kl(n,e){let t=e instanceof In?e:new In(e),r=n,o=jt(t);for(;null!==o;){const l=(0,F.DV)(r.node.children,o)||{children:{},childCount:0};r=new Y0(o,r,l),t=Ln(t),o=jt(t)}return r}function bd(n){return n.node.value}function Q0(n,e){n.node.value=e,tw(n)}function J0(n){return n.node.childCount>0}function X0(n,e){Kr(n.node.children,(t,r)=>{e(new Y0(t,n,r))})}function ew(n,e,t,r){t&&!r&&e(n),X0(n,o=>{ew(o,e,!0,r)}),t&&r&&e(n)}function fg(n){return new In(null===n.parent?n.name:fg(n.parent)+"/"+n.name)}function tw(n){null!==n.parent&&function(n,e,t){const r=function(n){return void 0===bd(n)&&!J0(n)}(t),o=(0,F.r3)(n.node.children,e);r&&o?(delete n.node.children[e],n.node.childCount--,tw(n)):!r&&!o&&(n.node.children[e]=t.node,n.node.childCount++,tw(n))}(n.parent,n.name,n)}const _R=/[\[\].#$\/\u0000-\u001F\u007F]/,iD=/[\[\].#$\u0000-\u001F\u007F]/,nw=10485760,J_=function(n){return"string"==typeof n&&0!==n.length&&!_R.test(n)},yR=function(n){return"string"==typeof n&&0!==n.length&&!iD.test(n)},X_=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!S_(n)||n&&"object"==typeof n&&(0,F.r3)(n,".sv")},To=function(n,e,t,r){r&&void 0===e||pg((0,F.gK)(n,"value"),e,t)},pg=function(n,e,t){const r=t instanceof In?new DN(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+jl(r));if("function"==typeof e)throw new Error(n+"contains a function "+jl(r)+" with contents = "+e.toString());if(S_(e))throw new Error(n+"contains "+e.toString()+" "+jl(r));if("string"==typeof e&&e.length>nw/3&&(0,F.ug)(e)>nw)throw new Error(n+"contains a string greater than "+nw+" utf8 bytes "+jl(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let o=!1,l=!1;if(Kr(e,(h,p)=>{if(".value"===h)o=!0;else if(".priority"!==h&&".sv"!==h&&(l=!0,!J_(h)))throw new Error(n+" contains an invalid key ("+h+") "+jl(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,F.ug)(e),c0(n)})(r,h),pg(n,p,r),function(n){const e=n.parts_.pop();n.byteLength_-=(0,F.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),o&&l)throw new Error(n+' contains ".value" child '+jl(r)+" in addition to actual children.")}},sD=function(n,e,t,r){if(r&&void 0===e)return;const o=(0,F.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");const l=[];Kr(e,(h,p)=>{const v=new In(h);if(pg(o,p,Wn(t,v)),".priority"===u0(v)&&!X_(p))throw new Error(o+"contains an invalid value for '"+v.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");l.push(v)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const l=Bl(r);for(let h=0;h<l.length;h++)if((".priority"!==l[h]||h!==l.length-1)&&!J_(l[h]))throw new Error(n+"contains an invalid key ("+l[h]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Jp);let o=null;for(t=0;t<e.length;t++){if(r=e[t],null!==o&&Co(o,r))throw new Error(n+"contains a path "+o.toString()+" that is ancestor of another path "+r.toString());o=r}}(o,l)},rw=function(n,e,t){if(!t||void 0!==e){if(S_(e))throw new Error((0,F.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!X_(e))throw new Error((0,F.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},gg=function(n,e,t,r){if(!(r&&void 0===t||J_(t)))throw new Error((0,F.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},mg=function(n,e,t,r){if(!(r&&void 0===t||yR(t)))throw new Error((0,F.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Is=function(n,e){if(".info"===jt(e))throw new Error(n+" failed = Can't modify data under /.info/")},aD=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!J_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),yR(n)}(t))throw new Error((0,F.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bf{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vr(n,e){let t=null;for(let r=0;r<e.length;r++){const o=e[r],l=o.getPath();null!==t&&!cd(l,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:l}),t.events.push(o)}t&&n.eventLists_.push(t)}function ey(n,e,t){Vr(n,t),ty(n,r=>cd(r,e))}function dr(n,e,t){Vr(n,t),ty(n,r=>Co(r,e)||Co(e,r))}function ty(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const o=n.eventLists_[r];o&&(e(o.path)?(ER(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function ER(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ud&&Wr("event: "+t.toString()),Vu(r)}}}const iw="repo_interrupt";class lD{constructor(e,t,r,o){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bf,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ju(),this.transactionQueueTree_=new Y0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function cD(n){const t=n.infoData_.getNode(new In(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function _g(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:cD(n)})}function sw(n,e,t,r,o){n.dataUpdateCount++;const l=new In(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let h=[];if(o)if(r){const v=(0,F.UI)(t,b=>sr(b));h=function(n,e,t,r){const o=q0(n,r);if(o){const l=Z0(o),h=l.path,p=l.queryId,v=es(h,e),b=Un.fromObject(t);return G0(n,h,new gd(A0(p),v,b))}return[]}(n.serverSyncTree_,l,v,o)}else{const v=sr(t);h=function(n,e,t,r){const o=q0(n,r);if(null!=o){const l=Z0(o),h=l.path,p=l.queryId,v=es(h,e);return G0(n,h,new $u(A0(p),v,t))}return[]}(n.serverSyncTree_,l,v,o)}else if(r){const v=(0,F.UI)(t,b=>sr(b));h=function(n,e,t){const r=Un.fromObject(t);return wf(n,new gd({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,l,v)}else{const v=sr(t);h=K_(n.serverSyncTree_,l,v)}let p=l;h.length>0&&(p=ru(n,l)),dr(n.eventQueue_,p,h)}function dD(n,e){ow(n,"connected",e),!1===e&&function(n){Tf(n,"onDisconnectEvents");const e=_g(n),t=ju();I0(n.onDisconnect_,fn(),(o,l)=>{const h=rD(o,l,n.serverSyncTree_,e);hf(t,o,h)});let r=[];I0(t,fn(),(o,l)=>{r=r.concat(K_(n.serverSyncTree_,o,l));const h=pw(n,o);ru(n,h)}),n.onDisconnect_=ju(),dr(n.eventQueue_,fn(),r)}(n)}function ow(n,e,t){const r=new In("/.info/"+e),o=sr(t);n.infoData_.updateSnapshot(r,o);const l=K_(n.infoSyncTree_,r,o);dr(n.eventQueue_,r,l)}function ny(n){return n.nextWriteId_++}function hD(n,e,t,r,o){Tf(n,"set",{path:e.toString(),value:t,priority:r});const l=_g(n),h=sr(t,r),p=H0(n.serverSyncTree_,e),v=z0(h,p,l),b=ny(n),A=j0(n.serverSyncTree_,e,v,b,!0);Vr(n.eventQueue_,A),n.server_.put(e.toString(),h.val(!0),(L,q)=>{const ae="ok"===L;ae||ci("set at "+e+" failed: "+L);const Ae=nu(n.serverSyncTree_,b,!ae);dr(n.eventQueue_,e,Ae),Yl(0,o,L,q)});const N=pw(n,e);ru(n,N),dr(n.eventQueue_,N,[])}function ik(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,o)=>{"ok"===r&&OT(n.onDisconnect_,e),Yl(0,t,r,o)})}function aw(n,e,t,r){const o=sr(t);n.server_.onDisconnectPut(e.toString(),o.val(!0),(l,h)=>{"ok"===l&&hf(n.onDisconnect_,e,o),Yl(0,r,l,h)})}function lw(n,e,t){let r;r=".info"===jt(e._path)?Cd(n.infoSyncTree_,e,t):Cd(n.serverSyncTree_,e,t),ey(n.eventQueue_,e._path,r)}function gD(n){n.persistentConnection_&&n.persistentConnection_.interrupt(iw)}function Tf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Wr(t,...e)}function Yl(n,e,t,r){e&&Vu(()=>{if("ok"===t)e(null);else{const o=(t||"error").toUpperCase();let l=o;r&&(l+=": "+r);const h=new Error(l);h.code=o,e(h)}})}function cw(n,e,t){return H0(n.serverSyncTree_,e,t)||Nt.EMPTY_NODE}function ry(n,e=n.transactionQueueTree_){if(e||yg(n,e),bd(e)){const t=hw(n,e);(0,F.hu)(t.length>0,"Sending zero length transaction queue"),t.every(o=>0===o.status)&&function(n,e,t){const r=t.map(b=>b.currentWriteId),o=cw(n,e,r);let l=o;const h=o.hash();for(let b=0;b<t.length;b++){const A=t[b];(0,F.hu)(0===A.status,"tryToSendTransactionQueue_: items in queue should all be run."),A.status=1,A.retryCount++;const N=es(e,A.path);l=l.updateChild(N,A.currentOutputSnapshotRaw)}const p=l.val(!0),v=e;n.server_.put(v.toString(),p,b=>{Tf(n,"transaction put response",{path:v.toString(),status:b});let A=[];if("ok"===b){const N=[];for(let L=0;L<t.length;L++)t[L].status=2,A=A.concat(nu(n.serverSyncTree_,t[L].currentWriteId)),t[L].onComplete&&N.push(()=>t[L].onComplete(null,!0,t[L].currentOutputSnapshotResolved)),t[L].unwatcher();yg(n,Kl(n.transactionQueueTree_,e)),ry(n,n.transactionQueueTree_),dr(n.eventQueue_,e,A);for(let L=0;L<N.length;L++)Vu(N[L])}else{if("datastale"===b)for(let N=0;N<t.length;N++)t[N].status=3===t[N].status?4:0;else{ci("transaction at "+v.toString()+" failed: "+b);for(let N=0;N<t.length;N++)t[N].status=4,t[N].abortReason=b}ru(n,e)}},h)}(n,fg(e),t)}else J0(e)&&X0(e,t=>{ry(n,t)})}function ru(n,e){const t=dw(n,e),r=fg(t);return function(n,e,t){if(0===e.length)return;const r=[];let o=[];const h=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const v=e[p],b=es(t,v.path);let N,A=!1;if((0,F.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===v.status)A=!0,N=v.abortReason,o=o.concat(nu(n.serverSyncTree_,v.currentWriteId,!0));else if(0===v.status)if(v.retryCount>=25)A=!0,N="maxretry",o=o.concat(nu(n.serverSyncTree_,v.currentWriteId,!0));else{const L=cw(n,v.path,h);v.currentInputSnapshot=L;const q=e[p].update(L.val());if(void 0!==q){pg("transaction failed: Data returned ",q,v.path);let ae=sr(q);"object"==typeof q&&null!=q&&(0,F.r3)(q,".priority")||(ae=ae.updatePriority(L.getPriority()));const Ve=v.currentWriteId,At=_g(n),$t=z0(ae,L,At);v.currentOutputSnapshotRaw=ae,v.currentOutputSnapshotResolved=$t,v.currentWriteId=ny(n),h.splice(h.indexOf(Ve),1),o=o.concat(j0(n.serverSyncTree_,v.path,$t,v.currentWriteId,v.applyLocally)),o=o.concat(nu(n.serverSyncTree_,Ve,!0))}else A=!0,N="nodata",o=o.concat(nu(n.serverSyncTree_,v.currentWriteId,!0))}dr(n.eventQueue_,t,o),o=[],A&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===N?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(N),!1,null)))}yg(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Vu(r[p]);ry(n,n.transactionQueueTree_)}(n,hw(n,t),r),r}function dw(n,e){let t,r=n.transactionQueueTree_;for(t=jt(e);null!==t&&void 0===bd(r);)r=Kl(r,t),t=jt(e=Ln(e));return r}function hw(n,e){const t=[];return fw(n,e,t),t.sort((r,o)=>r.order-o.order),t}function fw(n,e,t){const r=bd(e);if(r)for(let o=0;o<r.length;o++)t.push(r[o]);X0(e,o=>{fw(n,o,t)})}function yg(n,e){const t=bd(e);if(t){let r=0;for(let o=0;o<t.length;o++)2!==t[o].status&&(t[r]=t[o],r++);t.length=r,Q0(e,t.length>0?t:void 0)}X0(e,r=>{yg(n,r)})}function pw(n,e){const t=fg(dw(n,e)),r=Kl(n.transactionQueueTree_,e);return function(n,e,t){let r=n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,o=>{gw(n,o)}),gw(n,r),ew(r,o=>{gw(n,o)}),t}function gw(n,e){const t=bd(e);if(t){const r=[];let o=[],l=-1;for(let h=0;h<t.length;h++)3===t[h].status||(1===t[h].status?((0,F.hu)(l===h-1,"All SENT items should be at beginning of queue."),l=h,t[h].status=3,t[h].abortReason="set"):((0,F.hu)(0===t[h].status,"Unexpected transaction status in abort"),t[h].unwatcher(),o=o.concat(nu(n.serverSyncTree_,t[h].currentWriteId,!0)),t[h].onComplete&&r.push(t[h].onComplete.bind(null,new Error("set"),!1,null))));-1===l?Q0(e,void 0):t.length=l+1,dr(n.eventQueue_,fg(e),o);for(let h=0;h<r.length;h++)Vu(r[h])}}const mw=function(n,e){const t=xR(n),r=t.namespace;return"firebase.com"===t.domain&&sa(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&sa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new zE(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new In(t.pathString)}},xR=function(n){let e="",t="",r="",o="",l="",h=!0,p="https",v=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let A=n.indexOf("/");-1===A&&(A=n.length);let N=n.indexOf("?");-1===N&&(N=n.length),e=n.substring(0,Math.min(A,N)),A<N&&(o=function(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let o=t[r];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch(l){}e+="/"+o}return e}(n.substring(A,N)));const L=function(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ci(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,N)));b=e.indexOf(":"),b>=0?(h="https"===p||"wss"===p,v=parseInt(e.substring(b+1),10)):b=e.length;const q=e.slice(0,b);if("localhost"===q.toLowerCase())t="localhost";else if(q.split(".").length<=2)t=q;else{const ae=e.indexOf(".");r=e.substring(0,ae).toLowerCase(),t=e.substring(ae+1),l=r}"ns"in L&&(l=L.ns)}return{host:e,port:v,domain:t,subdomain:r,secure:h,scheme:p,pathString:o,namespace:l}};class _D{constructor(e,t,r,o){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=o}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,F.Pz)(this.snapshot.exportVal())}}class Df{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Af{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,F.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class yD{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new F.BH;return ik(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Is("OnDisconnect.remove",this._path);const e=new F.BH;return aw(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Is("OnDisconnect.set",this._path),To("OnDisconnect.set",e,this._path,!1);const t=new F.BH;return aw(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Is("OnDisconnect.setWithPriority",this._path),To("OnDisconnect.setWithPriority",e,this._path,!1),rw("OnDisconnect.setWithPriority",t,!1);const r=new F.BH;return function(n,e,t,r,o){const l=sr(t,r);n.server_.onDisconnectPut(e.toString(),l.val(!0),(h,p)=>{"ok"===h&&hf(n.onDisconnect_,e,l),Yl(0,o,h,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Is("OnDisconnect.update",this._path),sD("OnDisconnect.update",e,this._path,!1);const t=new F.BH;return function(n,e,t,r){if((0,F.xb)(t))return Wr("onDisconnect().update() called with empty data.  Don't do anything."),void Yl(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(o,l)=>{"ok"===o&&Kr(t,(h,p)=>{const v=sr(p);hf(n.onDisconnect_,Wn(e,h),v)}),Yl(0,r,o,l)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Si{constructor(e,t,r,o){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=o}get key(){return kt(this._path)?null:u0(this._path)}get ref(){return new Do(this._repo,this._path)}get _queryIdentifier(){const e=V_(this._queryParams),t=VE(e);return"{}"===t?"default":t}get _queryObject(){return V_(this._queryParams)}isEqual(e){if(!((e=(0,F.m9)(e))instanceof Si))return!1;const t=this._repo===e._repo,r=cd(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function Ys(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ql(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Xa){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==zr)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(n.hasEnd()){if(n.getIndexEndName()!==Dr)throw new Error(r);if("string"!=typeof t)throw new Error(o)}}else if(n.getIndex()===Vn){if(null!=e&&!X_(e)||null!=t&&!X_(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,F.hu)(n.getIndex()instanceof v0||n.getIndex()===E0,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Id(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Do extends Si{constructor(e,t){super(e,t,new F_,!1)}get parent(){const e=l0(this._path);return null===e?null:new Do(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Td{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new In(e),r=Hu(this.ref,e);return new Td(this._node.getChild(t),r,Vn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,o)=>e(new Td(o,Hu(this.ref,r),Vn)))}hasChild(e){const t=new In(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function NR(n,e){return(n=(0,F.m9)(n))._checkNotDeleted("ref"),void 0!==e?Hu(n._root,e):n._root}function iy(n,e){(n=(0,F.m9)(n))._checkNotDeleted("refFromURL");const t=mw(e,n._repo.repoInfo_.nodeAdmin);aD("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&sa("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),NR(n,t.path.toString())}function Hu(n,e){return null===jt((n=(0,F.m9)(n))._path)?((t=e)&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),mg("child","path",t,!1)):mg("child","path",e,!1),new Do(n._repo,Wn(n._path,e));var t}function vw(n,e){n=(0,F.m9)(n),Is("set",n._path),To("set",e,n._path,!1);const t=new F.BH;return hD(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function OR(n,e){sD("update",e,n._path,!1);const t=new F.BH;return function(n,e,t,r){Tf(n,"update",{path:e.toString(),value:t});let o=!0;const l=_g(n),h={};if(Kr(t,(p,v)=>{o=!1,h[p]=rD(Wn(e,p),sr(v),n.serverSyncTree_,l)}),o)Wr("update() called with empty data.  Don't do anything."),Yl(0,r,"ok",void 0);else{const p=ny(n),v=function(n,e,t,r){!function(n,e,t,r){(0,F.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=md(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const o=Un.fromObject(t);return wf(n,new gd({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(n.serverSyncTree_,e,h,p);Vr(n.eventQueue_,v),n.server_.merge(e.toString(),t,(b,A)=>{const N="ok"===b;N||ci("update at "+e+" failed: "+b);const L=nu(n.serverSyncTree_,p,!N),q=L.length>0?ru(n,e):e;dr(n.eventQueue_,q,L),Yl(0,r,b,A)}),Kr(t,b=>{const A=pw(n,Wn(e,b));ru(n,A)}),dr(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function vD(n){return function(n,e){const t=function(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,A)=>{const N=es(b,t);r=r||Io(A,N)});let o=n.syncPointTree_.get(t);o?r=r||Io(o,fn()):(o=new L0,n.syncPointTree_=n.syncPointTree_.set(t,o));const l=null!=r,h=l?new ql(r,!0,!1):null;return function(n){return B_(n.viewCache_)}(zl(o,e,j_(n.pendingWriteTree_,e._path),l?h.getNode():Nt.EMPTY_NODE,l))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const o=sr(r).withIndex(e._queryParams.getIndex()),l=K_(n.serverSyncTree_,e._path,o);return ey(n.eventQueue_,e._path,l),Promise.resolve(o)},r=>(Tf(n,"get for query "+(0,F.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,F.m9)(n))._repo,n).then(e=>new Td(e,new Do(n._repo,n._path),n._queryParams.getIndex()))}class Sf{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new _D("value",this,new Td(e.snapshotNode,new Do(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Df(this,e,t):null}matches(e){return e instanceof Sf&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vg{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Df(this,e,t):null}createEvent(e,t){(0,F.hu)(null!=e.childName,"Child events should have a childName.");const r=Hu(new Do(t._repo,t._path),e.childName),o=t._queryParams.getIndex();return new _D(e.type,this,new Td(e.snapshotNode,r,o),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof vg&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Eg(n,e,t,r,o){let l;if("object"==typeof r&&(l=void 0,o=r),"function"==typeof r&&(l=r),o&&o.onlyOnce){const v=t,b=(A,N)=>{lw(n._repo,n,p),v(A,N)};b.userCallback=t.userCallback,b.context=t.context,t=b}const h=new Af(t,l||void 0),p="value"===e?new Sf(h):new vg(e,h);return function(n,e,t){let r;r=".info"===jt(e._path)?eD(n.infoSyncTree_,e,t):eD(n.serverSyncTree_,e,t),ey(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>lw(n._repo,n,p)}function sy(n,e,t,r){return Eg(n,"value",e,t,r)}function Ew(n,e,t,r){return Eg(n,"child_added",e,t,r)}function ED(n,e,t,r){return Eg(n,"child_changed",e,t,r)}function ww(n,e,t,r){return Eg(n,"child_moved",e,t,r)}function Cw(n,e,t,r){return Eg(n,"child_removed",e,t,r)}function wD(n,e,t){let r=null;const o=t?new Af(t):null;"value"===e?r=new Sf(o):e&&(r=new vg(e,o)),lw(n._repo,n,r)}class Ao{}class CD extends Ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){To("endAt",this._value,e._path,!0);const t=MT(e._queryParams,this._value,this._key);if(Id(t),Ql(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class ts extends Ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){To("endBefore",this._value,e._path,!1);const t=function(n,e,t){let r,o;return n.index_===Xa?("string"==typeof e&&(e=ST(e)),o=MT(n,e,t)):(r=null==t?zr:ST(t),o=MT(n,e,r)),o.endBeforeSet_=!0,o}(e._queryParams,this._value,this._key);if(Id(t),Ql(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class bD extends Ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){To("startAt",this._value,e._path,!0);const t=L_(e._queryParams,this._value,this._key);if(Id(t),Ql(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class ok extends Ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){To("startAfter",this._value,e._path,!1);const t=function(n,e,t){let r;if(n.index_===Xa)"string"==typeof e&&(e=AT(e)),r=L_(n,e,t);else{let o;o=null==t?Dr:AT(t),r=L_(n,e,o)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Id(t),Ql(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Si(e._repo,e._path,t,e._orderByCalled)}}class FR extends Ao{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class LR extends Ao{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Si(e._repo,e._path,function(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class VR extends Ao{constructor(e){super(),this._path=e}_apply(e){Ys(e,"orderByChild");const t=new In(this._path);if(kt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new v0(t),o=Bu(e._queryParams,r);return Ql(o),new Si(e._repo,e._path,o,!0)}}class Iw extends Ao{_apply(e){Ys(e,"orderByKey");const t=Bu(e._queryParams,Xa);return Ql(t),new Si(e._repo,e._path,t,!0)}}class DD extends Ao{_apply(e){Ys(e,"orderByPriority");const t=Bu(e._queryParams,Vn);return Ql(t),new Si(e._repo,e._path,t,!0)}}class Tw extends Ao{_apply(e){Ys(e,"orderByValue");const t=Bu(e._queryParams,E0);return Ql(t),new Si(e._repo,e._path,t,!0)}}class AD extends Ao{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(To("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new CD(this._value,this._key)._apply(new bD(this._value,this._key)._apply(e))}}function So(n,...e){let t=(0,F.m9)(n);for(const r of e)t=r._apply(t);return t}(function(n){(0,F.hu)(!Z_,"__referenceConstructor has already been defined"),Z_=n})(Do),function(n){(0,F.hu)(!wd,"__referenceConstructor has already been defined"),wd=n}(Do);const uy={};function ly(n,e,t,r,o){let l=r||n.options.databaseURL;void 0===l&&(n.options.projectId||sa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Wr("Using default host for project ",n.options.projectId),l=`${n.options.projectId}-default-rtdb.firebaseio.com`);let v,b,h=mw(l,o),p=h.repoInfo;"undefined"!=typeof process&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(v=!0,l=`http://${b}?ns=${p.namespace}`,h=mw(l,o),p=h.repoInfo):v=!h.repoInfo.secure;const A=o&&v?new Ul(Ul.OWNER):new BE(n.name,n.options,e);aD("Invalid Firebase Database URL",h),kt(h.path)||sa("Database URL must point to the root of a Firebase Database (not including a child path).");const N=function(n,e,t,r){let o=uy[e.name];o||(o={},uy[e.name]=o);let l=o[n.toURLString()];return l&&sa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new lD(n,false,t,r),o[n.toURLString()]=l,l}(p,n,A,new QI(n.name,t));return new ND(N,n)}class ND{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(n,e,t){if(n.stats_=QE(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new pd(n.repoInfo_,(r,o,l,h)=>{sw(n,r,o,l,h)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>dD(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,F.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Ja(n.repoInfo_,e,(r,o,l,h)=>{sw(n,r,o,l,h)},r=>{dD(n,r)},r=>{!function(n,e){Kr(e,(t,r)=>{ow(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function(n,e){const t=n.toString();return YE[t]||(YE[t]=e()),YE[t]}(n.repoInfo_,()=>new qN(n.stats_,n.server_)),n.infoData_=new jN,n.infoSyncTree_=new lg({startListening:(r,o,l,h)=>{let p=[];const v=n.infoData_.getNode(r._path);return v.isEmpty()||(p=K_(n.infoSyncTree_,r._path,v),setTimeout(()=>{h("ok")},0)),p},stopListening:()=>{}}),ow(n,"connected",!1),n.serverSyncTree_=new lg({startListening:(r,o,l,h)=>(n.server_.listen(r,l,o,(p,v)=>{const b=h(p,v);dr(n.eventQueue_,r._path,b)}),[]),stopListening:(r,o)=>{n.server_.unlisten(r,o)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Do(this._repo,fn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(n,e){const t=uy[e];(!t||t[n.key]!==n)&&sa(`Database ${e}(${n.repoInfo_}) has already been deleted.`),gD(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&sa("Cannot call "+e+" on a deleted database.")}}function ZR(n,e){LE(n,e)}class kD{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ja.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Ja.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},BI(Ji.SDK_VERSION),(0,Ji._registerComponent)(new Wa.wA("database",(e,{instanceIdentifier:t})=>ly(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ji.registerVersion)(VI,"0.12.3",void 0),(0,Ji.registerVersion)(VI,"0.12.3","esm2017");const LD=new Ws.Yd("@firebase/database-compat"),QR=function(n){LD.warn("FIREBASE WARNING: "+n)};class dk{constructor(e){this._delegate=e}cancel(e){(0,F.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,F.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,F.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,F.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,F.Dv)("OnDisconnect.set",1,2,arguments.length),(0,F.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,F.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const o=this._delegate.setWithPriority(e,t);return r&&o.then(()=>r(null),l=>r(l)),o}update(e,t){if((0,F.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,QR("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,F.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),o=>t(o)),r}}class hk{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,F.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Dd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,F.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,F.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,F.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,F.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,F.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),mg("DataSnapshot.child","path",e,!1),new Dd(this._database,this._delegate.child(e))}hasChild(e){return(0,F.Dv)("DataSnapshot.hasChild",1,1,arguments.length),mg("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,F.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,F.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,F.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Dd(this._database,t)))}hasChildren(){return(0,F.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,F.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,F.Dv)("DataSnapshot.ref",0,0,arguments.length),new xo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class xi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,o){var l;(0,F.Dv)("Query.on",2,4,arguments.length),(0,F.Wj)("Query.on","callback",t,!1);const h=xi.getCancelAndContextArgs_("Query.on",r,o),p=(b,A)=>{t.call(h.context,new Dd(this.database,b),A)};p.userCallback=t,p.context=h.context;const v=null===(l=h.cancel)||void 0===l?void 0:l.bind(h.context);switch(e){case"value":return sy(this._delegate,p,v),t;case"child_added":return Ew(this._delegate,p,v),t;case"child_removed":return Cw(this._delegate,p,v),t;case"child_changed":return ED(this._delegate,p,v),t;case"child_moved":return ww(this._delegate,p,v),t;default:throw new Error((0,F.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,F.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,F.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,F.Wj)("Query.off","callback",t,!0),(0,F.lb)("Query.off","context",r,!0),t){const o=()=>{};o.userCallback=t,o.context=r,wD(this._delegate,e,o)}else wD(this._delegate,e)}get(){return vD(this._delegate).then(e=>new Dd(this.database,e))}once(e,t,r,o){(0,F.Dv)("Query.once",1,4,arguments.length),(0,F.Wj)("Query.once","callback",t,!0);const l=xi.getCancelAndContextArgs_("Query.once",r,o),h=new F.BH,p=(b,A)=>{const N=new Dd(this.database,b);t&&t.call(l.context,N,A),h.resolve(N)};p.userCallback=t,p.context=l.context;const v=b=>{l.cancel&&l.cancel.call(l.context,b),h.reject(b)};switch(e){case"value":sy(this._delegate,p,v,{onlyOnce:!0});break;case"child_added":Ew(this._delegate,p,v,{onlyOnce:!0});break;case"child_removed":Cw(this._delegate,p,v,{onlyOnce:!0});break;case"child_changed":ED(this._delegate,p,v,{onlyOnce:!0});break;case"child_moved":ww(this._delegate,p,v,{onlyOnce:!0});break;default:throw new Error((0,F.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return h.promise}limitToFirst(e){return(0,F.Dv)("Query.limitToFirst",1,1,arguments.length),new xi(this.database,So(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new FR(n)}(e)))}limitToLast(e){return(0,F.Dv)("Query.limitToLast",1,1,arguments.length),new xi(this.database,So(this._delegate,function(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new LR(n)}(e)))}orderByChild(e){return(0,F.Dv)("Query.orderByChild",1,1,arguments.length),new xi(this.database,So(this._delegate,function(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return mg("orderByChild","path",n,!1),new VR(n)}(e)))}orderByKey(){return(0,F.Dv)("Query.orderByKey",0,0,arguments.length),new xi(this.database,So(this._delegate,new Iw))}orderByPriority(){return(0,F.Dv)("Query.orderByPriority",0,0,arguments.length),new xi(this.database,So(this._delegate,new DD))}orderByValue(){return(0,F.Dv)("Query.orderByValue",0,0,arguments.length),new xi(this.database,So(this._delegate,new Tw))}startAt(e=null,t){return(0,F.Dv)("Query.startAt",0,2,arguments.length),new xi(this.database,So(this._delegate,function(n=null,e){return gg("startAt","key",e,!0),new bD(n,e)}(e,t)))}startAfter(e=null,t){return(0,F.Dv)("Query.startAfter",0,2,arguments.length),new xi(this.database,So(this._delegate,function(n,e){return gg("startAfter","key",e,!0),new ok(n,e)}(e,t)))}endAt(e=null,t){return(0,F.Dv)("Query.endAt",0,2,arguments.length),new xi(this.database,So(this._delegate,function(n,e){return gg("endAt","key",e,!0),new CD(n,e)}(e,t)))}endBefore(e=null,t){return(0,F.Dv)("Query.endBefore",0,2,arguments.length),new xi(this.database,So(this._delegate,function(n,e){return gg("endBefore","key",e,!0),new ts(n,e)}(e,t)))}equalTo(e,t){return(0,F.Dv)("Query.equalTo",1,2,arguments.length),new xi(this.database,So(this._delegate,function(n,e){return gg("equalTo","key",e,!0),new AD(n,e)}(e,t)))}toString(){return(0,F.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,F.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,F.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof xi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const o={cancel:void 0,context:void 0};if(t&&r)o.cancel=t,(0,F.Wj)(e,"cancel",o.cancel,!0),o.context=r,(0,F.lb)(e,"context",o.context,!0);else if(t)if("object"==typeof t&&null!==t)o.context=t;else{if("function"!=typeof t)throw new Error((0,F.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");o.cancel=t}return o}get ref(){return new xo(this.database,new Do(this._delegate._repo,this._delegate._path))}}class xo extends xi{constructor(e,t){super(e,new Si(t._repo,t._path,new F_,!1)),this.database=e,this._delegate=t}getKey(){return(0,F.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,F.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new xo(this.database,Hu(this._delegate,e))}getParent(){(0,F.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new xo(this.database,e):null}getRoot(){return(0,F.Dv)("Reference.root",0,0,arguments.length),new xo(this.database,this._delegate.root)}set(e,t){(0,F.Dv)("Reference.set",1,2,arguments.length),(0,F.Wj)("Reference.set","onComplete",t,!0);const r=vw(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}update(e,t){if((0,F.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const o={};for(let l=0;l<e.length;++l)o[""+l]=e[l];e=o,QR("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Is("Reference.update",this._delegate._path),(0,F.Wj)("Reference.update","onComplete",t,!0);const r=OR(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}setWithPriority(e,t,r){(0,F.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,F.Wj)("Reference.setWithPriority","onComplete",r,!0);const o=function(n,e,t){if(Is("setWithPriority",n._path),To("setWithPriority",e,n._path,!1),rw("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new F.BH;return hD(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&o.then(()=>r(null),l=>r(l)),o}remove(e){(0,F.Dv)("Reference.remove",0,1,arguments.length),(0,F.Wj)("Reference.remove","onComplete",e,!0);const t=function(n){return Is("remove",n._path),vw(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,F.Dv)("Reference.transaction",1,3,arguments.length),(0,F.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,F.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,F.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const o=function(n,e,t){var r;if(n=(0,F.m9)(n),Is("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const o=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,l=new F.BH,p=sy(n,()=>{});return function(n,e,t,r,o,l){Tf(n,"transaction on "+e);const h={path:e,update:t,onComplete:r,status:null,order:kE(),applyLocally:l,retryCount:0,unwatcher:o,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=cw(n,e,void 0);h.currentInputSnapshot=p;const v=h.update(p.val());if(void 0===v)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{pg("transaction failed: Data returned ",v,h.path),h.status=0;const b=Kl(n.transactionQueueTree_,e),A=bd(b)||[];let N;A.push(h),Q0(b,A),"object"==typeof v&&null!==v&&(0,F.r3)(v,".priority")?(N=(0,F.DV)(v,".priority"),(0,F.hu)(X_(N),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):N=(H0(n.serverSyncTree_,e)||Nt.EMPTY_NODE).getPriority().val();const L=_g(n),q=sr(v,N),ae=z0(q,p,L);h.currentOutputSnapshotRaw=q,h.currentOutputSnapshotResolved=ae,h.currentWriteId=ny(n);const Ae=j0(n.serverSyncTree_,e,ae,h.currentWriteId,h.applyLocally);dr(n.eventQueue_,e,Ae),ry(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(v,b,A)=>{let N=null;v?l.reject(v):(N=new Td(A,new Do(n._repo,n._path),Vn),l.resolve(new kD(b,N)))},p,o),l.promise}(this._delegate,e,{applyLocally:r}).then(l=>new hk(l.committed,new Dd(this.database,l.snapshot)));return t&&o.then(l=>t(null,l.committed,l.snapshot),l=>t(l,!1,null)),o}setPriority(e,t){(0,F.Dv)("Reference.setPriority",1,2,arguments.length),(0,F.Wj)("Reference.setPriority","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),Is("setPriority",n._path),rw("setPriority",e,!1);const t=new F.BH;return hD(n._repo,Wn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),o=>t(o)),r}push(e,t){(0,F.Dv)("Reference.push",0,2,arguments.length),(0,F.Wj)("Reference.push","onComplete",t,!0);const r=function(n,e){n=(0,F.m9)(n),Is("push",n._path),To("push",e,n._path,!0);const t=cD(n._repo),r=DT(t),o=Hu(n,r),l=Hu(n,r);let h;return h=null!=e?vw(l,e).then(()=>l):Promise.resolve(l),o.then=h.then.bind(h),o.catch=h.then.bind(h,void 0),o}(this._delegate,e),o=r.then(h=>new xo(this.database,h));t&&o.then(()=>t(null),h=>t(h));const l=new xo(this.database,r);return l.then=o.then.bind(o),l.catch=o.catch.bind(o,void 0),l}onDisconnect(){return Is("Reference.onDisconnect",this._delegate._path),new dk(new yD(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class cy{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function(n,e,t,r={}){(n=(0,F.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&sa("Cannot call useEmulator() after instance has already been initialized.");const o=n._repoInternal;let l;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&sa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Ul(Ul.OWNER);else if(r.mockUserToken){const h="string"==typeof r.mockUserToken?r.mockUserToken:(0,F.Sg)(r.mockUserToken,n.app.options.projectId);l=new Ul(h)}!function(n,e,t,r){n.repoInfo_=new zE(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(o,e,t,l)}(this._delegate,e,t,r)}ref(e){if((0,F.Dv)("database.ref",0,1,arguments.length),e instanceof xo){const t=iy(this._delegate,e.toString());return new xo(this,t)}{const t=NR(this._delegate,e);return new xo(this,t)}}refFromURL(e){(0,F.Dv)("database.refFromURL",1,1,arguments.length);const r=iy(this._delegate,e);return new xo(this,r)}goOffline(){return(0,F.Dv)("database.goOffline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOffline"),gD(n._repo)}(this._delegate)}goOnline(){return(0,F.Dv)("database.goOnline",0,0,arguments.length),function(n){(n=(0,F.m9)(n))._checkNotDeleted("goOnline"),function(n){n.persistentConnection_&&n.persistentConnection_.resume(iw)}(n._repo)}(this._delegate)}}cy.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:n=>function(n){return{".sv":{increment:n}}}(n)};var pk=Object.freeze({__proto__:null,initStandalone:function({app:n,url:e,version:t,customAuthImpl:r,namespace:o,nodeAdmin:l=!1}){BI(t);const h=new Wa.zt("auth-internal",new Wa.H0("database-standalone"));return h.setComponent(new Wa.wA("auth-internal",()=>r,"PRIVATE")),{instance:new cy(ly(n,h,void 0,e,l),n),namespace:o}}});const gk=cy.ServerValue;function JR(n){return null==n}function XR(n){return"function"==typeof n.set}function VD(n,e){return XR(e)?e:n.ref(e)}function UD(n,e){if(function(n){return"string"==typeof n}(n))return e.stringCase();if(XR(n))return e.firebaseCase();if(function(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Cg(n,e,t="on",r=NI.z){return new Ut.y(o=>{let l=null;return l=n[t](e,(h,p)=>{r.schedule(()=>{o.next({snapshot:h,prevKey:p})}),"once"===t&&r.schedule(()=>o.complete())},h=>{r.schedule(()=>o.error(h))}),"on"===t?{unsubscribe(){null!=l&&n.off(e,l)}}:{unsubscribe(){}}}).pipe((0,mt.U)(o=>{const{snapshot:l,prevKey:h}=o;let p=null;return l.exists()&&(p=l.key),{type:e,payload:l,prevKey:h,key:p}}),(0,lN.B)())}function eP(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function tP(n,e){const{payload:t,prevKey:r,key:o}=e,l=eP(n,o),h=function(n,e){if(JR(e))return 0;{const t=eP(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(v=>{const b={payload:v,type:"value",prevKey:p,key:v.key};return p=v.key,n=[...n,b],!1})}return n;case"child_added":if(l>-1){const p=n[l-1];(p&&p.key||null)!==r&&(n=n.filter(v=>v.payload.key!==t.key)).splice(h,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(h,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===o?e:p);case"child_moved":if(l>-1){const p=n.splice(l,1)[0];return(n=n.slice()).splice(h,0,p),n}return n;default:return n}}function BD(n){return(JR(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function jD(n,e,t){return function(n,e,t){return Cg(n,"value","once",t).pipe(Or(r=>{const o=[(0,Qe.of)(r)];return e.forEach(l=>o.push(Cg(n,l,"on",t))),(0,r_.T)(...o).pipe(Na(tP,[]))}),OE())}(n,e=BD(e),t)}function nP(n,e,t){const r=(e=BD(e)).map(o=>Cg(n,o,"on",t));return(0,r_.T)(...r)}function $D(n,e){return function(r,o){return UD(r,{stringCase:()=>n.child(r)[e](o),firebaseCase:()=>r[e](o),snapshotCase:()=>r.ref[e](o)})}}function Ik(n){return function(t){return t?UD(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function dy(n,e){return function(){return Cg(n,"value","on",e)}}!function(n){n.INTERNAL.registerComponent(new Wa.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),o=e.getProvider("database").getImmediate({identifier:t});return new cy(o,r)},"PUBLIC").setServiceProps({Reference:xo,Query:xi,Database:cy,DataSnapshot:Dd,enableLogging:ZR,INTERNAL:pk,ServerValue:gk}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.3")}(dN.Z);const HD=new d.OlP("angularfire2.realtimeDatabaseURL"),iP=new d.OlP("angularfire2.database.use-emulator");let qD=(()=>{class n{constructor(t,r,o,l,h,p,v,b,A,N,L,q,ae,Ae,Ve){this.schedulers=p;const At=v,$t=(0,Xi.on)(t,h,r);b&&qp($t,h,A,L,q,ae,N,Ae),this.database=(0,Xi.cc)(`${$t.name}.database.${o}`,"AngularFireDatabase",$t.name,()=>{const wn=h.runOutsideAngular(()=>$t.database(o||void 0));return At&&wn.useEmulator(...At),wn},[At])}list(t,r){const o=this.schedulers.ngZone.runOutsideAngular(()=>VD(this.database,t));let l=o;return r&&(l=r(o)),function(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:$D(r,"update"),set:$D(r,"set"),push:o=>r.push(o),remove:Ik(r),snapshotChanges:o=>jD(n,o,t).pipe(Gn.iC),stateChanges:o=>nP(n,o,t).pipe(Gn.iC),auditTrail:o=>function(n,e,t){return function(n,e,t){return function(n,e){return Cg(n,"value","on",e).pipe((0,mt.U)(t=>{let r;return t.payload.forEach(o=>(r=o.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function(...n){return e=>{let t;return"function"==typeof n[n.length-1]&&(t=n.pop()),e.lift(new MI(n,t))}}(e),(0,mt.U)(([o,l])=>{const h=o.lastKeyToLoad,p=l.map(v=>v.key);return{actions:l,lastKeyToLoad:h,loadedKeys:p}}),function(n){return e=>e.lift(new FI(n))}(o=>-1===o.loadedKeys.indexOf(o.lastKeyToLoad)),(0,mt.U)(o=>o.actions))}(n,nP(n,e).pipe(Na((o,l)=>[...o,l],[])),t)}(n,o,t).pipe(Gn.iC),valueChanges:(o,l)=>jD(n,o,t).pipe((0,mt.U)(p=>p.map(v=>l&&l.idField?Object.assign(Object.assign({},v.payload.val()),{[l.idField]:v.key}):v.payload.val())),Gn.iC)}}(l,this)}object(t){return function(n,e){return{query:n,snapshotChanges:()=>dy(n,e.schedulers.outsideAngular)().pipe(Gn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>dy(n,e.schedulers.outsideAngular)().pipe(Gn.iC,(0,mt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>VD(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xi.Dh),d.LFG(Xi.xv,8),d.LFG(HD,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Gn.HU),d.LFG(iP,8),d.LFG(Vl,8),d.LFG(v_,8),d.LFG(E_,8),d.LFG(ME,8),d.LFG(w_,8),d.LFG(Hp,8),d.LFG(C_,8),d.LFG(m_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),bg=(()=>{class n{constructor(t){this.db=t}addPress(t){return this.db.database.ref().child("presupuestos").push(t)}changePress(t,r){this.db.database.ref().child("presupuestos").child(r).update(t)}getPresupuestos(){let t=[];return this.db.database.ref().child("presupuestos").get().then(r=>{const o=r.val();for(let l in o)t.push(Object.assign({$key:l},o[l]))}),t}getPresupuesto(t){var r=this;return(0,ge.Z)(function*(){try{let o=yield r.db.database.ref().child("presupuestos").child(t).get();return Object.assign({$key:t},o.val())}catch(o){return(0,xI._)(o+"Fallo al cargar el presupuesto"),null}})()}delPresupuesto(t){var r=this;return new Promise(function(){var o=(0,ge.Z)(function*(l,h){try{confirm("\xbfEstas seguro?")?(yield r.db.database.ref().child("presupuestos").child(t).remove(),l(!0)):l(!1)}catch(p){h("no se ha borrado")}});return function(l,h){return o.apply(this,arguments)}}())}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function GD(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Correcto "),d.qZA())}function WD(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Correcto "),d.qZA())}function Tk(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduce el concepto correcto "),d.qZA())}function zD(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," La base no es valida "),d.qZA())}function hy(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduce el concepto correcto "),d.qZA())}function KD(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduce el I.V.A correcto "),d.qZA())}function Dk(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduzca el total correcto "),d.qZA())}let Ak=(()=>{class n{constructor(t,r){this.pf=t,this.presupuestosService=r,this.errorMessage="",this.alertClass="alert alert-success",this.isValid=!0,this.presupuesto=null,this.validator=this.pf.group({proveedor:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]],fecha:["",[ke.required]],concepto:["",[ke.required,ke.pattern("^[a-zA-Z]*")]],base:["",[ke.required,ke.pattern("^[0-9,]*")]],tipo:["",[ke.required,ke.pattern("^[a-zA-Z]*")]],iva:["",[ke.required,ke.pattern("^[0-9]*")]],total:["",[ke.required,ke.pattern("^[0-9,]*")]]})}ngOnInit(){}onSubmit(){this.savePresupuesto()}savePresupuesto(){console.log(this.validator.status),"VALID"==this.validator.status?(this.presupuesto={proveedor:this.validator.value.proveedor,fecha:this.validator.value.fecha,concepto:this.validator.value.concepto,base:this.validator.value.base,tipo:this.validator.value.tipo,iva:this.validator.value.iva,total:this.validator.value.total},console.log(this.presupuesto),this.validator.reset(),this.presupuestosService.addPress(this.presupuesto)):this.mostrarMensaje("fallo",!0)}mostrarMensaje(t,r){this.errorMessage=t,this.isValid=r,this.alertClass=r?"alert alert-danger":"alert alert-success",setTimeout(()=>{this.isValid=!0},2e3)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rd),d.Y36(bg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-addpres"]],decls:47,vars:8,consts:[["routerLink","/presupuestos",1,"btn","btn-primary","float-md-right"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-4"],[1,"form-label"],["type","text","placeholder","Proveedor","name","proveedor","formControlName","proveedor","required","",1,"form-control","is-valid"],[4,"ngIf"],["type","date","placeholder","Fecha","name","fecha","formControlName","fecha","required","",1,"form-control","is-valid"],[1,"input-group","has-validation"],["type","text","aria-describedby","inputGroupPrepend3","placeholder","Concepto","name","concepto","formControlName","concepto","required","",1,"form-control","is-invalid"],["class","invalid-feedback",4,"ngIf"],[1,"col-md-6"],["for","validationServer03",1,"form-label"],["type","number","aria-describedby","validationServer03Feedback","placeholder","Base","name","base","formControlName","base","required","",1,"form-control","is-invalid"],[1,"col-md-3"],["for","validationServer05",1,"form-label"],["type","text","aria-describedby","validationServer05Feedback","placeholder","Tipo","name","tipo","formControlName","tipo","required","",1,"form-control","is-invalid"],["type","number","aria-describedby","validationServer05Feedback","placeholder","I.V.A","name","iva","formControlName","iva","required","",1,"form-control","is-invalid"],["type","number","aria-describedby","validationServer05Feedback","placeholder","Total","name","total","formControlName","total","required","",1,"form-control","is-invalid"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["routerLink","/presupuestos",1,"btn","btn-danger"],[1,"invalid-feedback"]],template:function(t,r){1&t&&(d.TgZ(0,"h2"),d._uU(1,"A\xf1adir presupuesto"),d.qZA(),d.TgZ(2,"a",0),d._uU(3,"Regresar al listado"),d.qZA(),d._UZ(4,"br"),d.TgZ(5,"form",1),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(6,"div",2),d.TgZ(7,"label",3),d._uU(8,"Proveedor"),d.qZA(),d._UZ(9,"input",4),d.YNc(10,GD,2,0,"div",5),d.qZA(),d.TgZ(11,"div",2),d.TgZ(12,"label",3),d._uU(13,"Fecha"),d.qZA(),d._UZ(14,"input",6),d.YNc(15,WD,2,0,"div",5),d.qZA(),d.TgZ(16,"div",2),d.TgZ(17,"label",3),d._uU(18,"Concepto"),d.qZA(),d.TgZ(19,"div",7),d._UZ(20,"input",8),d.YNc(21,Tk,2,0,"div",9),d.qZA(),d.qZA(),d.TgZ(22,"div",10),d.TgZ(23,"label",11),d._uU(24,"Base"),d.qZA(),d._UZ(25,"input",12),d.YNc(26,zD,2,0,"div",9),d.qZA(),d.TgZ(27,"div",13),d.TgZ(28,"label",14),d._uU(29,"Tipo"),d.qZA(),d._UZ(30,"input",15),d.YNc(31,hy,2,0,"div",9),d.qZA(),d.TgZ(32,"div",13),d.TgZ(33,"label",14),d._uU(34,"I.V.A"),d.qZA(),d._UZ(35,"input",16),d.YNc(36,KD,2,0,"div",9),d.qZA(),d.TgZ(37,"div",13),d.TgZ(38,"label",14),d._uU(39,"Total"),d.qZA(),d._UZ(40,"input",17),d.YNc(41,Dk,2,0,"div",9),d.qZA(),d.TgZ(42,"div",18),d.TgZ(43,"button",19),d._uU(44,"A\xf1adir"),d.qZA(),d.TgZ(45,"a",20),d._uU(46,"Cancelar"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(5),d.Q6J("formGroup",r.validator),d.xp6(5),d.Q6J("ngIf",r.validator.controls.proveedor.valid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.fecha.valid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.concepto.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.base.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.tipo.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.iva.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.total.invalid))},directives:[Rl,Fl,Yi,Ga,li,Jc,ed,nd,Ei,jh],styles:[""]}),n})();function Sk(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Correcto "),d.qZA())}function sP(n,e){1&n&&(d.TgZ(0,"div"),d._uU(1," Correcto "),d.qZA())}function xk(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduce el concepto correcto "),d.qZA())}function fy(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," La base no es valida "),d.qZA())}function oP(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduce el concepto correcto "),d.qZA())}function Nk(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduce el I.V.A correcto "),d.qZA())}function Rk(n,e){1&n&&(d.TgZ(0,"div",21),d._uU(1," Por favor introduzca el total correcto "),d.qZA())}let Aw=(()=>{class n{constructor(t,r,o,l,h){var p=this;this.fb=t,this.presupuestoService=r,this.router=o,this.activatedRouter=l,this.cdref=h,this.errorMessage="",this.alertClass="alert alert-success",this.isValid=!0,this.iva=0,this.total=0,this.key="",this.validator=this.fb.group({proveedor:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]],fecha:["",[ke.required]],concepto:["",[ke.required,ke.pattern("^[a-zA-Z]*")]],base:["",[ke.required,ke.pattern("^[0-9,]*")]],tipo:["",[ke.required,ke.pattern("^[a-zA-Z]*")]],iva:["",[ke.required,ke.pattern("^[0-9]*")]],total:["",[ke.required,ke.pattern("^[0-9,]*")]]}),this.activatedRouter.params.subscribe(v=>{this.key=v.key,(0,ge.Z)(function*(){try{p.presupuesto=yield p.presupuestoService.getPresupuesto(p.key),p.presupuesto.$key=p.key,p.setPresupuesto()}catch(b){console.log("ERRRRRRR"+b)}})()})}ngOnInit(){}onSubmit(){this.savePresupuesto()}onChanges(){this.validator.valueChanges.subscribe(t=>{this.base=this.validator.value.base,this.tipo=this.validator.value.tipo,this.iva=this.validator.value.iva,this.total=this.validator.value.total})}setPresupuesto(){var t,r,o,l,h,p,v;this.validator=this.fb.group({proveedor:[null===(t=this.presupuesto)||void 0===t?void 0:t.proveedor,[ke.required,ke.minLength(4)]],fecha:[null===(r=this.presupuesto)||void 0===r?void 0:r.fecha,ke.required],concepto:[null===(o=this.presupuesto)||void 0===o?void 0:o.concepto,[ke.required]],base:[null===(l=this.presupuesto)||void 0===l?void 0:l.base,[ke.required,ke.min(0)]],tipo:[null===(h=this.presupuesto)||void 0===h?void 0:h.tipo,ke.required],iva:[null===(p=this.presupuesto)||void 0===p?void 0:p.iva,ke.required],total:[null===(v=this.presupuesto)||void 0===v?void 0:v.total,ke.required]}),this.onChanges(),this.cdref.detectChanges()}savePresupuesto(){console.log(this.validator.status),console.log(this.presupuesto),"VALID"==this.validator.status?(this.presupuesto={proveedor:this.validator.value.proveedor,fecha:this.validator.value.fecha,concepto:this.validator.value.concepto,base:this.validator.value.base,tipo:this.validator.value.tipo,iva:this.validator.value.iva,total:this.validator.value.total},console.log(this.presupuesto),this.presupuestoService.changePress(this.presupuesto,this.key),this.router.navigate(["/presupuestos"])):this.mostrarMensaje("fallo",!0)}mostrarMensaje(t,r){this.errorMessage=t,this.isValid=r,this.alertClass=r?"alert alert-danger":"alert alert-success",setTimeout(()=>{this.isValid=!0},2e3)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rd),d.Y36(bg),d.Y36(cr),d.Y36(Ba),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-editpress"]],decls:45,vars:8,consts:[["routerLink","/presupuestos",1,"btn","btn-primary","float-md-right"],[1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-4"],[1,"form-label"],["type","text","placeholder","Proveedor","name","proveedor","formControlName","proveedor","required","",1,"form-control","is-valid"],[4,"ngIf"],["type","date","placeholder","Fecha","name","fecha","formControlName","fecha","required","",1,"form-control","is-valid"],[1,"input-group","has-validation"],["type","text","aria-describedby","inputGroupPrepend3","placeholder","Concepto","name","concepto","formControlName","concepto","required","",1,"form-control","is-invalid"],["class","invalid-feedback",4,"ngIf"],[1,"col-md-6"],["for","validationServer03",1,"form-label"],["type","number","aria-describedby","validationServer03Feedback","placeholder","Base","name","base","formControlName","base","required","",1,"form-control","is-invalid"],[1,"col-md-3"],["for","validationServer05",1,"form-label"],["type","text","aria-describedby","validationServer05Feedback","placeholder","Tipo","name","tipo","formControlName","tipo","required","",1,"form-control","is-invalid"],["type","number","aria-describedby","validationServer05Feedback","placeholder","I.V.A","name","iva","formControlName","iva","required","",1,"form-control","is-invalid"],["type","number","aria-describedby","validationServer05Feedback","placeholder","Total","name","total","formControlName","total","required","",1,"form-control","is-invalid"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["routerLink","/presupuestos",1,"btn","btn-danger"],[1,"invalid-feedback"]],template:function(t,r){1&t&&(d.TgZ(0,"a",0),d._uU(1,"Regresar al listado"),d.qZA(),d._UZ(2,"br"),d.TgZ(3,"form",1),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(4,"div",2),d.TgZ(5,"label",3),d._uU(6,"Proveedor"),d.qZA(),d._UZ(7,"input",4),d.YNc(8,Sk,2,0,"div",5),d.qZA(),d.TgZ(9,"div",2),d.TgZ(10,"label",3),d._uU(11,"Fecha"),d.qZA(),d._UZ(12,"input",6),d.YNc(13,sP,2,0,"div",5),d.qZA(),d.TgZ(14,"div",2),d.TgZ(15,"label",3),d._uU(16,"Concepto"),d.qZA(),d.TgZ(17,"div",7),d._UZ(18,"input",8),d.YNc(19,xk,2,0,"div",9),d.qZA(),d.qZA(),d.TgZ(20,"div",10),d.TgZ(21,"label",11),d._uU(22,"Base"),d.qZA(),d._UZ(23,"input",12),d.YNc(24,fy,2,0,"div",9),d.qZA(),d.TgZ(25,"div",13),d.TgZ(26,"label",14),d._uU(27,"Tipo"),d.qZA(),d._UZ(28,"input",15),d.YNc(29,oP,2,0,"div",9),d.qZA(),d.TgZ(30,"div",13),d.TgZ(31,"label",14),d._uU(32,"I.V.A"),d.qZA(),d._UZ(33,"input",16),d.YNc(34,Nk,2,0,"div",9),d.qZA(),d.TgZ(35,"div",13),d.TgZ(36,"label",14),d._uU(37,"Total"),d.qZA(),d._UZ(38,"input",17),d.YNc(39,Rk,2,0,"div",9),d.qZA(),d.TgZ(40,"div",18),d.TgZ(41,"button",19),d._uU(42,"A\xf1adir"),d.qZA(),d.TgZ(43,"a",20),d._uU(44,"Cancelar"),d.qZA(),d.qZA(),d.qZA()),2&t&&(d.xp6(3),d.Q6J("formGroup",r.validator),d.xp6(5),d.Q6J("ngIf",r.validator.controls.proveedor.valid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.fecha.valid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.concepto.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.base.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.tipo.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.iva.invalid),d.xp6(5),d.Q6J("ngIf",r.validator.controls.total.invalid))},directives:[Rl,Fl,Yi,Ga,li,Jc,ed,nd,Ei,jh],styles:["input.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}input.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948}select.ng-invalid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #a94442}select.ng-valid.ng-dirty[_ngcontent-%COMP%]{border-left:5px solid #42A948}.check[_ngcontent-%COMP%]{color:#42a948}.uncheck[_ngcontent-%COMP%]{color:#a94442}.row[_ngcontent-%COMP%]{margin-left:10px}"]}),n})();function aP(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"td"),d._uU(2),d.qZA(),d.TgZ(3,"td"),d._uU(4),d.qZA(),d.TgZ(5,"td"),d._uU(6),d.qZA(),d.TgZ(7,"td"),d._uU(8),d.qZA(),d.TgZ(9,"td"),d._uU(10),d.qZA(),d.TgZ(11,"td"),d._uU(12),d.qZA(),d.TgZ(13,"td"),d.TgZ(14,"button",4),d._uU(15,"Editar"),d.qZA(),d.qZA(),d.TgZ(16,"td"),d.TgZ(17,"button",5),d.NdJ("click",function(){const l=d.CHM(t).$implicit;return d.oxw().delPresupuesto(l.$key)}),d._uU(18,"Eliminar"),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.proveedor),d.xp6(2),d.Oqu(t.fecha),d.xp6(2),d.Oqu(t.concepto),d.xp6(2),d.Oqu(t.base),d.xp6(2),d.Oqu(t.iva),d.xp6(2),d.Oqu(t.total),d.xp6(2),d.MGl("routerLink","/editpress/",t.$key,"")}}let Pk=(()=>{class n{constructor(t){this.presupuestoService=t,this.presupuestos=[],this.presupuestos=this.presupuestoService.getPresupuestos()}ngOnInit(){}delPresupuesto(t){var r=this;return(0,ge.Z)(function*(){(yield r.presupuestoService.delPresupuesto(t))&&(r.presupuestos.splice(r.presupuestos.indexOf(t)),console.log(r.presupuestos))})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(bg))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-presupuesto"]],decls:22,vars:1,consts:[["routerLink","/addpres",1,"btn","btn-primary","float-md-right"],[1,"table","table-bordered","table-striped","tabla",2,"margin-top","40px"],[1,"filters"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"h3"),d._uU(1,"Listado de Presupuestos"),d.qZA(),d.TgZ(2,"a",0),d._uU(3,"A\xf1adir nuevo presupuesto"),d.qZA(),d._UZ(4,"br"),d.TgZ(5,"table",1),d.TgZ(6,"thead"),d.TgZ(7,"tr",2),d.TgZ(8,"th"),d._uU(9,"Proveedor"),d.qZA(),d.TgZ(10,"th"),d._uU(11,"Fecha"),d.qZA(),d.TgZ(12,"th"),d._uU(13,"Concepto"),d.qZA(),d.TgZ(14,"th"),d._uU(15,"Base"),d.qZA(),d.TgZ(16,"th"),d._uU(17,"IVA"),d.qZA(),d.TgZ(18,"th"),d._uU(19,"Total"),d.qZA(),d.qZA(),d.qZA(),d.TgZ(20,"tbody"),d.YNc(21,aP,19,7,"tr",3),d.qZA(),d.qZA()),2&t&&(d.xp6(21),d.Q6J("ngForOf",r.presupuestos))},directives:[Rl,Wt,Nl],styles:[""]}),n})(),Sw=(()=>{class n{constructor(t){this.db=t}nuevoProveedor(t){this.db.database.ref().child("proveedores").push(t)}getProveedores(){let t=[];return this.db.database.ref().child("proveedores").get().then(r=>{const o=r.val();for(let l in o)t.push(Object.assign({$key:l},o[l]))}),t}getProveedor(t){var r=this;return(0,ge.Z)(function*(){try{console.log("getproveedor"+t);let o=yield r.db.database.ref().child("proveedores").child(t).get(),l=Object.assign({$key:t},o.val());return console.log(l),l}catch(o){return(0,xI._)(o+"Fallo al cargar el presupuesto"),null}})()}delProveedor(t){var r=this;return new Promise(function(){var o=(0,ge.Z)(function*(l,h){try{yield r.db.database.ref().child("proveedores").child(t).remove(),l(!0)}catch(p){l(!1),h("no se ha borrado")}});return function(l,h){return o.apply(this,arguments)}}())}editProveedor(t,r){this.db.database.ref().child("proveedores").child(r).update(t)}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(qD))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function uP(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca un nombre correcto. "),d.qZA())}function Mk(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca un C.I.F. "),d.qZA())}function YD(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca una direccion correcta. "),d.qZA())}function lP(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca un codigo postal correcto. "),d.qZA())}function Ok(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca una localidad correcta. "),d.qZA())}function kk(n,e){if(1&n&&(d.TgZ(0,"option",31),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("value",t),d.xp6(1),d.hij("",t," ")}}function cP(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca una provincia correcta. "),d.qZA())}function Ig(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca un telefono correcto. "),d.qZA())}function dP(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca una direcci\xf3n de correo correcta. "),d.qZA())}function hP(n,e){1&n&&(d.TgZ(0,"p",30),d._uU(1," Por favor introduzca un nombre correcto. "),d.qZA())}function fP(n,e){if(1&n&&(d.TgZ(0,"div",32),d.TgZ(1,"ul"),d._uU(2),d.qZA(),d.qZA()),2&n){const t=d.oxw();d.Tol(t.alertClass),d.xp6(2),d.hij(" ",t.errorMessage," ")}}let xw=(()=>{class n{constructor(t,r,o){this.pc=t,this.fb=r,this.router=o,this.proveedor=null,this.errorMessage="",this.alertClass="alert alert-success",this.isValid=!0,this.validator=this.fb.group({nombre:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]],cif:["",[ke.required,ke.pattern("^[0-9.]*")]],direccion:["",[ke.required,ke.pattern("^[a-zA-Z/]*")]],cp:["",[ke.required,ke.pattern("^[0-9.]*")]],localidad:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]],provincia:["",[ke.required]],telefono:["",[ke.required,ke.pattern("^[0-9]{9}")]],email:["",[ke.required,ke.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],contacto:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]]}),this.provincias=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","La Coru\xf1a","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","IslasBaleares","Ja\xe9n","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Segovia","Sevilla","Soria","Tarragona","Santa Cruz de Tenerife","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"]}ngOnInit(){}onSubmit(){this.guardarProveedor()}guardarProveedor(){console.log(this.validator.status),"VALID"==this.validator.status?(this.proveedor={nombre:this.validator.value.nombre,cif:this.validator.value.cif,direccion:this.validator.value.direccion,cp:this.validator.value.cp,localidad:this.validator.value.localidad,provincia:this.validator.value.provincia,telefono:this.validator.value.telefono,email:this.validator.value.email,contacto:this.validator.value.contacto},console.log(this.proveedor),this.pc.nuevoProveedor(this.proveedor),this.validator.reset(),this.router.navigate(["/proveedores"])):this.mostrarMensaje("Falta un campo",!1),console.log(this.validator.touched)}mostrarMensaje(t,r){this.errorMessage=t,this.isValid=r,this.alertClass=r?"alert alert-danger":"alert alert-success",setTimeout(()=>{this.isValid=!0},2e3)}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Sw),d.Y36(rd),d.Y36(cr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-add-prove"]],decls:64,vars:12,consts:[["id","table",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-7"],[1,"rellenar"],["for","inputEmail4",1,"form-label"],["type","email","placeholder","Nombre","name","nombre","formControlName","nombre",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"col-md-3"],["for","inputPassword4",1,"form-label"],["type","text","placeholder","C.I.F","name","cif","formControlName","cif",1,"form-control"],[1,"col-7"],["for","inputAddress",1,"form-label"],["type","text","id","inputAddress","placeholder","Direcci\xf3n","name","direccion","formControlName","direccion",1,"form-control"],[1,"col-3"],["for","inputAddress2",1,"form-label"],["type","text","id","inputAddress2","placeholder","C\xf3digo Postal","name","cp","formControlName","cp",1,"form-control"],[1,"col-md-6"],["for","inputCity",1,"form-label"],["type","text","id","inputCity","placeholder","Localidad","name","localidad","formControlName","localidad",1,"form-control"],[1,"col-md-4"],["for","inputState",1,"form-label"],["id","inputState","name","provincia","formControlName","provincia",1,"form-select"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","tel","placeholder","T\xe9lefono","name","telefono","formControlName","telefono",1,"form-control"],["type","email","id","inputEmail4","placeholder","Correo Electr\xf3nico","name","email","formControlName","email",1,"form-control"],[1,"col-4"],["type","text","placeholder","Persona de contacto","name","contacto","formControlName","contacto",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["id","error","role","alert",3,"class",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],["id","error","role","alert"]],template:function(t,r){1&t&&(d.TgZ(0,"h2"),d._uU(1,"A\xf1adir nuevo proveedor"),d.qZA(),d.TgZ(2,"form",0),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(3,"div",1),d.TgZ(4,"div",2),d.TgZ(5,"label",3),d._uU(6,"Nombre"),d.qZA(),d._UZ(7,"input",4),d.YNc(8,uP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(9,"div",6),d.TgZ(10,"div",2),d.TgZ(11,"label",7),d._uU(12,"C.I.F."),d.qZA(),d._UZ(13,"input",8),d.YNc(14,Mk,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(15,"div",9),d.TgZ(16,"div",2),d.TgZ(17,"label",10),d._uU(18,"Direcci\xf3n"),d.qZA(),d._UZ(19,"input",11),d.YNc(20,YD,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(21,"div",12),d.TgZ(22,"div",2),d.TgZ(23,"label",13),d._uU(24,"C\xf3digo Postal"),d.qZA(),d._UZ(25,"input",14),d.YNc(26,lP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(27,"div",15),d.TgZ(28,"div",2),d.TgZ(29,"label",16),d._uU(30,"Localidad"),d.qZA(),d._UZ(31,"input",17),d.YNc(32,Ok,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(33,"div",18),d.TgZ(34,"div",2),d.TgZ(35,"label",19),d._uU(36,"Provincia"),d.qZA(),d.TgZ(37,"select",20),d.TgZ(38,"option",21),d._uU(39,"Seleccione Provincia "),d.qZA(),d.YNc(40,kk,2,2,"option",22),d.qZA(),d.YNc(41,cP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(42,"div",12),d.TgZ(43,"div",2),d.TgZ(44,"label",10),d._uU(45,"T\xe9lefono"),d.qZA(),d._UZ(46,"input",23),d.YNc(47,Ig,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(48,"div",12),d.TgZ(49,"div",2),d.TgZ(50,"label",10),d._uU(51,"Correo Electr\xf3nico"),d.qZA(),d._UZ(52,"input",24),d.YNc(53,dP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(54,"div",25),d.TgZ(55,"div",2),d.TgZ(56,"label",10),d._uU(57,"Persona de contacto"),d.qZA(),d._UZ(58,"input",26),d.YNc(59,hP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(60,"div",27),d.TgZ(61,"button",28),d._uU(62,"A\xf1adir"),d.qZA(),d.qZA(),d.qZA(),d.YNc(63,fP,3,3,"div",29)),2&t&&(d.xp6(2),d.Q6J("formGroup",r.validator),d.xp6(6),d.Q6J("ngIf",r.validator.controls.nombre.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.cif.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.direccion.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.cp.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.localidad.invalid),d.xp6(8),d.Q6J("ngForOf",r.provincias),d.xp6(1),d.Q6J("ngIf",r.validator.controls.provincia.invalid),d.xp6(6),d.Q6J("ngIf",!r.validator.controls.telefono.valid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.email.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.contacto.invalid),d.xp6(4),d.Q6J("ngIf",!r.isValid))},directives:[Fl,Yi,Ga,li,Jc,ed,Ei,ku,uE,Up,Wt],styles:["h2[_ngcontent-%COMP%]{text-align:center;color:#074907}.rellenar[_ngcontent-%COMP%]{block-size:100px;margin-top:10px}.alert.alert-danger[_ngcontent-%COMP%]{font-size:small}input.ng-valid.ng-touched[_ngcontent-%COMP%]{border-left:5px solid #37d351}input.ng-invalid.ng-invalid[_ngcontent-%COMP%]{background-color:#b88585}#table[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}#error[_ngcontent-%COMP%]{text-align:center;background-color:red;color:#000}"]}),n})();function pP(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca un nombre correcto. "),d.qZA())}function Qs(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca un C.I.F. "),d.qZA())}function gP(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca una direccion correcta. "),d.qZA())}function Nw(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca un codigo postal correcto. "),d.qZA())}function mP(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca una localidad correcta. "),d.qZA())}function _P(n,e){if(1&n&&(d.TgZ(0,"option",32),d._uU(1),d.qZA()),2&n){const t=e.$implicit;d.Q6J("value",t),d.xp6(1),d.hij("",t," ")}}function Rw(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca una provincia correcta. "),d.qZA())}function QD(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca un telefono correcto. "),d.qZA())}function JD(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca una direcci\xf3n de correo correcta. "),d.qZA())}function yP(n,e){1&n&&(d.TgZ(0,"p",31),d._uU(1," Por favor introduzca un nombre correcto. "),d.qZA())}function XD(n,e){if(1&n&&(d.TgZ(0,"div",33),d.TgZ(1,"ul"),d._uU(2),d.qZA(),d.qZA()),2&n){const t=d.oxw();d.Tol(t.alertClass),d.xp6(2),d.hij(" ",t.errorMessage," ")}}let eA=(()=>{class n{constructor(t,r,o,l,h){var p=this;this.fb=t,this.proveedoresService=r,this.router=o,this.activateRouter=l,this.cdref=h,this.errorMessage="",this.alertClass="alert alert-success",this.isValid=!0,this.key="",this.validator=this.fb.group({nombre:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]],cif:["",[ke.required,ke.pattern("^[0-9.]*")]],direccion:["",[ke.required,ke.pattern("^[a-zA-Z/]*")]],cp:["",[ke.required,ke.pattern("^[0-9.]*")]],localidad:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]],provincia:["",[ke.required]],telefono:["",[ke.required,ke.pattern("^[0-9]{9}")]],email:["",[ke.required,ke.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],contacto:["",[ke.required,ke.pattern("^[a-zA-Z ]*")]]}),this.provincias=["\xc1lava","Albacete","Alicante","Almer\xeda","Asturias","\xc1vila","Badajoz","Barcelona","Burgos","C\xe1ceres","C\xe1diz","Cantabria","Castell\xf3n","Ciudad Real","C\xf3rdoba","La Coru\xf1a","Cuenca","Gerona","Granada","Guadalajara","Guip\xfazcoa","Huelva","Huesca","IslasBaleares","Ja\xe9n","Le\xf3n","L\xe9rida","Lugo","Madrid","M\xe1laga","Murcia","Navarra","Orense","Palencia","Las Palmas","Pontevedra","La Rioja","Salamanca","Segovia","Sevilla","Soria","Tarragona","Santa Cruz de Tenerife","Teruel","Toledo","Valencia","Valladolid","Vizcaya","Zamora","Zaragoza"],this.activateRouter.params.subscribe(v=>{this.key=v.key,(0,ge.Z)(function*(){try{p.proveedor=yield p.proveedoresService.getProveedor(p.key),p.proveedor.key=p.key,p.setProveedor(),console.log(p.proveedor)}catch(b){console.log(b+"Fallo al cargar el presupuesto")}})()})}ngOnInit(){}onSubmit(){this.savePresupuesto()}setProveedor(){var t,r;console.log("setProveedor"+this.proveedor),this.validator=this.fb.group({nombre:[null===(t=this.proveedor)||void 0===t?void 0:t.nombre,[ke.required,ke.pattern("^[a-zA-Z ]*")]],cif:[null===(r=this.proveedor)||void 0===r?void 0:r.cif,[ke.required,ke.pattern("^[0-9.]*")]],direccion:[this.proveedor.direccion,[ke.required,ke.pattern("^[a-zA-Z/]*")]],cp:[this.proveedor.cp,[ke.required,ke.pattern("^[0-9.]*")]],localidad:[this.proveedor.localidad,[ke.required,ke.pattern("^[a-zA-Z ]*")]],provincia:[this.proveedor.provincia,[ke.required]],telefono:[this.proveedor.telefono,[ke.required,ke.pattern("^[0-9]{9}")]],email:[this.proveedor.email,[ke.required,ke.pattern(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)]],contacto:[this.proveedor.contacto,[ke.required,ke.pattern("^[a-zA-Z ]*")]]})}savePresupuesto(){"VALID"==this.validator.status&&(this.proveedor={nombre:this.validator.value.nombre,cif:this.validator.value.cif,direccion:this.validator.value.direccion,cp:this.validator.value.cp,localidad:this.validator.value.localidad,provincia:this.validator.value.provincia,telefono:this.validator.value.telefono,email:this.validator.value.email,contacto:this.validator.value.contacto},this.proveedoresService.editProveedor(this.proveedor,this.key),this.router.navigate(["/proveedores"]))}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(rd),d.Y36(Sw),d.Y36(cr),d.Y36(Ba),d.Y36(d.sBO))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-editproveedor"]],decls:66,vars:12,consts:[["id","table",1,"row","g-3",3,"formGroup","ngSubmit"],[1,"col-md-7"],[1,"rellenar"],["for","inputEmail4",1,"form-label"],["type","text","placeholder","Nombre","name","nombre","formControlName","nombre","required","",1,"form-control"],["class","alert alert-danger",4,"ngIf"],[1,"col-md-3"],["for","inputPassword4",1,"form-label"],["type","text","placeholder","C.I.F","name","cif","formControlName","cif",1,"form-control"],[1,"col-7"],["for","inputAddress",1,"form-label"],["type","text","id","inputAddress","placeholder","Direcci\xf3n","name","direccion","formControlName","direccion",1,"form-control"],[1,"col-3"],["for","inputAddress2",1,"form-label"],["type","text","id","inputAddress2","placeholder","C\xf3digo Postal","name","cp","formControlName","cp",1,"form-control"],[1,"col-md-6"],["for","inputCity",1,"form-label"],["type","text","id","inputCity","placeholder","Localidad","name","localidad","formControlName","localidad",1,"form-control"],[1,"col-md-4"],["for","inputState",1,"form-label"],["id","inputState","name","provincia","formControlName","provincia",1,"form-select"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],["type","tel","placeholder","T\xe9lefono","name","telefono","formControlName","telefono",1,"form-control"],["type","email","id","inputEmail4","placeholder","Correo Electr\xf3nico","name","email","formControlName","email",1,"form-control"],[1,"col-4"],["type","text","placeholder","Persona de contacto","name","contacto","formControlName","contacto",1,"form-control"],[1,"col-12"],["type","submit",1,"btn","btn-primary"],["type","submit","routerLink","/proveedores",1,"btn","btn-primary"],["id","error","role","alert",3,"class",4,"ngIf"],[1,"alert","alert-danger"],[3,"value"],["id","error","role","alert"]],template:function(t,r){1&t&&(d.TgZ(0,"h2"),d._uU(1,"Editar proveedor"),d.qZA(),d.TgZ(2,"form",0),d.NdJ("ngSubmit",function(){return r.onSubmit()}),d.TgZ(3,"div",1),d.TgZ(4,"div",2),d.TgZ(5,"label",3),d._uU(6,"Nombre"),d.qZA(),d._UZ(7,"input",4),d.YNc(8,pP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(9,"div",6),d.TgZ(10,"div",2),d.TgZ(11,"label",7),d._uU(12,"C.I.F."),d.qZA(),d._UZ(13,"input",8),d.YNc(14,Qs,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(15,"div",9),d.TgZ(16,"div",2),d.TgZ(17,"label",10),d._uU(18,"Direcci\xf3n"),d.qZA(),d._UZ(19,"input",11),d.YNc(20,gP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(21,"div",12),d.TgZ(22,"div",2),d.TgZ(23,"label",13),d._uU(24,"C\xf3digo Postal"),d.qZA(),d._UZ(25,"input",14),d.YNc(26,Nw,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(27,"div",15),d.TgZ(28,"div",2),d.TgZ(29,"label",16),d._uU(30,"Localidad"),d.qZA(),d._UZ(31,"input",17),d.YNc(32,mP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(33,"div",18),d.TgZ(34,"div",2),d.TgZ(35,"label",19),d._uU(36,"Provincia"),d.qZA(),d.TgZ(37,"select",20),d.TgZ(38,"option",21),d._uU(39,"Seleccione Provincia "),d.qZA(),d.YNc(40,_P,2,2,"option",22),d.qZA(),d.YNc(41,Rw,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(42,"div",12),d.TgZ(43,"div",2),d.TgZ(44,"label",10),d._uU(45,"T\xe9lefono"),d.qZA(),d._UZ(46,"input",23),d.YNc(47,QD,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(48,"div",12),d.TgZ(49,"div",2),d.TgZ(50,"label",10),d._uU(51,"Correo Electr\xf3nico"),d.qZA(),d._UZ(52,"input",24),d.YNc(53,JD,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(54,"div",25),d.TgZ(55,"div",2),d.TgZ(56,"label",10),d._uU(57,"Persona de contacto"),d.qZA(),d._UZ(58,"input",26),d.YNc(59,yP,2,0,"p",5),d.qZA(),d.qZA(),d.TgZ(60,"div",27),d.TgZ(61,"button",28),d._uU(62,"A\xf1adir"),d.qZA(),d.TgZ(63,"button",29),d._uU(64,"Cancelar"),d.qZA(),d.qZA(),d.qZA(),d.YNc(65,XD,3,3,"div",30)),2&t&&(d.xp6(2),d.Q6J("formGroup",r.validator),d.xp6(6),d.Q6J("ngIf",r.validator.controls.nombre.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.cif.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.direccion.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.cp.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.localidad.invalid),d.xp6(8),d.Q6J("ngForOf",r.provincias),d.xp6(1),d.Q6J("ngIf",r.validator.controls.provincia.invalid),d.xp6(6),d.Q6J("ngIf",!r.validator.controls.telefono.valid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.email.invalid),d.xp6(6),d.Q6J("ngIf",r.validator.controls.contacto.invalid),d.xp6(6),d.Q6J("ngIf",!r.isValid))},directives:[Fl,Yi,Ga,li,Jc,ed,nd,Ei,ku,uE,Up,Wt,Nl],styles:[""]}),n})();function vP(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"tr"),d.TgZ(1,"th",2),d._uU(2),d.qZA(),d.TgZ(3,"th",2),d._uU(4),d.qZA(),d.TgZ(5,"th",2),d._uU(6),d.qZA(),d.TgZ(7,"th"),d.TgZ(8,"button",4),d._uU(9,"Editar"),d.qZA(),d.qZA(),d.TgZ(10,"th"),d.TgZ(11,"button",5),d.NdJ("click",function(){const l=d.CHM(t).$implicit;return d.oxw().delPresupuesto(l.$key)}),d._uU(12,"Eliminar"),d.qZA(),d.qZA(),d.qZA()}if(2&n){const t=e.$implicit;d.xp6(2),d.Oqu(t.nombre),d.xp6(2),d.Oqu(t.email),d.xp6(2),d.Oqu(t.telefono),d.xp6(2),d.MGl("routerLink","/editProveedor/",t.$key,"")}}let EP=(()=>{class n{constructor(t,r){this.proveedoresService=t,this.authS=r,this.proveedores=[]}ngOnInit(){this.authS.ready||this.authS.checkSSO(),this.proveedores=this.proveedoresService.getProveedores(),console.log(this.proveedores)}nuevoProveedor(t){this.proveedoresService.nuevoProveedor(t),this.proveedores.push(t)}getProveedores(){return this.proveedores}delPresupuesto(t){var r=this;return(0,ge.Z)(function*(){(yield r.proveedoresService.delProveedor(t))&&(r.proveedores.splice(r.proveedores.indexOf(t)),console.log(r.proveedores))})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(Sw),d.Y36(b_))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-proveedores"]],decls:13,vars:1,consts:[["type","button","id","addProveedores","routerLink","/addProve",1,"btn","btn-success"],[1,"table","table-success","table-striped"],["scope","col"],[4,"ngFor","ngForOf"],["type","button",1,"btn","btn-success",3,"routerLink"],[1,"btn","btn-danger",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"h3"),d._uU(1,"Listado de Proveedores"),d.qZA(),d.TgZ(2,"button",0),d._uU(3,"A\xf1adir proveedor"),d.qZA(),d.TgZ(4,"table",1),d.TgZ(5,"tr"),d.TgZ(6,"th",2),d._uU(7,"Nombre"),d.qZA(),d.TgZ(8,"th",2),d._uU(9,"Correo electronico"),d.qZA(),d.TgZ(10,"th",2),d._uU(11,"Telefono"),d.qZA(),d.qZA(),d.YNc(12,vP,13,4,"tr",3),d.qZA()),2&t&&(d.xp6(12),d.Q6J("ngForOf",r.proveedores))},directives:[Nl,Wt],styles:["#addProveedores[_ngcontent-%COMP%]{margin-right:10px;float:right}"]}),n})(),qu=(()=>{class n{constructor(t,r,o){this.authS=t,this.autencification=r,this.router=o}canActivate(t,r){return console.log(this.authS.isLogged),(!this.authS.isLogged||this.autencification.isLogged)&&this.router.navigate(["/login"]),this.authS.isLogged}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(b_),d.LFG(ef),d.LFG(cr))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tA=[{path:"",redirectTo:"/login",pathMatch:"full"},{path:"inicio",component:gb,canActivate:[qu]},{path:"login",component:I_},{path:"registro",component:SI},{path:"proveedores",component:EP,canActivate:[qu]},{path:"editProveedor/:key",component:eA,canActivate:[qu]},{path:"presupuestos",component:Pk,canActivate:[qu]},{path:"addpres",component:Ak,canActivate:[qu]},{path:"addProve",component:xw,canActivate:[qu]},{path:"editpress/:key",component:Aw,canActivate:[qu]},{path:"**",component:I_}];let nA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({imports:[[ih,Zv.forRoot(tA)],Zv]}),n})();function Pw(n,e){if(1&n&&(d.TgZ(0,"div"),d._UZ(1,"img",18),d.TgZ(2,"h5",19),d._uU(3),d.qZA(),d.qZA()),2&n){const t=d.oxw();d.xp6(1),d.Q6J("src",null==t.authS.user?null:t.authS.user.photoURL,d.LSH),d.xp6(2),d.Oqu(null==t.authS.user?null:t.authS.user.displayName)}}function wP(n,e){if(1&n){const t=d.EpF();d.TgZ(0,"button",20),d.NdJ("click",function(){return d.CHM(t),d.oxw().logout()}),d._uU(1,"Desconectarse"),d.qZA()}}const la=function(){return{exact:!0}};let CP=(()=>{class n{constructor(t,r,o){this.authS=t,this.autentification=r,this.route=o,this.conect=!0,this.authS.ready||this.authS.checkSSO()}ngOnInit(){var t;this.authS.isLogged?(this.conect=this.authS.isLogged,null===(t=this.authS.$ready)||void 0===t||t.subscribe(r=>{})):this.autentification.conect&&(this.conect=!0)}logout(){var t=this;return(0,ge.Z)(function*(){if(t.authS.isLogged)try{yield t.authS.logout(),t.route.navigate(["/login"]),t.conect=!1}catch(r){alert(r),t.conect=t.authS.isLogged}else if(t.autentification.conect)try{yield t.autentification.sigOut(),t.conect=!1}catch(r){alert(r),t.conect=t.autentification.conect}})()}}return n.\u0275fac=function(t){return new(t||n)(d.Y36(b_),d.Y36(ef),d.Y36(cr))},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-header"]],decls:29,vars:4,consts:[[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNavDropdown","aria-controls","navbarNavDropdown","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNavDropdown",1,"collapse","navbar-collapse"],[1,"navbar-nav"],["routerLinkActive","active",1,"nav-item",3,"routerLinkActiveOptions"],["aria-current","page","routerLink","/",1,"nav-link","active"],["routerLinkActive","active",1,"nav-item"],["routerLink","/proveedores",1,"nav-link"],["routerLink","/presupuestos",1,"nav-link"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],[4,"ngIf"],[1,"card-body"],["type","button","class","btn btn-primary btn-sm",3,"click",4,"ngIf"],["id","foto","alt","avatar",1,"card-img-top",3,"src"],[1,"card-title"],["type","button",1,"btn","btn-primary","btn-sm",3,"click"]],template:function(t,r){1&t&&(d.TgZ(0,"nav",0),d.TgZ(1,"div",1),d.TgZ(2,"a",2),d._uU(3,"ProyectoUA1"),d.qZA(),d.TgZ(4,"button",3),d._UZ(5,"span",4),d.qZA(),d.TgZ(6,"div",5),d.TgZ(7,"ul",6),d.TgZ(8,"li",7),d.TgZ(9,"a",8),d._uU(10,"Inicio"),d.qZA(),d.qZA(),d.TgZ(11,"li",9),d.TgZ(12,"a",10),d._uU(13,"Proveedores"),d.qZA(),d.qZA(),d.TgZ(14,"li",9),d.TgZ(15,"a",11),d._uU(16,"Presupuestos"),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"form",12),d._UZ(18,"input",13),d.TgZ(19,"button",14),d._uU(20,"Search"),d.qZA(),d.qZA(),d.qZA(),d._UZ(21,"div"),d.YNc(22,Pw,4,2,"div",15),d.TgZ(23,"div",16),d.YNc(24,wP,2,0,"button",17),d.qZA(),d.TgZ(25,"p"),d._uU(26,"algo"),d.qZA(),d.TgZ(27,"a"),d._uU(28,"Desconectarse"),d.qZA(),d.qZA()),2&t&&(d.xp6(8),d.Q6J("routerLinkActiveOptions",d.DdM(3,la)),d.xp6(14),d.Q6J("ngIf",r.authS.isLogged||r.autentification.isLogged),d.xp6(2),d.Q6J("ngIf",r.authS.isLogged||r.autentification.isLogged))},directives:[Mm,Rl,Fl,Yi,Qm,Ei],styles:["#foto[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:10px}h5[_ngcontent-%COMP%]{color:#ffebcd;font-size:10px;margin:5px}"]}),n})(),Fk=(()=>{class n{constructor(){this.title="ProyectoUA1Joaquin"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=d.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,template:function(t,r){1&t&&(d._UZ(0,"app-header"),d.TgZ(1,"div"),d._UZ(2,"router-outlet"),d.qZA())},directives:[CP,kh],styles:[""]}),n})();const rA_firebaseConfig={apiKey:"AIzaSyBN402idjDp3QD3PDtwcnZmEcxxP11XaEw",authDomain:"proyectoua1joaquin.firebaseapp.com",databaseURL:"https://proyectoua1joaquin-default-rtdb.europe-west1.firebasedatabase.app",projectId:"proyectoua1joaquin",storageBucket:"proyectoua1joaquin.appspot.com",messagingSenderId:"191938892441",appId:"1:191938892441:web:c4115918a156bdbde41e08",measurementId:"G-MCLXX709FR"};function iA(){return n=>n.lift(new bP)}class bP{call(e,t){return t.subscribe(new IP(e))}}class IP extends mr.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Ke,TP="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Jl={},py=py||{},It=TP||self;function gy(){}function my(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Tg(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var _y="closure_uid_"+(1e9*Math.random()>>>0),sA=0;function DP(n,e,t){return n.call.apply(n.bind,arguments)}function AP(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Yr(n,e,t){return(Yr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?DP:AP).apply(null,arguments)}function Xl(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ur(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,l){for(var h=Array(arguments.length-2),p=2;p<arguments.length;p++)h[p-2]=arguments[p];return e.prototype[o].apply(r,h)}}function Zu(){this.s=this.s,this.o=this.o}var xP={};Zu.prototype.s=!1,Zu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function(n){return Object.prototype.hasOwnProperty.call(n,_y)&&n[_y]||(n[_y]=++sA)}(this);delete xP[n]}},Zu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const NP=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},RP=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let l=0;l<r;l++)l in o&&e.call(t,o[l],l,n)};function Mw(n){return Array.prototype.concat.apply([],arguments)}function yy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function vy(n){return/^[\s\xa0]*$/.test(n)}var Ni,oA=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function ns(n,e){return-1!=n.indexOf(e)}function Ow(n,e){return n<e?-1:n>e?1:0}e:{var PP=It.navigator;if(PP){var MP=PP.userAgent;if(MP){Ni=MP;break e}}Ni=""}function kw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Ey(n){const e={};for(const t in n)e[t]=n[t];return e}var Br="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function OP(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let l=0;l<Br.length;l++)t=Br[l],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function wy(n){return wy[" "](n),n}wy[" "]=gy;var Rf,kP=ns(Ni,"Opera"),Gu=ns(Ni,"Trident")||ns(Ni,"MSIE"),uA=ns(Ni,"Edge"),Fw=uA||Gu,Lw=ns(Ni,"Gecko")&&!(ns(Ni.toLowerCase(),"webkit")&&!ns(Ni,"Edge"))&&!(ns(Ni,"Trident")||ns(Ni,"MSIE"))&&!ns(Ni,"Edge"),Ad=ns(Ni.toLowerCase(),"webkit")&&!ns(Ni,"Edge");function Vw(){var n=It.document;return n?n.documentMode:void 0}e:{var Dg="",Uw=function(){var n=Ni;return Lw?/rv:([^\);]+)(\)|;)/.exec(n):uA?/Edge\/([\d\.]+)/.exec(n):Gu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Ad?/WebKit\/(\S+)/.exec(n):kP?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(Uw&&(Dg=Uw?Uw[1]:""),Gu){var Pf=Vw();if(null!=Pf&&Pf>parseFloat(Dg)){Rf=String(Pf);break e}}Rf=Dg}var FP={};function Bw(){return e=FP,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let n=0;const e=oA(String(Rf)).split("."),t=oA("9").split("."),r=Math.max(e.length,t.length);for(let h=0;0==n&&h<r;h++){var o=e[h]||"",l=t[h]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],l=/(\d*)(\D*)(.*)/.exec(l)||["","","",""],0==o[0].length&&0==l[0].length)break;n=Ow(0==o[1].length?0:parseInt(o[1],10),0==l[1].length?0:parseInt(l[1],10))||Ow(0==o[2].length,0==l[2].length)||Ow(o[2],l[2]),o=o[3],l=l[3]}while(0==n)}return 0<=n}();var e}var Uk=It.document&&Gu&&(Vw()||parseInt(Rf,10))||void 0,LP=function(){if(!It.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{It.addEventListener("test",gy,e),It.removeEventListener("test",gy,e)}catch(t){}return n}();function Ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function by(n,e){if(Ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Lw){e:{try{wy(e.nodeName);var o=!0;break e}catch(l){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Iy[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&by.Z.h.call(this)}}Ri.prototype.h=function(){this.defaultPrevented=!0},Ur(by,Ri);var Iy={2:"touch",3:"pen",4:"mouse"};by.prototype.h=function(){by.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ag="closure_listenable_"+(1e6*Math.random()|0),Bk=0;function jk(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++Bk,this.ca=this.fa=!1}function jw(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Ty(n){this.src=n,this.g={},this.h=0}function $w(n,e){var t=e.type;if(t in n.g){var l,r=n.g[t],o=NP(r,e);(l=0<=o)&&Array.prototype.splice.call(r,o,1),l&&(jw(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Hw(n,e,t,r){for(var o=0;o<n.length;++o){var l=n[o];if(!l.ca&&l.listener==e&&l.capture==!!t&&l.ia==r)return o}return-1}Ty.prototype.add=function(n,e,t,r,o){var l=n.toString();(n=this.g[l])||(n=this.g[l]=[],this.h++);var h=Hw(n,e,r,o);return-1<h?(e=n[h],t||(e.fa=!1)):((e=new jk(e,this.src,l,!!r,o)).fa=t,n.push(e)),e};var qw="closure_lm_"+(1e6*Math.random()|0),Zw={};function VP(n,e,t,r,o){if(r&&r.once)return cA(n,e,t,r,o);if(Array.isArray(e)){for(var l=0;l<e.length;l++)VP(n,e[l],t,r,o);return null}return t=zw(t),n&&n[Ag]?n.N(e,t,Tg(r)?!!r.capture:!!r,o):lA(n,e,t,!1,r,o)}function lA(n,e,t,r,o,l){if(!e)throw Error("Invalid event type");var h=Tg(o)?!!o.capture:!!o,p=Gw(n);if(p||(n[qw]=p=new Ty(n)),(t=p.add(e,t,r,h,l)).proxy)return t;if(r=function(){var e=jP;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)LP||(o=h),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(hA(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function cA(n,e,t,r,o){if(Array.isArray(e)){for(var l=0;l<e.length;l++)cA(n,e[l],t,r,o);return null}return t=zw(t),n&&n[Ag]?n.O(e,t,Tg(r)?!!r.capture:!!r,o):lA(n,e,t,!0,r,o)}function BP(n,e,t,r,o){if(Array.isArray(e))for(var l=0;l<e.length;l++)BP(n,e[l],t,r,o);else r=Tg(r)?!!r.capture:!!r,t=zw(t),n&&n[Ag]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Hw(l=n.g[e],t,r,o))&&(jw(l[t]),Array.prototype.splice.call(l,t,1),0==l.length&&(delete n.g[e],n.h--))):n&&(n=Gw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Hw(e,t,r,o)),(t=-1<n?e[n]:null)&&dA(t))}function dA(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Ag])$w(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(hA(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Gw(e))?($w(t,n),0==t.h&&(t.src=null,e[qw]=null)):jw(n)}}}function hA(n){return n in Zw?Zw[n]:Zw[n]="on"+n}function jP(n,e){if(n.ca)n=!0;else{e=new by(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&dA(n),n=t.call(r,e)}return n}function Gw(n){return(n=n[qw])instanceof Ty?n:null}var Ww="__closure_events_fn_"+(1e9*Math.random()>>>0);function zw(n){return"function"==typeof n?n:(n[Ww]||(n[Ww]=function(e){return n.handleEvent(e)}),n[Ww])}function Pn(){Zu.call(this),this.i=new Ty(this),this.P=this,this.I=null}function fi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ri(e,n);else if(e instanceof Ri)e.target=e.target||n;else{var o=e;OP(e=new Ri(r,n),o)}if(o=!0,t)for(var l=t.length-1;0<=l;l--){var h=e.g=t[l];o=Dy(h,r,!0,e)&&o}if(o=Dy(h=e.g=n,r,!0,e)&&o,o=Dy(h,r,!1,e)&&o,t)for(l=0;l<t.length;l++)o=Dy(h=e.g=t[l],r,!1,e)&&o}function Dy(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,l=0;l<e.length;++l){var h=e[l];if(h&&!h.ca&&h.capture==t){var p=h.listener,v=h.ia||h.src;h.fa&&$w(n.i,h),o=!1!==p.call(v,r)&&o}}return o&&!r.defaultPrevented}Ur(Pn,Zu),Pn.prototype[Ag]=!0,Pn.prototype.removeEventListener=function(n,e,t,r){BP(this,n,e,t,r)},Pn.prototype.M=function(){if(Pn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)jw(t[r]);delete n.g[e],n.h--}}this.I=null},Pn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Pn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Kw=It.JSON.stringify;function $P(){var n=ZP;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ay,fA=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new HP,n=>n.reset());class HP{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function qP(n){It.setTimeout(()=>{throw n},0)}function Sd(n,e){Ay||function(){var n=It.Promise.resolve(void 0);Ay=function(){n.then(qk)}}(),Yw||(Ay(),Yw=!0),ZP.add(n,e)}var Yw=!1,ZP=new class{constructor(){this.h=this.g=null}add(e,t){const r=fA.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function qk(){for(var n;n=$P();){try{n.h.call(n.g)}catch(t){qP(t)}var e=fA;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yw=!1}function Qw(n,e){Pn.call(this),this.h=n||1,this.g=e||It,this.j=Yr(this.kb,this),this.l=Date.now()}function Sg(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Jw(n,e,t){if("function"==typeof n)t&&(n=Yr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Yr(n.handleEvent,n)}return 2147483647<Number(e)?-1:It.setTimeout(n,e||0)}function pA(n){n.g=Jw(()=>{n.g=null,n.i&&(n.i=!1,pA(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ur(Qw,Pn),(Ke=Qw.prototype).da=!1,Ke.S=null,Ke.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),fi(this,"tick"),this.da&&(Sg(this),this.start()))}},Ke.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ke.M=function(){Qw.Z.M.call(this),Sg(this),delete this.g};class GP extends Zu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:pA(this)}M(){super.M(),this.g&&(It.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sy(n){Zu.call(this),this.h=n,this.g={}}Ur(Sy,Zu);var gA=[];function mA(n,e,t,r){Array.isArray(t)||(t&&(gA[0]=t.toString()),t=gA);for(var o=0;o<t.length;o++){var l=VP(e,t[o],r||n.handleEvent,!1,n.h||n);if(!l)break;n.g[l.key]=l}}function _A(n){kw(n.g,function(e,t){this.g.hasOwnProperty(t)&&dA(e)},n),n.g={}}function Ts(){this.g=!0}function Mf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var l=o[0];if("noop"!=l&&"stop"!=l&&"close"!=l)for(var h=1;h<o.length;h++)o[h]=""}}}return Kw(t)}catch(p){return e}}(n,t)+(r?" "+r:"")})}Sy.prototype.M=function(){Sy.Z.M.call(this),_A(this)},Sy.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ts.prototype.Aa=function(){this.g=!1},Ts.prototype.info=function(){};var ec={},xy=null;function Of(){return xy=xy||new Pn}function Ny(n){Ri.call(this,ec.Ma,n)}function tc(n){const e=Of();fi(e,new Ny(e,n))}function xg(n,e){Ri.call(this,ec.STAT_EVENT,n),this.stat=e}function Pi(n){const e=Of();fi(e,new xg(e,n))}function Xw(n,e){Ri.call(this,ec.Na,n),this.size=e}function Ng(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return It.setTimeout(function(){n()},e)}ec.Ma="serverreachability",Ur(Ny,Ri),ec.STAT_EVENT="statevent",Ur(xg,Ri),ec.Na="timingevent",Ur(Xw,Ri);var Ry={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},eC={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function tC(){}function CA(){}tC.prototype.h=null;var Nd,xd={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function nC(){Ri.call(this,"d")}function pi(){Ri.call(this,"c")}function Rd(){}function kf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Sy(this),this.P=rC,this.W=new Qw(n=Fw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Rg}function Rg(){this.i=null,this.g="",this.h=!1}Ur(nC,Ri),Ur(pi,Ri),Ur(Rd,tC),Rd.prototype.g=function(){return new XMLHttpRequest},Rd.prototype.i=function(){return{}},Nd=new Rd;var rC=45e3,Py={},Pd={};function iC(n,e,t){n.K=1,n.v=zu(Wu(e)),n.s=t,n.U=!0,bA(n,null)}function bA(n,e){n.F=Date.now(),Pg(n),n.A=Wu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),PA(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Rg,n.g=iF(n.l,t?e:null,!n.s),0<n.O&&(n.L=new GP(Yr(n.Ia,n,n.g),n.O)),mA(n.V,n.g,"readystatechange",n.gb),e=n.H?Ey(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),tc(1),function(n,e,t,r,o,l){n.info(function(){if(n.g)if(l)for(var h="",p=l.split("&"),v=0;v<p.length;v++){var b=p[v].split("=");if(1<b.length){var A=b[0];b=b[1];var N=A.split("_");h=2<=N.length&&"type"==N[1]?h+(A+"=")+b+"&":h+(A+"=redacted&")}}else h=null;else h=l;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+h})}(n.j,n.u,n.A,n.m,n.X,n.s)}function IA(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function TA(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=DA(n,t),o==Pd){4==e&&(n.o=4,Pi(14),r=!1),Mf(n.j,n.m,null,"[Incomplete Response]");break}if(o==Py){n.o=4,Pi(15),Mf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Mf(n.j,n.m,o,null),Mg(n,o)}IA(n)&&o!=Pd&&o!=Py&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),rM(e),e.L=!0,Pi(11))):(Mf(n.j,n.m,t,"[Invalid Chunked Response]"),ca(n),No(n))}function DA(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Pd:(t=Number(e.substring(t,r)),isNaN(t)?Py:(r+=1)+t>e.length?Pd:(e=e.substr(r,t),n.C=r+t,e))}function Pg(n){n.Y=Date.now()+n.P,AA(n,n.P)}function AA(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ng(Yr(n.eb,n),e)}function My(n){n.B&&(It.clearTimeout(n.B),n.B=null)}function No(n){0==n.l.G||n.I||eF(n.l,n)}function ca(n){My(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Sg(n.W),_A(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Mg(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||OA(t.i,n)))if(t.I=n.N,!n.J&&OA(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(b){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Ng(Yr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;VA(t),Ku(t)}nM(t),Pi(18)}if(1>=eM(t.i)&&t.ka){try{t.ka()}catch(b){}t.ka=void 0}}else Vg(t,11)}else if((n.J||t.g==n)&&VA(t),!vy(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let b=o[e];if(t.U=b[0],b=b[1],2==t.G)if("c"==b[0]){t.J=b[1],t.la=b[2];const A=b[3];null!=A&&(t.ma=A,t.h.info("VER="+t.ma));const N=b[4];null!=N&&(t.za=N,t.h.info("SVER="+t.za));const L=b[5];null!=L&&"number"==typeof L&&0<L&&(t.K=r=1.5*L,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const q=n.g;if(q){const ae=q.g?q.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ae){var l=r.i;!l.g&&(ns(ae,"spdy")||ns(ae,"quic")||ns(ae,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(kA(l,l.h),l.h=null))}if(r.D){const Ae=q.g?q.g.getResponseHeader("X-HTTP-Session-Id"):null;Ae&&(r.sa=Ae,Bn(r.F,r.D,Ae))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var h=n;if((r=t).oa=rF(r,r.H?r.la:null,r.W),h.J){tM(r.i,h);var p=h,v=r.K;v&&p.setTimeout(v),p.B&&(My(p),Pg(p)),r.g=h}else Jk(r);0<t.l.length&&Bf(t)}else"stop"!=b[0]&&"close"!=b[0]||Vg(t,7);else 3==t.G&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Vg(t,7):rc(t):"noop"!=b[0]&&t.j&&t.j.wa(b),t.A=0)}tc(4)}catch(b){}}function sC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(my(n)||"string"==typeof n)RP(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(my(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;o=(r=function(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(my(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n)).length;for(var l=0;l<o;l++)e.call(void 0,r[l],t&&t[l],n)}}function Ff(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Ff)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function Og(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Md(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)Md(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function Md(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ke=kf.prototype).setTimeout=function(n){this.P=n},Ke.gb=function(n){n=n.target;const e=this.L;e&&3==ze(n)?e.l():this.Ia(n)},Ke.Ia=function(n){try{if(n==this.g)e:{const A=ze(this.g);var e=this.g.Da();const N=this.g.ba();if(!(3>A)&&(3!=A||Fw||this.g&&(this.h.h||this.g.ga()||pt(this.g)))){this.I||4!=A||7==e||tc(8==e||0>=N?3:2),My(this);var t=this.g.ba();this.N=t;t:if(IA(this)){var r=pt(this.g);n="";var o=r.length,l=4==ze(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ca(this),No(this);var h="";break t}this.h.i=new It.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:l&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,h=this.h.g}else h=this.g.ga();if(this.i=200==t,function(n,e,t,r,o,l,h){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+l+" "+h})}(this.j,this.u,this.A,this.m,this.X,A,t),this.i){if(this.$&&!this.J){t:{if(this.g){var p,v=this.g;if((p=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vy(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,Pi(12),ca(this),No(this);break e}Mf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Mg(this,t)}this.U?(TA(this,A,h),Fw&&this.i&&3==A&&(mA(this.V,this.W,"tick",this.fb),this.W.start())):(Mf(this.j,this.m,h,null),Mg(this,h)),4==A&&ca(this),this.i&&!this.I&&(4==A?eF(this.l,this):(this.i=!1,Pg(this)))}else 400==t&&0<h.indexOf("Unknown SID")?(this.o=3,Pi(12)):(this.o=0,Pi(13)),ca(this),No(this)}}}catch(A){}},Ke.fb=function(){if(this.g){var n=ze(this.g),e=this.g.ga();this.C<e.length&&(My(this),TA(this,n,e),this.i&&4!=n&&Pg(this))}},Ke.cancel=function(){this.I=!0,ca(this)},Ke.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(tc(3),Pi(17)),ca(this),this.o=2,No(this)):AA(this,this.Y-n)},(Ke=Ff.prototype).R=function(){Og(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ke.T=function(){return Og(this),this.g.concat()},Ke.get=function(n,e){return Md(this.h,n)?this.h[n]:e},Ke.set=function(n,e){Md(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ke.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],l=this.get(o);n.call(e,l,o,this)}};var oC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Od(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Od){this.g=void 0!==e?e:n.g,Oy(this,n.j),this.s=n.s,Ro(this,n.i),nc(this,n.m),this.l=n.l,e=n.h;var t=new Vf;t.i=e.i,e.g&&(t.g=new Ff(e.g),t.h=e.h),kd(this,t),this.o=n.o}else n&&(t=String(n).match(oC))?(this.g=!!e,Oy(this,t[1]||"",!0),this.s=kg(t[2]||""),Ro(this,t[3]||"",!0),nc(this,t[4]),this.l=kg(t[5]||"",!0),kd(this,t[6]||"",!0),this.o=kg(t[7]||"")):(this.g=!!e,this.h=new Vf(null,this.g))}function Wu(n){return new Od(n)}function Oy(n,e,t){n.j=t?kg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ro(n,e,t){n.i=t?kg(e,!0):e}function nc(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function kd(n,e,t){e instanceof Vf?(n.h=e,function(n,e){e&&!n.j&&(Ds(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(ky(this,r),PA(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=Lf(e,YP)),n.h=new Vf(e,n.g))}function Bn(n,e,t){n.h.set(e,t)}function zu(n){return Bn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function kg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Lf(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,xA),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function xA(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Od.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Lf(e,aC,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Lf(e,aC,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(Lf(t,"/"==t.charAt(0)?uC:NA,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Lf(t,QP)),n.join("")};var aC=/[#\/\?@]/g,NA=/[#\?:]/g,uC=/[#\?]/g,YP=/[#\?@]/g,QP=/#/g;function Vf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ds(n){n.g||(n.g=new Ff,n.h=0,n.i&&function(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var l=n[t].substring(0,r);o=n[t].substring(r+1)}else l=n[t];e(l,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function ky(n,e){Ds(n),e=Fg(n,e),Md(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Md((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&Og(n)))}function RA(n,e){return Ds(n),e=Fg(n,e),Md(n.g.h,e)}function PA(n,e,t){ky(n,e),0<t.length&&(n.i=null,n.g.set(Fg(n,e),yy(t)),n.h+=t.length)}function Fg(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function JP(n){this.l=n||XP,n=It.PerformanceNavigationTiming?0<(n=It.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(It.g&&It.g.Ea&&It.g.Ea()&&It.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ke=Vf.prototype).add=function(n,e){Ds(this),this.i=null,n=Fg(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ke.forEach=function(n,e){Ds(this),this.g.forEach(function(t,r){RP(t,function(o){n.call(e,o,r,this)},this)},this)},Ke.T=function(){Ds(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],l=0;l<o.length;l++)t.push(e[r]);return t},Ke.R=function(n){Ds(this);var e=[];if("string"==typeof n)RA(this,n)&&(e=Mw(e,this.g.get(Fg(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Mw(e,n[t])}return e},Ke.set=function(n,e){return Ds(this),this.i=null,RA(this,n=Fg(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ke.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ke.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var l=0;l<r.length;l++){var h=o;""!==r[l]&&(h+="="+encodeURIComponent(String(r[l]))),n.push(h)}}return this.i=n.join("&")};var XP=10;function MA(n){return!!n.h||!!n.g&&n.g.size>=n.j}function eM(n){return n.h?1:n.g?n.g.size:0}function OA(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kA(n,e){n.g?n.g.add(e):n.h=e}function tM(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function FA(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return yy(n.i)}function LA(){}function zk(){this.g=new LA}function Kk(n,e,t){const r=t||"";try{sC(n,function(o,l){let h=o;Tg(o)&&(h=Kw(o)),e.push(r+l+"="+encodeURIComponent(h))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function i(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(l){}}function s(n){this.l=n.$b||null,this.j=n.ib||!1}function a(n,e){Pn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=u,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}JP.prototype.cancel=function(){if(this.i=FA(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},LA.prototype.stringify=function(n){return It.JSON.stringify(n,void 0)},LA.prototype.parse=function(n){return It.JSON.parse(n,void 0)},Ur(s,tC),s.prototype.g=function(){return new a(this.l,this.j)},s.prototype.i=function(n){return function(){return n}}({}),Ur(a,Pn);var u=0;function c(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function f(n){n.readyState=4,n.l=null,n.j=null,n.A=null,m(n)}function m(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ke=a.prototype).open=function(n,e){if(this.readyState!=u)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,m(this)},Ke.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||It).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ke.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,f(this)),this.readyState=u},Ke.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,m(this)),this.g&&(this.readyState=3,m(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==It.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;c(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ke.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?f(this):m(this),3==this.readyState&&c(this)}},Ke.Ua=function(n){this.g&&(this.response=this.responseText=n,f(this))},Ke.Ta=function(n){this.g&&(this.response=n,f(this))},Ke.ha=function(){this.g&&f(this)},Ke.setRequestHeader=function(n,e){this.v.append(n,e)},Ke.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ke.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(a.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var y=It.JSON.parse;function w(n){Pn.call(this),this.headers=new Ff,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=T,this.K=this.L=!1}Ur(w,Pn);var T="",S=/^https?$/i,M=["POST","PUT"];function Z(n){return"content-type"==n.toLowerCase()}function J(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,he(n),Pe(n)}function he(n){n.D||(n.D=!0,fi(n,"complete"),fi(n,"error"))}function ie(n){if(n.h&&void 0!==py&&(!n.C[1]||4!=ze(n)||2!=n.ba()))if(n.v&&4==ze(n))Jw(n.Fa,0,n);else if(fi(n,"readystatechange"),4==ze(n)){n.h=!1;try{const p=n.ba();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(oC)[1]||null;if(!o&&It.self&&It.self.location){var l=It.self.location.protocol;o=l.substr(0,l.length-1)}r=!S.test(o?o.toLowerCase():"")}t=r}if(t)fi(n,"complete"),fi(n,"success");else{n.m=6;try{var h=2<ze(n)?n.g.statusText:""}catch(v){h=""}n.j=h+" ["+n.ba()+"]",he(n)}}finally{Pe(n)}}}function Pe(n,e){if(n.g){we(n);const t=n.g,r=n.C[0]?gy:null;n.g=null,n.C=null,e||fi(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function we(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(It.clearTimeout(n.A),n.A=null)}function ze(n){return n.g?n.g.readyState:0}function pt(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case T:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function _r(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function(n){let e="";return kw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Bn(n,e,t))}function Mi(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Uf(n){this.za=0,this.l=[],this.h=new Ts,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Mi("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Mi("baseRetryDelayMs",5e3,n),this.$a=Mi("retryDelaySeedMs",1e4,n),this.Ya=Mi("forwardChannelMaxRetries",2,n),this.ra=Mi("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new JP(n&&n.concurrentRequestLimit),this.Ca=new zk,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function rc(n){if(Fd(n),3==n.G){var e=n.V++,t=Wu(n.F);Bn(t,"SID",n.J),Bn(t,"RID",e),Bn(t,"TYPE","terminate"),Ld(n,t),(e=new kf(n,n.h,e,void 0)).K=2,e.v=zu(Wu(t)),t=!1,It.navigator&&It.navigator.sendBeacon&&(t=It.navigator.sendBeacon(e.v.toString(),"")),!t&&It.Image&&((new Image).src=e.v,t=!0),t||(e.g=iF(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Pg(e)}nF(n)}function Ku(n){n.g&&(rM(n),n.g.cancel(),n.g=null)}function Fd(n){Ku(n),n.u&&(It.clearTimeout(n.u),n.u=null),VA(n),n.i.cancel(),n.m&&("number"==typeof n.m&&It.clearTimeout(n.m),n.m=null)}function Lg(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Bf(n)}function Bf(n){MA(n.i)||n.m||(n.m=!0,Sd(n.Ha,n),n.C=0)}function Fy(n,e){var t;t=e?e.m:n.V++;const r=Wu(n.F);Bn(r,"SID",n.J),Bn(r,"RID",t),Bn(r,"AID",n.U),Ld(n,r),n.o&&n.s&&_r(r,n.o,n.s),t=new kf(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=Qk(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),kA(n.i,t),iC(t,r,e)}function Ld(n,e){n.j&&sC({},function(t,r){Bn(e,r,t)})}function Qk(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Yr(n.j.Oa,n.j,n):null;e:{var o=n.l;let l=-1;for(;;){const h=["count="+t];-1==l?0<t?(l=o[0].h,h.push("ofs="+l)):l=0:h.push("ofs="+l);let p=!0;for(let v=0;v<t;v++){let b=o[v].h;const A=o[v].g;if(b-=l,0>b)l=Math.max(0,o[v].h-100),p=!1;else try{Kk(A,h,"req"+b+"_")}catch(N){r&&r(A)}}if(p){r=h.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Jk(n){n.g||n.u||(n.Y=1,Sd(n.Ga,n),n.A=0)}function nM(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Ng(Yr(n.Ga,n),tF(n,n.A)),n.A++,0))}function rM(n){null!=n.B&&(It.clearTimeout(n.B),n.B=null)}function Xk(n){n.g=new kf(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Wu(n.oa);Bn(e,"RID","rpc"),Bn(e,"SID",n.J),Bn(e,"CI",n.N?"0":"1"),Bn(e,"AID",n.U),Ld(n,e),Bn(e,"TYPE","xmlhttp"),n.o&&n.s&&_r(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=zu(Wu(e)),t.s=null,t.U=!0,bA(t,n)}function VA(n){null!=n.v&&(It.clearTimeout(n.v),n.v=null)}function eF(n,e){var t=null;if(n.g==e){VA(n),rM(n),n.g=null;var r=2}else{if(!OA(n.i,e))return;t=e.D,tM(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;fi(r=Of(),new Xw(r,t,e,o)),Bf(n)}else Jk(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function(n,e){return!(eM(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Ng(Yr(n.Ha,n,e),tF(n,n.C)),n.C++,0)))}(n,e)||2==r&&nM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Vg(n,5);break;case 4:Vg(n,10);break;case 3:Vg(n,6);break;default:Vg(n,2)}}function tF(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Vg(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Yr(n.jb,n);t||(t=new Od("//www.google.com/images/cleardot.gif"),It.location&&"http"==It.location.protocol||Oy(t,"https"),zu(t)),function(n,e){const t=new Ts;if(It.Image){const r=new Image;r.onload=Xl(i,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Xl(i,t,r,"TestLoadImage: error",!1,e),r.onabort=Xl(i,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Xl(i,t,r,"TestLoadImage: timeout",!1,e),It.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Pi(2);n.G=0,n.j&&n.j.va(e),nF(n),Fd(n)}function nF(n){n.G=0,n.I=-1,n.j&&((0!=FA(n.i).length||0!=n.l.length)&&(n.i.i.length=0,yy(n.l),n.l.length=0),n.j.ua())}function rF(n,e,t){let r=function(n){return n instanceof Od?Wu(n):new Od(n,void 0)}(t);if(""!=r.i)e&&Ro(r,e+"."+r.i),nc(r,r.m);else{const o=It.location;r=function(n,e,t,r){var o=new Od(null,void 0);return n&&Oy(o,n),e&&Ro(o,e),t&&nc(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&kw(n.aa,function(o,l){Bn(r,l,o)}),t=n.sa,(e=n.D)&&t&&Bn(r,e,t),Bn(r,"VER",n.ma),Ld(n,r),r}function iF(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new w(t&&n.Ba&&!n.qa?new s({ib:!0}):n.qa)).L=n.H,e}function sF(){}function UA(){if(Gu&&!(10<=Number(Uk)))throw Error("Environmental error: no available transport.")}function da(n,e){Pn.call(this),this.g=new Uf(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!vy(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vy(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ly(this)}function oF(n){nC.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function aF(){pi.call(this),this.status=1}function Ly(n){this.g=n}(Ke=w.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Nd.g(),this.C=function(n){return n.h||(n.h=n.i())}(this.u?this.u:Nd),this.g.onreadystatechange=Yr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(l){return void J(this,l)}n=t||"";const o=new Ff(this.headers);r&&sC(r,function(l,h){o.set(h,l)}),r=function(n){e:{var e=Z;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=It.FormData&&n instanceof It.FormData,!(0<=NP(M,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(l,h){this.g.setRequestHeader(h,l)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{we(this),0<this.B&&((this.K=function(n){return Gu&&Bw()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Yr(this.pa,this)):this.A=Jw(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(l){J(this,l)}},Ke.pa=function(){void 0!==py&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fi(this,"timeout"),this.abort(8))},Ke.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fi(this,"complete"),fi(this,"abort"),Pe(this))},Ke.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pe(this,!0)),w.Z.M.call(this)},Ke.Fa=function(){this.s||(this.F||this.v||this.l?ie(this):this.cb())},Ke.cb=function(){ie(this)},Ke.ba=function(){try{return 2<ze(this)?this.g.status:-1}catch(n){return-1}},Ke.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ke.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),y(e)}},Ke.Da=function(){return this.m},Ke.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ke=Uf.prototype).ma=8,Ke.G=1,Ke.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ke.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new kf(this,this.h,n,void 0);let l=this.s;if(this.P&&(l?(l=Ey(l),OP(l,this.P)):l=this.P),null===this.o&&(o.H=l),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Qk(this,o,e),Bn(t=Wu(this.F),"RID",n),Bn(t,"CVER",22),this.D&&Bn(t,"X-HTTP-Session-Id",this.D),Ld(this,t),this.o&&l&&_r(t,this.o,l),kA(this.i,o),this.Ra&&Bn(t,"TYPE","init"),this.ja?(Bn(t,"$req",e),Bn(t,"SID","null"),o.$=!0,iC(o,t,null)):iC(o,t,e),this.G=2}}else 3==this.G&&(n?Fy(this,n):0==this.l.length||MA(this.i)||Fy(this))},Ke.Ga=function(){if(this.u=null,Xk(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Ng(Yr(this.bb,this),n)}},Ke.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Pi(10),Ku(this),Xk(this))},Ke.ab=function(){null!=this.v&&(this.v=null,Ku(this),nM(this),Pi(19))},Ke.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Pi(2)):(this.h.info("Failed to ping google.com"),Pi(1))},(Ke=sF.prototype).xa=function(){},Ke.wa=function(){},Ke.va=function(){},Ke.ua=function(){},Ke.Oa=function(){},UA.prototype.g=function(n,e){return new da(n,e)},Ur(da,Pn),da.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Sd(Yr(n.hb,n,e))),Pi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=rF(n,null,n.W),Bf(n)},da.prototype.close=function(){rc(this.g)},da.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Lg(this.g,e)}else this.v?((e={}).__data__=Kw(n),Lg(this.g,e)):Lg(this.g,n)},da.prototype.M=function(){this.g.j=null,delete this.j,rc(this.g),delete this.g,da.Z.M.call(this)},Ur(oF,nC),Ur(aF,pi),Ur(Ly,sF),Ly.prototype.xa=function(){fi(this.g,"a")},Ly.prototype.wa=function(n){fi(this.g,new oF(n))},Ly.prototype.va=function(n){fi(this.g,new aF(n))},Ly.prototype.ua=function(){fi(this.g,"b")},UA.prototype.createWebChannel=UA.prototype.g,da.prototype.send=da.prototype.u,da.prototype.open=da.prototype.m,da.prototype.close=da.prototype.close,Ry.NO_ERROR=0,Ry.TIMEOUT=8,Ry.HTTP_ERROR=6,eC.COMPLETE="complete",CA.EventType=xd,xd.OPEN="a",xd.CLOSE="b",xd.ERROR="c",xd.MESSAGE="d",Pn.prototype.listen=Pn.prototype.N,w.prototype.listenOnce=w.prototype.O,w.prototype.getLastError=w.prototype.La,w.prototype.getLastErrorCode=w.prototype.Da,w.prototype.getStatus=w.prototype.ba,w.prototype.getResponseJson=w.prototype.Qa,w.prototype.getResponseText=w.prototype.ga,w.prototype.send=w.prototype.ea;var pU=Jl.createWebChannelTransport=function(){return new UA},gU=Jl.getStatEventTarget=function(){return Of()},iM=Jl.ErrorCode=Ry,mU=Jl.EventType=eC,_U=Jl.Event=ec,uF=Jl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},yU=Jl.FetchXmlHttpFactory=s,BA=Jl.WebChannel=CA,vU=Jl.XhrIo=w;const lF="@firebase/firestore";class rs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}rs.UNAUTHENTICATED=new rs(null),rs.GOOGLE_CREDENTIALS=new rs("google-credentials-uid"),rs.FIRST_PARTY=new rs("first-party-uid"),rs.MOCK_USER=new rs("mock-user");let Vy="9.3.0";const jf=new Ws.Yd("@firebase/firestore");function sM(){return jf.logLevel}function Be(n,...e){if(jf.logLevel<=Ws.in.DEBUG){const t=e.map(oM);jf.debug(`Firestore (${Vy}): ${n}`,...t)}}function Qr(n,...e){if(jf.logLevel<=Ws.in.ERROR){const t=e.map(oM);jf.error(`Firestore (${Vy}): ${n}`,...t)}}function cC(n,...e){if(jf.logLevel<=Ws.in.WARN){const t=e.map(oM);jf.warn(`Firestore (${Vy}): ${n}`,...t)}}function oM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${Vy}) INTERNAL ASSERTION FAILED: `+n;throw Qr(e),new Error(e)}function Ct(n,e){n||st()}function He(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class cF{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class CU{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(rs.UNAUTHENTICATED))}shutdown(){}}class bU{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class IU{constructor(e){this.t=e,this.currentUser=rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const l=b=>this.i!==o?(o=this.i,t(b)):Promise.resolve();let h=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),h.resolve(),h=new Oi,e.enqueueRetryable(()=>l(this.currentUser))};const p=()=>{const b=h;e.enqueueRetryable((0,ge.Z)(function*(){yield b.promise,yield l(r.currentUser)}))},v=b=>{Be("FirebaseCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>v(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?v(b):(Be("FirebaseCredentialsProvider","Auth not yet detected"),h.resolve(),h=new Oi)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new cF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new rs(e)}}class TU{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=rs.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class DU{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new TU(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(rs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ha{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.g(r),this.p=r=>t.writeSequenceNumber(r))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function AU(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ha.T=-1;class dF{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=AU(40);for(let l=0;l<o.length;++l)r.length<20&&o[l]<t&&(r+=e.charAt(o[l]%e.length))}return r}}function sn(n,e){return n<e?-1:n>e?1:0}function Uy(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function hF(n){return n+"\0"}class ki{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ki.fromMillis(Date.now())}static fromDate(e){return ki.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ki(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?sn(this.nanoseconds,e.nanoseconds):sn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ft{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ft(e)}static min(){return new Ft(new ki(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function fF(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ug(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class dC{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===dC.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof dC?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const l=e.get(o),h=t.get(o);if(l<h)return-1;if(l>h)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Dn extends dC{construct(e,t,r){return new Dn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Dn(t)}static emptyPath(){return new Dn([])}}const SU=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class is extends dC{construct(e,t,r){return new is(e,t,r)}static isValidIdentifier(e){return SU.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),is.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new is(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const l=()=>{if(0===r.length)throw new Me(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let h=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Me(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Me(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===p?(h=!h,o++):"."!==p||h?(r+=p,o++):(l(),o++)}if(l(),h)throw new Me(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new is(t)}static emptyPath(){return new is([])}}class By{constructor(e){this.fields=e,e.sort(is.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Uy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Fi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Fi(t)}static fromUint8Array(e){const t=function(r){let o="";for(let l=0;l<r.length;++l)o+=String.fromCharCode(r[l]);return o}(e);return new Fi(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return sn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fi.EMPTY_BYTE_STRING=new Fi("");const NU=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $f(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=NU.exec(n);if(Ct(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jr(n.seconds),nanos:Jr(n.nanos)}}function Jr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function jy(n){return"string"==typeof n?Fi.fromBase64String(n):Fi.fromUint8Array(n)}function aM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gF(n){const e=n.mapValue.fields.__previous_value__;return aM(e)?gF(e):e}function hC(n){const e=$f(n.mapValue.fields.__local_write_time__.timestampValue);return new ki(e.seconds,e.nanos)}function Bg(n){return null==n}function jA(n){return 0===n&&1/n==-1/0}function mF(n){return"number"==typeof n&&Number.isInteger(n)&&!jA(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class rt{constructor(e){this.path=e}static fromPath(e){return new rt(Dn.fromString(e))}static fromName(e){return new rt(Dn.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Dn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Dn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new rt(new Dn(e.slice()))}}function jg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?aM(n)?4:10:st()}function ic(n,e){const t=jg(n);if(t!==jg(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hC(n).isEqual(hC(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const l=$f(r.timestampValue),h=$f(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,jy(n.bytesValue).isEqual(jy(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Jr(r.geoPointValue.latitude)===Jr(o.geoPointValue.latitude)&&Jr(r.geoPointValue.longitude)===Jr(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Jr(r.integerValue)===Jr(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const l=Jr(r.doubleValue),h=Jr(o.doubleValue);return l===h?jA(l)===jA(h):isNaN(l)&&isNaN(h)}return!1}(n,e);case 9:return Uy(n.arrayValue.values||[],e.arrayValue.values||[],ic);case 10:return function(r,o){const l=r.mapValue.fields||{},h=o.mapValue.fields||{};if(fF(l)!==fF(h))return!1;for(const p in l)if(l.hasOwnProperty(p)&&(void 0===h[p]||!ic(l[p],h[p])))return!1;return!0}(n,e);default:return st()}var o}function fC(n,e){return void 0!==(n.values||[]).find(t=>ic(t,e))}function $y(n,e){const t=jg(n),r=jg(e);if(t!==r)return sn(t,r);switch(t){case 0:return 0;case 1:return sn(n.booleanValue,e.booleanValue);case 2:return function(o,l){const h=Jr(o.integerValue||o.doubleValue),p=Jr(l.integerValue||l.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return _F(n.timestampValue,e.timestampValue);case 4:return _F(hC(n),hC(e));case 5:return sn(n.stringValue,e.stringValue);case 6:return function(o,l){const h=jy(o),p=jy(l);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),p=l.split("/");for(let v=0;v<h.length&&v<p.length;v++){const b=sn(h[v],p[v]);if(0!==b)return b}return sn(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,l){const h=sn(Jr(o.latitude),Jr(l.latitude));return 0!==h?h:sn(Jr(o.longitude),Jr(l.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,l){const h=o.values||[],p=l.values||[];for(let v=0;v<h.length&&v<p.length;++v){const b=$y(h[v],p[v]);if(b)return b}return sn(h.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,l){const h=o.fields||{},p=Object.keys(h),v=l.fields||{},b=Object.keys(v);p.sort(),b.sort();for(let A=0;A<p.length&&A<b.length;++A){const N=sn(p[A],b[A]);if(0!==N)return N;const L=$y(h[p[A]],v[b[A]]);if(0!==L)return L}return sn(p.length,b.length)}(n.mapValue,e.mapValue);default:throw st()}}function _F(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return sn(n,e);const t=$f(n),r=$f(e),o=sn(t.seconds,r.seconds);return 0!==o?o:sn(t.nanos,r.nanos)}function uM(n){return lM(n)}function lM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=$f(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?jy(n.bytesValue).toBase64():"referenceValue"in n?rt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",l=!0;for(const h of r.values||[])l?l=!1:o+=",",o+=lM(h);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let l="{",h=!0;for(const p of o)h?h=!1:l+=",",l+=`${p}:${lM(r.fields[p])}`;return l+"}"}(n.mapValue):st();var e}function $A(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cM(n){return!!n&&"integerValue"in n}function dM(n){return!!n&&"arrayValue"in n}function yF(n){return!!n&&"nullValue"in n}function vF(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function HA(n){return!!n&&"mapValue"in n}function pC(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ug(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pC(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pC(n.arrayValue.values[t]);return e}return Object.assign({},n)}class As{constructor(e){this.value=e}static empty(){return new As({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!HA(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pC(t)}setAll(e){let t=is.emptyPath(),r={},o=[];e.forEach((h,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=p.popLast()}h?r[p.lastSegment()]=pC(h):o.push(p.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,o)}delete(e){const t=this.field(e.popLast());HA(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ic(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];HA(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Ug(t,(o,l)=>e[o]=l);for(const o of r)delete e[o]}clone(){return new As(pC(this.value))}}function EF(n){const e=[];return Ug(n.fields,(t,r)=>{const o=new is([t]);if(HA(r)){const l=EF(r.mapValue).fields;if(0===l.length)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)}),new By(e)}class hr{constructor(e,t,r,o,l){this.key=e,this.documentType=t,this.version=r,this.data=o,this.documentState=l}static newInvalidDocument(e){return new hr(e,0,Ft.min(),As.empty(),0)}static newFoundDocument(e,t,r){return new hr(e,1,t,r,0)}static newNoDocument(e,t){return new hr(e,2,t,As.empty(),0)}static newUnknownDocument(e,t){return new hr(e,3,t,As.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=As.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=As.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof hr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new hr(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class RU{constructor(e,t=null,r=[],o=[],l=null,h=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=l,this.startAt=h,this.endAt=p,this.A=null}}function wF(n,e=null,t=[],r=[],o=null,l=null,h=null){return new RU(n,e,t,r,o,l,h)}function gC(n){const e=He(n);if(null===e.A){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>function(n){return n.field.canonicalString()+n.op.toString()+uM(n.value)}(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Bg(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=GA(e.startAt)),e.endAt&&(t+="|ub:",t+=GA(e.endAt)),e.A=t}return e.A}function qA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!jU(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!ic(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!IF(n.startAt,e.startAt)&&IF(n.endAt,e.endAt)}function ZA(n){return rt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Js extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,r):new OU(e,t,r):"array-contains"===t?new LU(e,r):"in"===t?new VU(e,r):"not-in"===t?new UU(e,r):"array-contains-any"===t?new BU(e,r):new Js(e,t,r)}static R(e,t,r){return"in"===t?new kU(e,r):new FU(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P($y(t,this.value)):null!==t&&jg(this.value)===jg(t)&&this.P($y(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class OU extends Js{constructor(e,t,r){super(e,t,r),this.key=rt.fromName(r.referenceValue)}matches(e){const t=rt.comparator(e.key,this.key);return this.P(t)}}class kU extends Js{constructor(e,t){super(e,"in",t),this.keys=CF(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class FU extends Js{constructor(e,t){super(e,"not-in",t),this.keys=CF(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function CF(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>rt.fromName(r.referenceValue))}class LU extends Js{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return dM(t)&&fC(t.arrayValue,this.value)}}class VU extends Js{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fC(this.value.arrayValue,t)}}class UU extends Js{constructor(e,t){super(e,"not-in",t)}matches(e){if(fC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fC(this.value.arrayValue,t)}}class BU extends Js{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!dM(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>fC(this.value.arrayValue,r))}}class mC{constructor(e,t){this.position=e,this.before=t}}function GA(n){return`${n.before?"b":"a"}:${n.position.map(e=>uM(e)).join(",")}`}class Hy{constructor(e,t="asc"){this.field=e,this.dir=t}}function jU(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function bF(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const l=e[o],h=n.position[o];if(r=l.field.isKeyField()?rt.comparator(rt.fromName(h.referenceValue),t.key):$y(h,t.data.field(l.field)),"desc"===l.dir&&(r*=-1),0!==r)break}return n.before?r<=0:r<0}function IF(n,e){if(null===n)return null===e;if(null===e||n.before!==e.before||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ic(n.position[t],e.position[t]))return!1;return!0}class Vd{constructor(e,t=null,r=[],o=[],l=null,h="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=l,this.limitType=h,this.startAt=p,this.endAt=v,this.V=null,this.S=null}}function TF(n,e,t,r,o,l,h,p){return new Vd(n,e,t,r,o,l,h,p)}function qy(n){return new Vd(n)}function WA(n){return!Bg(n.limit)&&"F"===n.limitType}function zA(n){return!Bg(n.limit)&&"L"===n.limitType}function hM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function fM(n){for(const e of n.filters)if(e.v())return e.field;return null}function pM(n){return null!==n.collectionGroup}function Zy(n){const e=He(n);if(null===e.V){e.V=[];const t=fM(e),r=hM(e);if(null!==t&&null===r)t.isKeyField()||e.V.push(new Hy(t)),e.V.push(new Hy(is.keyField(),"asc"));else{let o=!1;for(const l of e.explicitOrderBy)e.V.push(l),l.field.isKeyField()&&(o=!0);if(!o){const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.V.push(new Hy(is.keyField(),l))}}}return e.V}function iu(n){const e=He(n);if(!e.S)if("F"===e.limitType)e.S=wF(e.path,e.collectionGroup,Zy(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const l of Zy(e))t.push(new Hy(l.field,"desc"===l.dir?"asc":"desc"));const r=e.endAt?new mC(e.endAt.position,!e.endAt.before):null,o=e.startAt?new mC(e.startAt.position,!e.startAt.before):null;e.S=wF(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.S}function DF(n,e,t){return new Vd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function _C(n,e){return qA(iu(n),iu(e))&&n.limitType===e.limitType}function AF(n){return`${gC(iu(n))}|lt:${n.limitType}`}function gM(n){return`Query(target=${function(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${uM(r.value)}`;var r}).join(", ")}]`),Bg(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: "+GA(n.startAt)),n.endAt&&(e+=", endAt: "+GA(n.endAt)),`Target(${e})`}(iu(n))}; limitType=${n.limitType})`}function yC(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):rt.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!bF(t.startAt,Zy(t),r)||t.endAt&&bF(t.endAt,Zy(t),r)));var t,r}function SF(n){return(e,t)=>{let r=!1;for(const o of Zy(n)){const l=$U(o,e,t);if(0!==l)return l;r=r||o.field.isKeyField()}return 0}}function $U(n,e,t){const r=n.field.isKeyField()?rt.comparator(e.key,t.key):function(o,l,h){const p=l.data.field(o),v=h.data.field(o);return null!==p&&null!==v?$y(p,v):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function xF(n,e){if(n.D){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:jA(e)?"-0":e}}function NF(n){return{integerValue:""+n}}function RF(n,e){return mF(e)?NF(e):xF(n,e)}class KA{constructor(){this._=void 0}}function HU(n,e,t){return n instanceof Gy?function(r,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(l.fields.__previous_value__=o),{mapValue:l}}(t,e):n instanceof $g?MF(n,e):n instanceof Hg?OF(n,e):function(r,o){const l=PF(r,o),h=kF(l)+kF(r.C);return cM(l)&&cM(r.C)?NF(h):xF(r.N,h)}(n,e)}function qU(n,e,t){return n instanceof $g?MF(n,e):n instanceof Hg?OF(n,e):t}function PF(n,e){return n instanceof Wy?cM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gy extends KA{}class $g extends KA{constructor(e){super(),this.elements=e}}function MF(n,e){const t=FF(e);for(const r of n.elements)t.some(o=>ic(o,r))||t.push(r);return{arrayValue:{values:t}}}class Hg extends KA{constructor(e){super(),this.elements=e}}function OF(n,e){let t=FF(e);for(const r of n.elements)t=t.filter(o=>!ic(o,r));return{arrayValue:{values:t}}}class Wy extends KA{constructor(e,t){super(),this.N=e,this.C=t}}function kF(n){return Jr(n.integerValue||n.doubleValue)}function FF(n){return dM(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class vC{constructor(e,t){this.field=e,this.transform=t}}class GU{constructor(e,t){this.version=e,this.transformResults=t}}class Xr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xr}static exists(e){return new Xr(void 0,e)}static updateTime(e){return new Xr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function YA(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class QA{}function WU(n,e,t){n instanceof EC?function(r,o,l){const h=r.value.clone(),p=BF(r.fieldTransforms,o,l.transformResults);h.setAll(p),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(n,e,t):n instanceof Hf?function(r,o,l){if(!YA(r.precondition,o))return void o.convertToUnknownDocument(l.version);const h=BF(r.fieldTransforms,o,l.transformResults),p=o.data;p.setAll(UF(r)),p.setAll(h),o.convertToFoundDocument(l.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function mM(n,e,t){var o;n instanceof EC?function(r,o,l){if(!YA(r.precondition,o))return;const h=r.value.clone(),p=jF(r.fieldTransforms,l,o);h.setAll(p),o.convertToFoundDocument(VF(o),h).setHasLocalMutations()}(n,e,t):n instanceof Hf?function(r,o,l){if(!YA(r.precondition,o))return;const h=jF(r.fieldTransforms,l,o),p=o.data;p.setAll(UF(r)),p.setAll(h),o.convertToFoundDocument(VF(o),p).setHasLocalMutations()}(n,e,t):YA(n.precondition,o=e)&&o.convertToNoDocument(Ft.min())}function zU(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),l=PF(r.transform,o||null);null!=l&&(null==t&&(t=As.empty()),t.set(r.field,l))}return t||null}function LF(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Uy(t,r,(o,l)=>function(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $g&&r instanceof $g||t instanceof Hg&&r instanceof Hg?Uy(t.elements,r.elements,ic):t instanceof Wy&&r instanceof Wy?ic(t.C,r.C):t instanceof Gy&&r instanceof Gy);var t,r}(o,l))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function VF(n){return n.isFoundDocument()?n.version:Ft.min()}class EC extends QA{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class Hf extends QA{constructor(e,t,r,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=l,this.type=1}}function UF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function BF(n,e,t){const r=new Map;Ct(n.length===t.length);for(let o=0;o<t.length;o++){const l=n[o],h=l.transform,p=e.data.field(l.field);r.set(l.field,qU(h,p,t[o]))}return r}function jF(n,e,t){const r=new Map;for(const o of n){const l=o.transform,h=t.data.field(o.field);r.set(o.field,HU(l,h,e))}return r}class wC extends QA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class _M extends QA{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class KU{constructor(e){this.count=e}}var ei,pn;function $F(n){switch(n){default:return st();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function HF(n){if(void 0===n)return Qr("GRPC error has no .code"),me.UNKNOWN;switch(n){case ei.OK:return me.OK;case ei.CANCELLED:return me.CANCELLED;case ei.UNKNOWN:return me.UNKNOWN;case ei.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case ei.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case ei.INTERNAL:return me.INTERNAL;case ei.UNAVAILABLE:return me.UNAVAILABLE;case ei.UNAUTHENTICATED:return me.UNAUTHENTICATED;case ei.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case ei.NOT_FOUND:return me.NOT_FOUND;case ei.ALREADY_EXISTS:return me.ALREADY_EXISTS;case ei.PERMISSION_DENIED:return me.PERMISSION_DENIED;case ei.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case ei.ABORTED:return me.ABORTED;case ei.OUT_OF_RANGE:return me.OUT_OF_RANGE;case ei.UNIMPLEMENTED:return me.UNIMPLEMENTED;case ei.DATA_LOSS:return me.DATA_LOSS;default:return st()}}(pn=ei||(ei={}))[pn.OK=0]="OK",pn[pn.CANCELLED=1]="CANCELLED",pn[pn.UNKNOWN=2]="UNKNOWN",pn[pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pn[pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pn[pn.NOT_FOUND=5]="NOT_FOUND",pn[pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",pn[pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",pn[pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",pn[pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pn[pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pn[pn.ABORTED=10]="ABORTED",pn[pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",pn[pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",pn[pn.INTERNAL=13]="INTERNAL",pn[pn.UNAVAILABLE=14]="UNAVAILABLE",pn[pn.DATA_LOSS=15]="DATA_LOSS";class gi{constructor(e,t){this.comparator=e,this.root=t||ss.EMPTY}insert(e,t){return new gi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ss.BLACK,null,null))}remove(e){return new gi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ss.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new JA(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new JA(this.root,e,this.comparator,!1)}getReverseIterator(){return new JA(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new JA(this.root,e,this.comparator,!0)}}class JA{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(0===l){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ss{constructor(e,t,r,o,l){this.key=e,this.value=t,this.color=null!=r?r:ss.RED,this.left=null!=o?o:ss.EMPTY,this.right=null!=l?l:ss.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,l){return new ss(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=l?l:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const l=r(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===l?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ss.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ss.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ss.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ss.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}ss.EMPTY=null,ss.RED=!0,ss.BLACK=!1,ss.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ss(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ar{constructor(e){this.comparator=e,this.data=new gi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qF(this.data.getIterator())}getIteratorFrom(e){return new qF(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Ar)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(0!==this.comparator(o,l))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ar(this.comparator);return t.data=e,t}}class qF{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const YU=new gi(rt.comparator);function su(){return YU}const QU=new gi(rt.comparator);function yM(){return QU}const JU=new gi(rt.comparator);function ZF(){return JU}const XU=new Ar(rt.comparator);function jn(...n){let e=XU;for(const t of n)e=e.add(t);return e}const e2=new Ar(sn);function XA(){return e2}class CC{constructor(e,t,r,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,bC.createSynthesizedTargetChangeForCurrentChange(e,t)),new CC(Ft.min(),r,XA(),su(),jn())}}class bC{constructor(e,t,r,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t){return new bC(Fi.EMPTY_BYTE_STRING,t,jn(),jn(),jn())}}class eS{constructor(e,t,r,o){this.k=e,this.removedTargetIds=t,this.key=r,this.$=o}}class GF{constructor(e,t){this.targetId=e,this.O=t}}class WF{constructor(e,t,r=Fi.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class zF{constructor(){this.F=0,this.M=YF(),this.L=Fi.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=jn(),t=jn(),r=jn();return this.M.forEach((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:st()}}),new bC(this.L,this.B,e,t,r)}G(){this.U=!1,this.M=YF()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class t2{constructor(e){this.tt=e,this.et=new Map,this.nt=su(),this.st=KF(),this.it=new Ar(sn)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const r=this.ut(t);switch(e.state){case 0:this.ht(t)&&r.j(e.resumeToken);break;case 1:r.X(),r.q||r.G(),r.j(e.resumeToken);break;case 2:r.X(),r.q||this.removeTarget(t);break;case 3:this.ht(t)&&(r.Z(),r.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),r.j(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((r,o)=>{this.ht(o)&&t(o)})}ft(e){const t=e.targetId,r=e.O.count,o=this.dt(t);if(o){const l=o.target;if(ZA(l))if(0===r){const h=new rt(l.path);this.ct(t,h,hr.newNoDocument(h,Ft.min()))}else Ct(1===r);else this.wt(t)!==r&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((l,h)=>{const p=this.dt(h);if(p){if(l.current&&ZA(p.target)){const v=new rt(p.target.path);null!==this.nt.get(v)||this.gt(h,v)||this.ct(h,v,hr.newNoDocument(v,e))}l.K&&(t.set(h,l.W()),l.G())}});let r=jn();this.st.forEach((l,h)=>{let p=!0;h.forEachWhile(v=>{const b=this.dt(v);return!b||2===b.purpose||(p=!1,!1)}),p&&(r=r.add(l))});const o=new CC(e,t,this.it,this.nt,r);return this.nt=su(),this.st=KF(),this.it=new Ar(sn),o}ot(e,t){if(!this.ht(e))return;const r=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,r),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,r){if(!this.ht(e))return;const o=this.ut(e);this.gt(e,t)?o.H(t,1):o.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),r&&(this.nt=this.nt.insert(t,r))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new zF,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Ar(sn),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new zF),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function KF(){return new gi(rt.comparator)}function YF(){return new gi(rt.comparator)}const n2={asc:"ASCENDING",desc:"DESCENDING"},r2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class i2{constructor(e,t){this.databaseId=e,this.D=t}}function IC(n,e){return n.D?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function QF(n,e){return n.D?e.toBase64():e.toUint8Array()}function s2(n,e){return IC(n,e.toTimestamp())}function Li(n){return Ct(!!n),Ft.fromTimestamp(function(e){const t=$f(e);return new ki(t.seconds,t.nanos)}(n))}function vM(n,e){return(t=n,new Dn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function JF(n){const e=Dn.fromString(n);return Ct(cL(e)),e}function TC(n,e){return vM(n.databaseId,e.path)}function sc(n,e){const t=JF(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new rt(eL(t))}function EM(n,e){return vM(n.databaseId,e)}function XF(n){const e=JF(n);return 4===e.length?Dn.emptyPath():eL(e)}function DC(n){return new Dn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function eL(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function tL(n,e,t){return{name:TC(n,e),fields:t.value.mapValue.fields}}function nL(n,e,t){const r=sc(n,e.name),o=Li(e.updateTime),l=new As({mapValue:{fields:e.fields}}),h=hr.newFoundDocument(r,o,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function tS(n,e){let t;if(e instanceof EC)t={update:tL(n,e.key,e.value)};else if(e instanceof wC)t={delete:TC(n,e.key)};else if(e instanceof Hf)t={update:tL(n,e.key,e.data),updateMask:p2(e.fieldMask)};else{if(!(e instanceof _M))return st();t={verify:TC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,l){const h=l.transform;if(h instanceof Gy)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof $g)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Hg)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Wy)return{fieldPath:l.field.canonicalString(),increment:h.C};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:s2(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:st()),t;var o}function rL(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?Xr.updateTime(Li(o.updateTime)):void 0!==o.exists?Xr.exists(o.exists):Xr.none():Xr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(l,h){let p=null;"setToServerValue"in h?(Ct("REQUEST_TIME"===h.setToServerValue),p=new Gy):"appendMissingElements"in h?p=new $g(h.appendMissingElements.values||[]):"removeAllFromArray"in h?p=new Hg(h.removeAllFromArray.values||[]):"increment"in h?p=new Wy(l,h.increment):st();const v=is.fromServerFormat(h.fieldPath);return new vC(v,p)}(n,o)):[];var o;if(e.update){const o=sc(n,e.update.name),l=new As({mapValue:{fields:e.update.fields}});if(e.updateMask){const h=new By((e.updateMask.fieldPaths||[]).map(b=>is.fromServerFormat(b)));return new Hf(o,l,h,t,r)}return new EC(o,l,t,r)}if(e.delete){const o=sc(n,e.delete);return new wC(o,t)}if(e.verify){const o=sc(n,e.verify);return new _M(o,t)}return st()}function iL(n,e){return{documents:[EM(n,e.path)]}}function sL(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=EM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=EM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(p){if(0===p.length)return;const v=p.map(b=>function(A){if("=="===A.op){if(vF(A.value))return{unaryFilter:{field:zy(A.field),op:"IS_NAN"}};if(yF(A.value))return{unaryFilter:{field:zy(A.field),op:"IS_NULL"}}}else if("!="===A.op){if(vF(A.value))return{unaryFilter:{field:zy(A.field),op:"IS_NOT_NAN"}};if(yF(A.value))return{unaryFilter:{field:zy(A.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zy(A.field),op:d2(A.op),value:A.value}}}(b));return 1===v.length?v[0]:{compositeFilter:{op:"AND",filters:v}}}(e.filters);o&&(t.structuredQuery.where=o);const l=function(p){if(0!==p.length)return p.map(v=>{return{field:zy((b=v).field),direction:c2(b.dir)};var b})}(e.orderBy);l&&(t.structuredQuery.orderBy=l);const h=(v=e.limit,n.D||Bg(v)?v:{value:v});var v;return null!==h&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=uL(e.startAt)),e.endAt&&(t.structuredQuery.endAt=uL(e.endAt)),t}function oL(n){let e=XF(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){Ct(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let l=[];t.where&&(l=aL(t.where));let h=[];t.orderBy&&(h=t.orderBy.map(A=>{return new Hy(Ky((N=A).field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let p=null;t.limit&&(p=function(A){let N;return N="object"==typeof A?A.value:A,Bg(N)?null:N}(t.limit));let v=null;t.startAt&&(v=lL(t.startAt));let b=null;return t.endAt&&(b=lL(t.endAt)),TF(e,o,h,l,p,"F",v,b)}function aL(n){return n?void 0!==n.unaryFilter?[f2(n)]:void 0!==n.fieldFilter?[h2(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>aL(e)).reduce((e,t)=>e.concat(t)):st():[]}function uL(n){return{before:n.before,values:n.position}}function lL(n){return new mC(n.values||[],!!n.before)}function c2(n){return n2[n]}function d2(n){return r2[n]}function zy(n){return{fieldPath:n.canonicalString()}}function Ky(n){return is.fromServerFormat(n.fieldPath)}function h2(n){return Js.create(Ky(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function f2(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Ky(n.unaryFilter.field);return Js.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Ky(n.unaryFilter.field);return Js.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Ky(n.unaryFilter.field);return Js.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ky(n.unaryFilter.field);return Js.create(o,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function p2(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function cL(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Yu(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=dL(e)),e=g2(n.get(t),e);return dL(e)}function g2(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const l=n.charAt(o);switch(l){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=l}}return t}function dL(n){return n+"\x01\x01"}function Ud(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Dn.emptyPath();const t=e-2,r=[];let o="";for(let l=0;l<e;){const h=n.indexOf("\x01",l);switch((h<0||h>t)&&st(),n.charAt(h+1)){case"\x01":const p=n.substring(l,h);let v;0===o.length?v=p:(o+=p,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(l,h),o+="\0";break;case"\x11":o+=n.substring(l,h+1);break;default:st()}l=h+2}return new Dn(r)}class m2{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class fa{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}fa.store="owner",fa.key="owner";class qf{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}qf.store="mutationQueues",qf.keyPath="userId";class or{constructor(e,t,r,o,l){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=o,this.mutations=l}}or.store="mutations",or.keyPath="batchId",or.userMutationsIndex="userMutationsIndex",or.userMutationsKeyPath=["userId","batchId"];class Ss{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Yu(t)]}static key(e,t,r){return[e,Yu(t),r]}}Ss.store="documentMutations",Ss.PLACEHOLDER=new Ss;class _2{constructor(e,t){this.path=e,this.readTime=t}}class y2{constructor(e,t){this.path=e,this.version=t}}class Sr{constructor(e,t,r,o,l,h){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=o,this.readTime=l,this.parentPath=h}}Sr.store="remoteDocuments",Sr.readTimeIndex="readTimeIndex",Sr.readTimeIndexPath="readTime",Sr.collectionReadTimeIndex="collectionReadTimeIndex",Sr.collectionReadTimeIndexPath=["parentPath","readTime"];class oc{constructor(e){this.byteSize=e}}oc.store="remoteDocumentGlobal",oc.key="remoteDocumentGlobalKey";class Po{constructor(e,t,r,o,l,h,p){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=o,this.lastListenSequenceNumber=l,this.lastLimboFreeSnapshotVersion=h,this.query=p}}Po.store="targets",Po.keyPath="targetId",Po.queryTargetsIndexName="queryTargetsIndex",Po.queryTargetsKeyPath=["canonicalId","targetId"];class os{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}os.store="targetDocuments",os.keyPath=["targetId","path"],os.documentTargetsIndex="documentTargetsIndex",os.documentTargetsKeyPath=["path","targetId"];class pa{constructor(e,t,r,o){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=o}}pa.key="targetGlobalKey",pa.store="targetGlobal";class qg{constructor(e,t){this.collectionId=e,this.parent=t}}qg.store="collectionParents",qg.keyPath=["collectionId","parent"];class Bd{constructor(e,t,r,o){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=o}}Bd.store="clientMetadata",Bd.keyPath="clientId";class Yy{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Yy.store="bundles",Yy.keyPath="bundleId";class Qy{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Qy.store="namedQueries",Qy.keyPath="name";const v2=[qf.store,or.store,Ss.store,Sr.store,Po.store,fa.store,pa.store,os.store,Bd.store,oc.store,qg.store,Yy.store,Qy.store],hL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class xe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new xe((r,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof xe?t:xe.resolve(t)}catch(t){return xe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):xe.reject(t)}static resolve(e){return new xe((t,r)=>{t(e)})}static reject(e){return new xe((t,r)=>{r(e)})}static waitFor(e){return new xe((t,r)=>{let o=0,l=0,h=!1;e.forEach(p=>{++o,p.next(()=>{++l,h&&l===o&&t()},v=>r(v))}),h=!0,l===o&&t()})}static or(e){let t=xe.resolve(!1);for(const r of e)t=t.next(o=>o?xe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,l)=>{r.push(t.call(this,o,l))}),this.waitFor(r)}}class nS{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Oi,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new AC(e,t.error)):this.Et.resolve()},this.transaction.onerror=r=>{const o=wM(r.target.error);this.Et.reject(new AC(e,o))}}static open(e,t,r,o){try{return new nS(t,e.transaction(o,r))}catch(l){throw new AC(t,l)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new w2(t)}}class Qu{constructor(e,t,r){this.name=e,this.version=t,this.At=r,12.2===Qu.Rt((0,F.z$)())&&Qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),Gg(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,F.hl)())return!1;if(Qu.Pt())return!0;const e=(0,F.z$)(),t=Qu.Rt(e),r=0<t&&t<10,o=Qu.vt(e),l=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static vt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Dt(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const l=indexedDB.open(t.name,t.version);l.onsuccess=h=>{r(h.target.result)},l.onblocked=()=>{o(new AC(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},l.onerror=h=>{const p=h.target.error;o("VersionError"===p.name?new Me(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Me(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new AC(e,p))},l.onupgradeneeded=h=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',h.oldVersion),t.At.Ct(h.target.result,l.transaction,h.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Nt&&(t.db.onversionchange=r=>t.Nt(r)),t.db})()}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var l=this;return(0,ge.Z)(function*(){const h="readonly"===t;let p=0;for(;;){++p;try{l.db=yield l.Dt(e);const v=nS.open(l.db,e,h?"readonly":"readwrite",r),b=o(v).catch(A=>(v.abort(A),xe.reject(A))).toPromise();return b.catch(()=>{}),yield v.It,b}catch(v){const b="FirebaseError"!==v.name&&p<3;if(Be("SimpleDb","Transaction failed with error:",v.message,"Retrying:",b),l.close(),!b)return Promise.reject(v)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class E2{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Gg(this.kt.delete())}}class AC extends Me{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Zg(n){return"IndexedDbTransactionError"===n.name}class w2{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gg(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),Gg(this.store.add(e))}get(e){return Gg(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),Gg(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),Gg(this.store.count())}Lt(e,t){const r=this.cursor(this.options(e,t)),o=[];return this.Bt(r,(l,h)=>{o.push(h)}).next(()=>o)}Ut(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.qt=!1;const o=this.cursor(r);return this.Bt(o,(l,h,p)=>p.delete())}Kt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Bt(o,t)}jt(e){const t=this.cursor({});return new xe((r,o)=>{t.onerror=l=>{const h=wM(l.target.error);o(h)},t.onsuccess=l=>{const h=l.target.result;h?e(h.primaryKey,h.value).next(p=>{p?h.continue():r()}):r()}})}Bt(e,t){const r=[];return new xe((o,l)=>{e.onerror=h=>{l(h.target.error)},e.onsuccess=h=>{const p=h.target.result;if(!p)return void o();const v=new E2(p),b=t(p.primaryKey,p.value,v);if(b instanceof xe){const A=b.catch(N=>(v.done(),xe.reject(N)));r.push(A)}v.isDone?o():null===v.Ft?p.continue():p.continue(v.Ft)}}).next(()=>xe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.qt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gg(n){return new xe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=wM(r.target.error);t(o)}})}let pL=!1;function wM(n){const e=Qu.Rt((0,F.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pL||(pL=!0,setTimeout(()=>{throw r},0)),r}}return n}class gL extends fL{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Mo(n,e){const t=He(n);return Qu.St(t.Qt,e)}class CM{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&WU(l,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&mM(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&mM(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(Ft.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jn())}isEqual(e){return this.batchId===e.batchId&&Uy(this.mutations,e.mutations,(t,r)=>LF(t,r))&&Uy(this.baseMutations,e.baseMutations,(t,r)=>LF(t,r))}}class bM{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){Ct(e.mutations.length===r.length);let o=ZF();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,r[h].version);return new bM(e,t,r,o)}}class Zf{constructor(e,t,r,o,l=Ft.min(),h=Ft.min(),p=Fi.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p}withSequenceNumber(e){return new Zf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class mL{constructor(e){this.Wt=e}}function IM(n,e){if(e.document)return nL(n.Wt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const t=rt.fromSegments(e.noDocument.path),r=Xy(e.noDocument.readTime),o=hr.newNoDocument(t,r);return e.hasCommittedMutations?o.setHasCommittedMutations():o}if(e.unknownDocument){const t=rt.fromSegments(e.unknownDocument.path),r=Xy(e.unknownDocument.version);return hr.newUnknownDocument(t,r)}return st()}function _L(n,e,t){const r=TM(t),o=e.key.path.popLast().toArray();if(e.isFoundDocument()){const l={name:TC(p=n.Wt,(v=e).key),fields:v.data.value.mapValue.fields,updateTime:IC(p,v.version.toTimestamp())};return new Sr(null,null,l,e.hasCommittedMutations,r,o)}var p,v;if(e.isNoDocument()){const l=e.key.path.toArray(),h=Jy(e.version),p=e.hasCommittedMutations;return new Sr(null,new _2(l,h),null,p,r,o)}if(e.isUnknownDocument()){const l=e.key.path.toArray(),h=Jy(e.version);return new Sr(new y2(l,h),null,null,!0,r,o)}return st()}function TM(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function yL(n){const e=new ki(n[0],n[1]);return Ft.fromTimestamp(e)}function Jy(n){const e=n.toTimestamp();return new m2(e.seconds,e.nanoseconds)}function Xy(n){const e=new ki(n.seconds,n.nanoseconds);return Ft.fromTimestamp(e)}function ev(n,e){const t=(e.baseMutations||[]).map(l=>rL(n.Wt,l));for(let l=0;l<e.mutations.length-1;++l){const h=e.mutations[l];l+1<e.mutations.length&&void 0!==e.mutations[l+1].transform&&(h.updateTransforms=e.mutations[l+1].transform.fieldTransforms,e.mutations.splice(l+1,1),++l)}const r=e.mutations.map(l=>rL(n.Wt,l)),o=ki.fromMillis(e.localWriteTimeMs);return new CM(e.batchId,o,t,r)}function SC(n){const e=Xy(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xy(n.lastLimboFreeSnapshotVersion):Ft.min();let r;var o;return void 0!==n.query.documents?(Ct(1===(o=n.query).documents.length),r=iu(qy(XF(o.documents[0])))):r=iu(oL(n.query)),new Zf(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Fi.fromBase64String(n.resumeToken))}function vL(n,e){const t=Jy(e.snapshotVersion),r=Jy(e.lastLimboFreeSnapshotVersion);let o;o=ZA(e.target)?iL(n.Wt,e.target):sL(n.Wt,e.target);const l=e.resumeToken.toBase64();return new Po(e.targetId,gC(e.target),t,l,e.sequenceNumber,r,o)}function DM(n){const e=oL({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?DF(e,e.limit,"L"):e}class C2{getBundleMetadata(e,t){return EL(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Xy(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return EL(e).put({bundleId:(r=t).id,createTime:Jy(Li(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return wL(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:DM(o.bundledQuery),readTime:Xy(o.readTime)};var o})}saveNamedQuery(e,t){return wL(e).put({name:(r=t).name,readTime:Jy(Li(r.readTime)),bundledQuery:r.bundledQuery});var r}}function EL(n){return Mo(n,Yy.store)}function wL(n){return Mo(n,Qy.store)}class b2{constructor(){this.Gt=new AM}addToCollectionParentIndex(e,t){return this.Gt.add(t),xe.resolve()}getCollectionParents(e,t){return xe.resolve(this.Gt.getEntries(t))}}class AM{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new Ar(Dn.comparator),l=!o.has(r);return this.index[t]=o.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new Ar(Dn.comparator)).toArray()}}class I2{constructor(){this.zt=new AM}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const l={collectionId:r,parent:Yu(o)};return CL(e).put(l)}return xe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[hF(t),""],!1,!0);return CL(e).Lt(o).next(l=>{for(const h of l){if(h.collectionId!==t)break;r.push(Ud(h.parent))}return r})}}function CL(n){return Mo(n,qg.store)}const bL={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Oo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Oo(e,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function IL(n,e,t){const r=n.store(or.store),o=n.store(Ss.store),l=[],h=IDBKeyRange.only(t.batchId);let p=0;const v=r.Kt({range:h},(A,N,L)=>(p++,L.delete()));l.push(v.next(()=>{Ct(1===p)}));const b=[];for(const A of t.mutations){const N=Ss.key(e,A.key.path,t.batchId);l.push(o.delete(N)),b.push(A.key)}return xe.waitFor(l).next(()=>b)}function rS(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}Oo.DEFAULT_COLLECTION_PERCENTILE=10,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Oo.DEFAULT=new Oo(41943040,Oo.DEFAULT_COLLECTION_PERCENTILE,Oo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Oo.DISABLED=new Oo(-1,0,0);class SM{constructor(e,t,r,o){this.userId=e,this.N=t,this.Ht=r,this.referenceDelegate=o,this.Jt={}}static Yt(e,t,r,o){Ct(""!==e.uid);const l=e.isAuthenticated()?e.uid:"";return new SM(l,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gf(e).Kt({index:or.userMutationsIndex,range:r},(o,l,h)=>{t=!1,h.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const l=tv(e),h=Gf(e);return h.add({}).next(p=>{Ct("number"==typeof p);const v=new CM(p,t,r,o),b=function(L,q,ae){const Ae=ae.baseMutations.map(At=>tS(L.Wt,At)),Ve=ae.mutations.map(At=>tS(L.Wt,At));return new or(q,ae.batchId,ae.localWriteTime.toMillis(),Ae,Ve)}(this.N,this.userId,v),A=[];let N=new Ar((L,q)=>sn(L.canonicalString(),q.canonicalString()));for(const L of o){const q=Ss.key(this.userId,L.key.path,p);N=N.add(L.key.path.popLast()),A.push(h.put(b)),A.push(l.put(q,Ss.PLACEHOLDER))}return N.forEach(L=>{A.push(this.Ht.addToCollectionParentIndex(e,L))}),e.addOnCommittedListener(()=>{this.Jt[p]=v.keys()}),xe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return Gf(e).get(t).next(r=>r?(Ct(r.userId===this.userId),ev(this.N,r)):null)}Xt(e,t){return this.Jt[t]?xe.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.Jt[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Gf(e).Kt({index:or.userMutationsIndex,range:o},(h,p,v)=>{p.userId===this.userId&&(Ct(p.batchId>=r),l=ev(this.N,p)),v.done()}).next(()=>l)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Gf(e).Kt({index:or.userMutationsIndex,range:t,reverse:!0},(o,l,h)=>{r=l.batchId,h.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gf(e).Lt(or.userMutationsIndex,t).next(r=>r.map(o=>ev(this.N,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ss.prefixForPath(this.userId,t.path),o=IDBKeyRange.lowerBound(r),l=[];return tv(e).Kt({range:o},(h,p,v)=>{const[b,A,N]=h,L=Ud(A);if(b===this.userId&&t.path.isEqual(L))return Gf(e).get(N).next(q=>{if(!q)throw st();Ct(q.userId===this.userId),l.push(ev(this.N,q))});v.done()}).next(()=>l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ar(sn);const o=[];return t.forEach(l=>{const h=Ss.prefixForPath(this.userId,l.path),p=IDBKeyRange.lowerBound(h),v=tv(e).Kt({range:p},(b,A,N)=>{const[L,q,ae]=b,Ae=Ud(q);L===this.userId&&l.path.isEqual(Ae)?r=r.add(ae):N.done()});o.push(v)}),xe.waitFor(o).next(()=>this.Zt(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,l=Ss.prefixForPath(this.userId,r),h=IDBKeyRange.lowerBound(l);let p=new Ar(sn);return tv(e).Kt({range:h},(v,b,A)=>{const[N,L,q]=v,ae=Ud(L);N===this.userId&&r.isPrefixOf(ae)?ae.length===o&&(p=p.add(q)):A.done()}).next(()=>this.Zt(e,p))}Zt(e,t){const r=[],o=[];return t.forEach(l=>{o.push(Gf(e).get(l).next(h=>{if(null===h)throw st();Ct(h.userId===this.userId),r.push(ev(this.N,h))}))}),xe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return IL(e.Qt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),xe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return xe.resolve();const r=IDBKeyRange.lowerBound(Ss.prefixForUser(this.userId)),o=[];return tv(e).Kt({range:r},(l,h,p)=>{if(l[0]===this.userId){const v=Ud(l[1]);o.push(v)}else p.done()}).next(()=>{Ct(0===o.length)})})}containsKey(e,t){return TL(e,this.userId,t)}ee(e){return DL(e).get(this.userId).next(t=>t||new qf(this.userId,-1,""))}}function TL(n,e,t){const r=Ss.prefixForPath(e,t.path),o=r[1],l=IDBKeyRange.lowerBound(r);let h=!1;return tv(n).Kt({range:l,qt:!0},(p,v,b)=>{const[A,N,L]=p;A===e&&N===o&&(h=!0),b.done()}).next(()=>h)}function Gf(n){return Mo(n,or.store)}function tv(n){return Mo(n,Ss.store)}function DL(n){return Mo(n,qf.store)}class Wg{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new Wg(0)}static ie(){return new Wg(-1)}}class T2{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const r=new Wg(t.highestTargetId);return t.highestTargetId=r.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(t=>Ft.fromTimestamp(new ki(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.re(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.oe(e,o)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(r=>(r.targetCount+=1,this.ae(t,r),this.oe(e,r))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>nv(e).delete(t.targetId)).next(()=>this.re(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.oe(e,r)))}removeTargets(e,t,r){let o=0;const l=[];return nv(e).Kt((h,p)=>{const v=SC(p);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,l.push(this.removeTargetData(e,v)))}).next(()=>xe.waitFor(l)).next(()=>o)}forEachTarget(e,t){return nv(e).Kt((r,o)=>{const l=SC(o);t(l)})}re(e){return AL(e).get(pa.key).next(t=>(Ct(null!==t),t))}oe(e,t){return AL(e).put(pa.key,t)}ce(e,t){return nv(e).put(vL(this.N,t))}ae(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.re(e).next(t=>t.targetCount)}getTargetData(e,t){const r=gC(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return nv(e).Kt({range:o,index:Po.queryTargetsIndexName},(h,p,v)=>{const b=SC(p);qA(t,b.target)&&(l=b,v.done())}).next(()=>l)}addMatchingKeys(e,t,r){const o=[],l=Wf(e);return t.forEach(h=>{const p=Yu(h.path);o.push(l.put(new os(r,p))),o.push(this.referenceDelegate.addReference(e,r,h))}),xe.waitFor(o)}removeMatchingKeys(e,t,r){const o=Wf(e);return xe.forEach(t,l=>{const h=Yu(l.path);return xe.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(e,r,l)])})}removeMatchingKeysForTargetId(e,t){const r=Wf(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Wf(e);let l=jn();return o.Kt({range:r,qt:!0},(h,p,v)=>{const b=Ud(h[1]),A=new rt(b);l=l.add(A)}).next(()=>l)}containsKey(e,t){const r=Yu(t.path),o=IDBKeyRange.bound([r],[hF(r)],!1,!0);let l=0;return Wf(e).Kt({index:os.documentTargetsIndex,qt:!0,range:o},([h,p],v,b)=>{0!==h&&(l++,b.done())}).next(()=>l>0)}Tt(e,t){return nv(e).get(t).next(r=>r?SC(r):null)}}function nv(n){return Mo(n,Po.store)}function AL(n){return Mo(n,pa.store)}function Wf(n){return Mo(n,os.store)}function zg(n){return xM.apply(this,arguments)}function xM(){return(xM=(0,ge.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==hL)throw n;Be("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function SL([n,e],[t,r]){const o=sn(n,t);return 0===o?sn(e,r):o}class D2{constructor(e){this.ue=e,this.buffer=new Ar(SL),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();SL(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A2{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){var t=this;const r=this.de?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ge.Z)(function*(){t.we=null,t.de=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){Zg(o)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield zg(o)}yield t._e(e)}))}}class S2{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return xe.resolve(ha.T);const r=new D2(t);return this.me.forEachTarget(e,o=>r.fe(o.sequenceNumber)).next(()=>this.me.ye(e,o=>r.fe(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.me.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),xe.resolve(bL)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),bL):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let r,o,l,h,p,v,b;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,h=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,p=Date.now(),this.removeTargets(e,r,t))).next(N=>(l=N,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(b=Date.now(),sM()<=Ws.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${h-A}ms\n\tDetermined least recently used ${o} in `+(p-h)+`ms\n\tRemoved ${l} targets in `+(v-p)+`ms\n\tRemoved ${N} documents in `+(b-v)+`ms\nTotal Duration: ${b-A}ms`),xe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:N})))}}class x2{constructor(e,t){this.db=e,this.garbageCollector=new S2(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Te(e){let t=0;return this.ye(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(r,o)=>t(o))}addReference(e,t,r){return iS(e,r)}removeReference(e,t,r){return iS(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return iS(e,t)}Ie(e,t){return function(r,o){let l=!1;return DL(r).jt(h=>TL(r,h,o).next(p=>(p&&(l=!0),xe.resolve(!p)))).next(()=>l)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let l=0;return this.Ee(e,(h,p)=>{if(p<=t){const v=this.Ie(e,h).next(b=>{if(!b)return l++,r.getEntry(e,h).next(()=>(r.removeEntry(h),Wf(e).delete([0,Yu(h.path)])))});o.push(v)}}).next(()=>xe.waitFor(o)).next(()=>r.apply(e)).next(()=>l)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return iS(e,t)}Ee(e,t){const r=Wf(e);let o,l=ha.T;return r.Kt({index:os.documentTargetsIndex},([h,p],{path:v,sequenceNumber:b})=>{0===h?(l!==ha.T&&t(new rt(Ud(o)),l),l=b,o=v):l=ha.T}).next(()=>{l!==ha.T&&t(new rt(Ud(o)),l)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function iS(n,e){return Wf(n).put((r=n.currentSequenceNumber,new os(0,Yu(e.path),r)));var r}class rv{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,l]of r)if(this.equalsFn(o,e))return l}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o){for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),!0;return!1}forEach(e){Ug(this.inner,(t,r)=>{for(const[o,l]of r)e(o,l)})}isEmpty(){return pF(this.inner)}}class xL{constructor(){this.changes=new rv(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Ft.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:hr.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?xe.resolve(r.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class N2{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,r){return zf(e).put(sS(t),r)}removeEntry(e,t){const r=zf(e),o=sS(t);return r.delete(o)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Ae(e,r)))}getEntry(e,t){return zf(e).get(sS(t)).next(r=>this.Re(t,r))}be(e,t){return zf(e).get(sS(t)).next(r=>({document:this.Re(t,r),size:rS(r)}))}getEntries(e,t){let r=su();return this.Pe(e,t,(o,l)=>{const h=this.Re(o,l);r=r.insert(o,h)}).next(()=>r)}ve(e,t){let r=su(),o=new gi(rt.comparator);return this.Pe(e,t,(l,h)=>{const p=this.Re(l,h);r=r.insert(l,p),o=o.insert(l,rS(h))}).next(()=>({documents:r,Ve:o}))}Pe(e,t,r){if(t.isEmpty())return xe.resolve();const o=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),l=t.getIterator();let h=l.getNext();return zf(e).Kt({range:o},(p,v,b)=>{const A=rt.fromSegments(p);for(;h&&rt.comparator(h,A)<0;)r(h,null),h=l.getNext();h&&h.isEqual(A)&&(r(h,v),h=l.hasNext()?l.getNext():null),h?b.Mt(h.path.toArray()):b.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r){let o=su();const l=t.path.length+1,h={};if(r.isEqual(Ft.min())){const p=t.path.toArray();h.range=IDBKeyRange.lowerBound(p)}else{const p=t.path.toArray(),v=TM(r);h.range=IDBKeyRange.lowerBound([p,v],!0),h.index=Sr.collectionReadTimeIndex}return zf(e).Kt(h,(p,v,b)=>{if(p.length!==l)return;const A=IM(this.N,v);t.path.isPrefixOf(A.key.path)?yC(t,A)&&(o=o.insert(A.key,A)):b.done()}).next(()=>o)}newChangeBuffer(e){return new R2(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return NL(e).get(oc.key).next(t=>(Ct(!!t),t))}Ae(e,t){return NL(e).put(oc.key,t)}Re(e,t){if(t){const r=IM(this.N,t);if(!r.isNoDocument()||!r.version.isEqual(Ft.min()))return r}return hr.newInvalidDocument(e)}}class R2 extends xL{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new rv(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new Ar((l,h)=>sn(l.canonicalString(),h.canonicalString()));return this.changes.forEach((l,h)=>{const p=this.De.get(l);if(h.document.isValidDocument()){const v=_L(this.Se.N,h.document,this.getReadTime(l));o=o.add(l.path.popLast()),r+=rS(v)-p,t.push(this.Se.addEntry(e,l,v))}else if(r-=p,this.trackRemovals){const v=_L(this.Se.N,hr.newNoDocument(l,Ft.min()),this.getReadTime(l));t.push(this.Se.addEntry(e,l,v))}else t.push(this.Se.removeEntry(e,l))}),o.forEach(l=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,l))}),t.push(this.Se.updateMetadata(e,r)),xe.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(r=>(this.De.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:r,Ve:o})=>(o.forEach((l,h)=>{this.De.set(l,h)}),r))}}function NL(n){return Mo(n,oc.store)}function zf(n){return Mo(n,Sr.store)}function sS(n){return n.path.toArray()}class P2{constructor(e){this.N=e}Ct(e,t,r,o){Ct(r<o&&r>=0&&o<=11);const l=new nS("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore(fa.store),(p=e).createObjectStore(qf.store,{keyPath:qf.keyPath}),p.createObjectStore(or.store,{keyPath:or.keyPath,autoIncrement:!0}).createIndex(or.userMutationsIndex,or.userMutationsKeyPath,{unique:!0}),p.createObjectStore(Ss.store),RL(e),function(p){p.createObjectStore(Sr.store)}(e));let h=xe.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore(os.store),p.deleteObjectStore(Po.store),p.deleteObjectStore(pa.store)}(e),RL(e)),h=h.next(()=>function(p){const v=p.store(pa.store),b=new pa(0,0,Ft.min().toTimestamp(),0);return v.put(pa.key,b)}(l))),r<4&&o>=4&&(0!==r&&(h=h.next(()=>function(p,v){return v.store(or.store).Lt().next(b=>{p.deleteObjectStore(or.store),p.createObjectStore(or.store,{keyPath:or.keyPath,autoIncrement:!0}).createIndex(or.userMutationsIndex,or.userMutationsKeyPath,{unique:!0});const A=v.store(or.store),N=b.map(L=>A.put(L));return xe.waitFor(N)})}(e,l))),h=h.next(()=>{!function(p){p.createObjectStore(Bd.store,{keyPath:Bd.keyPath})}(e)})),r<5&&o>=5&&(h=h.next(()=>this.Ce(l))),r<6&&o>=6&&(h=h.next(()=>(function(p){p.createObjectStore(oc.store)}(e),this.Ne(l)))),r<7&&o>=7&&(h=h.next(()=>this.xe(l))),r<8&&o>=8&&(h=h.next(()=>this.ke(e,l))),r<9&&o>=9&&(h=h.next(()=>{(function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")})(e),function(p){const v=p.objectStore(Sr.store);v.createIndex(Sr.readTimeIndex,Sr.readTimeIndexPath,{unique:!1}),v.createIndex(Sr.collectionReadTimeIndex,Sr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&o>=10&&(h=h.next(()=>this.$e(l))),r<11&&o>=11&&(h=h.next(()=>{(function(p){p.createObjectStore(Yy.store,{keyPath:Yy.keyPath})})(e),function(p){p.createObjectStore(Qy.store,{keyPath:Qy.keyPath})}(e)})),h}Ne(e){let t=0;return e.store(Sr.store).Kt((r,o)=>{t+=rS(o)}).next(()=>{const r=new oc(t);return e.store(oc.store).put(oc.key,r)})}Ce(e){const t=e.store(qf.store),r=e.store(or.store);return t.Lt().next(o=>xe.forEach(o,l=>{const h=IDBKeyRange.bound([l.userId,-1],[l.userId,l.lastAcknowledgedBatchId]);return r.Lt(or.userMutationsIndex,h).next(p=>xe.forEach(p,v=>{Ct(v.userId===l.userId);const b=ev(this.N,v);return IL(e,l.userId,b).next(()=>{})}))}))}xe(e){const t=e.store(os.store),r=e.store(Sr.store);return e.store(pa.store).get(pa.key).next(o=>{const l=[];return r.Kt((h,p)=>{const v=new Dn(h),b=[0,Yu(v)];l.push(t.get(b).next(A=>A?xe.resolve():t.put(new os(0,Yu(v),o.highestListenSequenceNumber))))}).next(()=>xe.waitFor(l))})}ke(e,t){e.createObjectStore(qg.store,{keyPath:qg.keyPath});const r=t.store(qg.store),o=new AM,l=h=>{if(o.add(h)){const p=h.lastSegment(),v=h.popLast();return r.put({collectionId:p,parent:Yu(v)})}};return t.store(Sr.store).Kt({qt:!0},(h,p)=>{const v=new Dn(h);return l(v.popLast())}).next(()=>t.store(Ss.store).Kt({qt:!0},([h,p,v],b)=>{const A=Ud(p);return l(A.popLast())}))}$e(e){const t=e.store(Po.store);return t.Kt((r,o)=>{const l=SC(o),h=vL(this.N,l);return t.put(h)})}}function RL(n){n.createObjectStore(os.store,{keyPath:os.keyPath}).createIndex(os.documentTargetsIndex,os.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(Po.store,{keyPath:Po.keyPath}).createIndex(Po.queryTargetsIndexName,Po.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(pa.store)}const NM="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class RM{constructor(e,t,r,o,l,h,p,v,b,A){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Oe=l,this.window=h,this.document=p,this.Fe=b,this.Me=A,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=N=>Promise.resolve(),!RM.bt())throw new Me(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x2(this,o),this.We=t+"main",this.N=new mL(v),this.Ge=new Qu(this.We,11,new P2(this.N)),this.ze=new T2(this.referenceDelegate,this.N),this.Ht=new I2,this.He=new N2(this.N,this.Ht),this.Je=new C2,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===A&&Qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,NM);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new ha(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){var t=this;return this.Qe=function(){var r=(0,ge.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(function(){var t=(0,ge.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.Xe())})))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>oS(e).put(new Bd(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(t=>{t||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Zg(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return xC(e).get(fa.key).next(t=>xe.resolve(this.an(t)))}un(e){return oS(e).delete(this.clientId)}hn(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.ln(e.je,18e5)){e.je=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Mo(r,Bd.store);return o.Lt().next(l=>{const h=e.fn(l,18e5),p=l.filter(v=>-1===h.indexOf(v));return xe.forEach(p,v=>o.delete(v.clientId)).next(()=>p)})}).catch(()=>[]);if(e.Ye)for(const r of t)e.Ye.removeItem(e.dn(r.clientId))}})()}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?xe.resolve(!0):xC(e).get(fa.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new Me(me.FAILED_PRECONDITION,NM);return!1}}return!(!this.networkEnabled||!this.inForeground)||oS(e).Lt().next(r=>void 0===this.fn(r,5e3).find(o=>{if(this.clientId!==o.clientId){const h=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||h&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Be=!1,e._n(),e.Ke&&(e.Ke.cancel(),e.Ke=null),e.mn(),e.gn(),yield e.Ge.runTransaction("shutdown","readwrite",[fa.store,Bd.store],t=>{const r=new gL(t,ha.T);return e.on(r).next(()=>e.un(r))}),e.Ge.close(),e.yn()})()}fn(e,t){return e.filter(r=>this.ln(r.updateTimeMs,t)&&!this.wn(r.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>oS(e).Lt().next(t=>this.fn(t,18e5).map(r=>r.clientId)))}get started(){return this.Be}getMutationQueue(e){return SM.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,r){let l;return Be("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",v2,h=>(l=new gL(h,this.Le?this.Le.next():ha.T),"readwrite-primary"===t?this.sn(l).next(p=>!!p||this.rn(l)).next(p=>{if(!p)throw Qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Me(me.FAILED_PRECONDITION,hL);return r(l)}).next(p=>this.cn(l).next(()=>p)):this.Tn(l).next(()=>r(l)))).then(h=>(l.raiseOnCommittedEvent(),h))}Tn(e){return xC(e).get(fa.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)&&!this.an(t)&&!(this.Me||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(me.FAILED_PRECONDITION,NM)})}cn(e){const t=new fa(this.clientId,this.allowTabSynchronization,Date.now());return xC(e).put(fa.key,t)}static bt(){return Qu.bt()}on(e){const t=xC(e);return t.get(fa.key).next(r=>this.an(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(fa.key)):xe.resolve())}ln(e,t){const r=Date.now();return!(e<r-t||e>r&&(Qr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,F.G6)()&&navigator.appVersion.match("Version/14")&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const r=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Qr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(e){Qr("Failed to set zombie client id.",e)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(e){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xC(n){return Mo(n,fa.store)}function oS(n){return Mo(n,Bd.store)}function PM(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class M2{constructor(e,t){this.progress=e,this.En=t}}class PL{constructor(e,t,r){this.He=e,this.In=t,this.Ht=r}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Rn(e,t,r))}Rn(e,t,r){return this.He.getEntry(e,t).next(o=>{for(const l of r)l.applyToLocalView(o);return o})}bn(e,t){e.forEach((r,o)=>{for(const l of t)l.applyToLocalView(o)})}Pn(e,t){return this.He.getEntries(e,t).next(r=>this.vn(e,r).next(()=>r))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.bn(t,r))}getDocumentsMatchingQuery(e,t,r){return rt.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.Vn(e,t.path):pM(t)?this.Sn(e,t,r):this.Dn(e,t,r);var o}Vn(e,t){return this.An(e,new rt(t)).next(r=>{let o=yM();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Sn(e,t,r){const o=t.collectionGroup;let l=yM();return this.Ht.getCollectionParents(e,o).next(h=>xe.forEach(h,p=>{const v=(b=t,A=p.child(o),new Vd(A,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,A;return this.Dn(e,v,r).next(b=>{b.forEach((A,N)=>{l=l.insert(A,N)})})}).next(()=>l))}Dn(e,t,r){let o,l;return this.He.getDocumentsMatchingQuery(e,t,r).next(h=>(o=h,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(h=>(l=h,this.Cn(e,l,o).next(p=>{o=p;for(const v of l)for(const b of v.mutations){const A=b.key;let N=o.get(A);null==N&&(N=hr.newInvalidDocument(A),o=o.insert(A,N)),mM(b,N,v.localWriteTime),N.isFoundDocument()||(o=o.remove(A))}}))).next(()=>(o.forEach((h,p)=>{yC(t,p)||(o=o.remove(h))}),o))}Cn(e,t,r){let o=jn();for(const h of t)for(const p of h.mutations)p instanceof Hf&&null===r.get(p.key)&&(o=o.add(p.key));let l=r;return this.He.getEntries(e,o).next(h=>(h.forEach((p,v)=>{v.isFoundDocument()&&(l=l.insert(p,v))}),l))}}class MM{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Nn=r,this.xn=o}static kn(e,t){let r=jn(),o=jn();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new MM(e,t.fromCache,r,o)}}class ML{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,r,o){return 0===(l=t).filters.length&&null===l.limit&&null==l.startAt&&null==l.endAt&&(0===l.explicitOrderBy.length||1===l.explicitOrderBy.length&&l.explicitOrderBy[0].field.isKeyField())||r.isEqual(Ft.min())?this.Fn(e,t):this.On.Pn(e,o).next(l=>{const h=this.Mn(t,l);return(WA(t)||zA(t))&&this.Ln(t.limitType,h,o,r)?this.Fn(e,t):(sM()<=Ws.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gM(t)),this.On.getDocumentsMatchingQuery(e,t,r).next(p=>(h.forEach(v=>{p=p.insert(v.key,v)}),p)))});var l}Mn(e,t){let r=new Ar(SF(e));return t.forEach((o,l)=>{yC(e,l)&&(r=r.add(l))}),r}Ln(e,t,r,o){if(r.size!==t.size)return!0;const l="F"===e?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Fn(e,t){return sM()<=Ws.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",gM(t)),this.On.getDocumentsMatchingQuery(e,t,Ft.min())}}class O2{constructor(e,t,r,o){this.persistence=e,this.Bn=t,this.N=o,this.Un=new gi(sn),this.qn=new rv(l=>gC(l),qA),this.Kn=Ft.min(),this.In=e.getMutationQueue(r),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new PL(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function OL(n,e,t,r){return new O2(n,e,t,r)}function kL(n,e){return OM.apply(this,arguments)}function OM(){return(OM=(0,ge.Z)(function*(n,e){const t=He(n);let r=t.In,o=t.Qn;const l=yield t.persistence.runTransaction("Handle user change","readonly",h=>{let p;return t.In.getAllMutationBatches(h).next(v=>(p=v,r=t.persistence.getMutationQueue(e),o=new PL(t.jn,r,t.persistence.getIndexManager()),r.getAllMutationBatches(h))).next(v=>{const b=[],A=[];let N=jn();for(const L of p){b.push(L.batchId);for(const q of L.mutations)N=N.add(q.key)}for(const L of v){A.push(L.batchId);for(const q of L.mutations)N=N.add(q.key)}return o.Pn(h,N).next(L=>({Wn:L,removedBatchIds:b,addedBatchIds:A}))})});return t.In=r,t.Qn=o,t.Bn.$n(t.Qn),l})).apply(this,arguments)}function k2(n,e){const t=He(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),l=t.jn.newChangeBuffer({trackRemovals:!0});return function(h,p,v,b){const A=v.batch,N=A.keys();let L=xe.resolve();return N.forEach(q=>{L=L.next(()=>b.getEntry(p,q)).next(ae=>{const Ae=v.docVersions.get(q);Ct(null!==Ae),ae.version.compareTo(Ae)<0&&(A.applyToRemoteDocument(ae,v),ae.isValidDocument()&&b.addEntry(ae,v.commitVersion))})}),L.next(()=>h.In.removeMutationBatch(p,A))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.In.performConsistencyCheck(r)).next(()=>t.Qn.Pn(r,o))})}function FL(n){const e=He(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ze.getLastRemoteSnapshotVersion(t))}function F2(n,e){const t=He(n),r=e.snapshotVersion;let o=t.Un;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const h=t.jn.newChangeBuffer({trackRemovals:!0});o=t.Un;const p=[];e.targetChanges.forEach((b,A)=>{const N=o.get(A);if(!N)return;p.push(t.ze.removeMatchingKeys(l,b.removedDocuments,A).next(()=>t.ze.addMatchingKeys(l,b.addedDocuments,A)));const L=b.resumeToken;if(L.approximateByteSize()>0){const q=N.withResumeToken(L,r).withSequenceNumber(l.currentSequenceNumber);o=o.insert(A,q),ae=N,Ve=b,Ct((Ae=q).resumeToken.approximateByteSize()>0),(0===ae.resumeToken.approximateByteSize()||Ae.snapshotVersion.toMicroseconds()-ae.snapshotVersion.toMicroseconds()>=3e8||Ve.addedDocuments.size+Ve.modifiedDocuments.size+Ve.removedDocuments.size>0)&&p.push(t.ze.updateTargetData(l,q))}var ae,Ae,Ve});let v=su();if(e.documentUpdates.forEach((b,A)=>{e.resolvedLimboDocuments.has(b)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(l,b))}),p.push(LL(l,h,e.documentUpdates,r,void 0).next(b=>{v=b})),!r.isEqual(Ft.min())){const b=t.ze.getLastRemoteSnapshotVersion(l).next(A=>t.ze.setTargetsMetadata(l,l.currentSequenceNumber,r));p.push(b)}return xe.waitFor(p).next(()=>h.apply(l)).next(()=>t.Qn.vn(l,v)).next(()=>v)}).then(l=>(t.Un=o,l))}function LL(n,e,t,r,o){let l=jn();return t.forEach(h=>l=l.add(h)),e.getEntries(n,l).next(h=>{let p=su();return t.forEach((v,b)=>{const A=h.get(v),N=(null==o?void 0:o.get(v))||r;b.isNoDocument()&&b.version.isEqual(Ft.min())?(e.removeEntry(v,N),p=p.insert(v,b)):!A.isValidDocument()||b.version.compareTo(A.version)>0||0===b.version.compareTo(A.version)&&A.hasPendingWrites?(e.addEntry(b,N),p=p.insert(v,b)):Be("LocalStore","Ignoring outdated watch update for ",v,". Current version:",A.version," Watch version:",b.version)}),p})}function L2(n,e){const t=He(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.In.getNextMutationBatchAfterBatchId(r,e)))}function iv(n,e){const t=He(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.ze.getTargetData(r,e).next(l=>l?(o=l,xe.resolve(o)):t.ze.allocateTargetId(r).next(h=>(o=new Zf(e,h,0,r.currentSequenceNumber),t.ze.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Un.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Un=t.Un.insert(r.targetId,r),t.qn.set(e,r.targetId)),r})}function sv(n,e,t){return kM.apply(this,arguments)}function kM(){return(kM=(0,ge.Z)(function*(n,e,t){const r=He(n),o=r.Un.get(e),l=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",l,h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Zg(h))throw h;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}r.Un=r.Un.remove(e),r.qn.delete(o.target)})).apply(this,arguments)}function aS(n,e,t){const r=He(n);let o=Ft.min(),l=jn();return r.persistence.runTransaction("Execute query","readonly",h=>function(p,v,b){const A=He(p),N=A.qn.get(b);return void 0!==N?xe.resolve(A.Un.get(N)):A.ze.getTargetData(v,b)}(r,h,iu(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(h,p.targetId).next(v=>{l=v})}).next(()=>r.Bn.getDocumentsMatchingQuery(h,e,t?o:Ft.min(),t?l:jn())).next(p=>({documents:p,Gn:l})))}function VL(n,e){const t=He(n),r=He(t.ze),o=t.Un.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",l=>r.Tt(l,e).next(h=>h?h.target:null))}function UL(n){const e=He(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,o,l){const h=He(r);let p=su(),v=TM(l);const b=zf(o),A=IDBKeyRange.lowerBound(v,!0);return b.Kt({index:Sr.readTimeIndex,range:A},(N,L)=>{const q=IM(h.N,L);p=p.insert(q.key,q),v=L.readTime}).next(()=>({En:p,readTime:yL(v)}))}(e.jn,t,e.Kn)).then(({En:t,readTime:r})=>(e.Kn=r,t))}function FM(){return(FM=(0,ge.Z)(function*(n){const e=He(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const o=zf(r);let l=Ft.min();return o.Kt({index:Sr.readTimeIndex,reverse:!0},(h,p,v)=>{p.readTime&&(l=yL(p.readTime)),v.done()}).next(()=>l)}(t)).then(t=>{e.Kn=t})})).apply(this,arguments)}function LM(){return(LM=(0,ge.Z)(function*(n,e,t,r){const o=He(n);let l=jn(),h=su(),p=ZF();for(const A of t){const N=e.zn(A.metadata.name);A.document&&(l=l.add(N)),h=h.insert(N,e.Hn(A)),p=p.insert(N,e.Jn(A.metadata.readTime))}const v=o.jn.newChangeBuffer({trackRemovals:!0}),b=yield iv(o,(A=r,iu(qy(Dn.fromString(`__bundle__/docs/${A}`)))));var A;return o.persistence.runTransaction("Apply bundle documents","readwrite",A=>LL(A,v,h,Ft.min(),p).next(N=>(v.apply(A),N)).next(N=>o.ze.removeMatchingKeysForTargetId(A,b.targetId).next(()=>o.ze.addMatchingKeys(A,l,b.targetId)).next(()=>o.Qn.vn(A,N)).next(()=>N)))})).apply(this,arguments)}function B2(n,e){return VM.apply(this,arguments)}function VM(){return(VM=(0,ge.Z)(function*(n,e,t=jn()){const r=yield iv(n,iu(DM(e.bundledQuery))),o=He(n);return o.persistence.runTransaction("Save named query","readwrite",l=>{const h=Li(e.readTime);if(r.snapshotVersion.compareTo(h)>=0)return o.Je.saveNamedQuery(l,e);const p=r.withResumeToken(Fi.EMPTY_BYTE_STRING,h);return o.Un=o.Un.insert(p.targetId,p),o.ze.updateTargetData(l,p).next(()=>o.ze.removeMatchingKeysForTargetId(l,r.targetId)).next(()=>o.ze.addMatchingKeys(l,t,r.targetId)).next(()=>o.Je.saveNamedQuery(l,e))})})).apply(this,arguments)}class j2{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return xe.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var r;return this.Yn.set(t.id,{id:(r=t).id,version:r.version,createTime:Li(r.createTime)}),xe.resolve()}getNamedQuery(e,t){return xe.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,{name:(r=t).name,query:DM(r.bundledQuery),readTime:Li(r.readTime)}),xe.resolve();var r}}class UM{constructor(){this.Zn=new Ar(Vi.ts),this.es=new Ar(Vi.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const r=new Vi(e,t);this.Zn=this.Zn.add(r),this.es=this.es.add(r)}ss(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.rs(new Vi(e,t))}os(e,t){e.forEach(r=>this.removeReference(r,t))}cs(e){const t=new rt(new Dn([])),r=new Vi(t,e),o=new Vi(t,e+1),l=[];return this.es.forEachInRange([r,o],h=>{this.rs(h),l.push(h.key)}),l}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new rt(new Dn([])),r=new Vi(t,e),o=new Vi(t,e+1);let l=jn();return this.es.forEachInRange([r,o],h=>{l=l.add(h.key)}),l}containsKey(e){const t=new Vi(e,0),r=this.Zn.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Vi{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return rt.comparator(e.key,t.key)||sn(e.ls,t.ls)}static ns(e,t){return sn(e.ls,t.ls)||rt.comparator(e.key,t.key)}}class $2{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Ar(Vi.ts)}checkEmpty(e){return xe.resolve(0===this.In.length)}addMutationBatch(e,t,r,o){const l=this.fs;this.fs++;const h=new CM(l,t,r,o);this.In.push(h);for(const p of o)this.ds=this.ds.add(new Vi(p.key,l)),this.Ht.addToCollectionParentIndex(e,p.key.path.popLast());return xe.resolve(h)}lookupMutationBatch(e,t){return xe.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const o=this._s(t+1),l=o<0?0:o;return xe.resolve(this.In.length>l?this.In[l]:null)}getHighestUnacknowledgedBatchId(){return xe.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return xe.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Vi(t,0),o=new Vi(t,Number.POSITIVE_INFINITY),l=[];return this.ds.forEachInRange([r,o],h=>{const p=this.ws(h.ls);l.push(p)}),xe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ar(sn);return t.forEach(o=>{const l=new Vi(o,0),h=new Vi(o,Number.POSITIVE_INFINITY);this.ds.forEachInRange([l,h],p=>{r=r.add(p.ls)})}),xe.resolve(this.gs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let l=r;rt.isDocumentKey(l)||(l=l.child(""));const h=new Vi(new rt(l),0);let p=new Ar(sn);return this.ds.forEachWhile(v=>{const b=v.key.path;return!!r.isPrefixOf(b)&&(b.length===o&&(p=p.add(v.ls)),!0)},h),xe.resolve(this.gs(p))}gs(e){const t=[];return e.forEach(r=>{const o=this.ws(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){Ct(0===this.ys(t.batchId,"removed")),this.In.shift();let r=this.ds;return xe.forEach(t.mutations,o=>{const l=new Vi(o.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.ds=r})}te(e){}containsKey(e,t){const r=new Vi(t,0),o=this.ds.firstAfterOrEqual(r);return xe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return xe.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class H2{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new gi(rt.comparator),this.size=0}addEntry(e,t,r){const o=t.key,l=this.docs.get(o),h=l?l.size:0,p=this.ps(t);return this.docs=this.docs.insert(o,{document:t.clone(),size:p,readTime:r}),this.size+=p-h,this.Ht.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return xe.resolve(r?r.document.clone():hr.newInvalidDocument(t))}getEntries(e,t){let r=su();return t.forEach(o=>{const l=this.docs.get(o);r=r.insert(o,l?l.document.clone():hr.newInvalidDocument(o))}),xe.resolve(r)}getDocumentsMatchingQuery(e,t,r){let o=su();const l=new rt(t.path.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){const{key:p,value:{document:v,readTime:b}}=h.getNext();if(!t.path.isPrefixOf(p.path))break;b.compareTo(r)<=0||yC(t,v)&&(o=o.insert(v.key,v.clone()))}return xe.resolve(o)}Ts(e,t){return xe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new q2(this)}getSize(e){return xe.resolve(this.size)}}class q2 extends xL{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.document.isValidDocument()?t.push(this.Se.addEntry(e,o.document,this.getReadTime(r))):this.Se.removeEntry(r)}),xe.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class Z2{constructor(e){this.persistence=e,this.Es=new rv(t=>gC(t),qA),this.lastRemoteSnapshotVersion=Ft.min(),this.highestTargetId=0,this.Is=0,this.As=new UM,this.targetCount=0,this.Rs=Wg.se()}forEachTarget(e,t){return this.Es.forEach((r,o)=>t(o)),xe.resolve()}getLastRemoteSnapshotVersion(e){return xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return xe.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),xe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Is&&(this.Is=t),xe.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new Wg(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,xe.resolve()}updateTargetData(e,t){return this.ce(t),xe.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,xe.resolve()}removeTargets(e,t,r){let o=0;const l=[];return this.Es.forEach((h,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Es.delete(h),l.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),xe.waitFor(l).next(()=>o)}getTargetCount(e){return xe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Es.get(t)||null;return xe.resolve(r)}addMatchingKeys(e,t,r){return this.As.ss(t,r),xe.resolve()}removeMatchingKeys(e,t,r){this.As.os(t,r);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach(h=>{l.push(o.markPotentiallyOrphaned(e,h))}),xe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),xe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.As.hs(t);return xe.resolve(r)}containsKey(e,t){return xe.resolve(this.As.containsKey(t))}}class G2{constructor(e,t){this.bs={},this.Le=new ha(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new Z2(this),this.Ht=new b2,this.He=new H2(this.Ht,r=>this.referenceDelegate.Ps(r)),this.N=new mL(t),this.Je=new j2(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new $2(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const o=new W2(this.Le.next());return this.referenceDelegate.vs(),r(o).next(l=>this.referenceDelegate.Vs(o).next(()=>l)).toPromise().then(l=>(o.raiseOnCommittedEvent(),l))}Ss(e,t){return xe.or(Object.values(this.bs).map(r=>()=>r.containsKey(e,t)))}}class W2 extends fL{constructor(e){super(),this.currentSequenceNumber=e}}class BM{constructor(e){this.persistence=e,this.Ds=new UM,this.Cs=null}static Ns(e){return new BM(e)}get xs(){if(this.Cs)return this.Cs;throw st()}addReference(e,t,r){return this.Ds.addReference(r,t),this.xs.delete(r.toString()),xe.resolve()}removeReference(e,t,r){return this.Ds.removeReference(r,t),this.xs.add(r.toString()),xe.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),xe.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(o=>this.xs.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(l=>this.xs.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xe.forEach(this.xs,r=>{const o=rt.fromPath(r);return this.ks(e,o).next(l=>{l||t.removeEntry(o)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(r=>{r?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return xe.or([()=>xe.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function BL(n,e){return`firestore_clients_${n}_${e}`}function jL(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function jM(n,e){return`firestore_targets_${n}_${e}`}class uS{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static $s(e,t,r){const o=JSON.parse(r);let l,h="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return h&&o.error&&(h="string"==typeof o.error.message&&"string"==typeof o.error.code,h&&(l=new Me(o.error.code,o.error.message))),h?new uS(e,t,o.state,l):(Qr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class NC{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){const r=JSON.parse(t);let o,l="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return l&&r.error&&(l="string"==typeof r.error.message&&"string"==typeof r.error.code,l&&(o=new Me(r.error.code,r.error.message))),l?new NC(e,r.state,o):(Qr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class lS{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,l=XA();for(let h=0;o&&h<r.activeTargetIds.length;++h)o=mF(r.activeTargetIds[h]),l=l.add(r.activeTargetIds[h]);return o?new lS(e,l):(Qr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $M{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $M(t.clientId,t.onlineState):(Qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class HM{constructor(){this.activeTargetIds=XA()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qM{constructor(e,t,r,o,l){this.window=e,this.Oe=t,this.persistenceKey=r,this.Ls=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new gi(sn),this.started=!1,this.Ks=[];const h=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.js=BL(this.persistenceKey,this.Ls),this.Qs=`firestore_sequence_number_${this.persistenceKey}`,this.qs=this.qs.insert(this.Ls,new HM),this.Ws=new RegExp(`^firestore_clients_${h}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${h}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${h}_(\\d+)$`),this.Hs=`firestore_online_state_${this.persistenceKey}`,this.Js=function(p){return`firestore_bundle_loaded_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.pn();for(const o of t){if(o===e.Ls)continue;const l=e.getItem(BL(e.persistenceKey,o));if(l){const h=lS.$s(o,l);h&&(e.qs=e.qs.insert(h.clientId,h))}}e.Ys();const r=e.storage.getItem(e.Hs);if(r){const o=e.Xs(r);o&&e.Zs(o)}for(const o of e.Ks)e.Us(o);e.Ks=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,r){this.ei(e,t,r),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(jM(this.persistenceKey,e));if(r){const o=NC.$s(e,r);o&&(t=o.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jM(this.persistenceKey,e))}updateQueryState(e,t,r){this.ii(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.ni(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.js)return void Qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==r.key)if(t.Ws.test(r.key)){if(null==r.newValue){const o=t.ci(r.key);return t.ai(o,null)}{const o=t.ui(r.key,r.newValue);if(o)return t.ai(o.clientId,o)}}else if(t.Gs.test(r.key)){if(null!==r.newValue){const o=t.hi(r.key,r.newValue);if(o)return t.li(o)}}else if(t.zs.test(r.key)){if(null!==r.newValue){const o=t.fi(r.key,r.newValue);if(o)return t.di(o)}}else if(r.key===t.Hs){if(null!==r.newValue){const o=t.Xs(r.newValue);if(o)return t.Zs(o)}}else if(r.key===t.Qs){const o=function(l){let h=ha.T;if(null!=l)try{const p=JSON.parse(l);Ct("number"==typeof p),h=p}catch(p){Qr("SharedClientState","Failed to read sequence number from WebStorage",p)}return h}(r.newValue);o!==ha.T&&t.sequenceNumberHandler(o)}else if(r.key===t.Js)return t.syncEngine.wi()}else t.Ks.push(r)}))}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,r){const o=new uS(this.currentUser,e,t,r),l=jL(this.persistenceKey,this.currentUser,e);this.setItem(l,o.Os())}ni(e){const t=jL(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,r){const o=jM(this.persistenceKey,e),l=new NC(e,t,r);this.setItem(o,l.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const r=this.ci(e);return lS.$s(r,t)}hi(e,t){const r=this.Gs.exec(e),o=Number(r[1]);return uS.$s(new rs(void 0!==r[2]?r[2]:null),o,t)}fi(e,t){const r=this.zs.exec(e),o=Number(r[1]);return NC.$s(o,t)}Xs(e){return $M.$s(e)}li(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine._i(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const r=t?this.qs.insert(e,t):this.qs.remove(e),o=this.ti(this.qs),l=this.ti(r),h=[],p=[];return l.forEach(v=>{o.has(v)||h.push(v)}),o.forEach(v=>{l.has(v)||p.push(v)}),this.syncEngine.gi(h,p).then(()=>{this.qs=r})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=XA();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class $L{constructor(){this.yi=new HM,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,r){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new HM,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class z2{Ti(e){}shutdown(){}}class HL{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const K2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Y2{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Q2 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,r,o){const l=this.Bi(e,t);Be("RestConnection","Sending: ",l,r);const h={};return this.Ui(h,o),this.qi(e,l,h,r).then(p=>(Be("RestConnection","Received: ",p),p),p=>{throw cC("RestConnection",`${e} failed with error: `,p,"url: ",l,"request:",r),p})}Ki(e,t,r,o){return this.Li(e,t,r,o)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+Vy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const r in t.authHeaders)t.authHeaders.hasOwnProperty(r)&&(e[r]=t.authHeaders[r])}Bi(e,t){return`${this.Fi}/v1/${t}:${K2[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,r,o){return new Promise((l,h)=>{const p=new vU;p.listenOnce(mU.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case iM.NO_ERROR:const b=p.getResponseJson();Be("Connection","XHR received:",JSON.stringify(b)),l(b);break;case iM.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),h(new Me(me.DEADLINE_EXCEEDED,"Request time out"));break;case iM.HTTP_ERROR:const A=p.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',A,"response text:",p.getResponseText()),A>0){const N=p.getResponseJson().error;if(N&&N.status&&N.message){const L=function(q){const ae=q.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(ae)>=0?ae:me.UNKNOWN}(N.status);h(new Me(L,N.message))}else h(new Me(me.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new Me(me.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);p.send(t,"POST",v,r,15)})}ji(e,t){const r=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=pU(),l=gU(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new yU({})),this.Ui(h.initMessageHeaders,t),(0,F.uI)()||(0,F.b$)()||(0,F.d)()||(0,F.w1)()||(0,F.Mn)()||(0,F.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const p=r.join("");Be("Connection","Creating WebChannel: "+p,h);const v=o.createWebChannel(p,h);let b=!1,A=!1;const N=new Y2({vi:q=>{A?Be("Connection","Not sending because WebChannel is closed:",q):(b||(Be("Connection","Opening WebChannel transport."),v.open(),b=!0),Be("Connection","WebChannel sending:",q),v.send(q))},Vi:()=>v.close()}),L=(q,ae,Ae)=>{q.listen(ae,Ve=>{try{Ae(Ve)}catch(At){setTimeout(()=>{throw At},0)}})};return L(v,BA.EventType.OPEN,()=>{A||Be("Connection","WebChannel transport opened.")}),L(v,BA.EventType.CLOSE,()=>{A||(A=!0,Be("Connection","WebChannel transport closed"),N.$i())}),L(v,BA.EventType.ERROR,q=>{A||(A=!0,cC("Connection","WebChannel transport errored:",q),N.$i(new Me(me.UNAVAILABLE,"The operation could not be completed")))}),L(v,BA.EventType.MESSAGE,q=>{var ae;if(!A){const Ae=q.data[0];Ct(!!Ae);const Ve=Ae,At=Ve.error||(null===(ae=Ve[0])||void 0===ae?void 0:ae.error);if(At){Be("Connection","WebChannel received error:",At);const $t=At.status;let wn=function(xr){const au=ei[xr];if(void 0!==au)return HF(au)}($t),Qt=At.message;void 0===wn&&(wn=me.INTERNAL,Qt="Unknown error status: "+$t+" with message "+At.message),A=!0,N.$i(new Me(wn,Qt)),v.close()}else Be("Connection","WebChannel received:",Ae),N.Oi(Ae)}}),L(l,_U.STAT_EVENT,q=>{q.stat===uF.PROXY?Be("Connection","Detected buffering proxy"):q.stat===uF.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{N.ki()},0),N}}function qL(){return"undefined"!=typeof window?window:null}function cS(){return"undefined"!=typeof document?document:null}function RC(n){return new i2(n,!0)}class ZM{constructor(e,t,r=1e3,o=1.5,l=6e4){this.Oe=e,this.timerId=t,this.Qi=r,this.Wi=o,this.Gi=l,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),r=Math.max(0,Date.now()-this.Ji),o=Math.max(0,t-r);o>0&&Be("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,o,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class ZL{constructor(e,t,r,o,l,h,p){this.Oe=e,this.er=r,this.nr=o,this.sr=l,this.credentialsProvider=h,this.listener=p,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new ZM(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}stop(){var e=this;return(0,ge.Z)(function*(){e.ur()&&(yield e.close(0))})()}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}_r(){var e=this;return(0,ge.Z)(function*(){if(e.hr())return e.close(0)})()}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var r=this;return(0,ge.Z)(function*(){r.gr(),r.yr(),r.ar.cancel(),r.ir++,4!==e?r.ar.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(Qr(t.toString()),Qr("Using maximum backoff delay to prevent overloading the backend."),r.ar.Yi()):t&&t.code===me.UNAUTHENTICATED&&3!==r.state&&r.credentialsProvider.invalidateToken(),null!==r.stream&&(r.pr(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Ci(t)})()}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(r=>{this.ir===t&&this.Er(r)},r=>{e(()=>{const o=new Me(me.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ir(o)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(r=>{t(()=>this.Ir(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}lr(){var e=this;this.state=5,this.ar.Xi((0,ge.Z)(function*(){e.state=0,e.start()}))}Ir(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class J2 extends ZL{constructor(e,t,r,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,l),this.N=o}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:st(),o=e.targetChange.targetIds||[],l=function(v,b){return v.D?(Ct(void 0===b||"string"==typeof b),Fi.fromBase64String(b||"")):(Ct(void 0===b||b instanceof Uint8Array),Fi.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&function(v){const b=void 0===v.code?me.UNKNOWN:HF(v.code);return new Me(b,v.message||"")}(h);t=new WF(r,o,l,p||null)}else if("documentChange"in e){const r=e.documentChange,o=sc(n,r.document.name),l=Li(r.document.updateTime),h=new As({mapValue:{fields:r.document.fields}}),p=hr.newFoundDocument(o,l,h);t=new eS(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=sc(n,r.document),l=r.readTime?Li(r.readTime):Ft.min(),h=hr.newNoDocument(o,l);t=new eS([],r.removedTargetIds||[],h.key,h)}else if("documentRemove"in e){const r=e.documentRemove,o=sc(n,r.document);t=new eS([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return st();{const r=e.filter,l=new KU(r.count||0);t=new GF(r.targetId,l)}}var v;return t}(this.N,e),r=function(o){if(!("targetChange"in o))return Ft.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?Ft.min():l.readTime?Li(l.readTime):Ft.min()}(e);return this.listener.Rr(t,r)}br(e){const t={};t.database=DC(this.N),t.addTarget=function(o,l){let h;const p=l.target;return h=ZA(p)?{documents:iL(o,p)}:{query:sL(o,p)},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0?h.resumeToken=QF(o,l.resumeToken):l.snapshotVersion.compareTo(Ft.min())>0&&(h.readTime=IC(o,l.snapshotVersion.toTimestamp())),h}(this.N,e);const r=function(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.mr(t)}Pr(e){const t={};t.database=DC(this.N),t.removeTarget=e,this.mr(t)}}class X2 extends ZL{constructor(e,t,r,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,l),this.N=o,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,o){let l=Li(r.updateTime?r.updateTime:o);return l.isEqual(Ft.min())&&(l=Li(o)),new GU(l,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Li(e.commitTime);return this.listener.Dr(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=DC(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>tS(this.N,r))};this.mr(t)}}class eB extends class{}{constructor(e,t,r){super(),this.credentials=e,this.sr=t,this.N=r,this.kr=!1}$r(){if(this.kr)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,r){return this.$r(),this.credentials.getToken().then(o=>this.sr.Li(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===me.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Me(me.UNKNOWN,o.toString())})}Ki(e,t,r){return this.$r(),this.credentials.getToken().then(o=>this.sr.Ki(e,t,r,o)).catch(o=>{throw"FirebaseError"===o.name?(o.code===me.UNAUTHENTICATED&&this.credentials.invalidateToken(),o):new Me(me.UNKNOWN,o.toString())})}terminate(){this.kr=!0}}class tB{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Qr(t),this.Mr=!1):Be("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class nB{constructor(e,t,r,o,l){var h=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=l,this.zr.Ti(p=>{r.enqueueAndForget((0,ge.Z)(function*(){var v;Kf(h)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,ge.Z)(function*(b){const A=He(b);A.Wr.add(4),yield ov(A),A.Hr.set("Unknown"),A.Wr.delete(4),yield PC(A)}),function(b){return v.apply(this,arguments)})(h))}))}),this.Hr=new tB(r,o)}}function PC(n){return GM.apply(this,arguments)}function GM(){return(GM=(0,ge.Z)(function*(n){if(Kf(n))for(const e of n.Gr)yield e(!0)})).apply(this,arguments)}function ov(n){return WM.apply(this,arguments)}function WM(){return(WM=(0,ge.Z)(function*(n){for(const e of n.Gr)yield e(!1)})).apply(this,arguments)}function dS(n,e){const t=He(n);t.Qr.has(e.targetId)||(t.Qr.set(e.targetId,e),YM(t)?KM(t):uv(t).hr()&&zM(t,e))}function MC(n,e){const t=He(n),r=uv(t);t.Qr.delete(e),r.hr()&&GL(t,e),0===t.Qr.size&&(r.hr()?r.wr():Kf(t)&&t.Hr.set("Unknown"))}function zM(n,e){n.Jr.Y(e.targetId),uv(n).br(e)}function GL(n,e){n.Jr.Y(e),uv(n).Pr(e)}function KM(n){n.Jr=new t2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.Qr.get(e)||null}),uv(n).start(),n.Hr.Lr()}function YM(n){return Kf(n)&&!uv(n).ur()&&n.Qr.size>0}function Kf(n){return 0===He(n).Wr.size}function WL(n){n.Jr=void 0}function rB(n){return QM.apply(this,arguments)}function QM(){return(QM=(0,ge.Z)(function*(n){n.Qr.forEach((e,t)=>{zM(n,e)})})).apply(this,arguments)}function iB(n,e){return JM.apply(this,arguments)}function JM(){return(JM=(0,ge.Z)(function*(n,e){WL(n),YM(n)?(n.Hr.qr(e),KM(n)):n.Hr.set("Unknown")})).apply(this,arguments)}function sB(n,e,t){return XM.apply(this,arguments)}function XM(){return(XM=(0,ge.Z)(function*(n,e,t){if(n.Hr.set("Online"),e instanceof WF&&2===e.state&&e.cause)try{yield(r=(0,ge.Z)(function*(o,l){const h=l.cause;for(const p of l.targetIds)o.Qr.has(p)&&(yield o.remoteSyncer.rejectListen(p,h),o.Qr.delete(p),o.Jr.removeTarget(p))}),function(o,l){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield hS(n,r)}else if(e instanceof eS?n.Jr.rt(e):e instanceof GF?n.Jr.ft(e):n.Jr.at(e),!t.isEqual(Ft.min()))try{const r=yield FL(n.localStore);t.compareTo(r)>=0&&(yield function(o,l){const h=o.Jr._t(l);return h.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const b=o.Qr.get(v);b&&o.Qr.set(v,b.withResumeToken(p.resumeToken,l))}}),h.targetMismatches.forEach(p=>{const v=o.Qr.get(p);if(!v)return;o.Qr.set(p,v.withResumeToken(Fi.EMPTY_BYTE_STRING,v.snapshotVersion)),GL(o,p);const b=new Zf(v.target,p,1,v.sequenceNumber);zM(o,b)}),o.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield hS(n,r)}var r})).apply(this,arguments)}function hS(n,e,t){return e1.apply(this,arguments)}function e1(){return(e1=(0,ge.Z)(function*(n,e,t){if(!Zg(e))throw e;n.Wr.add(1),yield ov(n),n.Hr.set("Offline"),t||(t=()=>FL(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Wr.delete(1),yield PC(n)}))})).apply(this,arguments)}function zL(n,e){return e().catch(t=>hS(n,t,e))}function av(n){return t1.apply(this,arguments)}function t1(){return(t1=(0,ge.Z)(function*(n){const e=He(n),t=Yf(e);let r=e.jr.length>0?e.jr[e.jr.length-1].batchId:-1;for(;oB(e);)try{const o=yield L2(e.localStore,r);if(null===o){0===e.jr.length&&t.wr();break}r=o.batchId,aB(e,o)}catch(o){yield hS(e,o)}KL(e)&&YL(e)})).apply(this,arguments)}function oB(n){return Kf(n)&&n.jr.length<10}function aB(n,e){n.jr.push(e);const t=Yf(n);t.hr()&&t.Vr&&t.Sr(e.mutations)}function KL(n){return Kf(n)&&!Yf(n).ur()&&n.jr.length>0}function YL(n){Yf(n).start()}function uB(n){return n1.apply(this,arguments)}function n1(){return(n1=(0,ge.Z)(function*(n){Yf(n).Nr()})).apply(this,arguments)}function lB(n){return r1.apply(this,arguments)}function r1(){return(r1=(0,ge.Z)(function*(n){const e=Yf(n);for(const t of n.jr)e.Sr(t.mutations)})).apply(this,arguments)}function cB(n,e,t){return i1.apply(this,arguments)}function i1(){return(i1=(0,ge.Z)(function*(n,e,t){const r=n.jr.shift(),o=bM.from(r,e,t);yield zL(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield av(n)})).apply(this,arguments)}function dB(n,e){return s1.apply(this,arguments)}function s1(){return(s1=(0,ge.Z)(function*(n,e){var t;e&&Yf(n).Vr&&(yield(t=(0,ge.Z)(function*(r,o){if($F(l=o.code)&&l!==me.ABORTED){const h=r.jr.shift();Yf(r).dr(),yield zL(r,()=>r.remoteSyncer.rejectFailedWrite(h.batchId,o)),yield av(r)}var l}),function(r,o){return t.apply(this,arguments)})(n,e)),KL(n)&&YL(n)})).apply(this,arguments)}function o1(n,e){return a1.apply(this,arguments)}function a1(){return(a1=(0,ge.Z)(function*(n,e){const t=He(n);e?(t.Wr.delete(2),yield PC(t)):e||(t.Wr.add(2),yield ov(t),t.Hr.set("Unknown"))})).apply(this,arguments)}function uv(n){return n.Yr||(n.Yr=function(e,t,r){const o=He(e);return o.$r(),new J2(t,o.sr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:rB.bind(null,n),Ci:iB.bind(null,n),Rr:sB.bind(null,n)}),n.Gr.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Yr.dr(),YM(n)?KM(n):n.Hr.set("Unknown")):(yield n.Yr.stop(),WL(n))});return function(t){return e.apply(this,arguments)}}())),n.Yr}function Yf(n){return n.Xr||(n.Xr=function(e,t,r){const o=He(e);return o.$r(),new X2(t,o.sr,o.credentials,o.N,r)}(n.datastore,n.asyncQueue,{Si:uB.bind(null,n),Ci:dB.bind(null,n),Cr:lB.bind(null,n),Dr:cB.bind(null,n)}),n.Gr.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Xr.dr(),yield av(n)):(yield n.Xr.stop(),n.jr.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.jr.length} pending writes`),n.jr=[]))});return function(t){return e.apply(this,arguments)}}())),n.Xr}class u1{constructor(e,t,r,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=l,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(e,t,r,o,l){const h=Date.now()+r,p=new u1(e,t,h,o,l);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lv(n,e){if(Qr("AsyncQueue",`${e}: ${n}`),Zg(n))return new Me(me.UNAVAILABLE,`${e}: ${n}`);throw n}class cv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||rt.comparator(t.key,r.key):(t,r)=>rt.comparator(t.key,r.key),this.keyedMap=yM(),this.sortedSet=new gi(this.comparator)}static emptySet(e){return new cv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof cv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=r.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new cv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class QL{constructor(){this.Zr=new gi(rt.comparator)}track(e){const t=e.doc.key,r=this.Zr.get(t);r?0!==e.type&&3===r.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==r.type?this.Zr=this.Zr.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Zr=this.Zr.remove(t):1===e.type&&2===r.type?this.Zr=this.Zr.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):st():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,r)=>{e.push(r)}),e}}class dv{constructor(e,t,r,o,l,h,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=v}static fromInitialDocuments(e,t,r,o){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new dv(e,t,cv.emptySet(t),l,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&_C(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class hB{constructor(){this.no=void 0,this.listeners=[]}}class fB{constructor(){this.queries=new rv(e=>AF(e),_C),this.onlineState="Unknown",this.so=new Set}}function l1(n,e){return c1.apply(this,arguments)}function c1(){return(c1=(0,ge.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1,l=t.queries.get(r);if(l||(o=!0,l=new hB),o)try{l.no=yield t.onListen(r)}catch(h){const p=lv(h,`Initialization of query '${gM(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,l),l.listeners.push(e),e.io(t.onlineState),l.no&&e.ro(l.no)&&f1(t)})).apply(this,arguments)}function d1(n,e){return h1.apply(this,arguments)}function h1(){return(h1=(0,ge.Z)(function*(n,e){const t=He(n),r=e.query;let o=!1;const l=t.queries.get(r);if(l){const h=l.listeners.indexOf(e);h>=0&&(l.listeners.splice(h,1),o=0===l.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)})).apply(this,arguments)}function pB(n,e){const t=He(n);let r=!1;for(const o of e){const h=t.queries.get(o.query);if(h){for(const p of h.listeners)p.ro(o)&&(r=!0);h.no=o}}r&&f1(t)}function gB(n,e,t){const r=He(n),o=r.queries.get(e);if(o)for(const l of o.listeners)l.onError(t);r.queries.delete(e)}function f1(n){n.so.forEach(e=>{e.next()})}class p1{constructor(e,t,r){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=r||{}}ro(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new dv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=dv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class mB{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class JL{constructor(e){this.N=e}zn(e){return sc(this.N,e)}Hn(e){return e.metadata.exists?nL(this.N,e.document,!1):hr.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return Li(e)}}class _B{constructor(e,t,r){this._o=e,this.localStore=t,this.N=r,this.queries=[],this.documents=[],this.progress=XL(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,r=new JL(this.N);for(const o of e)if(o.metadata.queries){const l=r.zn(o.metadata.name);for(const h of o.metadata.queries){const p=(t.get(h)||jn()).add(l);t.set(h,p)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function(n,e,t,r){return LM.apply(this,arguments)}(e.localStore,new JL(e.N),e.documents,e._o.id),r=e.yo(e.documents);for(const o of e.queries)yield B2(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",new M2(Object.assign({},e.progress),t)})()}}function XL(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class eV{constructor(e){this.key=e}}class tV{constructor(e){this.key=e}}class nV{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=jn(),this.mutatedKeys=jn(),this.Io=SF(e),this.Ao=new cv(this.Io)}get Ro(){return this.po}bo(e,t){const r=t?t.Po:new QL,o=t?t.Ao:this.Ao;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,p=!1;const v=WA(this.query)&&o.size===this.query.limit?o.last():null,b=zA(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const L=o.get(A),q=yC(this.query,N)?N:null,ae=!!L&&this.mutatedKeys.has(L.key),Ae=!!q&&(q.hasLocalMutations||this.mutatedKeys.has(q.key)&&q.hasCommittedMutations);let Ve=!1;L&&q?L.data.isEqual(q.data)?ae!==Ae&&(r.track({type:3,doc:q}),Ve=!0):this.vo(L,q)||(r.track({type:2,doc:q}),Ve=!0,(v&&this.Io(q,v)>0||b&&this.Io(q,b)<0)&&(p=!0)):!L&&q?(r.track({type:0,doc:q}),Ve=!0):L&&!q&&(r.track({type:1,doc:L}),Ve=!0,(v||b)&&(p=!0)),Ve&&(q?(h=h.add(q),l=Ae?l.add(A):l.delete(A)):(h=h.delete(A),l=l.delete(A)))}),WA(this.query)||zA(this.query))for(;h.size>this.query.limit;){const A=WA(this.query)?h.last():h.first();h=h.delete(A.key),l=l.delete(A.key),r.track({type:1,doc:A})}return{Ao:h,Po:r,Ln:p,mutatedKeys:l}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const l=e.Po.eo();l.sort((b,A)=>function(N,L){const q=ae=>{switch(ae){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return q(N)-q(L)}(b.type,A.type)||this.Io(b.doc,A.doc)),this.Vo(r);const h=t?this.So():[],p=0===this.Eo.size&&this.current?1:0,v=p!==this.To;return this.To=p,0!==l.length||v?{snapshot:new dv(this.query,e.Ao,o,l,e.mutatedKeys,0===p,v,!1),Do:h}:{Do:h}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new QL,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(t=>this.po=this.po.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.po=this.po.delete(t)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=jn(),this.Ao.forEach(r=>{this.Co(r.key)&&(this.Eo=this.Eo.add(r.key))});const t=[];return e.forEach(r=>{this.Eo.has(r)||t.push(new tV(r))}),this.Eo.forEach(r=>{e.has(r)||t.push(new eV(r))}),t}No(e){this.po=e.Gn,this.Eo=jn();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return dv.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class yB{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class vB{constructor(e){this.key=e,this.ko=!1}}class EB{constructor(e,t,r,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.$o={},this.Oo=new rv(p=>AF(p),_C),this.Fo=new Map,this.Mo=new Set,this.Lo=new gi(rt.comparator),this.Bo=new Map,this.Uo=new UM,this.qo={},this.Ko=new Map,this.jo=Wg.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}function wB(n,e){return g1.apply(this,arguments)}function g1(){return(g1=(0,ge.Z)(function*(n,e){const t=V1(n);let r,o;const l=t.Oo.get(e);if(l)r=l.targetId,t.sharedClientState.addLocalQueryTarget(r),o=l.view.xo();else{const h=yield iv(t.localStore,iu(e)),p=t.sharedClientState.addLocalQueryTarget(h.targetId);r=h.targetId,o=yield m1(t,e,r,"current"===p),t.isPrimaryClient&&dS(t.remoteStore,h)}return o})).apply(this,arguments)}function m1(n,e,t,r){return _1.apply(this,arguments)}function _1(){return(_1=(0,ge.Z)(function*(n,e,t,r){n.Wo=(A,N,L)=>{return(q=(0,ge.Z)(function*(ae,Ae,Ve,At){let $t=Ae.view.bo(Ve);$t.Ln&&($t=yield aS(ae.localStore,Ae.query,!1).then(({documents:xr})=>Ae.view.bo(xr,$t)));const wn=At&&At.targetChanges.get(Ae.targetId),Qt=Ae.view.applyChanges($t,ae.isPrimaryClient,wn);return A1(ae,Ae.targetId,Qt.Do),Qt.snapshot}),function(ae,Ae,Ve,At){return q.apply(this,arguments)})(n,A,N,L);var q};const o=yield aS(n.localStore,e,!0),l=new nV(e,o.Gn),h=l.bo(o.documents),p=bC.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),v=l.applyChanges(h,n.isPrimaryClient,p);A1(n,t,v.Do);const b=new yB(e,t,l);return n.Oo.set(e,b),n.Fo.has(t)?n.Fo.get(t).push(e):n.Fo.set(t,[e]),v.snapshot})).apply(this,arguments)}function CB(n,e){return y1.apply(this,arguments)}function y1(){return(y1=(0,ge.Z)(function*(n,e){const t=He(n),r=t.Oo.get(e),o=t.Fo.get(r.targetId);if(o.length>1)return t.Fo.set(r.targetId,o.filter(l=>!_C(l,e))),void t.Oo.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield sv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),MC(t.remoteStore,r.targetId),hv(t,r.targetId)}).catch(zg))):(hv(t,r.targetId),yield sv(t.localStore,r.targetId,!0))})).apply(this,arguments)}function v1(){return(v1=(0,ge.Z)(function*(n,e,t){const r=U1(n);try{const o=yield function(l,h){const p=He(l),v=ki.now(),b=h.reduce((N,L)=>N.add(L.key),jn());let A;return p.persistence.runTransaction("Locally write mutations","readwrite",N=>p.Qn.Pn(N,b).next(L=>{A=L;const q=[];for(const ae of h){const Ae=zU(ae,A.get(ae.key));null!=Ae&&q.push(new Hf(ae.key,Ae,EF(Ae.value.mapValue),Xr.exists(!0)))}return p.In.addMutationBatch(N,v,q,h)})).then(N=>(N.applyToLocalDocumentSet(A),{batchId:N.batchId,changes:A}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(l,h,p){let v=l.qo[l.currentUser.toKey()];v||(v=new gi(sn)),v=v.insert(h,p),l.qo[l.currentUser.toKey()]=v}(r,o.batchId,t),yield jd(r,o.changes),yield av(r.remoteStore)}catch(o){const l=lv(o,"Failed to persist write");t.reject(l)}})).apply(this,arguments)}function rV(n,e){return E1.apply(this,arguments)}function E1(){return(E1=(0,ge.Z)(function*(n,e){const t=He(n);try{const r=yield F2(t.localStore,e);e.targetChanges.forEach((o,l)=>{const h=t.Bo.get(l);h&&(Ct(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?h.ko=!0:o.modifiedDocuments.size>0?Ct(h.ko):o.removedDocuments.size>0&&(Ct(h.ko),h.ko=!1))}),yield jd(t,r,e)}catch(r){yield zg(r)}})).apply(this,arguments)}function iV(n,e,t){const r=He(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.Oo.forEach((l,h)=>{const p=h.view.io(e);p.snapshot&&o.push(p.snapshot)}),function(l,h){const p=He(l);p.onlineState=h;let v=!1;p.queries.forEach((b,A)=>{for(const N of A.listeners)N.io(h)&&(v=!0)}),v&&f1(p)}(r.eventManager,e),o.length&&r.$o.Rr(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function IB(n,e,t){return w1.apply(this,arguments)}function w1(){return(w1=(0,ge.Z)(function*(n,e,t){const r=He(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.Bo.get(e),l=o&&o.key;if(l){let h=new gi(rt.comparator);h=h.insert(l,hr.newNoDocument(l,Ft.min()));const p=jn().add(l),v=new CC(Ft.min(),new Map,new Ar(sn),h,p);yield rV(r,v),r.Lo=r.Lo.remove(l),r.Bo.delete(e),S1(r)}else yield sv(r.localStore,e,!1).then(()=>hv(r,e,t)).catch(zg)})).apply(this,arguments)}function TB(n,e){return C1.apply(this,arguments)}function C1(){return(C1=(0,ge.Z)(function*(n,e){const t=He(n),r=e.batch.batchId;try{const o=yield k2(t.localStore,e);D1(t,r,null),T1(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield jd(t,o)}catch(o){yield zg(o)}})).apply(this,arguments)}function DB(n,e,t){return b1.apply(this,arguments)}function b1(){return(b1=(0,ge.Z)(function*(n,e,t){const r=He(n);try{const o=yield function(l,h){const p=He(l);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let b;return p.In.lookupMutationBatch(v,h).next(A=>(Ct(null!==A),b=A.keys(),p.In.removeMutationBatch(v,A))).next(()=>p.In.performConsistencyCheck(v)).next(()=>p.Qn.Pn(v,b))})}(r.localStore,e);D1(r,e,t),T1(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield jd(r,o)}catch(o){yield zg(o)}})).apply(this,arguments)}function I1(){return(I1=(0,ge.Z)(function*(n,e){const t=He(n);Kf(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(l){const h=He(l);return h.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>h.In.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.Ko.get(r)||[];o.push(e),t.Ko.set(r,o)}catch(r){const o=lv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}})).apply(this,arguments)}function T1(n,e){(n.Ko.get(e)||[]).forEach(t=>{t.resolve()}),n.Ko.delete(e)}function D1(n,e,t){const r=He(n);let o=r.qo[r.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),r.qo[r.currentUser.toKey()]=o}}function hv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Fo.get(e))n.Oo.delete(r),t&&n.$o.Go(r,t);n.Fo.delete(e),n.isPrimaryClient&&n.Uo.cs(e).forEach(r=>{n.Uo.containsKey(r)||sV(n,r)})}function sV(n,e){n.Mo.delete(e.path.canonicalString());const t=n.Lo.get(e);null!==t&&(MC(n.remoteStore,t),n.Lo=n.Lo.remove(e),n.Bo.delete(t),S1(n))}function A1(n,e,t){for(const r of t)r instanceof eV?(n.Uo.addReference(r.key,e),SB(n,r)):r instanceof tV?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Uo.removeReference(r.key,e),n.Uo.containsKey(r.key)||sV(n,r.key)):st()}function SB(n,e){const t=e.key,r=t.path.canonicalString();n.Lo.get(t)||n.Mo.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.Mo.add(r),S1(n))}function S1(n){for(;n.Mo.size>0&&n.Lo.size<n.maxConcurrentLimboResolutions;){const e=n.Mo.values().next().value;n.Mo.delete(e);const t=new rt(Dn.fromString(e)),r=n.jo.next();n.Bo.set(r,new vB(t)),n.Lo=n.Lo.insert(t,r),dS(n.remoteStore,new Zf(iu(qy(t.path)),r,2,ha.T))}}function jd(n,e,t){return x1.apply(this,arguments)}function x1(){return(x1=(0,ge.Z)(function*(n,e,t){const r=He(n),o=[],l=[],h=[];var p;r.Oo.isEmpty()||(r.Oo.forEach((p,v)=>{h.push(r.Wo(v,e,t).then(b=>{if(b){r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,b.fromCache?"not-current":"current"),o.push(b);const A=MM.kn(v.targetId,b);l.push(A)}}))}),yield Promise.all(h),r.$o.Rr(o),yield(p=(0,ge.Z)(function*(v,b){const A=He(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>xe.forEach(b,L=>xe.forEach(L.Nn,q=>A.persistence.referenceDelegate.addReference(N,L.targetId,q)).next(()=>xe.forEach(L.xn,q=>A.persistence.referenceDelegate.removeReference(N,L.targetId,q)))))}catch(N){if(!Zg(N))throw N;Be("LocalStore","Failed to update sequence numbers: "+N)}for(const N of b){const L=N.targetId;if(!N.fromCache){const q=A.Un.get(L),Ae=q.withLastLimboFreeSnapshotVersion(q.snapshotVersion);A.Un=A.Un.insert(L,Ae)}}}),function(v,b){return p.apply(this,arguments)})(r.localStore,l))})).apply(this,arguments)}function xB(n,e){return N1.apply(this,arguments)}function N1(){return(N1=(0,ge.Z)(function*(n,e){const t=He(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield kL(t.localStore,e);t.currentUser=e,(o=t).Ko.forEach(h=>{h.forEach(p=>{p.reject(new Me(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ko.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield jd(t,r.Wn)}var o})).apply(this,arguments)}function NB(n,e){const t=He(n),r=t.Bo.get(e);if(r&&r.ko)return jn().add(r.key);{let o=jn();const l=t.Fo.get(e);if(!l)return o;for(const h of l){const p=t.Oo.get(h);o=o.unionWith(p.view.Ro)}return o}}function RB(n,e){return R1.apply(this,arguments)}function R1(){return(R1=(0,ge.Z)(function*(n,e){const t=He(n),r=yield aS(t.localStore,e.query,!0),o=e.view.No(r);return t.isPrimaryClient&&A1(t,e.targetId,o.Do),o})).apply(this,arguments)}function PB(n){return P1.apply(this,arguments)}function P1(){return(P1=(0,ge.Z)(function*(n){const e=He(n);return UL(e.localStore).then(t=>jd(e,t))})).apply(this,arguments)}function MB(n,e,t,r){return M1.apply(this,arguments)}function M1(){return(M1=(0,ge.Z)(function*(n,e,t,r){const o=He(n),l=yield function(h,p){const v=He(h),b=He(v.In);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>b.Xt(A,p).next(N=>N?v.Qn.Pn(A,N):xe.resolve(null)))}(o.localStore,e);var p;null!==l?("pending"===t?yield av(o.remoteStore):"acknowledged"===t||"rejected"===t?(D1(o,e,r||null),T1(o,e),p=e,He(He(o.localStore).In).te(p)):st(),yield jd(o,l)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)})).apply(this,arguments)}function O1(){return(O1=(0,ge.Z)(function*(n,e){const t=He(n);if(V1(t),U1(t),!0===e&&!0!==t.Qo){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield oV(t,r.toArray());t.Qo=!0,yield o1(t.remoteStore,!0);for(const l of o)dS(t.remoteStore,l)}else if(!1===e&&!1!==t.Qo){const r=[];let o=Promise.resolve();t.Fo.forEach((l,h)=>{t.sharedClientState.isLocalQueryTarget(h)?r.push(h):o=o.then(()=>(hv(t,h),sv(t.localStore,h,!0))),MC(t.remoteStore,h)}),yield o,yield oV(t,r),function(l){const h=He(l);h.Bo.forEach((p,v)=>{MC(h.remoteStore,v)}),h.Uo.us(),h.Bo=new Map,h.Lo=new gi(rt.comparator)}(t),t.Qo=!1,yield o1(t.remoteStore,!1)}})).apply(this,arguments)}function oV(n,e,t){return k1.apply(this,arguments)}function k1(){return(k1=(0,ge.Z)(function*(n,e,t){const r=He(n),o=[],l=[];for(const h of e){let p;const v=r.Fo.get(h);if(v&&0!==v.length){p=yield iv(r.localStore,iu(v[0]));for(const b of v){const A=r.Oo.get(b),N=yield RB(r,A);N.snapshot&&l.push(N.snapshot)}}else{const b=yield VL(r.localStore,h);p=yield iv(r.localStore,b),yield m1(r,aV(b),h,!1)}o.push(p)}return r.$o.Rr(l),o})).apply(this,arguments)}function aV(n){return TF(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function kB(n){const e=He(n);return He(He(e.localStore).persistence).pn()}function FB(n,e,t,r){return F1.apply(this,arguments)}function F1(){return(F1=(0,ge.Z)(function*(n,e,t,r){const o=He(n);if(o.Qo)Be("SyncEngine","Ignoring unexpected query state notification.");else if(o.Fo.has(e))switch(t){case"current":case"not-current":{const l=yield UL(o.localStore),h=CC.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield jd(o,l,h);break}case"rejected":yield sv(o.localStore,e,!0),hv(o,e,r);break;default:st()}})).apply(this,arguments)}function LB(n,e,t){return L1.apply(this,arguments)}function L1(){return(L1=(0,ge.Z)(function*(n,e,t){const r=V1(n);if(r.Qo){for(const o of e){if(r.Fo.has(o)){Be("SyncEngine","Adding an already active target "+o);continue}const l=yield VL(r.localStore,o),h=yield iv(r.localStore,l);yield m1(r,aV(l),h.targetId,!1),dS(r.remoteStore,h)}for(const o of t)r.Fo.has(o)&&(yield sv(r.localStore,o,!1).then(()=>{MC(r.remoteStore,o),hv(r,o)}).catch(zg))}})).apply(this,arguments)}function V1(n){const e=He(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=rV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=NB.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IB.bind(null,e),e.$o.Rr=pB.bind(null,e.eventManager),e.$o.Go=gB.bind(null,e.eventManager),e}function U1(n){const e=He(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TB.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DB.bind(null,e),e}class uV{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.N=RC(e.databaseInfo.databaseId),t.sharedClientState=t.Ho(e),t.persistence=t.Jo(e),yield t.persistence.start(),t.gcScheduler=t.Yo(e),t.localStore=t.Xo(e)})()}Yo(e){return null}Xo(e){return OL(this.persistence,new ML,e.initialUser,this.N)}Jo(e){return new G2(BM.Ns,this.N)}Ho(e){return new $L}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class lV extends uV{constructor(e,t,r){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e),yield function(n){return FM.apply(this,arguments)}(r.localStore),yield r.Zo.initialize(r,e),yield U1(r.Zo.syncEngine),yield av(r.Zo.remoteStore),yield r.persistence.nn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Xo(e){return OL(this.persistence,new ML,e.initialUser,this.N)}Yo(e){return new A2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=PM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Oo.withCacheSize(this.cacheSizeBytes):Oo.DEFAULT;return new RM(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,qL(),cS(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new $L}}class UB extends lV{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ge.Z)(function*(){yield t().call(r,e);const o=r.Zo.syncEngine;r.sharedClientState instanceof qM&&(r.sharedClientState.syncEngine={_i:MB.bind(null,o),mi:FB.bind(null,o),gi:LB.bind(null,o),pn:kB.bind(null,o),wi:PB.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.nn(function(){var l=(0,ge.Z)(function*(h){yield function(n,e){return O1.apply(this,arguments)}(r.Zo.syncEngine,h),r.gcScheduler&&(h&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):h||r.gcScheduler.stop())});return function(h){return l.apply(this,arguments)}}())})()}Ho(e){const t=qL();if(!qM.bt(t))throw new Me(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=PM(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qM(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class B1{initialize(e,t){var r=this;return(0,ge.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>iV(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=xB.bind(null,r.syncEngine),yield o1(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fB}createDatastore(e){const t=RC(e.databaseInfo.databaseId),r=new Q2(e.databaseInfo);return new eB(e.credentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,l=p=>iV(this.syncEngine,p,0),h=HL.bt()?new HL:new z2,new nB(t,r,o,l,h);var t,r,o,l,h}createSyncEngine(e,t){return function(r,o,l,h,p,v,b){const A=new EB(r,o,l,h,p,v);return b&&(A.Qo=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const r=He(t);Be("RemoteStore","RemoteStore shutting down."),r.Wr.add(5),yield ov(r),r.zr.shutdown(),r.Hr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function cV(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class fS{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class BB{constructor(e,t){this.nc=e,this.N=t,this.metadata=new Oi,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(r=>{r&&r.wo()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.nc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}zo(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.ic()})()}ic(){var e=this;return(0,ge.Z)(function*(){const t=yield e.rc();if(null===t)return null;const r=e.sc.decode(t),o=Number(r);isNaN(o)&&e.oc(`length string (${r}) is not valid number`);const l=yield e.cc(o);return new mB(JSON.parse(l),t.length+o)})()}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}rc(){var e=this;return(0,ge.Z)(function*(){for(;e.ac()<0&&!(yield e.uc()););if(0===e.buffer.length)return null;const t=e.ac();t<0&&e.oc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.uc())&&t.oc("Reached the end of bundle when more is expected.");const r=t.sc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}uc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.nc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class jB{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ge.Z)(function*(l,h){const p=He(l),v=DC(p.N)+"/documents",b={documents:h.map(q=>TC(p.N,q))},A=yield p.Ki("BatchGetDocuments",v,b),N=new Map;A.forEach(q=>{const ae=function(n,e){return"found"in e?function(t,r){Ct(!!r.found);const o=sc(t,r.found.name),l=Li(r.found.updateTime),h=new As({mapValue:{fields:r.found.fields}});return hr.newFoundDocument(o,l,h)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const o=sc(t,r.missing),l=Li(r.readTime);return hr.newNoDocument(o,l)}(n,e):st()}(p.N,q);N.set(ae.key.toString(),ae)});const L=[];return h.forEach(q=>{const ae=N.get(q.toString());Ct(!!ae),L.push(ae)}),L}),function(l,h){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new wC(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const l=rt.fromPath(o);e.mutations.push(new _M(l,e.precondition(l)))}),yield(r=(0,ge.Z)(function*(o,l){const h=He(o),p=DC(h.N)+"/documents",v={writes:l.map(b=>tS(h.N,b))};yield h.Li("Commit",p,v)}),function(o,l){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=Ft.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Xr.updateTime(t):Xr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ft.min()))throw new Me(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xr.updateTime(t)}return Xr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $B{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.hc=5,this.ar=new ZM(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){var e=this;this.ar.Xi((0,ge.Z)(function*(){const t=new jB(e.datastore),r=e.fc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(l=>{e.dc(l)}))}).catch(o=>{e.dc(o)})}))}fc(e){try{const t=this.updateFunction(e);return!Bg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!$F(t)}return!1}}class HB{constructor(e,t,r){var o=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=r,this.user=rs.UNAUTHENTICATED,this.clientId=dF.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,function(){var l=(0,ge.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield o.credentialListener(h),o.user=h});return function(h){return l.apply(this,arguments)}}())}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,credentials:e.credentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.credentials.shutdown(),t.resolve()}catch(r){const o=lv(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function dV(n,e){return j1.apply(this,arguments)}function j1(){return(j1=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ge.Z)(function*(l){r.isEqual(l)||(yield kL(e.localStore,l),r=l)});return function(l){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e})).apply(this,arguments)}function hV(n,e){return $1.apply(this,arguments)}function $1(){return($1=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield H1(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>{return(l=(0,ge.Z)(function*(h,p){const v=He(h);v.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const b=Kf(v);v.Wr.add(3),yield ov(v),b&&v.Hr.set("Unknown"),yield v.remoteSyncer.handleCredentialChange(p),v.Wr.delete(3),yield PC(v)}),function(h,p){return l.apply(this,arguments)})(e.remoteStore,o);var l}),n.onlineComponents=e})).apply(this,arguments)}function H1(n){return q1.apply(this,arguments)}function q1(){return(q1=(0,ge.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield dV(n,new uV)),n.offlineComponents})).apply(this,arguments)}function pS(n){return Z1.apply(this,arguments)}function Z1(){return(Z1=(0,ge.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield hV(n,new B1)),n.onlineComponents})).apply(this,arguments)}function fV(n){return H1(n).then(e=>e.persistence)}function G1(n){return H1(n).then(e=>e.localStore)}function pV(n){return pS(n).then(e=>e.remoteStore)}function W1(n){return pS(n).then(e=>e.syncEngine)}function fv(n){return z1.apply(this,arguments)}function z1(){return(z1=(0,ge.Z)(function*(n){const e=yield pS(n),t=e.eventManager;return t.onListen=wB.bind(null,e.syncEngine),t.onUnlisten=CB.bind(null,e.syncEngine),t})).apply(this,arguments)}function gV(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,l,h,p,v){const b=new fS({next:N=>{l.enqueueAndForget(()=>d1(o,A));const L=N.docs.has(h);!L&&N.fromCache?v.reject(new Me(me.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&N.fromCache&&p&&"server"===p.source?v.reject(new Me(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),A=new p1(qy(h.path),b,{includeMetadataChanges:!0,fo:!0});return l1(o,A)}(yield fv(n),n.asyncQueue,e,t,r)})),r.promise}function mV(n,e,t={}){const r=new Oi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(o,l,h,p,v){const b=new fS({next:N=>{l.enqueueAndForget(()=>d1(o,A)),N.fromCache&&"server"===p.source?v.reject(new Me(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),A=new p1(h,b,{includeMetadataChanges:!0,fo:!0});return l1(o,A)}(yield fv(n),n.asyncQueue,e,t,r)})),r.promise}class JB{constructor(e,t,r,o,l,h,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.useFetchStreams=v}}class pv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof pv&&e.projectId===this.projectId&&e.database===this.database}}const _V=new Map;function K1(n,e,t){if(!t)throw new Me(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function yV(n,e,t,r){if(!0===e&&!0===r)throw new Me(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function vV(n){if(!rt.isDocumentKey(n))throw new Me(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function EV(n){if(rt.isDocumentKey(n))throw new Me(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function gS(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function gn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=gS(n);throw new Me(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function wV(n,e){if(e<=0)throw new Me(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class CV{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,yV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class OC{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new CV({}),this._settingsFrozen=!1,e instanceof pv?this._databaseId=e:(this._app=e,this._databaseId=function(r){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new Me(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pv(r.options.projectId)}(e))}get app(){if(!this._app)throw new Me(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new CV(e),void 0!==e.credentials&&(this._credentials=function(t){if(!t)return new CU;switch(t.type){case"gapi":const r=t.client;return Ct(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new DU(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(me.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=_V.get(e);t&&(Be("ComponentProvider","Removing Datastore"),_V.delete(e),t.terminate())}(this),Promise.resolve()}}class ar{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ac(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ar(this.firestore,e,this._key)}}class xs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new xs(this.firestore,e,this._query)}}class ac extends xs{constructor(e,t,r){super(e,t,qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ar(this.firestore,null,new rt(e))}withConverter(e){return new ac(this.firestore,e,this._path)}}function bV(n,e,...t){if(n=(0,F.m9)(n),K1("collection","path",e),n instanceof OC){const r=Dn.fromString(e,...t);return EV(r),new ac(n,null,r)}{if(!(n instanceof ar||n instanceof ac))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Dn.fromString(e,...t));return EV(r),new ac(n.firestore,null,r)}}function mS(n,e,...t){if(n=(0,F.m9)(n),1===arguments.length&&(e=dF.I()),K1("doc","path",e),n instanceof OC){const r=Dn.fromString(e,...t);return vV(r),new ar(n,null,new rt(r))}{if(!(n instanceof ar||n instanceof ac))throw new Me(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Dn.fromString(e,...t));return vV(r),new ar(n.firestore,n instanceof ac?n.converter:null,new rt(r))}}function IV(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),(n instanceof ar||n instanceof ac)&&(e instanceof ar||e instanceof ac)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function TV(n,e){return n=(0,F.m9)(n),e=(0,F.m9)(e),n instanceof xs&&e instanceof xs&&n.firestore===e.firestore&&_C(n._query,e._query)&&n.converter===e.converter}class tj{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new ZM(this,"async_queue_retry"),this.Rc=()=>{const t=cS();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ar.tr()};const e=cS();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=cS();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new Oi;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}vc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.mc.length){try{yield e.mc[0](),e.mc.shift(),e.ar.reset()}catch(t){if(!Zg(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.mc.length>0&&e.ar.Xi(()=>e.vc())}})()}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(r=>{throw this.Tc=r,this.Ec=!1,Qr("INTERNAL UNHANDLED ERROR: ",function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+"\n"+l.stack),h}(r)),r}).then(r=>(this.Ec=!1,r))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const o=u1.createAndSchedule(this,e,t,r,l=>this.Vc(l));return this.yc.push(o),o}bc(){this.Tc&&st()}verifyOperationInProgress(){}Sc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e._c,yield t}while(t!==e._c)})()}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function Y1(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class nj{constructor(){this._progressObserver={},this._taskCompletionResolver=new Oi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class yr extends OC{constructor(e,t){super(e,t),this.type="firestore",this._queue=new tj,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||DV(this),this._firestoreClient.terminate()}}function mi(n){return n._firestoreClient||DV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function DV(n){var e;const t=n._freezeSettings(),r=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new JB(n._databaseId,l,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var l,p;n._firestoreClient=new HB(n._credentials,n._queue,r)}function AV(n,e,t){const r=new Oi;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield dV(n,t),yield hV(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(l=o).name?l.code===me.FAILED_PRECONDITION||l.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var l})).then(()=>r.promise)}function SV(n){if(n._initialized||n._terminated)throw new Me(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $d{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new is(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class uc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uc(Fi.fromBase64String(e))}catch(t){throw new Me(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new uc(Fi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Kg{constructor(e){this._methodName=e}}class _S{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return sn(this._lat,e._lat)||sn(this._long,e._long)}}const hj=/^__.*__$/;class fj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Hf(e,this.data,this.fieldMask,t,this.fieldTransforms):new EC(e,this.data,t,this.fieldTransforms)}}class xV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function NV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class yS{constructor(e,t,r,o,l,h){this.settings=e,this.databaseId=t,this.N=r,this.ignoreUndefinedProperties=o,void 0===l&&this.xc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new yS(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$c({path:r,Fc:!1});return o.Mc(e),o}Lc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.$c({path:r,Fc:!1});return o.xc(),o}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return ES(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(NV(this.kc)&&hj.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class pj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=r||RC(e)}jc(e,t,r,o=!1){return new yS({kc:e,methodName:t,Kc:r,path:is.emptyPath(),Fc:!1,qc:o},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function Yg(n){const e=n._freezeSettings(),t=RC(n._databaseId);return new pj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function vS(n,e,t,r,o,l={}){const h=n.jc(l.merge||l.mergeFields?2:0,e,t,o);eO("Data must be an object, but it was:",h,r);const p=MV(r,h);let v,b;if(l.merge)v=new By(h.fieldMask),b=h.fieldTransforms;else if(l.mergeFields){const A=[];for(const N of l.mergeFields){const L=tO(e,N,t);if(!h.contains(L))throw new Me(me.INVALID_ARGUMENT,`Field '${L}' is specified in your field mask but missing from your input data.`);kV(A,L)||A.push(L)}v=new By(A),b=h.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,b=h.fieldTransforms;return new fj(new As(p),v,b)}class kC extends Kg{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kC}}function RV(n,e,t){return new yS({kc:3,Kc:e.settings.Kc,methodName:n._methodName,Fc:t},e.databaseId,e.N,e.ignoreUndefinedProperties)}class Q1 extends Kg{_toFieldTransform(e){return new vC(e.path,new Gy)}isEqual(e){return e instanceof Q1}}class gj extends Kg{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=RV(this,e,!0),r=this.Qc.map(l=>Qg(l,t)),o=new $g(r);return new vC(e.path,o)}isEqual(e){return this===e}}class mj extends Kg{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=RV(this,e,!0),r=this.Qc.map(l=>Qg(l,t)),o=new Hg(r);return new vC(e.path,o)}isEqual(e){return this===e}}class _j extends Kg{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new Wy(e.N,RF(e.N,this.Wc));return new vC(e.path,t)}isEqual(e){return this===e}}function J1(n,e,t,r){const o=n.jc(1,e,t);eO("Data must be an object, but it was:",o,r);const l=[],h=As.empty();Ug(r,(v,b)=>{const A=nO(e,v,t);b=(0,F.m9)(b);const N=o.Lc(A);if(b instanceof kC)l.push(A);else{const L=Qg(b,N);null!=L&&(l.push(A),h.set(A,L))}});const p=new By(l);return new xV(h,p,o.fieldTransforms)}function X1(n,e,t,r,o,l){const h=n.jc(1,e,t),p=[tO(e,r,t)],v=[o];if(l.length%2!=0)throw new Me(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let L=0;L<l.length;L+=2)p.push(tO(e,l[L])),v.push(l[L+1]);const b=[],A=As.empty();for(let L=p.length-1;L>=0;--L)if(!kV(b,p[L])){const q=p[L];let ae=v[L];ae=(0,F.m9)(ae);const Ae=h.Lc(q);if(ae instanceof kC)b.push(q);else{const Ve=Qg(ae,Ae);null!=Ve&&(b.push(q),A.set(q,Ve))}}const N=new By(b);return new xV(A,N,h.fieldTransforms)}function PV(n,e,t,r=!1){return Qg(t,n.jc(r?4:3,e))}function Qg(n,e){if(OV(n=(0,F.m9)(n)))return eO("Unsupported field value:",e,n),MV(n,e);if(n instanceof Kg)return function(t,r){if(!NV(r.kc))throw r.Uc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Uc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Fc&&4!==e.kc)throw e.Uc("Nested arrays are not supported");return function(t,r){const o=[];let l=0;for(const h of t){let p=Qg(h,r.Bc(l));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),l++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,F.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return RF(r.N,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=ki.fromDate(t);return{timestampValue:IC(r.N,o)}}if(t instanceof ki){const o=new ki(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:IC(r.N,o)}}if(t instanceof _S)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof uc)return{bytesValue:QF(r.N,t._byteString)};if(t instanceof ar){const o=r.databaseId,l=t.firestore._databaseId;if(!l.isEqual(o))throw r.Uc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:vM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Uc(`Unsupported field value: ${gS(t)}`)}(n,e)}function MV(n,e){const t={};return pF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ug(n,(r,o)=>{const l=Qg(o,e.Oc(r));null!=l&&(t[r]=l)}),{mapValue:{fields:t}}}function OV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ki||n instanceof _S||n instanceof uc||n instanceof ar||n instanceof Kg)}function eO(n,e,t){if(!OV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=gS(t);throw e.Uc("an object"===r?n+" a custom object":n+" "+r)}var r}function tO(n,e,t){if((e=(0,F.m9)(e))instanceof $d)return e._internalPath;if("string"==typeof e)return nO(n,e);throw ES("Field path arguments must be of type string or FieldPath.",n,!1,void 0,t)}const yj=new RegExp("[~\\*/\\[\\]]");function nO(n,e,t){if(e.search(yj)>=0)throw ES(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new $d(...e.split("."))._internalPath}catch(r){throw ES(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ES(n,e,t,r,o){const l=r&&!r.isEmpty(),h=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(l||h)&&(v+=" (found",l&&(v+=` in field ${r}`),h&&(v+=` in document ${o}`),v+=")"),new Me(me.INVALID_ARGUMENT,p+n+v)}function kV(n,e){return n.some(t=>t.isEqual(e))}class FC{constructor(e,t,r,o,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ar(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wS("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vj extends FC{data(){return super.data()}}function wS(n,e){return"string"==typeof e?nO(n,e):e instanceof $d?e._internalPath:e._delegate._internalPath}class Jg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hd extends FC{constructor(e,t,r,o,l,h){super(e,t,r,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new LC(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(wS("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class LC extends Hd{data(e={}){return super.data(e)}}class Qf{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Jg(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new LC(this._firestore,this._userDataWriter,r.key,r,new Jg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map(h=>({type:"added",doc:new LC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Jg(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:l++}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(h=>o||3!==h.type).map(h=>{const p=new LC(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Jg(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,b=-1;return 0!==h.type&&(v=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),1!==h.type&&(l=l.add(h.doc),b=l.indexOf(h.doc.key)),{type:Ej(h.type),doc:p,oldIndex:v,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ej(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function FV(n,e){return n instanceof Hd&&e instanceof Hd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Qf&&e instanceof Qf&&n._firestore===e._firestore&&TV(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function LV(n){if(zA(n)&&0===n.explicitOrderBy.length)throw new Me(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VC{}function Jf(n,...e){for(const t of e)n=t._apply(n);return n}class wj extends VC{constructor(e,t,r){super(),this.Gc=e,this.zc=t,this.Hc=r,this.type="where"}_apply(e){const t=Yg(e.firestore),r=function(o,l,h,p,v,b,A){let N;if(v.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on FieldPath.documentId().`);if("in"===b||"not-in"===b){HV(A,b);const q=[];for(const ae of A)q.push($V(p,o,ae));N={arrayValue:{values:q}}}else N=$V(p,o,A)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||HV(A,b),N=PV(h,"where",A,"in"===b||"not-in"===b);const L=Js.create(v,b,N);return function(q,ae){if(ae.v()){const Ve=fM(q);if(null!==Ve&&!Ve.isEqual(ae.field))throw new Me(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ve.toString()}' and '${ae.field.toString()}'`);const At=hM(q);null!==At&&qV(0,ae.field,At)}const Ae=function(Ve,At){for(const $t of Ve.filters)if(At.indexOf($t.op)>=0)return $t.op;return null}(q,function(Ve){switch(Ve){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ae.op));if(null!==Ae)throw new Me(me.INVALID_ARGUMENT,Ae===ae.op?`Invalid query. You cannot use more than one '${ae.op.toString()}' filter.`:`Invalid query. You cannot use '${ae.op.toString()}' filters with '${Ae.toString()}' filters.`)}(o,L),L}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new xs(e.firestore,e.converter,function(o,l){const h=o.filters.concat([l]);return new Vd(o.path,o.collectionGroup,o.explicitOrderBy.slice(),h,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class bj extends VC{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(r,o,l){if(null!==r.startAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const h=new Hy(o,l);return function(p,v){if(null===hM(p)){const b=fM(p);null!==b&&qV(0,b,v.field)}}(r,h),h}(e._query,this.Gc,this.Jc);return new xs(e.firestore,e.converter,function(r,o){const l=r.explicitOrderBy.concat([o]);return new Vd(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class VV extends VC{constructor(e,t,r){super(),this.type=e,this.Yc=t,this.Xc=r}_apply(e){return new xs(e.firestore,e.converter,DF(e._query,this.Yc,this.Xc))}}class UV extends VC{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=jV(e,this.type,this.Zc,this.ta);return new xs(e.firestore,e.converter,(o=t,new Vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class BV extends VC{constructor(e,t,r){super(),this.type=e,this.Zc=t,this.ta=r}_apply(e){const t=jV(e,this.type,this.Zc,this.ta);return new xs(e.firestore,e.converter,(o=t,new Vd((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function jV(n,e,t,r){if(t[0]=(0,F.m9)(t[0]),t[0]instanceof FC)return function(o,l,h,p,v){if(!p)throw new Me(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${h}().`);const b=[];for(const A of Zy(o))if(A.field.isKeyField())b.push($A(l,p.key));else{const N=p.data.field(A.field);if(aM(N))throw new Me(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const L=A.field.canonicalString();throw new Me(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${L}' (used as the orderBy) does not exist.`)}b.push(N)}return new mC(b,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Yg(n.firestore);return function(l,h,p,v,b,A){const N=l.explicitOrderBy;if(b.length>N.length)throw new Me(me.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const L=[];for(let q=0;q<b.length;q++){const ae=b[q];if(N[q].field.isKeyField()){if("string"!=typeof ae)throw new Me(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ae}`);if(!pM(l)&&-1!==ae.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${v}() must be a plain document ID, but '${ae}' contains a slash.`);const Ae=l.path.child(Dn.fromString(ae));if(!rt.isDocumentKey(Ae))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${v}() must result in a valid document path, but '${Ae}' is not because it contains an odd number of segments.`);const Ve=new rt(Ae);L.push($A(h,Ve))}else{const Ae=PV(p,v,ae);L.push(Ae)}}return new mC(L,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function $V(n,e,t){if("string"==typeof(t=(0,F.m9)(t))){if(""===t)throw new Me(me.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!pM(e)&&-1!==t.indexOf("/"))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Dn.fromString(t));if(!rt.isDocumentKey(r))throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $A(n,new rt(r))}if(t instanceof ar)return $A(n,t._key);throw new Me(me.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${gS(t)}.`)}function HV(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function qV(n,e,t){if(!t.isEqual(e))throw new Me(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class rO{convertValue(e,t="none"){switch(jg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(jy(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return Ug(e.fields,(o,l)=>{r[o]=this.convertValue(l,t)}),r}convertGeoPoint(e){return new _S(Jr(e.latitude),Jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gF(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hC(e));default:return null}}convertTimestamp(e){const t=$f(e);return new ki(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Dn.fromString(e);Ct(cL(r));const o=new pv(r.get(1),r.get(3)),l=new rt(r.popFirst(5));return o.isEqual(t)||Qr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}function CS(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Rj extends rO{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}class ZV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yg(e)}set(e,t,r){this._verifyNotCommitted();const o=Xf(e,this._firestore),l=CS(o.converter,t,r),h=vS(this._dataReader,"WriteBatch.set",o._key,l,null!==o.converter,r);return this._mutations.push(h.toMutation(o._key,Xr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const l=Xf(e,this._firestore);let h;return h="string"==typeof(t=(0,F.m9)(t))||t instanceof $d?X1(this._dataReader,"WriteBatch.update",l._key,t,r,o):J1(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(h.toMutation(l._key,Xr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xf(e,this._firestore);return this._mutations=this._mutations.concat(new wC(t._key,Xr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Xf(n,e){if((n=(0,F.m9)(n)).firestore!==e)throw new Me(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Xg extends rO{constructor(e){super(),this.firestore=e}convertBytes(e){return new uc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ar(this.firestore,null,t)}}function GV(n,e,t){n=gn(n,ar);const r=gn(n.firestore,yr),o=CS(n.converter,e,t);return gv(r,[vS(Yg(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,Xr.none())])}function WV(n,e,t,...r){n=gn(n,ar);const o=gn(n.firestore,yr),l=Yg(o);let h;return h="string"==typeof(e=(0,F.m9)(e))||e instanceof $d?X1(l,"updateDoc",n._key,e,t,r):J1(l,"updateDoc",n._key,e),gv(o,[h.toMutation(n._key,Xr.exists(!0))])}function zV(n,...e){var t,r,o;n=(0,F.m9)(n);let l={includeMetadataChanges:!1},h=0;"object"!=typeof e[h]||Y1(e[h])||(l=e[h],h++);const p={includeMetadataChanges:l.includeMetadataChanges};if(Y1(e[h])){const N=e[h];e[h]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[h+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[h+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let v,b,A;if(n instanceof ar)b=gn(n.firestore,yr),A=qy(n._key.path),v={next:N=>{e[h]&&e[h](iO(b,n,N))},error:e[h+1],complete:e[h+2]};else{const N=gn(n,xs);b=gn(N.firestore,yr),A=N._query;const L=new Xg(b);v={next:q=>{e[h]&&e[h](new Qf(b,L,N,q))},error:e[h+1],complete:e[h+2]},LV(n._query)}return function(N,L,q,ae){const Ae=new fS(ae),Ve=new p1(L,Ae,q);return N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return l1(yield fv(N),Ve)})),()=>{Ae.ec(),N.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return d1(yield fv(N),Ve)}))}}(mi(b),A,p,v)}function gv(n,e){return function(t,r){const o=new Oi;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(n,e,t){return v1.apply(this,arguments)}(yield W1(t),r,o)})),o.promise}(mi(n),e)}function iO(n,e,t){const r=t.docs.get(e._key),o=new Xg(n);return new Hd(n,o,e._key,r,new Jg(t.hasPendingWrites,t.fromCache),e.converter)}class jj extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yg(e)}get(e){const t=Xf(e,this._firestore),r=new Rj(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return st();const l=o[0];if(l.isFoundDocument())return new FC(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new FC(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const o=Xf(e,this._firestore),l=CS(o.converter,t,r),h=vS(this._dataReader,"Transaction.set",o._key,l,null!==o.converter,r);return this._transaction.set(o._key,h),this}update(e,t,r,...o){const l=Xf(e,this._firestore);let h;return h="string"==typeof(t=(0,F.m9)(t))||t instanceof $d?X1(this._dataReader,"Transaction.update",l._key,t,r,o):J1(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,h),this}delete(e){const t=Xf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xf(e,this._firestore),r=new Xg(this._firestore);return super.get(e).then(o=>new Hd(this._firestore,r,t._key,o._document,new Jg(!1,!1),t.converter))}}function sO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function KV(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function YV(){if("undefined"==typeof atob)throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Vy=Ji.SDK_VERSION,(0,Ji._registerComponent)(new Wa.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),l=new yr(o,new IU(t.getProvider("auth-internal")));return r=Object.assign({useFetchStreams:e},r),l._setSettings(r),l},"PUBLIC")),(0,Ji.registerVersion)(lF,"3.2.1",n),(0,Ji.registerVersion)(lF,"3.2.1","esm2017")}();class UC{constructor(e){this._delegate=e}static fromBase64String(e){return YV(),new UC(uc.fromBase64String(e))}static fromUint8Array(e){return KV(),new UC(uc.fromUint8Array(e))}toBase64(){return YV(),this._delegate.toBase64()}toUint8Array(){return KV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function oO(n){return function(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(n)}class Qj{enableIndexedDbPersistence(e,t){return function(n,e){SV(n=gn(n,yr));const t=mi(n),r=n._freezeSettings(),o=new B1;return AV(t,o,new lV(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(n){SV(n=gn(n,yr));const e=mi(n),t=n._freezeSettings(),r=new B1;return AV(e,r,new UB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(n){if(n._initialized&&!n._terminated)throw new Me(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Oi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(r){if(!Qu.bt())return Promise.resolve();const o=r+"main";yield Qu.delete(o)}),function(r){return t.apply(this,arguments)})(PM(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class QV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof pv||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&cC("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function(n,e,t,r={}){var o;const l=(n=gn(n,OC))._getSettings();if("firestore.googleapis.com"!==l.host&&l.host!==e&&cC("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},l),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let h,p;if("string"==typeof r.mockUserToken)h=r.mockUserToken,p=rs.MOCK_USER;else{h=(0,F.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Me(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new rs(v)}n._credentials=new bU(new cF(h,p))}}(this._delegate,e,t,r)}enableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield fV(n),t=yield pV(n);return e.setNetworkEnabled(!0),function(r){const o=He(r);return o.Wr.delete(0),PC(o)}(t)}))}(mi(n=gn(n,yr)))}(this._delegate)}disableNetwork(){return function(n){return function(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield fV(n),t=yield pV(n);return e.setNetworkEnabled(!1),(r=(0,ge.Z)(function*(o){const l=He(o);l.Wr.add(0),yield ov(l),l.Hr.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(mi(n=gn(n,yr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,yV("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(n){return function(e){const t=new Oi;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(n,e){return I1.apply(this,arguments)}(yield W1(e),t)})),t.promise}(mi(n=gn(n,yr)))}(this._delegate)}onSnapshotsInSync(e){return function(n,e){return function(n,e){const t=new fS(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield fv(n),o=t,He(r).so.add(o),void o.next();var r,o})),()=>{t.ec(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return r=yield fv(n),o=t,void He(r).so.delete(o);var r,o}))}}(mi(n=gn(n,yr)),Y1(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new mv(this,bV(this._delegate,e))}catch(t){throw Xs(t,"collection()","Firestore.collection()")}}doc(e){try{return new ou(this,mS(this._delegate,e))}catch(t){throw Xs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new eo(this,function(n,e){if(n=gn(n,OC),K1("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new xs(n,null,(t=e,new Vd(Dn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Xs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(n,e){return function(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const r=yield(o=n,pS(o).then(l=>l.datastore));var o;new $B(n.asyncQueue,r,e,t).run()})),t.promise}(mi(n=gn(n,yr)),t=>e(new jj(n,t)))}(this._delegate,t=>e(new JV(this,t)))}batch(){return mi(this._delegate),new XV(new ZV(this._delegate,e=>gv(this._delegate,e)))}loadBundle(e){return function(n,e){const t=mi(n=gn(n,yr)),r=new nj;return function(n,e,t,r){const o=function(l,h){let p;return p="string"==typeof l?(new TextEncoder).encode(l):l,v=function(v,b){if(v instanceof Uint8Array)return cV(v,b);if(v instanceof ArrayBuffer)return cV(new Uint8Array(v),b);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new BB(v,h);var v}(t,RC(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function(n,e,t){const r=He(n);var o;(o=(0,ge.Z)(function*(l,h,p){try{const v=yield h.getMetadata();if(yield function(L,q){const ae=He(L),Ae=Li(q.createTime);return ae.persistence.runTransaction("hasNewerBundle","readonly",Ve=>ae.Je.getBundleMetadata(Ve,q.id)).then(Ve=>!!Ve&&Ve.createTime.compareTo(Ae)>=0)}(l.localStore,v))return yield h.close(),void p._completeWith((L=v,{taskState:"Success",documentsLoaded:L.totalDocuments,bytesLoaded:L.totalBytes,totalDocuments:L.totalDocuments,totalBytes:L.totalBytes}));p._updateProgress(XL(v));const b=new _B(v,l.localStore,h.N);let A=yield h.zo();for(;A;){const L=yield b.mo(A);L&&p._updateProgress(L),A=yield h.zo()}const N=yield b.complete();yield jd(l,N.En,void 0),yield function(L,q){const ae=He(L);return ae.persistence.runTransaction("Save bundle","readwrite",Ae=>ae.Je.saveBundleMetadata(Ae,q))}(l.localStore,v),p._completeWith(N.progress)}catch(v){cC("SyncEngine",`Loading bundle failed with ${v}`),p._failWith(v)}var L}),function(l,h,p){return o.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield W1(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function(n,e){return function(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,r){const o=He(t);return o.persistence.runTransaction("Get named query","readonly",l=>o.Je.getNamedQuery(l,r))}(yield G1(n),e)}))}(mi(n=gn(n,yr)),e).then(t=>t?new xs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new eo(this,t):null)}}class bS extends rO{constructor(e){super(),this.firestore=e}convertBytes(e){return new UC(new uc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ou.forKey(t,this.firestore,null)}}class JV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new bS(e)}get(e){const t=tm(e);return this._delegate.get(t).then(r=>new BC(this._firestore,new Hd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=tm(e);return r?(sO("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=tm(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=tm(e);return this._delegate.delete(t),this}}class XV{constructor(e){this._delegate=e}set(e,t,r){const o=tm(e);return r?(sO("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const l=tm(e);return 2===arguments.length?this._delegate.update(l,t):this._delegate.update(l,t,r,...o),this}delete(e){const t=tm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class em{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new LC(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new jC(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=em.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let l=o.get(t);return l||(l=new em(e,new bS(e),t),o.set(t,l)),l}}em.INSTANCES=new WeakMap;class ou{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ou(t,new ar(t._delegate,r,new rt(e)))}static forKey(e,t,r){return new ou(t,new ar(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new mv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new mv(this.firestore,bV(this._delegate,e))}catch(t){throw Xs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,F.m9)(e))instanceof ar&&IV(this._delegate,e)}set(e,t){t=sO("DocumentReference.set",t);try{return t?GV(this._delegate,e,t):GV(this._delegate,e)}catch(r){throw Xs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?WV(this._delegate,e):WV(this._delegate,e,t,...r)}catch(o){throw Xs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function(n){return gv(gn(n.firestore,yr),[new wC(n._key,Xr.none())])}(this._delegate)}onSnapshot(...e){const t=eU(e),r=tU(e,o=>new BC(this.firestore,new Hd(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return zV(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,ar);const e=gn(n.firestore,yr),t=mi(e),r=new Xg(e);return function(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,l,h){try{const p=yield function(v,b){const A=He(v);return A.persistence.runTransaction("read document","readonly",N=>A.Qn.An(N,b))}(o,l);p.isFoundDocument()?h.resolve(p):p.isNoDocument()?h.resolve(null):h.reject(new Me(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const v=lv(p,`Failed to get document '${l} from cache`);h.reject(v)}}),function(o,l,h){return r.apply(this,arguments)})(yield G1(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Hd(e,r,n._key,o,new Jg(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,ar);const e=gn(n.firestore,yr);return gV(mi(e),n._key,{source:"server"}).then(t=>iO(e,n,t))}(this._delegate):function(n){n=gn(n,ar);const e=gn(n.firestore,yr);return gV(mi(e),n._key).then(t=>iO(e,n,t))}(this._delegate),t.then(r=>new BC(this.firestore,new Hd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ou(this.firestore,this._delegate.withConverter(e?em.getInstance(this.firestore,e):null))}}function Xs(n,e,t){return n.message=n.message.replace(e,t),n}function eU(n){for(const e of n)if("object"==typeof e&&!oO(e))return e;return{}}function tU(n,e){var t,r;let o;return o=oO(n[0])?n[0]:oO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:l=>{o.next&&o.next(e(l))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class BC{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ou(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return FV(this._delegate,e._delegate)}}class jC extends BC{data(e){const t=this._delegate.data(e);return function(n,e){n||st()}(void 0!==t),t}}class eo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new bS(e)}where(e,t,r){try{return new eo(this.firestore,Jf(this._delegate,function(n,e,t){const r=e,o=wS("where",n);return new wj(o,r,t)}(e,t,r)))}catch(o){throw Xs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new eo(this.firestore,Jf(this._delegate,function(n,e="asc"){const t=e,r=wS("orderBy",n);return new bj(r,t)}(e,t)))}catch(r){throw Xs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new eo(this.firestore,Jf(this._delegate,function(n){return wV("limit",n),new VV("limit",n,"F")}(e)))}catch(t){throw Xs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new eo(this.firestore,Jf(this._delegate,function(n){return wV("limitToLast",n),new VV("limitToLast",n,"L")}(e)))}catch(t){throw Xs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new eo(this.firestore,Jf(this._delegate,function(...n){return new UV("startAt",n,!0)}(...e)))}catch(t){throw Xs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new eo(this.firestore,Jf(this._delegate,function(...n){return new UV("startAfter",n,!1)}(...e)))}catch(t){throw Xs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new eo(this.firestore,Jf(this._delegate,function(...n){return new BV("endBefore",n,!0)}(...e)))}catch(t){throw Xs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new eo(this.firestore,Jf(this._delegate,function(...n){return new BV("endAt",n,!1)}(...e)))}catch(t){throw Xs(t,"endAt()","Query.endAt()")}}isEqual(e){return TV(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(n){n=gn(n,xs);const e=gn(n.firestore,yr),t=mi(e),r=new Xg(e);return function(n,e){const t=new Oi;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(r=(0,ge.Z)(function*(o,l,h){try{const p=yield aS(o,l,!0),v=new nV(l,p.Gn),b=v.bo(p.documents),A=v.applyChanges(b,!1);h.resolve(A.snapshot)}catch(p){const v=lv(p,`Failed to execute query '${l} against cache`);h.reject(v)}}),function(o,l,h){return r.apply(this,arguments)})(yield G1(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Qf(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function(n){n=gn(n,xs);const e=gn(n.firestore,yr),t=mi(e),r=new Xg(e);return mV(t,n._query,{source:"server"}).then(o=>new Qf(e,r,n,o))}(this._delegate):function(n){n=gn(n,xs);const e=gn(n.firestore,yr),t=mi(e),r=new Xg(e);return LV(n._query),mV(t,n._query).then(o=>new Qf(e,r,n,o))}(this._delegate),t.then(r=>new aO(this.firestore,new Qf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=eU(e),r=tU(e,o=>new aO(this.firestore,new Qf(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return zV(this._delegate,t,r)}withConverter(e){return new eo(this.firestore,this._delegate.withConverter(e?em.getInstance(this.firestore,e):null))}}class Xj{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new jC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class aO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new eo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new jC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Xj(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new jC(this._firestore,r))})}isEqual(e){return FV(this._delegate,e._delegate)}}class mv extends eo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ou(this.firestore,e):null}doc(e){try{return new ou(this.firestore,void 0===e?mS(this._delegate):mS(this._delegate,e))}catch(t){throw Xs(t,"doc()","CollectionReference.doc()")}}add(e){return function(n,e){const t=gn(n.firestore,yr),r=mS(n),o=CS(n.converter,e);return gv(t,[vS(Yg(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,Xr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ou(this.firestore,t))}isEqual(e){return IV(this._delegate,e._delegate)}withConverter(e){return new mv(this.firestore,this._delegate.withConverter(e?em.getInstance(this.firestore,e):null))}}function tm(n){return gn(n,ar)}class uO{constructor(...e){this._delegate=new $d(...e)}static documentId(){return new uO(is.keyField().canonicalString())}isEqual(e){return(e=(0,F.m9)(e))instanceof $d&&this._delegate._internalPath.isEqual(e._internalPath)}}class nm{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Q1("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new nm(e)}static delete(){const e=new kC("deleteField");return e._methodName="FieldValue.delete",new nm(e)}static arrayUnion(...e){const t=function(...n){return new gj("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new nm(t)}static arrayRemove(...e){const t=function(...n){return new mj("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new nm(t)}static increment(e){const t=function(n){return new _j("increment",n)}(e);return t._methodName="FieldValue.increment",new nm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const e3={Firestore:QV,GeoPoint:_S,Timestamp:ki,Blob:UC,Transaction:JV,WriteBatch:XV,DocumentReference:ou,DocumentSnapshot:BC,Query:eo,QueryDocumentSnapshot:jC,QuerySnapshot:aO,CollectionReference:mv,FieldPath:uO,FieldValue:nm,setLogLevel:function(n){!function(n){jf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function nU(n,e){return function(n,e=NI.z){return new Ut.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function lO(n,e){return nU(n,e).pipe((0,mt.U)(t=>({payload:t,type:"query"})))}function IS(n,e){return lO(n,e).pipe(kc(void 0),iA(),(0,mt.U)(([t,r])=>{const o=r.payload.docChanges(),l=o.map(h=>({type:h.type,payload:h}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((h,p)=>{const v=o.find(A=>A.doc.ref.isEqual(h.ref)),b=null==t?void 0:t.payload.docs.find(A=>A.ref.isEqual(h.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(h.metadata)||!v&&b&&JSON.stringify(b.metadata)===JSON.stringify(h.metadata)||l.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:h}})}),l}))}function rU(n,e,t){return IS(n,t).pipe(Na((r,o)=>function(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return cO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return cO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return cO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(l=>l.payload),e),[]),OE(),(0,mt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function cO(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function iU(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function(n){(function(n,e){n.INTERNAL.registerComponent(new Wa.wA("firestore-compat",t=>((e,t)=>new QV(e,t,new Qj))(t.getProvider("app-compat").getImmediate(),t.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},e3)))})(n),n.registerVersion("@firebase/firestore-compat","0.1.6")}(dN.Z);class sU{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=IS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,mt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe(kc(void 0),iA(),Es(([r,o])=>o.length>0||!r),(0,mt.U)(([r,o])=>o),Gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iU(e);return rU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return lO(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Gn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Gn.iC)}add(e){return this.ref.add(e)}doc(e){return new oU(this.ref.doc(e),this.afs)}}class oU{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:l}=lU(r,t);return new sU(o,l,this.afs)}snapshotChanges(){return function(n,e){return nU(n,e).pipe(kc(void 0),iA(),(0,mt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,mt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Rn.D)(this.ref.get(e)).pipe(Gn.iC)}}class a3{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?IS(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Es(t=>t.length>0),Gn.iC):IS(this.query,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Na((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=iU(e);return rU(this.query,t,this.afs.schedulers.outsideAngular).pipe(Gn.iC)}valueChanges(e={}){return lO(this.query,this.afs.schedulers.outsideAngular).pipe((0,mt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),Gn.iC)}get(e){return(0,Rn.D)(this.query.get(e)).pipe(Gn.iC)}}const aU=new d.OlP("angularfire2.enableFirestorePersistence"),uU=new d.OlP("angularfire2.firestore.persistenceSettings"),u3=new d.OlP("angularfire2.firestore.settings"),l3=new d.OlP("angularfire2.firestore.use-emulator");function lU(n,e=(t=>t)){return{query:e(n),ref:n}}let c3=(()=>{class n{constructor(t,r,o,l,h,p,v,b,A,N,L,q,ae,Ae,Ve,At,$t){this.schedulers=v;const wn=(0,Xi.on)(t,p,r),Qt=A;N&&qp(wn,p,L,ae,Ae,Ve,q,At),[this.firestore,this.persistenceEnabled$]=(0,Xi.cc)(`${wn.name}.firestore`,"AngularFirestore",wn.name,()=>{const xr=p.runOutsideAngular(()=>wn.firestore());if(l&&xr.settings(l),Qt&&xr.useEmulator(...Qt),o&&!va(h)){const au=()=>{try{return(0,Rn.D)(xr.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(f3){return"undefined"!=typeof console&&console.warn(f3),(0,Qe.of)(!1)}};return[xr,p.runOutsideAngular(au)]}return[xr,(0,Qe.of)(!1)]},[l,Qt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:l,query:h}=lU(o,r),p=this.schedulers.ngZone.run(()=>l);return new sU(p,h,this)}collectionGroup(t,r){const o=r||(h=>h),l=this.firestore.collectionGroup(t);return new a3(o(l),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new oU(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(d.LFG(Xi.Dh),d.LFG(Xi.xv,8),d.LFG(aU,8),d.LFG(u3,8),d.LFG(d.Lbi),d.LFG(d.R0b),d.LFG(Gn.HU),d.LFG(uU,8),d.LFG(l3,8),d.LFG(Vl,8),d.LFG(v_,8),d.LFG(E_,8),d.LFG(ME,8),d.LFG(w_,8),d.LFG(Hp,8),d.LFG(C_,8),d.LFG(m_,8))},n.\u0275prov=d.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),d3=(()=>{class n{constructor(){aN.Z.registerVersion("angularfire",Gn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:aU,useValue:!0},{provide:uU,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n}),n.\u0275inj=d.cJS({providers:[c3]}),n})(),h3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=d.oAB({type:n,bootstrap:[Fk]}),n.\u0275inj=d.cJS({providers:[Sw,bg,ef],imports:[[ih,nA,Mx,eI,DI,Xi.hO.initializeApp(rA_firebaseConfig),d3]]}),n})();Ho().bootstrapModule(h3).catch(n=>console.error(n))},3394:(Je,Ce,V)=>{"use strict";V.d(Ce,{Z:()=>Ne});var d=V(3854),H=V(3910),O=V(8026),ce=V(5422);class ue{constructor(pe,oe){this._delegate=pe,this.firebase=oe,(0,O._addComponent)(pe,new H.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(pe,oe=O._DEFAULT_ENTRY_NAME){var fe;this._delegate.checkDestroyed();const ye=this._delegate.container.getProvider(pe);return!ye.isInitialized()&&"EXPLICIT"===(null===(fe=ye.getComponent())||void 0===fe?void 0:fe.instantiationMode)&&ye.initialize(),ye.getImmediate({identifier:oe})}_removeServiceInstance(pe,oe=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(oe)}_addComponent(pe){(0,O._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,O._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const _e=new d.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),U=function ne(){const Ie=function(Ie){const pe={},oe={__esModule:!0,initializeApp:function(gt,Tn={}){const vt=O.initializeApp(gt,Tn);if((0,d.r3)(pe,vt.name))return pe[vt.name];const ht=new Ie(vt,oe);return pe[vt.name]=ht,ht},app:ye,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function(gt){const Tn=gt.name,vt=Tn.replace("-compat","");if(O._registerComponent(gt)&&"PUBLIC"===gt.type){const ht=(Ht=ye())=>{if("function"!=typeof Ht[vt])throw _e.create("invalid-app-argument",{appName:Tn});return Ht[vt]()};void 0!==gt.serviceProps&&(0,d.ZB)(ht,gt.serviceProps),oe[vt]=ht,Ie.prototype[vt]=function(...Ht){return this._getService.bind(this,Tn).apply(this,gt.multipleInstances?Ht:[])}}return"PUBLIC"===gt.type?oe[vt]:null},removeApp:function(gt){delete pe[gt]},useAsService:function(gt,Tn){return"serverAuth"===Tn?null:Tn},modularAPIs:O}};function ye(gt){if(!(0,d.r3)(pe,gt=gt||O._DEFAULT_ENTRY_NAME))throw _e.create("no-app",{appName:gt});return pe[gt]}return oe.default=oe,Object.defineProperty(oe,"apps",{get:function(){return Object.keys(pe).map(gt=>pe[gt])}}),ye.App=Ie,oe}(ue);return Ie.INTERNAL=Object.assign(Object.assign({},Ie.INTERNAL),{createFirebaseNamespace:ne,extendNamespace:function(oe){(0,d.ZB)(Ie,oe)},createSubscribe:d.ne,ErrorFactory:d.LL,deepExtend:d.ZB}),Ie}(),$=new ce.Yd("@firebase/app-compat");if((0,d.jU)()&&void 0!==self.firebase){$.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ie=self.firebase.SDK_VERSION;Ie&&Ie.indexOf("LITE")>=0&&$.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=U;(0,O.registerVersion)("@firebase/app-compat","0.1.7",undefined)},8026:(Je,Ce,V)=>{"use strict";V.r(Ce),V.d(Ce,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>_i,_DEFAULT_ENTRY_NAME:()=>Ui,_addComponent:()=>us,_addOrOverwriteComponent:()=>ls,_apps:()=>tn,_clearComponents:()=>mn,_components:()=>Vt,_getProvider:()=>on,_registerComponent:()=>ti,_removeServiceInstance:()=>cs,deleteApp:()=>zn,getApp:()=>Oe,getApps:()=>_n,initializeApp:()=>Bi,onLog:()=>qt,registerVersion:()=>$e,setLogLevel:()=>fr});var d=V(8239),H=V(3910),O=V(5422),ce=V(3854);class ue{constructor(nt){this.container=nt}getPlatformInfoString(){return this.container.getProviders().map(Dt=>{if(function(tt){const nt=tt.getComponent();return"VERSION"===(null==nt?void 0:nt.type)}(Dt)){const St=Dt.getImmediate();return`${St.library}/${St.version}`}return null}).filter(Dt=>Dt).join(" ")}}const _e="@firebase/app",ne=new O.Yd("@firebase/app"),Ui="[DEFAULT]",to={[_e]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},tn=new Map,Vt=new Map;function us(tt,nt){try{tt.container.addComponent(nt)}catch(Dt){ne.debug(`Component ${nt.name} failed to register with FirebaseApp ${tt.name}`,Dt)}}function ls(tt,nt){tt.container.addOrOverwriteComponent(nt)}function ti(tt){const nt=tt.name;if(Vt.has(nt))return ne.debug(`There were multiple attempts to register component ${nt}.`),!1;Vt.set(nt,tt);for(const Dt of tn.values())us(Dt,tt);return!0}function on(tt,nt){return tt.container.getProvider(nt)}function cs(tt,nt,Dt=Ui){on(tt,nt).clearInstance(Dt)}function mn(){Vt.clear()}const Xt=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Ns{constructor(nt,Dt,St){this._isDeleted=!1,this._options=Object.assign({},nt),this._config=Object.assign({},Dt),this._name=Dt.name,this._automaticDataCollectionEnabled=Dt.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new H.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(nt){this.checkDestroyed(),this._automaticDataCollectionEnabled=nt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(nt){this._isDeleted=nt}checkDestroyed(){if(this.isDeleted)throw Xt.create("app-deleted",{appName:this._name})}}const _i="9.3.0";function Bi(tt,nt={}){"object"!=typeof nt&&(nt={name:nt});const Dt=Object.assign({name:Ui,automaticDataCollectionEnabled:!1},nt),St=Dt.name;if("string"!=typeof St||!St)throw Xt.create("bad-app-name",{appName:String(St)});const qn=tn.get(St);if(qn){if((0,ce.vZ)(tt,qn.options)&&(0,ce.vZ)(Dt,qn.config))return qn;throw Xt.create("duplicate-app",{appName:St})}const en=new H.H0(St);for(const et of Vt.values())en.addComponent(et);const Fe=new Ns(tt,Dt,en);return tn.set(St,Fe),Fe}function Oe(tt=Ui){const nt=tn.get(tt);if(!nt)throw Xt.create("no-app",{appName:tt});return nt}function _n(){return Array.from(tn.values())}function zn(tt){return yi.apply(this,arguments)}function yi(){return(yi=(0,d.Z)(function*(tt){const nt=tt.name;tn.has(nt)&&(tn.delete(nt),yield Promise.all(tt.container.getProviders().map(Dt=>Dt.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function $e(tt,nt,Dt){var St;let qn=null!==(St=to[tt])&&void 0!==St?St:tt;Dt&&(qn+=`-${Dt}`);const en=qn.match(/\s|\//),Fe=nt.match(/\s|\//);if(en||Fe){const et=[`Unable to register library "${qn}" with version "${nt}":`];return en&&et.push(`library name "${qn}" contains illegal characters (whitespace or "/")`),en&&Fe&&et.push("and"),Fe&&et.push(`version name "${nt}" contains illegal characters (whitespace or "/")`),void ne.warn(et.join(" "))}ti(new H.wA(`${qn}-version`,()=>({library:qn,version:nt}),"VERSION"))}function qt(tt,nt){if(null!==tt&&"function"!=typeof tt)throw Xt.create("invalid-log-argument");(0,O.Am)(tt,nt)}function fr(tt){(0,O.Ub)(tt)}ti(new H.wA("platform-logger",nt=>new ue(nt),"PRIVATE")),$e(_e,"0.7.6",""),$e(_e,"0.7.6","esm2017"),$e("fire-js","")},3910:(Je,Ce,V)=>{"use strict";V.d(Ce,{wA:()=>O,H0:()=>te,zt:()=>ue});var d=V(8239),H=V(3854);class O{constructor(U,$,B){this.name=U,this.instanceFactory=$,this.type=B,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(U){return this.instantiationMode=U,this}setMultipleInstances(U){return this.multipleInstances=U,this}setServiceProps(U){return this.serviceProps=U,this}setInstanceCreatedCallback(U){return this.onInstanceCreated=U,this}}const ce="[DEFAULT]";class ue{constructor(U,$){this.name=U,this.container=$,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(U){const $=this.normalizeInstanceIdentifier(U);if(!this.instancesDeferred.has($)){const B=new H.BH;if(this.instancesDeferred.set($,B),this.isInitialized($)||this.shouldAutoInitialize())try{const se=this.getOrInitializeService({instanceIdentifier:$});se&&B.resolve(se)}catch(se){}}return this.instancesDeferred.get($).promise}getImmediate(U){var $;const B=this.normalizeInstanceIdentifier(null==U?void 0:U.identifier),se=null!==($=null==U?void 0:U.optional)&&void 0!==$&&$;if(!this.isInitialized(B)&&!this.shouldAutoInitialize()){if(se)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:B})}catch(De){if(se)return null;throw De}}getComponent(){return this.component}setComponent(U){if(U.name!==this.name)throw Error(`Mismatching Component ${U.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=U,this.shouldAutoInitialize()){if("EAGER"===U.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ce})}catch($){}for(const[$,B]of this.instancesDeferred.entries()){const se=this.normalizeInstanceIdentifier($);try{const De=this.getOrInitializeService({instanceIdentifier:se});B.resolve(De)}catch(De){}}}}clearInstance(U=ce){this.instancesDeferred.delete(U),this.instancesOptions.delete(U),this.instances.delete(U)}delete(){var U=this;return(0,d.Z)(function*(){const $=Array.from(U.instances.values());yield Promise.all([...$.filter(B=>"INTERNAL"in B).map(B=>B.INTERNAL.delete()),...$.filter(B=>"_delete"in B).map(B=>B._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(U=ce){return this.instances.has(U)}getOptions(U=ce){return this.instancesOptions.get(U)||{}}initialize(U={}){const{options:$={}}=U,B=this.normalizeInstanceIdentifier(U.instanceIdentifier);if(this.isInitialized(B))throw Error(`${this.name}(${B}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const se=this.getOrInitializeService({instanceIdentifier:B,options:$});for(const[De,Ne]of this.instancesDeferred.entries())B===this.normalizeInstanceIdentifier(De)&&Ne.resolve(se);return se}onInit(U,$){var B;const se=this.normalizeInstanceIdentifier($),De=null!==(B=this.onInitCallbacks.get(se))&&void 0!==B?B:new Set;De.add(U),this.onInitCallbacks.set(se,De);const Ne=this.instances.get(se);return Ne&&U(Ne,se),()=>{De.delete(U)}}invokeOnInitCallbacks(U,$){const B=this.onInitCallbacks.get($);if(B)for(const se of B)try{se(U,$)}catch(De){}}getOrInitializeService({instanceIdentifier:U,options:$={}}){let B=this.instances.get(U);if(!B&&this.component&&(B=this.component.instanceFactory(this.container,{instanceIdentifier:(ne=U,ne===ce?void 0:ne),options:$}),this.instances.set(U,B),this.instancesOptions.set(U,$),this.invokeOnInitCallbacks(B,U),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,U,B)}catch(se){}var ne;return B||null}normalizeInstanceIdentifier(U=ce){return this.component?this.component.multipleInstances?U:ce:U}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class te{constructor(U){this.name=U,this.providers=new Map}addComponent(U){const $=this.getProvider(U.name);if($.isComponentSet())throw new Error(`Component ${U.name} has already been registered with ${this.name}`);$.setComponent(U)}addOrOverwriteComponent(U){this.getProvider(U.name).isComponentSet()&&this.providers.delete(U.name),this.addComponent(U)}getProvider(U){if(this.providers.has(U))return this.providers.get(U);const $=new ue(U,this);return this.providers.set(U,$),$}getProviders(){return Array.from(this.providers.values())}}},5422:(Je,Ce,V)=>{"use strict";V.d(Ce,{in:()=>H,Yd:()=>_e,Ub:()=>te,Am:()=>ne});const d=[];var H=(()=>{return(U=H||(H={}))[U.DEBUG=0]="DEBUG",U[U.VERBOSE=1]="VERBOSE",U[U.INFO=2]="INFO",U[U.WARN=3]="WARN",U[U.ERROR=4]="ERROR",U[U.SILENT=5]="SILENT",H;var U})();const O={debug:H.DEBUG,verbose:H.VERBOSE,info:H.INFO,warn:H.WARN,error:H.ERROR,silent:H.SILENT},ce=H.INFO,ue={[H.DEBUG]:"log",[H.VERBOSE]:"log",[H.INFO]:"info",[H.WARN]:"warn",[H.ERROR]:"error"},Q=(U,$,...B)=>{if($<U.logLevel)return;const se=(new Date).toISOString(),De=ue[$];if(!De)throw new Error(`Attempted to log a message with an invalid logType (value: ${$})`);console[De](`[${se}]  ${U.name}:`,...B)};class _e{constructor($){this.name=$,this._logLevel=ce,this._logHandler=Q,this._userLogHandler=null,d.push(this)}get logLevel(){return this._logLevel}set logLevel($){if(!($ in H))throw new TypeError(`Invalid value "${$}" assigned to \`logLevel\``);this._logLevel=$}setLogLevel($){this._logLevel="string"==typeof $?O[$]:$}get logHandler(){return this._logHandler}set logHandler($){if("function"!=typeof $)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=$}get userLogHandler(){return this._userLogHandler}set userLogHandler($){this._userLogHandler=$}debug(...$){this._userLogHandler&&this._userLogHandler(this,H.DEBUG,...$),this._logHandler(this,H.DEBUG,...$)}log(...$){this._userLogHandler&&this._userLogHandler(this,H.VERBOSE,...$),this._logHandler(this,H.VERBOSE,...$)}info(...$){this._userLogHandler&&this._userLogHandler(this,H.INFO,...$),this._logHandler(this,H.INFO,...$)}warn(...$){this._userLogHandler&&this._userLogHandler(this,H.WARN,...$),this._logHandler(this,H.WARN,...$)}error(...$){this._userLogHandler&&this._userLogHandler(this,H.ERROR,...$),this._logHandler(this,H.ERROR,...$)}}function te(U){d.forEach($=>{$.setLogLevel(U)})}function ne(U,$){for(const B of d){let se=null;$&&$.level&&(se=O[$.level]),B.userLogHandler=null===U?null:(De,Ne,...Ie)=>{const pe=Ie.map(oe=>{if(null==oe)return null;if("string"==typeof oe)return oe;if("number"==typeof oe||"boolean"==typeof oe)return oe.toString();if(oe instanceof Error)return oe.message;try{return JSON.stringify(oe)}catch(fe){return null}}).filter(oe=>oe).join(" ");Ne>=(null!=se?se:De.logLevel)&&U({level:H[Ne].toLowerCase(),message:pe,args:Ie,type:De.name})}}}},8239:(Je,Ce,V)=>{"use strict";function d(O,ce,ue,Q,_e,te,ne){try{var U=O[te](ne),$=U.value}catch(B){return void ue(B)}U.done?ce($):Promise.resolve($).then(Q,_e)}function H(O){return function(){var ce=this,ue=arguments;return new Promise(function(Q,_e){var te=O.apply(ce,ue);function ne($){d(te,Q,_e,ne,U,"next",$)}function U($){d(te,Q,_e,ne,U,"throw",$)}ne(void 0)})}}V.d(Ce,{Z:()=>H})}},Je=>{Je(Je.s=2072)}]);